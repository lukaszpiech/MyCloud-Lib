var rx=rx||{};!function(){"use strict";function a(a){return _.isNull(a)||_.isUndefined(a)}function b(a){return _.isNull(a)?"null":_.isUndefined(a)?"undefined":typeof a}function c(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&c.length>1;)d+=c.shift()+e.shift();return d+c.join("%s")}"boolean"!=typeof rx.ENABLE_ASSERTS&&(rx.ENABLE_ASSERTS=!0);var d=[],e=function(a){throw a},f=function(a,b,f,g){var h="Assertion failed",i=null;f?(h+=": "+f,i=g):a&&(h+=": "+a,i=b),i=i||[],i.unshift(h);var j=new Error(c.apply(null,i));_.forEach(d,function(a){try{_.isFunction(a)&&a(j)}catch(b){}}),e(j)};rx.assert={addErrorHandler:function(a){rx.ENABLE_ASSERTS&&_.isFunction(a)&&d.push(a)},assert:function(a,b,c){rx.ENABLE_ASSERTS&&!a&&f("",null,b,Array.prototype.slice.call(arguments,2))},fail:function(a,b){rx.ENABLE_ASSERTS&&f("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))},assertNumber:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isNumber(a)&&f("Expected number but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalNumber:function(c,d,e){!rx.ENABLE_ASSERTS||_.isNumber(c)||a(c)||f("Expected an optional number value but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertDefinedAndNotNull:function(a,c,d){rx.ENABLE_ASSERTS&&(_.isUndefined(a)||_.isNull(a))&&f("Expected a defined value but got %s.",[b(a)],c,Array.prototype.slice.call(arguments,2))},assertHasLength:function(a,b,c){rx.ENABLE_ASSERTS&&(rx.assert.assertNumber(a.length,"Expected a length property"),a.length<=0&&f("Expected length greater than zero but got %s.",[a.length],b,Array.prototype.slice.call(arguments,2)))},assertString:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isString(a)&&f("Expected string but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalString:function(c,d,e){!rx.ENABLE_ASSERTS||_.isString(c)||a(c)||f("Expected an optional string value but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertStringWithLength:function(a,b,c){rx.ENABLE_ASSERTS&&(rx.assert.assertString(a,b,c),rx.assert.assertHasLength(a,b,c))},assertOptionalStringWithLength:function(c,d,e){rx.ENABLE_ASSERTS&&!(_.isString(c)&&c.length||a(c))&&f("Expected an optional string with length but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertArrayWithLength:function(a,b,c){rx.assert.assertArray(a,b,c),rx.assert.assertHasLength(a,b,c)},assertOptionalArrayWithLength:function(c,d,e){rx.ENABLE_ASSERTS&&!(_.isArray(c)&&c.length||a(c))&&f("Expected an optional array with length but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertFunction:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isFunction(a)&&f("Expected function but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalFunction:function(c,d,e){!rx.ENABLE_ASSERTS||_.isFunction(c)||a(c)||f("Expected an optional function but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertObject:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isObject(a)&&f("Expected object but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalObject:function(c,d,e){!rx.ENABLE_ASSERTS||_.isObject(c)||a(c)||f("Expected an optional object value but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertArray:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isArray(a)&&f("Expected array but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalArray:function(c,d,e){!rx.ENABLE_ASSERTS||_.isArray(c)||a(c)||f("Expected an optional array value but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertBoolean:function(a,c,d){rx.ENABLE_ASSERTS&&!_.isBoolean(a)&&f("Expected boolean but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))},assertOptionalBoolean:function(c,d,e){!rx.ENABLE_ASSERTS||_.isBoolean(c)||a(c)||f("Expected an optional boolean value but got %s: %s.",[b(c),c],d,Array.prototype.slice.call(arguments,2))},assertInstanceof:function(a,b,c,d){!rx.ENABLE_ASSERTS||a instanceof b||f("instanceof check failed.",null,c,Array.prototype.slice.call(arguments,3))},assertNullOrUndefined:function(a,c,d){!rx.ENABLE_ASSERTS||_.isNull(a)||_.isUndefined(a)||f("Expected a value that is null or undefined but got %s: %s.",[b(a),a],c,Array.prototype.slice.call(arguments,2))}}}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.action-type",["com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.action",["com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.cache"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.close-view",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.delete-records",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action","com.bmc.arsys.rx.standardlib.record.instance","com.bmc.arsys.rx.standardlib.components.definition-picker"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.launch-url",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.open-view",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action","com.bmc.arsys.rx.standardlib.view.definition","com.bmc.arsys.rx.standardlib.view.runtime","com.bmc.arsys.rx.standardlib.components.definition-picker","ui.bootstrap","cgBusy"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.save-view",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.set-property",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.submit-view",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.action"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.admin-settings",["com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.application",["dialogs.main","pascalprecht.translate","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.view.runtime","bmc.help","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.search"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition",["com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.designer",["com.bmc.arsys.rx.standardlib.association.definition","dialogs.main","cgBusy","dialogs.default-translations","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.simple-json-editor"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.body-state",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.bundle",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.cache",["com.bmc.arsys.rx.standardlib.named-list.definition","com.bmc.arsys.rx.standardlib.process.definition","com.bmc.arsys.rx.standardlib.record.association","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.user","com.bmc.arsys.rx.standardlib.association.definition","com.bmc.arsys.rx.standardlib.bundle"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker",["dpl-busy-loader","ui.bootstrap","cgBusy","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.named-list.definition","com.bmc.arsys.rx.standardlib.association.definition","com.bmc.arsys.rx.standardlib.process.definition","com.bmc.arsys.rx.standardlib.view.definition"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer",["debounce","dialogs.main","dplTimepicker","ui.bootstrap","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.components.ui-select","com.bmc.arsys.rx.standardlib.components.uib-modal","com.bmc.arsys.rx.standardlib.dpl","com.bmc.arsys.rx.standardlib.expression-engine","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.named-list.definition","com.bmc.arsys.rx.standardlib.process.definition","com.bmc.arsys.rx.standardlib.record.association","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.user","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.user-preferences"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor",["cgBusy","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.components.uib-modal"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.multi-checkbox",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.navigation-bar",["ui.router"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-editor",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel",["ui.bootstrap","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.components.property-editor","com.bmc.arsys.rx.standardlib.record.definition","dplTimepicker"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-view-panel",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-field",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-filter",["com.bmc.arsys.rx.standardlib.utils","dplAccordion","com.bmc.arsys.rx.standardlib.components.tag-pills","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.i18n"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.simple-json-editor",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.tag-pills",["com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.i18n"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.tooltip",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.ui-select",["ui.select"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.uib-modal",[])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.dpl",["template/timepicker.html","ui.bootstrap"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling",["com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.expression-engine",["com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.i18n",["pascalprecht.translate","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.login",["ui.bootstrap","ui.router","com.bmc.arsys.rx.standardlib.security"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.definition",["com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer",["dialogs.main","dialogs.default-translations","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.simple-json-editor","com.bmc.arsys.rx.standardlib.components.definition-picker","com.bmc.arsys.rx.standardlib.named-list.definition"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.navigation.navigation-guard",["ui.router"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.navigation.previous-state",["ui.router"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition",["com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer",["dialogs.main","dialogs.default-translations","ngDragDrop","treeControl","cgBusy","ui.bootstrap","com.bmc.arsys.rx.standardlib.action-type","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.i18n","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.process.definition","com.bmc.arsys.rx.standardlib.record.association","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.record.instance","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.blade","com.bmc.arsys.rx.standardlib.components.simple-json-editor","com.bmc.arsys.rx.standardlib.components.property-panel","com.bmc.arsys.rx.standardlib.components.multi-checkbox","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.components.definition-picker"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance-viewer",["com.bmc.arsys.rx.standardlib.action-type","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.process.instance"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance",["com.bmc.arsys.rx.standardlib.action-type","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.process.designer","com.bmc.arsys.rx.standardlib.components.property-view-panel"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management",["ui.bootstrap","com.bmc.arsys.rx.standardlib.action-type","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.components.property-panel","com.bmc.arsys.rx.standardlib.process.definition","com.bmc.arsys.rx.standardlib.process.instance-viewer","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.view-components.record-grid","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.association",["com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition",["com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer",["dialogs.main","dialogs.default-translations","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.simple-json-editor","com.bmc.arsys.rx.standardlib.components.definition-picker","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.record.definition","ui.grid.saveState"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.instance",["com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources",["restangular","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.definition",["com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer",["cgBusy","dialogs.main","dialogs.default-translations","ngDragDrop","dpl-busy-loader","ui.bootstrap","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.i18n","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.rule.definition","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.components.blade","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.definition-picker","com.bmc.arsys.rx.standardlib.components.multi-checkbox","com.bmc.arsys.rx.standardlib.components.property-panel","com.bmc.arsys.rx.standardlib.components.simple-json-editor","com.bmc.arsys.rx.standardlib.process.definition"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.search",["com.bmc.arsys.rx.standardlib.view-components.shell","com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security",["ui.router","ui.bootstrap","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.user","com.bmc.arsys.rx.standardlib.navigation.navigation-guard"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user-preferences",["com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.admin-settings"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user",["com.bmc.arsys.rx.standardlib.resources"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils",["ui.router","angular-growl"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component",["com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.view.definition","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.cache"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.components.expression-editor","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.view-components.action","com.bmc.arsys.rx.standardlib.utils"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.action","com.bmc.arsys.rx.standardlib.actions.close-view","com.bmc.arsys.rx.standardlib.actions.delete-records","com.bmc.arsys.rx.standardlib.actions.launch-url","com.bmc.arsys.rx.standardlib.actions.open-view","com.bmc.arsys.rx.standardlib.actions.save-view","com.bmc.arsys.rx.standardlib.actions.set-property","com.bmc.arsys.rx.standardlib.actions.submit-view"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.expression-engine"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor",["dialogs.main","dplTimepicker","am.multiselect","ui.bootstrap","com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.expression-engine","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.record.instance","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.view.designer","com.bmc.arsys.rx.standardlib.dpl","com.bmc.arsys.rx.standardlib.components.definition-picker"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid",["ui.grid","ui.grid.infiniteScroll","ui.grid.selection","ui.grid.moveColumns","ui.grid.resizeColumns","ui.grid.autoResize","com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.user-preferences","com.bmc.arsys.rx.standardlib.record.definition","com.bmc.arsys.rx.standardlib.record.instance","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.search-filter","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.view.designer","com.bmc.arsys.rx.standardlib.view-components.action","com.bmc.arsys.rx.standardlib.view-components.action-button","dpl_components"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text",["com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.view-component"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell",["ui.router","ui.bootstrap","ngSanitize","dialogs.main","pascalprecht.translate","com.bmc.arsys.rx.standardlib","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.security","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.expression-engine","com.bmc.arsys.rx.standardlib.action","com.bmc.arsys.rx.standardlib.actions.open-view","com.bmc.arsys.rx.standardlib.actions.launch-url","com.bmc.arsys.rx.standardlib.actions.delete-records","com.bmc.arsys.rx.standardlib.view-components.action-button","com.bmc.arsys.rx.standardlib.record.definition"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.definition",["com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.resources","com.bmc.arsys.rx.standardlib.record.definition"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer.layout",["dndLists"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer",["ui.bootstrap","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.components.designer","com.bmc.arsys.rx.standardlib.components.blade","com.bmc.arsys.rx.standardlib.components.simple-json-editor","com.bmc.arsys.rx.standardlib.view.definition","com.bmc.arsys.rx.standardlib.view.designer.layout","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.view-components.record-editor","com.bmc.arsys.rx.standardlib.view-components.record-grid","com.bmc.arsys.rx.standardlib.view-components.action","com.bmc.arsys.rx.standardlib.view-components.action-button","com.bmc.arsys.rx.standardlib.view-components.rich-text","com.bmc.arsys.rx.standardlib.view-components.container","com.bmc.arsys.rx.standardlib.view-components.shell"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime",["dialogs.main","com.bmc.arsys.rx.standardlib.utils","com.bmc.arsys.rx.standardlib.tooltip","com.bmc.arsys.rx.standardlib.cache","com.bmc.arsys.rx.standardlib.expression-engine","com.bmc.arsys.rx.standardlib.view-component","com.bmc.arsys.rx.standardlib.view.definition","com.bmc.arsys.rx.standardlib.navigation.previous-state","com.bmc.arsys.rx.standardlib.view-components.action","com.bmc.arsys.rx.standardlib.view-components.action-button","com.bmc.arsys.rx.standardlib.view-components.container","com.bmc.arsys.rx.standardlib.view-components.record-editor","com.bmc.arsys.rx.standardlib.view-components.record-grid","com.bmc.arsys.rx.standardlib.view-components.rich-text","dpl-busy-loader"])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.close-view").config(["rxActionProvider","RX",function(a,b){a.registerAction({name:"rxCloseViewAction",label:"Close View",bundleId:b.bundleId,parameters:[{name:"viewApi",label:"View",enableExpressionEvaluation:!0,defaultValue:"${view.api}"}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.delete-records").config(["rxActionProvider","RX_DEFINITION_PICKER","RX",function(a,b,c){a.registerAction({name:"rxDeleteRecordsAction",label:"Delete Records",bundleId:c.bundleId,parameters:[{name:"records",label:"Records",enableExpressionEvaluation:!0,editor:"rx-expression-field",isRequired:!0},{name:"recordDefinitionName",label:"Record Definition",editor:"rx-action-definition-picker",definitionType:b.definitionTypes.record.type}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.launch-url").config(["rxActionProvider","RX",function(a,b){a.registerAction({name:"rxLaunchUrlAction",label:"Launch URL",bundleId:b.bundleId,parameters:[{name:"url",label:"URL",enableExpressionEvaluation:!0,editor:"rx-expression-field",isRequired:!0}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.open-view").config(["rxActionProvider","RX_DEFINITION_PICKER","RX",function(a,b,c){a.registerAction({name:"rxOpenViewAction",label:"Open View",bundleId:c.bundleId,parameters:[{name:"viewDefinitionName",label:"View",editor:"rx-view-definition-selector",isRequired:!0,definitionType:b.definitionTypes.view.type},{name:"viewParams",editor:"rx-view-definition-params",enableExpressionEvaluation:!0},{name:"presentation",editor:"rx-view-presentation-params"}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.save-view").config(["rxActionProvider","RX",function(a,b){a.registerAction({name:"rxSaveViewAction",label:"Save View",bundleId:b.bundleId,parameters:[{name:"viewApi",label:"View",enableExpressionEvaluation:!0,defaultValue:"${view.api}"}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.set-property").config(["rxActionProvider","RX",function(a,b){a.registerAction({name:"rxSetPropertyAction",label:"Set Property",bundleId:b.bundleId,parameters:[{name:"componentApi",label:"Component Api",enableExpressionEvaluation:!0,editor:"rx-action-set-property-api",isRequired:!0},{name:"propertyPath",label:"Property Path",editor:"rx-expression-field",isRequired:!0},{name:"propertyValue",label:"Property Value",enableExpressionEvaluation:!0,editor:"rx-expression-field"}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.submit-view").config(["rxActionProvider","RX",function(a,b){a.registerAction({name:"rxSubmitViewAction",label:"Submit View",bundleId:b.bundleId,parameters:[{name:"viewApi",label:"View",enableExpressionEvaluation:!0,defaultValue:"${view.api}"}]})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").config(function(){function a(a){this.initialize(a)}joint.ui.rx=joint.ui.rx||{},_.assign(joint.shapes.bpmn.icons,{gear:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMdJREFUeNpiYCATMOKSMDY2/g9lGp49e/YCujwLkkIDILUeiBOB2ABJTQBQTgBIzwfiRqAhC1BsBEreB1IKBFz4AKhREcRgQhIMRFcExcggEcZgQnJmALICkMlQ0xORxB2gaiFORQoIELgA1GCIFlDnkf0NlGdkwuKPC8SIMcFMAFKFSKFogBbaMG8UQtUiogMIDkBpUNDvB2pYAOUnQMVQbEbWuB6JDVJYgMXJoLjEGh2g4DdEcjYINAKxI1QukOIkRzYACDAA4gE868wlT0MAAAAASUVORK5CYII=",user:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJdJREFUeNpiYCATMOKSMDY2dgBSAkB84OzZsx/Q5VlwaNoPpByg3AtAbEjQRqAmAyB1Hk04EGjrBmQBJiwWCmARM0AXYCIyLC4QFThA575Hs1kQPYCYcIQmsqIH2JzKiKQhAUjlY1OE5NyJQJsXwDUCNRUAqX4i/VsI1DwB5lR/EhKNPymhyoAr5SwE4oNE6nnAQAkACDAAoFcjem3Aa4gAAAAASUVORK5CYII=",message:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJJJREFUeNpiYCATMIIIY2NjByBVT6SeiWfPnt3AAuXEA/FGIO4noCkRiP2BeAMTVCABqrkQj6ZCqBqQWgYmJAkDqEQgEH9AEv8AtQkk5wATZEIz1QDq3EKoBpimfKgcHLBgcZICkmYQmA/EAuiKWHD4RwApoASwKWDBExgC+IKXidwEALNxArrn8YALDJQAgAADAO4DFms7fJa/AAAAAElFTkSuQmCC",multiInstanceParallel:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACxJREFUeNpilJOT+c+AAIwPHz5mkJeXBbGJEmdioBCMGjBqwKgBg8UAgAADADERCXj6SL6VAAAAAElFTkSuQmCC",multiInstanceSequential:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACtJREFUeNpilJOTYaAEsADxf0oMYGKgEFBsAMgLjEPfC6OxMBoLFBsAEGAAje8DgZ8/t18AAAAASUVORK5CYII=",action:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAxMiAxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTIgMTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojNjY2NjY2O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMC44LDBjMC4zLDAsMC42LDAuMSwwLjgsMC40UzEyLDAuOSwxMiwxLjJ2OS42YzAsMC4zLTAuMSwwLjYtMC40LDAuOFMxMS4xLDEyLDEwLjgsMTJIMS4yYy0wLjMsMC0wLjYtMC4xLTAuOC0wLjRTMCwxMS4xLDAsMTAuOFYxLjJjMC0wLjMsMC4xLTAuNiwwLjQtMC44UzAuOSwwLDEuMiwwSDEwLjh6IE04LDYuNEM4LjEsNi4zLDguMiw2LjIsOC4yLDZTOC4xLDUuNyw4LDUuNmwtMy42LTJDNC4zLDMuNiw0LjEsMy42LDQsMy43UzMuOCwzLjksMy44LDQuMXYzLjdjMCwwLjIsMC4xLDAuMywwLjIsMC40czAuMywwLjEsMC40LDBMOCw2LjR6Ii8+PC9zdmc+",clock:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeVJREFUeNrsVz1uwlAMzkt7gIxVpuQGkXIA4ASkW0e4AZwAOEEYu5EbEE5A2LpEytit2Vjf2qn1qxzJch7kn7ZqLVmJHra/L/Z7z8Yw/rqIuoa+71vwmIGOQMegFjORoAnoCTRK01T2QgCBQwRvIhHosoqIqAAP4LHTfG1dUeBzIBE3JgDga3is2HIOqoIdIGjC7FVZpqCKtMP8NmC/rk1AAy4xyLbmflmgv1VFQlxI+54sZZjGjBH8kktfBjYels8jy4+8HEKz4d4IcwU64RsJ7D4IAVGxgY+EhIrj0ngm8wkJeLGBZNszjr5zjGVg7JDamJpzTmuWdb1oMMaGLM0Qq5QBCp7X3XA1SWzxBJWwKIEReY8HuHVjHRYlMCbvhwEIHHRYlIBFUpb0jc5iWpdOwc3lvmsAeicQSeCLJxV+Dtjk35YBBc5LIFlj6VVYTKkrQYKdzMCullxhL1pwmDKs0iY8kfdggKwHOiyTTTCFONhS+0r/gs0IUYkANg5KYoUttSu4x2aL6Fo3XLLOtaONowW4xUY6iRiGlgBpn4Uo9sc2mUCfIxtISu39jjuez+dX27YFua8fQJ9g7R1+e2lQ8x2ru2rvz79jKL3lWG5WXJfK0WWno8kfE/ca+I/4a/YvnwIMAOTi1xuvlLRUAAAAAElFTkSuQmCC",qualification:"data:image/svg+xml;base64,PHN2ZyBpZD0iZGJjMDY5YzAtYzhiNi00MGE2LWE3ZTQtNGRmNjZmOGVkOTlmIiBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LlwzMCAwZjE1NjRjLTdhOGEtNGViNy05YWQzLTUyNGM4YTJjNzljMXtmaWxsOiM2NjY7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5xdWVzdGlvbl9jaXJjbGU8L3RpdGxlPjxwYXRoIGNsYXNzPSIwMGYxNTY0Yy03YThhLTRlYjctOWFkMy01MjRjOGEyYzc5YzEiIGQ9Ik0xNiwwQTE2LDE2LDAsMSwwLDMyLDE2LDE2LDE2LDAsMCwwLDE2LDBoMFptMS41LDIzLjlIMTQuNFYyMC44aDMuMXYzLjFabTMuMS05Yy0wLjMuMy0uOCwwLjgtMS41LDEuNGwtMC43LjZhMi41NiwyLjU2LDAsMCwwLS44LDEuMSwzLjA5LDMuMDksMCwwLDAtLjIsMS4zSDE0LjZhMjQuMjcsMjQuMjcsMCwwLDEsLjMtMi41LDYsNiwwLDAsMSwxLjQtMS42bDAuOC0uNmEyLDIsMCwwLDAsLjYtMC43LDEuODQsMS44NCwwLDAsMCwuNC0xLjMsMi4zOSwyLjM5LDAsMCwwLS41LTEuNCwyLDIsMCwwLDAtMS43LS43LDIsMiwwLDAsMC0xLjcuOCwzLjEsMy4xLDAsMCwwLS41LDEuN0gxMC44YTUuMTYsNS4xNiwwLDAsMSwyLjEtNC4zLDYuNjQsNi42NCwwLDAsMSwzLS43LDYuMiw2LjIsMCwwLDEsMy45LDEuMSwzLjcsMy43LDAsMCwxLDEuNiwzLjNBNS4yNiw1LjI2LDAsMCwxLDIwLjYsMTQuOVoiLz48L3N2Zz4="}),a.prototype={options:{paper:null},_movedCellViews:{},initialize:function(a){_.bindAll(this,"_onExpandHandler","_onCollapsedHandler"),this.options=_.extend({},_.result(this,"options"),a||{}),this.options.paper&&(this.options.paper.on("cell:expand:done",this._onExpandHandler),this.options.paper.on("cell:collapse:done",this._onCollapsedHandler))},_onExpandHandler:function(a,b,c){this._isExpandingView(a)?this._movedCellViews[this._getMovedId(a)]=this._moveCellViews(a,b,c,!0):this._moveCellViews(a,b,c,!1)},_onCollapsedHandler:function(a){var b=this.options.paper,c=this._getMovedId(a);b.model.trigger("batch:start"),_.forEach(this._movedCellViews[c],function(a){
var b=a.model.getBBox();b.x-a.delta.x===Math.round(a.origin.x)&&b.y-a.delta.y===Math.round(a.origin.y)&&a.model.translate(-a.delta.x,-a.delta.y)}),delete this._movedCellViews[c],b.model.trigger("batch:stop")},_getMovedId:function(a){return a.id},_moveCellViews:function(a,b,c,d){var e=this,f=[],h=[],i=this.options.paper;b=g.rect(b),c=g.rect(c);var j=i.findViewsInArea(a.model.getBBox()),k=c.topRight().x-b.topRight().x,l=c.bottomLeft().y-b.bottomLeft().y;return _.remove(j,{id:a.id}),_.each(j,function(b){a.model.get("parent")?a.model.get("parent")==b.model.get("parent")&&h.push(b):b.model.get("parent")||h.push(b)}),i.model.trigger("batch:start"),_.forEach(h,function(c){var g,h=c.model.getBBox(),j=c.secondaryIntersections||i.findViewsInArea(c.model.getBBox());if(_.remove(j,{id:c.id}),!c.secondaryIntersections){_.remove(j,{id:a.id});var m=[],n=e._getParentId(c);_.each(j,function(a){a.model.get("parent")?a.model.get("parent")==c.model.get("parent")&&m.push(a):n!=a.model.get("id")&&m.push(a)}),c.secondaryIntersections=m}h.intersect(b)&&(k+=b.width-(h.x-b.x),l+=b.height-(h.y-b.y)),a.secondaryIntersections&&c.secondaryIntersections&&_.indexOf(c.secondaryIntersections,a.id)!==-1||(g=h.topRight().x>b.topRight().x?h.y>b.bottomLeft().y?{x:k,y:l}:{x:k,y:0}:{x:0,y:l},d&&(c.delta=g,c.origin=h.origin()),c.model.translate(g.x,g.y,{translateBy:"rxMoveElements"}),f.push(c),f=f.concat(e._moveCellViews(c,h,c.model.getBBox())))}),i.model.trigger("batch:stop"),f},_isExpandingView:function(a){return a.isExpanding},_getParentId:function(a){if(a.model.get("parent")){var b=this.options.paper.findViewByModel(a.model.get("parent"));return this._getParentId(b)}return a.model.get("id")}},joint.ui.rx.MoveElements=a})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").config(["RX_RECORD_DEFINITION","rxPropertyEditorProvider",function(a,b){b.registerEditor([a.dataTypes.character.resourceType,"String"],'<input type="text" ng-required="propertyDefinition.required" ng-disabled="propertyDefinition.disabled" ng-readonly="propertyDefinition.readonly" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]">'),b.registerEditor([a.dataTypes.integer.resourceType,a.dataTypes.decimal.resourceType,a.dataTypes.real.resourceType],'<rx-number-field-editor rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-number-field-editor>'),b.registerEditor([a.dataTypes["boolean"].resourceType],'<rx-selection-field-editor ng-required="propertyDefinition.required" rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-selection-field-editor>'),b.registerEditor(a.dataTypes.dateTime.resourceType,'<rx-date-time-field-editor ng-required="propertyDefinition.required" rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-date-time-field-editor>'),b.registerEditor(a.dataTypes.timeOnly.resourceType,'<rx-time-field-editor ng-required="propertyDefinition.required" rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-time-field-editor>'),b.registerEditor([a.dataTypes.dateOnly.resourceType,"Date"],'<rx-date-field-editor ng-required="propertyDefinition.required" rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-date-field-editor>'),b.registerEditor(a.dataTypes.selection.resourceType,'<rx-selection-field-editor ng-required="propertyDefinition.required" rx-configuration="propertyDefinition" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-selection-field-editor>'),b.registerEditor("object",'<rx-property-panel rx-configuration="propertyDefinition.propertyPanelConfiguration" ng-model="ngModel[propertyDefinition[entityPropertyKeyName]]"></rx-property-panel>'),b.registerDefaultDataType(a.dataTypes.character.resourceType)}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.ui-select").config(["$provide",function(a){a.decorator("uiSelectDirective",["$delegate","$timeout",function(a,b){var c=a[0],d=c.compile;return c.compile=function(a,c){var e=d.apply(this,arguments);return function(a,c,d){e.apply(this,arguments),d.$observe("tagOnBlur",function(){a.$select.tagOnBlur="true"===d.tagOnBlur}),a.$select.searchInput.on("blur",function(c){!d.$$element.find(".ui-select-choices").find(c.relatedTarget).length&&(a.$select.items.length>0||a.$select.tagging.isActivated)&&a.$select.tagOnBlur&&b(function(){var b=a.$select.search;a.$select.searchInput.triggerHandler("tagged"),a.$select.tagging.fct&&(b=a.$select.tagging.fct(b)),b&&a.$select.select(b,!0)})})}},a}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){return function(c,d){b.get("rxScriptErrorHandler").handleScriptError(c,d),a(c,d)}}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.i18n").config(["$translateProvider","$translatePartialLoaderProvider",function(a,b){var c="en";_.isUndefined(window.rxLocalization)||(c=window.rxLocalization.locale,a.translations(c,window.rxLocalization[c])),a.determinePreferredLanguage(function(){return c}),moment.locale(c),a.fallbackLanguage("en"),a.useLoader("$translatePartialLoader",{urlTemplate:"/{part}/resources/i18n/locale_{lang}.json",loadFailureHandler:"rxTranslationLoaderErrorHandler"}),b.addPart("standardlib")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").config(["$httpProvider",function(a){a.interceptors.push(["$rootScope","$q","RX_AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status]),b.reject(d)}}}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").config(["$httpProvider",function(a){a.interceptors.push("rxSessionExpirationInterceptor")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").config(["$provide","$urlMatcherFactoryProvider",function(a,b){b.type("nonURIEncoded",{encode:function(a){return a||""},decode:function(a){return a||""},is:function(a){return!0}}),a.decorator("$log",["$delegate",function(a){var b,c=[];return b={setLogLevels:function(a){c=_.isArray(a)&&a.length?a:[]},warn:a.warn,error:a.error},["log","debug","info"].forEach(function(d){b[d]=function(){if(_.includes(c,d)||_.includes(c,"all")){var b=a;b[d].apply(b,arguments)}}}),b}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").config(["rxViewComponentProvider","RX",function(a,b){a.registerComponent([{name:"Action Button",group:"Basic Components",icon:"target_cursor",type:"rx-action-button",designType:"rx-action-button-design",designManagerService:"rxActionButtonDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"cls",type:"string"},{name:"icon",type:"string",isConfig:!0,localizable:!0},{name:"style",type:"string",isRequired:!0,isConfig:!0},{name:"label",type:"string",isConfig:!0,localizable:!0},{name:"disabled",type:"string",isConfig:!0,enableExpressionEvaluation:!0},{name:"hidden",type:"string",isConfig:!0,enableExpressionEvaluation:!0}]}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action").config(["rxViewComponentProvider","RX",function(a,b){a.registerComponent([{name:"Action",group:"Basic Components",icon:"target_cursor",type:"rx-action",managerService:"rxActionManager",hideInDesignerPalette:!0,designManagerService:"rxActionDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"name",type:"string",isRequired:!0,isConfig:!0}]}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container").config(["rxViewComponentProvider","RX",function(a,b){a.registerComponent([{name:"Container",group:"Basic Components",icon:"layout",type:"rx-container",designType:"rx-container-design",designManagerService:"rxContainerDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"columnCount",type:"number",isRequired:!0,isConfig:!0,enableExpressionEvaluation:!0},{name:"hidden",type:"string",isRequired:!0,isConfig:!0,enableExpressionEvaluation:!0},{name:"styles",type:"string",isConfig:!0}]}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").config(["rxViewComponentProvider","RX",function(a,b){var c={designManagerService:"rxRecordFieldDefinitionDesignManager",group:"Form Fields",bundleId:b.bundleId,propertiesByName:[{name:"recordDefinition",type:"object",isConfig:!0,isRequired:!0,enableExpressionEvaluation:!0},{name:"recordInstance",type:"object",isConfig:!0,isRequired:!0,enableExpressionEvaluation:!0},{name:"fieldId",type:"string",isRequired:!0,enableExpressionEvaluation:!0},{name:"disabled",type:"string",isConfig:!0,enableExpressionEvaluation:!0},{name:"hidden",type:"string",isConfig:!0,enableExpressionEvaluation:!0},{name:"label",type:"string",isConfig:!0,localizable:!0}]},d=[{name:"Attachment",type:"rx-attachment-field",designType:"rx-attachment-field-design",icon:"paperclip"},{name:"Text Area",type:"rx-textarea-field",designType:"rx-textarea-field-design",icon:"area_text"},{name:"Dropdown",type:"rx-selection-field",designType:"rx-selection-field-design",icon:"field_dropdown"},{name:"Text",type:"rx-character-field",designType:"rx-character-field-design",designManagerService:"rxCharacterFieldDefinitionDesignManager",icon:"field_text"},{name:"Date",type:"rx-date-field",designType:"rx-date-field-design",icon:"calendar"},{name:"Time",type:"rx-time-field",designType:"rx-time-field-design",icon:"clock_o"},{name:"Date/Time",type:"rx-date-time-field",designType:"rx-date-time-field-design",icon:"calendar_clock_o"},{name:"Integer",type:"rx-integer-field",designType:"rx-character-field-design",icon:"field_integer_number"},{name:"Floating",type:"rx-floating-field",designType:"rx-character-field-design",icon:"field_floating_number"},{name:"Decimal",type:"rx-decimal-field",designType:"rx-character-field-design",icon:"field_decimal_number"},{name:"Select Group",type:"rx-select-group-field",designType:"rx-select-group-field-design",designManagerService:"rxSelectGroupFieldDefinitionDesignManager",icon:"field_dropdowns"},{name:"Boolean",type:"rx-boolean-field",designType:"rx-boolean-field-design"}];_.each(d,function(a){_.assign(a,_.cloneDeep(_.omit(c,"designManagerService"))),a.designManagerService||(a.designManagerService=c.designManagerService)}),a.registerComponent([{name:"Record Editor",group:"Basic Components",icon:"file_text",type:"rx-record-editor",designType:"rx-record-editor-design",designManagerService:"rxRecordEditorDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"recordDefinitionName",type:"string",isRequired:!0,isConfig:!0,isProperty:!0},{name:"recordInstanceId",type:"string",isRequired:!0,isConfig:!0,isProperty:!0,enableExpressionEvaluation:!0},{name:"recordInstance",isProperty:!0},{name:"recordDefinition"},{name:"isValid",type:"string",isProperty:!0}]}].concat(d))}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").config(["rxViewComponentProvider","RX",function(a,b){a.registerComponent([{name:"Record Grid",group:"Basic Components",icon:"table",type:"rx-record-grid",designType:"rx-record-grid-design",designManagerService:"rxRecordGridDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"recordDefinitionName",type:"string",isRequired:!0,isConfig:!0,isProperty:!0},{name:"enableRowSelection",type:"string",isConfig:!0},{name:"enableFiltering",type:"boolean",isConfig:!0,enableExpressionEvaluation:!0},{name:"filters",type:"string",isRequired:!0,isConfig:!0},{name:"selectedRows",type:"array",isRequired:!0,isProperty:!0},{name:"firstSelectedRow",type:"object",isRequired:!0,isProperty:!0},{name:"clickableRow",type:"object",isRequired:!0,isProperty:!0},{name:"selectedRowCount",type:"number",isRequired:!0,isProperty:!0}]},{name:"Record Grid Column",type:"rx-record-grid-column",hideInDesignerPalette:!0,bundleId:b.bundleId,propertiesByName:[{name:"title",type:"string",isConfig:!0,localizable:!0},{name:"fieldId",type:"string",isRequired:!0,isConfig:!0},{name:"visible",type:"string",isConfig:!0,enableExpressionEvaluation:!0},{name:"sortable",type:"string",isConfig:!0},{name:"filterable",type:"string",isConfig:!0,enableExpressionEvaluation:!0},{name:"clickable",type:"string",isConfig:!0,enableExpressionEvaluation:!0}]},{name:"Record Grid Filter",type:"rx-record-grid-filter",hideInDesignerPalette:!0,bundleId:b.bundleId,propertiesByName:[{name:"value",type:"string",isConfig:!0,isRequired:!0},{name:"fieldId",type:"string",isRequired:!0,isConfig:!0,enableExpressionEvaluation:!0}]}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").config(["RX_RICH_TEXT",function(a){var b=null!==CKEDITOR.plugins.get("expressioneditor");b||CKEDITOR.plugins.add("expressioneditor",{init:function(b){b.addCommand("insertExpression",{exec:function(a){a.insertHtml("The functionality is not implemented yet")}}),b.ui.addButton("ExpressionEditor",{label:"Insert Expression",command:"insertExpression",icon:a.ckeditor.richTextExpressionPlugin.iconPath})}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").config(["rxViewComponentProvider","RX",function(a,b){a.registerComponent([{name:"Rich Text",group:"Basic Components",icon:"text",type:"rx-rich-text",designType:"rx-rich-text-design",designManagerService:"rxRichTextDesignManager",bundleId:b.bundleId,propertiesByName:[{name:"html",type:"string",isRequired:!0,isConfig:!0,localizable:!0},{name:"hidden",type:"string",isConfig:!0,enableExpressionEvaluation:!0}]}])}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").config(["rxViewComponentProvider","rxShellMenuItemActionProvider","$stateProvider","$urlRouterProvider","RX_SHELL","RX_APP_STATES","RX",function(a,b,c,d,e,f,g){a.registerComponent([{name:"Navigation Bar",group:"Shell Navigation",icon:"layout",type:"rx-shell",designType:"rx-shell-design",designManagerService:"rxShellManager",bundleId:g.bundleId,"static":!0},{name:"Menu Item",group:"Shell Navigation",type:e.navBar.menuItem,designType:"rx-shell-menu-item-design",icon:"cube_square",designManagerService:"rxShellMenuItemManager",bundleId:g.bundleId,propertiesByName:[{name:"menuItemName",type:"string",isRequired:!0,isConfig:!0,localizable:!0}]},{name:"Menu Group",group:"Shell Navigation",type:e.navBar.menuGroup,designType:"rx-shell-menu-group-design",icon:"cube_square",designManagerService:"rxShellMenuGroupManager",bundleId:g.bundleId,propertiesByName:[{name:"menuGroupName",type:"string",isRequired:!0,isConfig:!0,localizable:!0}]}]),b.registerAction([{name:"rxShellLaunchUrlAction",label:"Launch URL",parameters:[{name:"url",label:"URL",enableExpressionEvaluation:!0}]},{name:"rxShellNavigateToViewAction",label:"Navigate to View",parameters:[{name:"viewDefinitionName",label:"View",type:"rx-view-definition-selector",isRequired:!0},{name:"viewParams",type:"rx-view-definition-params",enableExpressionEvaluation:!0}]},{name:"rxShellNavigateToStateAction",label:"Navigate to State",parameters:[{name:"state",label:"State",enableExpressionEvaluation:!1}]}]),c.state(f.home,{controller:["$scope","rxShellConfigResource","rxAuthentication","$translate","rxUtils",function(a,b,c,d,e){c.appState()?c.redirectToAppState():b.get(!0).then(function(a){var b=e.flattenTree(a,"navigationBarItems"),f=_.find(b,"state");if(!f)throw new Error(d.instant("com.bmc.arsys.rx.standardlib.view-components.shell.shell-configuration.error"));c.appState(f.state),c.redirectToAppState()})}]}),d.otherwise(function(a){var b=a.get("$state");b.go(f.home)})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.dpl").run(["$templateCache","uibButtonConfig","uibDropdownConfig",function(a,b,c){b.activeClass="is-checked",c.openClass="is-open open",a.put("/dialogs/confirm.html",'<div class="d-modal__dialog">    <div class="d-modal__header">        <h5 class="d-modal__title">{{header}}</h5>   </div>   <div class="d-modal__content" >       <p class="d-modal__content-item">{{msg}}</p>   </div>   <div class="d-modal__footer">       <button class="d-button d-button_primary d-button_small" ng-click="yes()">OK</button>       <button class="d-button d-button_secondary d-button_small" ng-click="no()">Cancel</button>   </div></div>')}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.login").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"scripts/login/login.view.html",controller:"LoginController",access:{loginRequired:!1}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").config(["$stateProvider",function(a){a.state("view",{access:{},url:"/view/{viewDefinitionName:nonURIEncoded}?param",templateUrl:"scripts/view/runtime/runtime-view.view.html",controller:"RuntimeViewController",params:{param:{array:!0}}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.open-view").constant("RX_OPEN_VIEW",{type:{fullWidth:"fullWidth",centeredModal:"centeredModal",dockedLeftModal:"dockedLeftModal",dockedRightModal:"dockedRightModal"},launchBehavior:{sameWindow:"sameWindow",newWindow:"newWindow"},modalSize:{small:"small",medium:"medium",large:"large"},template:{modal:"scripts/view/runtime/modal/runtime-view-modal.html",blade:"scripts/view/runtime/modal/runtime-view-blade.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition").constant("RX_ASSOCIATION_DEFINITION",{cardinality:[{value:"ONE_TO_ONE",name:"Has One"},{value:"MANY_TO_MANY",name:"Many To Many",noConstraint:!0},{value:"ONE_TO_MANY",name:"Has Many"}],constraints:[{name:"Cascade Delete",value:!0},{name:"None",value:!1}],isEnabled:[{name:"Yes",value:!0},{name:"No",value:!1}],validation:{required:{name:"Association Definition name cannot be blank.",nodeAId:"First Record cannot be blank.",nodeBId:"Second Record cannot be blank."}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.designer").constant("RX_ASSOCIATION_DESIGNER",{events:{afterSave:"rx-association-designer-after-save",close:"rx-association-designer-close"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.body-state").constant("RX_BODY_STATE",{header:{hidden:"rx-body-header-hidden",autoHide:"rx-body-header-auto-hide"},content:{noPadding:"rx-body-content-no-padding"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib").constant("RX",{bundleId:"standardlib"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade").constant("RX_BLADE",{blade:"com.bmc.arsys.rx.standardlib.components.blade",bladeTab:"com.bmc.arsys.rx.standardlib.components.blade-tab",events:{activateTab:"rx-designer-activate-blade-tab"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker").constant("RX_DEFINITION_PICKER",{globalDefinitionsLabel:"Global",definitionTypes:{view:{type:"view",allDefinitionsLabel:"All Views",dataGetters:{all:"getAllViewDefinitionDescriptors",bundle:"getBundleViewDefinitionDescriptors"}},record:{type:"record",allDefinitionsLabel:"All Records",dataGetters:{all:"getAllRecordDefinitionDescriptors",rx:"getRxRecordDefinitionDescriptors",bundle:"getBundleRecordDefinitionDescriptors"}},namedList:{type:"namedList",allDefinitionsLabel:"All Named Lists",dataGetters:{all:"getAllNamedListDefinitionDescriptors",bundle:"getBundleNamedListDefinitionDescriptors"}},association:{type:"association",allDefinitionsLabel:"All Associations",dataGetters:{all:"getAllAssociationDefinitionDescriptors",bundle:"getBundleAssociationDefinitionDescriptors"}},process:{type:"process",allDefinitionsLabel:"All Processes",dataGetters:{all:"getAllProcessDefinitionDescriptors",bundle:"getBundleProcessDefinitionDescriptors"}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_DESIGNER",{designer:"com.bmc.arsys.rx.standardlib.components.designer",stencil:"com.bmc.arsys.rx.standardlib.components.designer.stencil",canvas:"com.bmc.arsys.rx.standardlib.components.designer.canvas",inspector:"com.bmc.arsys.rx.standardlib.components.designer.inspector",validationIssues:"com.bmc.arsys.rx.standardlib.components.designer.validationIssues",conditionField:"com.bmc.arsys.rx.standardlib.components.designer.conditionField",expressionField:"com.bmc.arsys.rx.standardlib.components.designer.expressionField",expressionTimer:"com.bmc.arsys.rx.standardlib.components.designer.expressionTimer",stencilSettings:"com.bmc.arsys.rx.standardlib.components.designer.stencilSettings",events:{canvasReady:"rx-designer-canvas-ready",cellAdded:"rx-designer-canvas-cell-added",cellRemoved:"rx-designer-canvas-cell-removed",beforeCellRemoved:"rx-designer-canvas-before-cell-removed",cellChanged:"rx-designer-canvas-cell-changed",cellPointerUp:"rx-designer-canvas-cell-pointer-up",cellReparented:"rx-designer-canvas-cell-reparented",blankPointerDown:"rx-designer-canvas-blank-pointer-down",graphChanged:"rx-designer-canvas-graph-changed",correctValidationIssue:"rx-designer-correct-validation-issue",refreshDesigner:"rx-designer-refresh",refreshInspector:"rx-designer-refresh-inspector",openConditionEditor:"rx-open-condition-editor",openIntervalTimerEditor:"rx-open-interval-timer-editor",openApprovalFlowSelectorDialog:"rx-open-approval-flow-editor",openWaitForApprovalDialog:"rx-open-wait-for-approval-definitions",stencilSettingsChanged:"rx-stencil-settings-changed",inspectorReady:"rx-designer-inspector-ready",permissionsChanged:"rx-designer-permissions-changed",customizationOptionsUpdated:"rx-designer-customization-options-updated",canvasRefresh:"rx-designer-canvas-refresh",canvasResume:"rx-designer-canvas-resume",canvasCancel:"rx-designer-canvas-cancel",canvasSuspend:"rx-designer-canvas-suspend"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_OVERLAY",{operationTypes:{CREATED_IN_THIS_OVERLAY_GROUP:"N/A",NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP:"Not Customized",CUSTOMIZED_IN_THIS_OVERLAY_GROUP:"Customized"},overlayTypes:{overwrite:"OVERWRITE",additive:"ADDITIVE",unmodified:"UNMODIFIED"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_PERMISSION",{instancesWithPermissions:["record","field","process","config","runtimeconfig","view"],editorContexts:{view:"view",field:"field",record:"record",process:"process"},haveOverlayLogic:["record","field"],permissionType:["group","role"],administratorGroup:"Administrator",fieldPermissions:{view:"VIEW",change:"CHANGE"},permissionDialogMetadata:{field:{headerText:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption.field",actions:[{value:"VIEW",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.view.label"},{value:"CHANGE",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.change.label"}],uniqueAction:!0,filterPermissionGroupIDs:[1,2,5,8,9]},record:{headerText:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption.record",actions:[],defaultPermittedAction:"VISIBLE",uniqueAction:!0,filterPermissionGroupIDs:[1,2,5,7,8,9]},config:{headerText:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption.config",actions:[{value:"VIEW",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.view.label"},{value:"CHANGE",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.change.label"}],uniqueAction:!0},runtimeconfig:{headerText:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption.config",actions:[],defaultPermittedAction:"VISIBLE",uniqueAction:!0},process:{headerText:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption.process",actions:[{value:"EXECUTE",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.execute.label"},{value:"READ",label:"com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.read.label"}],uniqueAction:!0},view:{actions:[],defaultPermittedAction:"VISIBLE",uniqueAction:!0}},publicPermissionType:"Public"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_SCHEDULER_TIMER",{weekDaysList:[{id:1,value:"Monday"},{id:2,value:"Tuesday"},{id:3,value:"Wednesday"},{id:4,value:"Thursday"},{id:5,value:"Friday"},{id:6,value:"Saturday"},{id:7,value:"Sunday"},"","",""],resourceType:"com.bmc.arsys.rx.services.rule.domain.ScheduleTime",timeCriteriaPath:"rxData/timeCriteria",numberOfDays:_.range(1,36),defaultTime:"12:AM"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_INSPECTOR_SELECT_EXPRESSION_DROPDOWN",function(){var a={select:"Select",expression:"Expression"},b={selectProcess:"Select Process",buildExpression:"Build Expression",editExpression:"Edit Expression"};return{dropDownOptionsValue:a,dropDownDisplayValue:b,selectExpressionDropdownOptions:[{value:a.select,displayValue:b.selectProcess},{value:a.expression,displayValue:b.buildExpression}]}}())}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").constant("RX_WAIT_FOR_APPROVAL",{definitionName:"AP:Role",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",roleNameFieldId:"8",approveType:{roleBased:"0",userBased:"1",adHoc:"2"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").constant("RX_EXPRESSION_EDITOR",{events:{openExpressionEditor:"rx-open-expression-editor",refreshInspector:"rx-designer-refresh-inspector",refreshExpression:"rx-expression-refresh-expression"},operators:{all:[[{displayValue:"(",contentValue:"(",buttonStyle:"narrow"},{displayValue:")",contentValue:")",buttonStyle:"narrow"},{displayValue:'"',contentValue:'"',buttonStyle:"narrow"},{displayValue:"+",contentValue:"+",buttonStyle:"narrow"},{displayValue:"-",contentValue:"-",buttonStyle:"narrow"},{displayValue:"*",contentValue:"*",buttonStyle:"narrow"},{displayValue:"/",contentValue:"/",buttonStyle:"narrow"},{displayValue:"%",contentValue:"%",buttonStyle:"narrow"}],[{displayValue:">",contentValue:">",buttonStyle:"narrow"},{displayValue:"<",contentValue:"<",buttonStyle:"narrow"},{displayValue:"=",contentValue:"=",buttonStyle:"narrow"},{displayValue:"!=",contentValue:"!=",buttonStyle:"narrow"},{displayValue:">=",contentValue:">=",buttonStyle:"narrow"},{displayValue:"<=",contentValue:"<=",buttonStyle:"narrow"},{displayValue:"LIKE",contentValue:"LIKE",buttonStyle:"wide"}],[{displayValue:"AND",contentValue:"AND",buttonStyle:"wide"},{displayValue:"OR",contentValue:"OR",buttonStyle:"wide"},{displayValue:"NOT",contentValue:"NOT",buttonStyle:"wide"},{displayValue:"NULL",contentValue:"$NULL$",buttonStyle:"wide"}]],math:[[{displayValue:"(",contentValue:"(",buttonStyle:"narrow"},{displayValue:")",contentValue:")",buttonStyle:"narrow"},{displayValue:'"',contentValue:'"',buttonStyle:"narrow"},{displayValue:"+",contentValue:"+",buttonStyle:"narrow"},{displayValue:"-",contentValue:"-",buttonStyle:"narrow"},{displayValue:"*",contentValue:"*",buttonStyle:"narrow"},{displayValue:"/",contentValue:"/",buttonStyle:"narrow"},{displayValue:"%",contentValue:"%",buttonStyle:"narrow"}]]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-filter").constant("RX_DATA_TYPES",{character:"Character",dateTime:"DateTime",dateOnly:"DateOnly",timeOnly:"TimeOnly",integer:"Integer",decimal:"Decimal",real:"Real",selection:"Selection","boolean":"Boolean"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").constant("RX_ERROR_HANDLING",{maxErrorMessageLength:500,maxArMessageLength:200,errorMessages:{httpDefaultError:"An unexpected server communication error has occurred. Status: %s.",httpNetworkError:"Network communication error has occurred.",scriptError:"An unexpected script error has occurred."},AR_MESSAGES_HEADER:"x-ar-messages",AR_NOTE_LOG_INFO:8914})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer").constant("RX_NAMED_LIST_DESIGNER",{namedListDesigner:"com.bmc.arsys.rx.standardlib.named-list.designer.named-list-designer",events:{afterSave:"rx-named-list-designer-after-save",close:"rx-named-list-designer-close"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").constant("RX_APPROVAL_PROCESS",{apForm:{definitionName:"AP:Form",fields:{formName:{id:12e3,label:"Form Name"}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").constant("RX_AR_APPROVAL_PROCESS",{apForm:{definitionName:"AP:Form",fields:{formName:{id:12e3,label:"Form Name"}}},apProcessDefinitionForm:{definitionName:"AP:Process Definition",fields:{process:{id:1e4,label:"Process"}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").constant("RX_ASSIGNMENT_PROCESS",{assignmentProcessForm:{definitionName:"ASE:Assignment Process",fields:{processName:{id:500067200,label:"Process Name"}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").constant("RX_PROCESS_DEFINITION",{permissionTypes:{read:{displayName:"Read",type:"READ"},execute:{displayName:"Execute",type:"EXECUTE"}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").constant("RX_USER_TASK",{mode:{createRecord:"Create Record",updateRecord:"Update Record"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").constant("RX_PROCESS_DESIGNER",{processDesigner:"com.bmc.arsys.rx.standardlib.process.designer.process-designer",processPreview:"com.bmc.arsys.rx.standardlib.process.designer.process-preview",userPreferences:{componentId:"rx-process-designer",version:"1.0"},events:{afterSave:"rx-process-designer-after-save",close:"rx-process-designer-close"},processElementResourceTypes:{startEvent:"com.bmc.arsys.rx.services.process.domain.StartEventDefinition",endEvent:"com.bmc.arsys.rx.services.process.domain.EndEventDefinition",processAction:"com.bmc.arsys.rx.services.process.domain.ProcessActionDefinition",sequenceFlow:"com.bmc.arsys.rx.services.process.domain.SequenceFlowDefinition",parallelGateway:"com.bmc.arsys.rx.services.process.domain.ParallelGatewayDefinition",exclusiveGateway:"com.bmc.arsys.rx.services.process.domain.ExclusiveGatewayDefinition",userTask:"com.bmc.arsys.rx.services.process.domain.UserTaskDefinition",callActivity:"com.bmc.arsys.rx.services.process.domain.CallActivityDefinition",subProcess:"com.bmc.arsys.rx.services.process.domain.SubProcessDefinition",receiveTask:"com.bmc.arsys.rx.services.process.domain.ReceiveTaskDefinition",textAnnotation:"com.bmc.arsys.rx.services.process.domain.TextAnnotation",textAnnotationAssociation:"com.bmc.arsys.rx.services.process.domain.TextAnnotationAssociation",timerEvent:"com.bmc.arsys.rx.services.process.domain.BoundaryEventDefinition"},approvalElementResourceTypes:{approvalProcess:"com.bmc.arsys.rx.approval:Approval Process",waitForApprovalReview:"com.bmc.arsys.rx.approval:Wait for Approval Review",arApprovalPorcess:"com.bmc.arsys.rx.approval:AR Approval Process"},assignmentElementResourceTypes:{assignmentProcess:"com.bmc.arsys.rx.assignment:Wait for Assignment"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance-viewer").constant("RX_PROCESS_INSTANCE_VIEWER",{processInstanceViewer:"com.bmc.arsys.rx.standardlib.process.instance.process-instance-viewer",events:{close:"rx-process-instance-viewer-close"
}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance").constant("RX_PROCESS_INSTANCE",{status:{active:"ACTIVE",suspended:"SUSPENDED",errored:"ERRORED",completed:"COMPLETED"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").constant("RX_RECORD_DEFINITION",function(){var a={displayId:1,createdBy:2,createdDate:3,assignee:4,modifiedBy:5,modifiedDate:6,status:7,description:8,notifierListening:16,guid:179,id:379},b={system:"SYSTEM",required:"REQUIRED",optional:"OPTIONAL"};return{coreFieldIds:a,joinRecordDefinitionCoreFieldIds:[a.displayId,a.id],fieldOptions:b,systemLikeFields:[a.guid,a.id],coreFields:[{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"Display ID",description:null,id:a.displayId,fieldOption:b.system,maxLength:15,defaultValue:"",anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"Created By",description:null,id:a.createdBy,fieldOption:b.required,maxLength:254,defaultValue:"$USER$",anyUserAllowedToSubmit:!0,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition",name:"Created Date",description:null,id:a.createdDate,fieldOption:b.system,defaultValue:null,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"Assignee",description:null,id:a.assignee,fieldOption:b.optional,maxLength:254,defaultValue:null,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"Modified By",description:null,id:a.modifiedBy,fieldOption:b.system,maxLength:254,defaultValue:null,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition",name:"Modified Date",description:null,id:a.modifiedDate,fieldOption:b.system,defaultValue:null,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",name:"Status",description:null,id:a.status,fieldOption:b.required,optionNamesById:{0:"New",1:"Assigned",2:"Fixed",3:"Rejected",4:"Closed"},displayType:null,defaultValue:0,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"Description",description:null,id:a.description,fieldOption:b.required,maxLength:254,defaultValue:null,anyUserAllowedToSubmit:!0,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",name:"Notifier Listening",description:null,id:a.notifierListening,fieldOption:b.system,optionNamesById:{0:"Not Listening",1:"Listening"},displayType:null,defaultValue:0,anyUserAllowedToSubmit:!1,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"GUID",description:null,id:a.guid,fieldOption:b.optional,maxLength:38,defaultValue:null,anyUserAllowedToSubmit:!0,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},{resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:"ID",description:null,id:a.id,fieldOption:b.optional,maxLength:38,defaultValue:null,anyUserAllowedToSubmit:!0,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1}],dataTypes:{character:{displayName:"Text",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"},integer:{displayName:"Integer",resourceType:"com.bmc.arsys.rx.standardlib.record.IntegerFieldDefinition"},dateTime:{displayName:"Date/Time",resourceType:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition"},selection:{displayName:"Selection",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition"},decimal:{displayName:"Decimal",resourceType:"com.bmc.arsys.rx.standardlib.record.DecimalFieldDefinition"},real:{displayName:"Floating",resourceType:"com.bmc.arsys.rx.standardlib.record.RealFieldDefinition"},timeOnly:{displayName:"Time",resourceType:"com.bmc.arsys.rx.standardlib.record.TimeOnlyFieldDefinition"},dateOnly:{displayName:"Date",resourceType:"com.bmc.arsys.rx.standardlib.record.DateOnlyFieldDefinition"},attachment:{displayName:"Attachment",resourceType:"com.bmc.arsys.rx.standardlib.record.AttachmentFieldDefinition"},"boolean":{displayName:"Boolean",resourceType:"com.bmc.arsys.rx.standardlib.record.BooleanFieldDefinition",options:[{value:"",content:""},{value:"1",content:"True"},{value:"0",content:"False"}]},recordInstance:{displayName:"Record",resourceType:"com.bmc.arsys.rx.services.process.domain.record.RecordInstanceFieldDefinition",skipDefaultValue:!0}},recordDefinitionTypes:{regular:{recordDefinitionType:"com.bmc.arsys.rx.services.record.domain.RegularRecordDefinition",displayName:"Regular"},join:{recordDefinitionType:"com.bmc.arsys.rx.services.record.domain.JoinRecordDefinition",displayName:"Join"}},joinTypes:{inner:{value:"INNER",displayName:"Inner Join"},outer:{value:"OUTER",displayName:"Outer Join"}},specialtyFields:{assigneeGroup:{id:112,name:"Assignee Group"}},joinFieldMapping:"com.bmc.arsys.rx.services.record.domain.JoinRecordDefinitionFieldMapping",sourceTypes:{primary:"PRIMARY_RECORD_DEFINITION",secondary:"SECONDARY_RECORD_DEFINITION"},sourceTypesInvertedMap:{PRIMARY_RECORD_DEFINITION:"primary",SECONDARY_RECORD_DEFINITION:"secondary"},STANDARDLIB_PREFIX:"standardlib:",AR_MAX_RESERVED_FIELD_ID:536870912,AR_MIN_CUSTOM_FIELD_ID:536870913,AR_MAX_FIELD_ID:2147483647,AR_CORE_FIELD_IDS:_.range(1,100).concat([a.guid,a.id,399]),AR_PASSWORD_FIELD_IDS:[102,123],SECURITY_LABEL_IDS:{MAX:60999,MIN:60020},EMPTY_FIELD_NAME_OPTION:{content:"<No Field Selected>",value:""},EMPTY_LIST_OPTION:{content:"<No List Selected>",value:""},FIELD_COMPONENT_REGEX:/^rx[a-zA-Z-]*field$/}}())}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").constant("RX_RECORD_DESIGNER",{recordDesigner:"com.bmc.arsys.rx.standardlib.record.designer.record-designer",events:{inheritanceChange:"rx-record-designer-inheritance-change",fieldOverlayReverted:"rx-record-designer-field-overlay-reverted",afterSave:"rx-record-designer-after-save",close:"rx-record-designer-close",toggleColumnVisibility:"rx-record-designer-toggle-column-visibility"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources").constant("RX_RESOURCE_URLS",{applicationApi:"/api/rx/application",dataPage:"datapage",mockApi:"scripts",command:"command",associationDefinition:"association/definition",recordInstance:"record/recordinstance",recordDefinition:"record/recorddefinition",viewDefinition:"view/viewdefinition",namedListDefinition:"namedlist/namedlistdefinition",user:"user",recordInstanceAttachment:"record/attachment",theme:"theme",loginContent:"logincontent",apiPrefix:"/api",rxNamespacePrefix:"rx/application",processSubdomainName:"process",processInstanceResourceName:"processinstance"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").constant("RX_RULE_DESIGNER",{ruleDesigner:"com.bmc.arsys.rx.standardlib.rule.designer.rule-designer",userPreferences:{componentId:"rx-rule-designer",version:"1.0"},events:{afterSave:"rx-rule-designer-after-save",close:"rx-rule-designer-close"},ruleElementResourceTypes:{ruleAction:"com.bmc.arsys.rx.services.rule.domain.CustomRuleAction",alert:"com.bmc.arsys.rx.services.rule.domain.ShowAlertAction",setField:"com.bmc.arsys.rx.services.rule.domain.SetFieldAction",triggerElement:"com.bmc.arsys.rx.services.rule.domain.RecordTriggerEvent",triggerTimeElement:"com.bmc.arsys.rx.services.rule.domain.TimerTriggerEvent",startProcessAction:"com.bmc.arsys.rx.services.rule.domain.StartProcessInstanceAction",cancelProcessAction:"com.bmc.arsys.rx.services.rule.domain.CancelProcessInstanceAction",signalProcessInstanceAction:"com.bmc.arsys.rx.services.rule.domain.SignalProcessInstanceAction",qualification:"ruleQualificationResourceType",signalProcessAutomaticCorrelation:"com.bmc.arsys.rx.services.rule.domain.SignalProcessAutomaticCorrelation",link:"ruleLinkResourceType",scheduleTime:"com.bmc.arsys.rx.services.rule.domain.ScheduleTime"},processElementResourceTypes:{receiveTask:"com.bmc.arsys.rx.services.process.domain.ReceiveTaskDefinition"},selectExpressionDropdownOptions:[{value:"Select",displayValue:"Select Process"},{value:"Expression",displayValue:"Build Expression"}],eventTypes:[{value:"ON_CREATE",content:"On Create"},{value:"ON_UPDATE",content:"On Update"},{value:"ON_DELETE",content:"On Delete"}]})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").constant("RX_APP_STATES",{home:"rxHome"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").constant("RX_AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",logoutFailed:"auth-logout-failed",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",switchOverlayInitiated:"switch-overlay-initiated"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").constant("RX_SESSION",{minutesBeforeLogout:2,keepAliveCommand:"com.bmc.arsys.rx.application.user.command.KeepAliveCommand",userInteractionThrottleTimeMs:1e3,userInteractionEvents:"click keypress",expirationModes:{idle:"idleSessionExpirationMode",absolute:"absoluteSessionExpirationMode"},expirationHeaders:{idle:"Session-Expiration",absolute:"Absolute-Session-Expiration"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").constant("RX_USER_GROUPS",{administrator:"Administrator",structAdmin:"Struct Admin"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user-preferences").constant("RX_USER_PREFERENCES",{settingName:"UI Preferences",fields:{loginName:"LoginName",componentId:"componentId",preferences:"preferences",componentTypeName:"componentTypeName",version:"version",ownerKeyValue:"ownerKeyValue1",settingName:"settingName",settingId:"settingId"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").constant("RX_VIEW_COMPONENT",{events:{propertyChanged:"rx-view-component-property-changed",action:"rx-view-component-action"},actions:{save:"rx-view-component-save",close:"rx-view-component-close",newComponentAdded:"rx-view-new-component-added"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").constant("RX_ACTION_BUTTON",{styles:[{name:"Primary",value:"primary",cls:"d-button_primary"},{name:"Secondary",value:"secondary",cls:"d-button_secondary"},{name:"Clear",value:"clear",cls:"d-button_action"}],icons:[{label:"Add",name:"add",cls:"plus"},{label:"Add Circle",name:"addCircle",cls:"plus_circle"},{label:"Back",name:"back",cls:"undo"},{label:"Calendar",name:"calendar",cls:"calendar"},{label:"Delete",name:"delete",cls:"cross"},{label:"Delete Circle",name:"deleteCircle",cls:"cross_circle"},{label:"Edit",name:"edit",cls:"pencil"},{label:"Exclamation Circle",name:"exclamationCircle",cls:"exclamation_circle"},{label:"Exclamation Triangle",name:"exclamationTriangle",cls:"exclamation_triangle"},{label:"Gear",name:"gear",cls:"gear"},{label:"Help",name:"help",cls:"question_circle"},{label:"Home",name:"home",cls:"home"},{label:"Link",name:"link",cls:"link"},{label:"Mail",name:"mail",cls:"envelope"},{label:"Pin",name:"pin",cls:"pin"},{label:"Search",name:"search",cls:"search"},{label:"Share",name:"share",cls:"share"},{label:"Star",name:"star",cls:"star"},{label:"Thumbs Down",name:"thumbsDown",cls:"thumbs_down"},{label:"Thumbs Up",name:"thumbsUp",cls:"thumbs_up"},{label:"Trash",name:"trash",cls:"trash"}]})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").constant("RX_RECORD_EDITOR",{recordEditorComponent:"rx-record-editor",modes:{create:"CREATE",edit:"EDIT"},defaultState:{read:"READ",edit:"EDIT"},events:{fieldInit:"field:init"},fields:{dateTime:"rx-date-time-field",character:"rx-character-field",textarea:"rx-textarea-field",selection:"rx-selection-field",date:"rx-date-field",time:"rx-time-field",integer:"rx-integer-field",floating:"rx-floating-field",decimal:"rx-decimal-field",selectGroup:"rx-select-group-field","boolean":"rx-boolean-field",attachment:"rx-attachment-field"},templates:{"default":"scripts/view-components/record-editor/record-editor-default.html",allFields:"scripts/view-components/record-editor/record-editor-all-fields.html"},styles:{noBorder:"rx-record-editor_no-border"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").constant("RX_RECORD_GRID",{uiComponentName:"rx-record-grid",defaultFilter:"{}",version:"1.0",components:{filter:"rx-record-grid-filter",column:"rx-record-grid-column"},selectionTypes:{multiple:"multiple",single:"single"},defaultUiGridPlugins:["ui-grid-infinite-scroll","ui-grid-selection","ui-grid-move-columns","ui-grid-resize-columns","ui-grid-auto-resize"],columnProperties:[{name:"visible",defaultValue:!0,label:"Visible by default",tooltip:{text:"Select this option to make a field visible by default on the application UI.",placement:"top"}},{name:"sortable",defaultValue:!0,label:"Sorting enabled"},{name:"filterable",defaultValue:!0,label:"Filtering enabled"},{name:"clickable",defaultValue:!1,label:"Make column value an Action Button",tooltip:{text:"Select this option to make a field clickable, on the application UI.",placement:"top"}}],userPreferences:{filters:"filters",columns:"columns"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").constant("RX_RICH_TEXT",{ckeditor:{skinPath:"/standardlib/resources/css/ckeditor/skins/rich-text/",richTextExpressionPlugin:{iconPath:"/standardlib/resources/images/ckeditor/plugins/rich-text-expression/icons/toolbar.png"}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").constant("RX_SHELL",{shellRuntimeComponent:"rx-shell",shellDesignComponent:"rx-shell-design",events:{menuItemUpdate:"menuItem:update",menuGroupUpdate:"menuGroup:update",navBarUpdate:"navBar:update"},navBar:{menuItem:"rx-shell-menu-item",menuGroup:"rx-shell-menu-group"},actions:{launchURL:"rxShellLaunchUrlAction",navigateToView:"rxShellNavigateToViewAction",navigateToState:"rxShellNavigateToStateAction"},menuGroup:["rx-shell-menu-item"],strings:{newMenuItemName:"New Menu Item",newMenuGroupName:"Menu Group",noneIconLabel:"None"},definitions:{userMessage:{definitionName:"UserMessage",dataPageType:"com.bmc.arsys.rx.application.usermessage.datapage.UserMessageDataPageQuery",updateCommand:"com.bmc.arsys.rx.application.usermessage.command.UpdateStateOfUserMessagesCommand",fields:{requestId:"1",submitter:"2",createDate:"3",assignedTo:"4",lastModifiedBy:"5",modifiedDate:"6",status:"7",shortDescription:"8",instanceId:"379",subject:"20000",body:"20001",recipient:"20002"},status:{unread:"0",read:"1",dismissed:"2"}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.definition").constant("RX_VIEW_DEFINITION",{resourceTypes:{viewComponent:"com.bmc.arsys.rx.services.view.domain.ViewComponentDefinition",containerViewComponent:"com.bmc.arsys.rx.services.view.domain.ContainerViewComponentDefinition"},events:{childAdd:"rx-view-designer-child-add",childRemove:"rx-view-designer-child-remove",childUpdate:"rx-view-designer-child-update"},baseContainer:"rx-view-designer-container",containerComponent:"rx-container",actionButtonComponent:"rx-action-button",defaultLayoutTemplateId:5,layoutProperties:["layoutTemplate","columns","static","role","columnCount","span","children","componentDefinitionId","height"],componentDescriptorProperties:["designType","type","name"],columnCountOptions:_.times(6,function(a){return{value:++a,content:a}}),elementTemplate:'<{type} rx-configuration="configuration" rx-view-component-id="{{configuration.id || configuration.componentDefinitionId}}" class="rx-theme-main-border-color rx-theme-main-text-color rx-theme-main-background-color"></{type}>',runtimeContainerElementTemplate:'<rx-container rx-configuration="node"></rx-container>',shellDefinitionName:"BMC Modern Shell",viewType:{regular:"REGULAR",shell:"SHELL"},viewLayoutTemplates:[{id:1,label:"Header and 1 Column",layout:{layoutTemplate:1,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[]}]}]}]}},{id:2,label:"Header and 2 Columns (50/50)",layout:{layoutTemplate:2,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:6},{children:[],span:6}]}]}]}},{id:3,label:"Header and 2 Columns (60/40)",layout:{layoutTemplate:3,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:7},{children:[],span:5}]}]}]}},{id:4,label:"Header and 2 Columns (40/60)",layout:{layoutTemplate:4,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:5},{children:[],span:7}]}]}]}},{id:5,label:"Container",layout:{layoutTemplate:5,columns:[{role:"content",children:[]}]}},{id:6,label:"2 Columns (50/50)",layout:{layoutTemplate:6,columns:[{role:"content",children:[],span:6},{role:"content",children:[],span:6}]}},{id:7,label:"2 Columns (60/40)",layout:{layoutTemplate:7,columns:[{role:"content",children:[],span:7},{role:"content",children:[],span:5}]}},{id:8,label:"2 Columns (40/60)",layout:{layoutTemplate:8,columns:[{role:"content",children:[],span:5},{role:"content",children:[],span:7}]}},{id:9,label:"3 Equal Columns",layout:{layoutTemplate:9,columns:[{role:"content",children:[],span:4},{role:"content",children:[],span:4},{role:"content",children:[],span:4}]}},{id:10,label:"Header, Footer and 1 Column",layout:{layoutTemplate:10,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[]}]},{"static":!0,role:"footer",height:100,columns:[{children:[]}]}]}]}},{id:11,label:"Header, Footer and 2 Columns (50/50)",layout:{layoutTemplate:11,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:6},{children:[],span:6}]},{"static":!0,role:"footer",height:100,columns:[{children:[]}]}]}]}},{id:12,label:"Header, Footer and 2 Columns (60/40)",layout:{layoutTemplate:12,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:7},{children:[],span:5}]},{"static":!0,role:"footer",height:100,columns:[{children:[]}]}]}]}},{id:13,label:"Header, Footer and 2 Columns (40/60)",layout:{layoutTemplate:13,columns:[{children:[{"static":!0,role:"header",height:100,columns:[{children:[]}]},{"static":!0,role:"content",columns:[{children:[],span:5},{children:[],span:7}]},{"static":!0,role:"footer",height:100,columns:[{children:[]}]}]}]}}],styles:[{id:"rx-no-margin",name:"No Margin"},{id:"rx-default-border",name:"1px Border"},{id:"rx-white-background",name:"White Background"}]})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").constant("RX_VIEW_DESIGNER",{events:{afterSave:"rx-view-designer-after-save",canvasReady:"rx-view-designer-canvas-ready",close:"rx-view-designer-close",viewComponentAdded:"rx-view-designer-view-component-added",viewComponentRemoved:"rx-view-designer-view-component-removed",viewComponentRemoveRequest:"rx-view-designer-view-component-remove-request",viewComponentPointerUp:"rx-view-designer-view-component-pointer-up",viewComponentMoved:"rx-view-designer-view-component-moved",updateBreadcrumbs:"rx-view-designer-update-breadcrumbs",blankPointerDown:"rx-view-designer-blank-pointer-down",layoutChanged:"rx-view-designer-layout-changed"},layoutNodeCacheId:"rx-view-designer-layout-node-cache",modelCacheId:"rx-view-designer-model-cache"})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").constant("RX_RUNTIME_VIEW",{events:{viewAction:"rx-runtime-view-action",componentAction:"rx-runtime-component-action"},actions:{save:"rx-runtime-view-save",close:"rx-runtime-view-close",submit:"rx-runtime-view-submit",viewReady:"rx-runtime-view-ready"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition").filter("associationCardinality",["RX_ASSOCIATION_DEFINITION",function(a){return function(b){return _.find(a.cardinality,"value",b).name}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition").filter("associationConstraints",["RX_ASSOCIATION_DEFINITION",function(a){return function(b){return _.find(a.constraints,"value",b).name}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition").filter("associationIsEnabled",["RX_ASSOCIATION_DEFINITION",function(a){return function(b){return _.find(a.isEnabled,"value",b).name}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker").filter("definitionSearch",function(){return function(a,b){var c=RegExp("("+b+")","gi");return _(a).map(function(a){return a.definitionTreeNodes=_(a.definitionTreeNodes).map(function(a){var b=a.label.match(c);if(b)return a.label=a.label.replace(c,"<mark>$1</mark>"),a}).compact().value(),a}).filter(function(a){return!!a.definitionTreeNodes.length}).value()}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("intervalTimer",function(){return function(a,b){var c=/(R([0-9]*\.?[0-9]*)\/)?P((([0-9]*\.?[0-9]*)Y)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)W)?(([0-9]*\.?[0-9]*)D)?)?(T(([0-9]*\.?[0-9]*)H)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)S)?)?/,d=a?a.match(c):"";if(!d)return"";var e=parseFloat(d[7])||0,f=parseFloat(d[9])||0,g=parseFloat(d[11])||0,h=parseFloat(d[14])||0,i=parseFloat(d[16])||0;return"json"===b?{months:e,weeks:f,days:g,hours:h,minutes:i}:(e?e+" month(s) ":"")+(f?f+" week(s) ":"")+(g?g+" day(s) ":"")+(h?h+" hour(s) ":"")+(i?i+" minute(s)":"")}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("scheduleTimerExpressionBuilder",["$filter",function(a){return function(b){var c=_.sortBy(b.monthDays),d=c.length>1?c.pop():"",e=c.join(", "),f=(e?"On dates "+e:"")+(d?" and "+d:"")+(e?" of every month ":""),g=_(b.weekDays).sortBy("id").pluck("value").value(),h=g.length>1?g.pop():"",i=g.join(", "),j=(f&&i?", and every "+i:"")+(!f&&i?"Every "+i:"")+(h?" and "+h:""),k=a("scheduleTimerSort")(b.hours,b.minute),l=k.length>1?k.pop():"",m=k.join(", "),n=(m?" at "+m:"")+(l?" and "+l:"");return f+j+n}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("scheduleTimerJson",["RX_SCHEDULER_TIMER",function(a){return function(b,c){return"json"==c?(b.monthDays=b.monthDays||[],b.weekDays=_.map(b.weekDays,function(b,c){var d=b.substr(0,1).toUpperCase()+b.substr(1).toLocaleLowerCase();return _.findWhere(a.weekDaysList,{value:d})}),b.hours=_.map(b.hours,function(a){return moment(a,["H"],"en").format("h:A")}),b):(b.monthDays=_.sortBy(b.monthDays),b.weekDays=_(b.weekDays).sortBy("id").pluck("value").invoke("toUpperCase").value(),b.hours=_(b.hours).map(function(a){return parseInt(moment(a,["h:A"],"en").format("H"))}).sortBy().value(),b)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("scheduleTimerSort",function(){return function(a,b){return!!a&&(a.sort(function(a,b){var c=/[a-zA-Z]+|[0-9]+/g,d=a.match(c),e=b.match(c),f=d[0]+":"+d[1].toLocaleLowerCase(),g=e[0]+":"+e[1].toLocaleLowerCase();return new Date("2016/01/01 "+f)-new Date("2016/01/01 "+g)}),a=_.map(a,function(a){var c=a.split(":"),d=c[0]+":"+(b?b>9?b:"0"+b:"00")+c[1];return d}))}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("selectionFieldOptions",function(){return function(a){return _(a).values().join(", ")}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").filter("actionTypeName",["i18n","definitionNameFilter","rxString",function(a,b,c){return function(d){var e=a(d,!1);return e||(e=c.prettify(b(d))),e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").filter("approvalCompletionCriteria",function(){var a={0:"One Can Approve",1:"All Must Approve"};return function(b){return a[b]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").filter("serviceName",["i18n","rxString",function(a,b){return function(c){var d="";if(c&&(d=a(c,!1),!d)){var e=c.match(/([^\.]*?)(?:ServiceImpl|Service)?$/)[1];d=b.prettify(e)}return d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("bundlePath",function(){return function(a,b){var c=a.match(/(.+):/);return c&&c.pop()||b||""}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("definitionName",["bundlePathFilter",function(a){return function(b,c,d,e){if(b=b||"",!c||"decode"===c){var f=b.match(/[^:]*$/)[0];if(d){var g=a(b,e||!1);g&&(f+=" ("+g+")")}return f}if("encode"===c)return b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("fieldOption",function(){return function(a){var b;return"SYSTEM"===a?b="Yes (System)":"REQUIRED"===a?b="Yes":"OPTIONAL"===a&&(b="No"),b}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("fieldTypeName",["rxString",function(a){var b=/([^:]*?)(?:FieldType)?$/;return function(c){var d=c.match(b)[1];return a.prettify(d)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("recordDefinitionFieldMapping",["RX_RECORD_DEFINITION","$filter",function(a,b){return function(c,d,e){var f="";if(c)if(_.contains(a.joinRecordDefinitionCoreFieldIds,d.id));else if(e){var g=a.sourceTypesInvertedMap[c.source];f=b("definitionName")(e[g+"RecordDefinitionName"])+" ("+_.capitalize(g)+")"}return f}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("recordDefinitionJoinType",["RX_RECORD_DEFINITION",function(a){return function(b){return _.get(_.find(a.joinTypes,{value:b}),"displayName","")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("recordDefinitionType",["RX_RECORD_DEFINITION",function(a){return function(b){return _.get(_.find(a.recordDefinitionTypes,{recordDefinitionType:b}),"displayName","")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("resourceType",["RX_RECORD_DEFINITION",function(a){return function(b){return _.find(a.dataTypes,{resourceType:b}).displayName}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").filter("fieldDefaultValue",["$filter",function(a){var b=/^\d{4}-\d{1,2}-\d{1,2}$/,c=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;return function(d){return _.isString(d)&&b.test(d)?a("date")(d,"mediumDate"):_.isString(d)&&c.test(d)?a("date")(d,"medium"):d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.definition").filter("ruleActionTypeName",["i18n","definitionNameFilter","rxString",function(a,b,c){return function(d){var e=a(d,!1);return e||(e=c.prettify(b(d))),e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.definition").filter("ruleServiceName",["i18n","rxString",function(a,b){return function(c){var d="";if(c&&(d=a(c,!1),!d)){var e=c.match(/([^\.]*?)(?:ServiceImpl|Service)?$/)[1];d=b.prettify(e)}return d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").filter("ruleIntervalDurationIso",function(){return function(a){return"P"+(a.days?a.days+"D":"")+(a.hours||a.minutes?"T":"")+(a.hours?a.hours+"H":"")+(a.minutes?a.minutes+"M":"")}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").filter("ruleIntervalTimer",function(){return function(a,b){var c=/(R([0-9]*\.?[0-9]*)\/)?P((([0-9]*\.?[0-9]*)Y)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)W)?(([0-9]*\.?[0-9]*)D)?)?(T(([0-9]*\.?[0-9]*)H)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)S)?)?/,d=a.match(c);if(!d)return"";var e=parseFloat(d[11])||0,f=parseFloat(d[14])||0,g=parseFloat(d[16])||0;if("json"===b)return{days:e,hours:f,minutes:g};var h=(e?e+" day(s) ":"")+(f?f+" hour(s) ":"")+(g?g+" minute(s)":"");return h?"Every "+h:""}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.search").filter("highlight",["$sce",function(a){return function(b,c){return c&&(b=b.replace(new RegExp("("+c+")","gi"),'<span class="rx-global-search-highlighted">$1</span>')),a.trustAsHtml(b)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").filter("customizationStatus",["RX_OVERLAY",function(a){return function(b){return a.operationTypes[b]||""}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").filter("idToName",["rxString",function(a){return function(b){return a.prettify(b)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").filter("recordFieldType",["RX_RECORD_EDITOR",function(a){return function(b){switch(b){case a.fields.dateTime:return"Date/Time Field";case a.fields.character:return"Text Field";case a.fields.textarea:return"Text Area";case a.fields.selection:return"Dropdown";case a.fields.date:return"Date Field";case a.fields.time:return"Time Field";case a.fields.integer:return"Integer Field";case a.fields.floating:return"Floating Field";case a.fields.decimal:return"Decimal Field";case a.fields.selectGroup:return"Select Group";case a.fields["boolean"]:return"Boolean";default:return b}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.action").provider("rxAction",function(){function a(a){rx.assert.assertStringWithLength(a.name),rx.assert.assertStringWithLength(a.label),rx.assert.assertStringWithLength(a.bundleId),a.parameters=a.parameters.map(function(a){return _.isUndefined(a.defaultValue)&&_.isUndefined(a.editor)&&(a.editor=a.enableExpressionEvaluation?"rx-expression-field":"rx-editor-input"),a}),b.push(a)}var b=[];return{registerAction:function(b){_.isArray(b)?_.forEach(b,a):a(b)},$get:["$injector","rxUtils","rxGlobalCache",function(a,c,d){return{getRegisteredActions:function(){return b},getLicensedActions:function(){return d.getBundleDescriptors().then(function(a){return _.filter(b,function(b){return _.find(a,{id:b.bundleId})})})},findDescriptor:function(a){return rx.assert.assertStringWithLength(a),_.find(b,{name:a})},serializeAction:function(a){return _.forEach(a,function(b,c){angular.isObject(b)&&(_.forEach(b,function(b,d){a[[c,d].join(".")]=b}),delete a[c])}),a},deserializeAction:function(a){return _.forEach(a,function(b,c){if(c.indexOf(".")>-1){var d=c.split(".",2);a[d[0]]=a[d[0]]||{},a[d[0]][d[1]]=a[c],delete a[c]}}),a},serializeActions:function(a){return a.map(function(a){return a.propertiesByName=c.serializeObject(a.propertiesByName),a})},deserializeActions:function(a){return a.map(function(a){return c.deserializeObject(a.propertiesByName)})},executeAction:function(b){if(_.isFunction(b))return b;var c=this,d=this.findDescriptor(b);
if(!d)return angular.noop;var e=d.parameters,f=a.get(d.name);return rx.assert.assertObject(f,"Service for action "+b+" could not be found."),rx.assert.assertFunction(f.execute,"Service for action "+b+" should have execute method"),function(a){var b=c.deserializeActions([a])[0],d=_.map(e,function(a){var c=b[a.name];return _.isFunction(c)?c():c});return f.execute.apply(f,d)}}}}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.close-view").service("rxCloseViewAction",function(){this.execute=function(a){return rx.assert.assertFunction(a.close),a.close()}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.delete-records").service("rxDeleteRecordsAction",["rxRecordInstanceResource","dialogs","$q",function(a,b,c){this.execute=function(d,e){var f;void 0===e&&(rx.assert.assertFunction(d.getRecordDefinitionName,"Grid should have 'getRecordDefinitionName' API"),e=d.getRecordDefinitionName()),f=_.isArray(d)||_.isString(d)?d:d.getSelectedRows();var g=a.withName(e);b.confirm("Warning!","Are you sure you want to delete records?").result.then(function(){var a=_.map(f,function(a){return rx.assert.assertStringWithLength(a.$ID$,"Record Instance should have $ID$"),g["delete"](a.$ID$)});c.all(a).then(function(){_.isFunction(d.refresh)&&d.refresh()})})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.launch-url").service("rxLaunchUrlAction",["$window","$q",function(a,b){this.execute=function(c){return a.open(c),b.when()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.open-view").service("rxOpenViewAction",["$state","rxViewDefinitionResource","$uibModal","RX_RUNTIME_VIEW","$q","RX_OPEN_VIEW",function(a,b,c,d,e,f){function g(a,b,g,h,i){var j=a+g.modalSize;return e(function(a,e){var k,l={viewDefinitionName:b,params:h,on:{action:{}}};l.on.action[d.events.viewAction]=function(b){b.data.actionName===d.actions.submit&&(k.dismiss(),a(b.data.outputParams)),b.data.actionName===d.actions.close&&k.dismiss()},k=c.open({templateUrl:i,controller:"RuntimeViewModalController",windowClass:j,backdrop:i!==f.template.modal||"static",resolve:{runtimeViewConfiguration:function(){return l},modalConfiguration:function(){return{title:g.title}}}}),k.result.then(function(a){},function(){e()})})}function h(b,c,d){c.launchBehavior===f.launchBehavior.newWindow?window.open("#/app/view/"+encodeURIComponent(b)+"?param="+d.join("&param=")):a.go("view",{viewDefinitionName:b,param:d})}function i(a){return rx.assert.assert(_.isString(a)||_.isObject(a),"viewDefinitionName must be a string or an object representing view definition."),_.isString(a)?b.get(a):e.when(a)}return{execute:function(a,b,c){return i(a).then(function(d){var i=_.map(d.inputParams,function(a){return b[a.name]});switch(c.type){case f.type.fullWidth:return h(a,c,i),e.reject();case f.type.centeredModal:return g("rx-runtime-view-dialog modal__",a,c,i,f.template.modal);case f.type.dockedRightModal:return g("rx-runtime-view-dialog d-action-blade action-blade__",a,c,i,f.template.blade);case f.type.dockedLeftModal:return g("rx-runtime-view-dialog d-action-blade is-left action-blade__",a,c,i,f.template.blade);default:return h(a,c,i),e.reject()}})},getOutputParams:function(a){return a.viewDefinitionName?i(a.viewDefinitionName).then(function(a){return _.map(a.outputParams,function(a){return{name:a.name}})}):e.when([])}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.save-view").service("rxSaveViewAction",function(){this.execute=function(a){return rx.assert.assertFunction(a.save),a.save()}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.set-property").service("rxSetPropertyAction",function(){return{execute:function(a,b,c){var d=!1;if(a&&_.isFunction(a.setProperty)&&b){var e=b.match(/^\${view\.components\.[0-9a-z-]+\.(.+)}$/);e&&e[1]&&(d=a.setProperty(e[1],c))}return d}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.submit-view").service("rxSubmitViewAction",function(){this.execute=function(a){return rx.assert.assertFunction(a.submit),a.submit()}})}(),function(){"use-strict";angular.module("com.bmc.arsys.rx.standardlib.admin-settings").provider("rxAdminSettingsCustomView",function(){function a(a){rx.assert.assertStringWithLength(a.componentName),rx.assert.assertStringWithLength(a.runTimeDirective);var c=_.find(b,{componentName:a.componentName});rx.assert.assertNullOrUndefined(c,'The view of type "'+a.runTimeDirective+'" has already been registered!'),b.push(a)}var b=[];return{registerComponent:function(b){_.isArray(b)?_.forEach(b,a):a(b)},$get:function(){function a(){return b}function c(a){return _.find(b,{componentName:a})}return{getRegisteredComponents:a,findDescriptor:c}}}})}(),function(){angular.module("com.bmc.arsys.rx.standardlib.admin-settings").service("rxAdminSettings",["rxResource","rxSettingsResource",function(a,b){var c,d={},e=function(){return d},f=function(a){c=a},g=function(){return c},h=function(){var a=[];return b.getNavTreeData().then(function(b){var c=0;_.forEach(b.AdminNavigationMenu.items,function(b,d){a.push({label:b.label,id:c,children:i(b,c)}),c++})}),a},i=function(a,b){var c=-1;return a.items?_.map(a.items,function(a){return c++,{label:a.label,id:b+"_"+c,defaultBundleScope:a.defaultBundleScope,compName:a.compName,isViewComponent:a.viewComponent,isCustom:a.isCustom,linkType:a.linkType,externalLink:a.externalLink,registeredModuleName:a.registeredModuleName,children:i(a,b+"_"+c)}}):[]},j=function(a){return b.getComponentDefinitionData(a).then(function(a){return a})},k=function(a){return b.getComponentSettingData(a).then(function(a){return a})},l=function(a){return b.getGridComponentData(a).then(function(a){return a})};return{getNavTreeData:h,getTreeOptions:e,setSelectedNode:f,getSelectedNode:g,getComponentDefinition:j,getComponentSettingData:k,getGridComponentData:l}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.application").provider("rxApplicationConfigurator",["$httpProvider","$logProvider","$locationProvider","$translatePartialLoaderProvider","dialogsProvider","rxRuntimeViewStateProvider","rxAuthenticationProvider","rxSearchResultsStateProvider","ehHelpDocsServiceProvider",function(a,b,c,d,e,f,g,h,i){function j(a){return _.each(m,function(b,c){a[c]?_.isArray(a[c])?a[c]=_.union(a[c],b):_.isObject(a[c])&&_.isObject(b)&&_.assign(a[c],b):a[c]=b}),a}function k(b){var c=j(b);a.defaults.headers.get=angular.extend(a.defaults.headers.get||{},{"If-Modified-Since":"Mon, 26 Jul 1997 05:00:00 GMT","Cache-Control":"no-cache",Pragma:"no-cache"}),g.loginState("login",c.applicationInfo),c.httpInterceptors&&(_.isArray(c.httpInterceptors)?_.each(c.httpInterceptors,function(b){a.interceptors.push(b)}):a.interceptors.push(c.httpInterceptors)),c.defaultApplicationState&&g.appState(c.defaultApplicationState),c.runtimeViewStateName&&f.runtimeViewState(c.runtimeViewStateName),c.searchResultsStateName&&h.searchResultsState(c.searchResultsStateName),c.translateLoaderParts&&_.each(b.translateLoaderParts,function(a){d.addPart(a)}),c.disableDialogAnimation!==!0&&e.useAnimation(),i.configure({resourceUrl:["rxBrowserLanguage",function(a){return function(b){return"resources/helpdocs/"+a()+"/"+b+".html"}}]})}var l,m={httpInterceptors:["rxHttpResponseErrorInterceptor","rxOverlayRequestsInterceptor"]},n=window.location.search.replace("?","").split("&");if(n.length>0){var o={};_.each(n,function(a){var b=a.split("=");o[b[0]]?_.isUndefined(b[1])||_.union(o[b[0]],b[1].split(",")):o[b[0]]=_.isUndefined(b[1])?[]:b[1].split(",")}),_.has(o,"debug")&&(l=o.debug,m.httpInterceptors.push("rxHttpLogInterceptor"))}return{configure:function(a){return k(a)},$get:["$rootScope","$state","$http","rxNotificationMessage","rxAuthorization","rxAuthentication","rxSession","rxBundleCache","$uibModalStack","$log","rxLog",function(a,b,c,d,e,f,g,h,i,j,k){return{runApplicationConfig:function(m){function n(a,c,d){var e,f=b.href(c.name,d,{absolute:!0});return a["abstract"]?"BEGIN STATE CHANGE: to "+c.name+" "+f:(e=b.href(a.name,{},{absolute:!0}),"BEGIN STATE CHANGE: from "+a.name+" "+e+" to "+c.name+" "+f)}var o=this;m.bundleId&&(c.defaults.headers.common["default-bundle-scope"]=m.bundleId,h.setBundleId(m.bundleId)),l?(c.defaults.headers.common["log-retrieval"]="sql,api,rule,process",l.length?j.setLogLevels(l):j.setLogLevels(["all"])):j.setLogLevels(!1),a.$on("$stateChangeStart",function(a,c,h,i){"login"==c.name&&c.access&&c.access.loginRequired===!1||(g.isAlive()&&m.isUserFromRestrictedGroup?m.isUserFromRestrictedGroup()?(m.noAccessRedirectState&&!e.isStateAuthorized(c)&&(a.preventDefault(),b.go(m.noAccessRedirectState)),!a.defaultPrevented&&o.debugOptions&&k.debug(n(i,c,h))):(a.preventDefault(),f.logout(),d.error(m.noAccessMessage)):(g.isAlive()||(a.preventDefault(),f.initSession().then(function(){b.go(c.name,h)})),!a.defaultPrevented&&o.debugOptions&&k.debug(n(i,c,h))))}),a.$on("$stateChangeError",function(a,c){i.dismissAll(),k.debug("STATE CHANGE ERROR: "+c.name+" "+b.href(c.name,toParams,{absolute:!0}))}),a.$on("$stateChangeSuccess",function(a,c,d){i.dismissAll(),k.debug("END STATE CHANGE: "+c.name+" "+b.href(c.name,d,{absolute:!0}))})}}}]}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.body-state").factory("rxBodyState",["RX_BODY_STATE",function(a){function b(b){d.removeClass(_.values(a.header).join(" ")),d.addClass(b)}function c(b){d.removeClass(_.values(a.content).join(" ")),d.addClass(b)}var d=$("body");return{setHeaderState:b,setContentState:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.cache").factory("rxBundleCache",["rxGlobalCache","$q",function(a,b){function c(){g=_.cloneDeep(h)}function d(a){a&&a!==e()&&(c(),g.bundleId=a)}function e(){return g.bundleId}function f(){return g.bundleFriendlyName?b.when(g.bundleFriendlyName):(rx.assert.assertStringWithLength(g.bundleId),a.getBundleDescriptor(g.bundleId).then(function(a){return g.bundleFriendlyName=a.friendlyName||a.id,g.bundleFriendlyName}))}var g,h={bundleId:null,bundleFriendlyName:null};return c(),{clear:c,getBundleId:e,setBundleId:d,getBundleFriendlyName:f}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.cache").factory("rxDesignerCache",["$q","rxRecordDefinitionResource","rxProcessDefinitionDataPageResource","rxFieldTypeDefinitionDataPageResource","rxRecordDefinitionDataPageResource","rxNamedListDefinitionNameDataPageResource","rxNamedListDefinitionResource","rxAssociationNodeTreeDataPageResource","rxGroupDataPageResource","rxRoleDataPageResource","rxProcessDefinitionResource","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){E=_.cloneDeep(F)}function n(c,d){return!c||!d&&E.recordDefinitions[c]||(E.recordDefinitions[c]=b.get(c).then(function(a){return E.recordDefinitions[c]=a,E.recordDefinitions[c]})),a.when(E.recordDefinitions[c])}function o(c,d){return null===d&&(d=0),!c||E.recordDefinitionsByOverlay[d]&&E.recordDefinitionsByOverlay[d][c]||(E.recordDefinitionsByOverlay[d]||(E.recordDefinitionsByOverlay[d]={}),E.recordDefinitionsByOverlay[d][c]=b.getFromOverlay(c,d).then(function(a){return E.recordDefinitionsByOverlay[d][c]=a,E.recordDefinitionsByOverlay[d][c]})),a.when(E.recordDefinitionsByOverlay[d][c])}function p(b){return _.isString(b)&&(b=[b]),a.all(b.map(function(a){return n(a)}))}function q(){return E.userGroups||(E.userGroups=i.get(-1,0,{propertySelection:["groupName","groupId"].join()}).then(function(a){return E.userGroups=a.plain().data,E.userGroups})),a.when(E.userGroups)}function r(){return E.userRoles||(E.userRoles=j.get(-1,0,{propertySelection:["roleName","roleID"].join()}).then(function(a){return E.userRoles=a.plain().data,E.userRoles})),a.when(E.userRoles)}function s(b){return b&&!E.namedListDefinitions[b]&&(E.namedListDefinitions[b]=g.get(b).then(function(a){return E.namedListDefinitions[b]=a,E.namedListDefinitions[b]})),a.when(E.namedListDefinitions[b])}function t(){return E.namedListDefinitionNameDataPage||(E.namedListDefinitionNameDataPage=f.get().then(function(a){return E.namedListDefinitionNameDataPage=a.data,E.namedListDefinitionNameDataPage})),a.when(E.namedListDefinitionNameDataPage)}function u(){return E.recordDefinitionDescriptors||(E.recordDefinitionDescriptors=e.get(-1,0,{propertySelection:["name","recordDefinitionType"]}).then(function(a){return E.recordDefinitionDescriptors=a.data,E.recordDefinitionDescriptors})),a.when(E.recordDefinitionDescriptors)}function v(a){return _.map(a,function(a){return E.processDefinitions[a]})}function w(b){return b&&!E.processDefinitions[b]&&(E.processDefinitions[b]=z().then(function(c){return _.includes(c,b)?k.get(b).then(function(a){return E.processDefinitions[b]=a.plain(),E.processDefinitions[b]}):(E.processDefinitions=_.remove(E.processDefinitions,b),a.reject())})),a.when(E.processDefinitions[b])}function x(b){return z().then(function(c){var d=_.filter(b,function(a){return _.includes(c,a)}),e=_.reject(d,function(a){return _.isPlainObject(E.processDefinitions[a])});if(e.length){var f=_.map(e,function(a){return w(a)});return a.all(f).then(function(){return v(b)})}return a.when(v(b))})}function y(a){var b=a.lastUpdateTime?a.name:a.id;E.processDefinitions[b]=a}function z(){return E.processDefinitionNames||(E.processDefinitionNames=c.get(-1,0,{propertySelection:["name"].join(),requireDependent:!0}).then(function(a){return E.processDefinitionNames=_.map(a.data,"name"),E.processDefinitionNames})),a.when(E.processDefinitionNames)}function A(){return rx.assert.assert(_.isArray(E.processDefinitionNames),"processDefinitionNames is not available."),E.processDefinitionNames}function B(){return E.fieldTypes||(E.fieldTypes=d.get().then(function(a){var b=a.data||[];return E.fieldTypes=b.filter(function(a){return a.fieldTypeName&&!_.startsWith(a.fieldTypeName,l.STANDARDLIB_PREFIX)}),E.fieldTypes})),a.when(E.fieldTypes)}function C(b){return b&&!E.recordAssociations[b]&&(E.recordAssociations[b]=h.withRecordDefinitionName(b).then(function(a){return E.recordAssociations[b]=a,E.recordAssociations[b]})),a.when(E.recordAssociations[b])}function D(b){_.isString(b)&&(b=[b]);var c=_.transform(b,function(a,b){a[b]=C(b)},{});return a.all(c)}var E,F={recordDefinitions:{},recordDefinitionsByOverlay:{},processDefinitions:{},recordAssociations:{},namedListDefinitions:{},namedListDefinitionNameDataPage:null,processDefinitionNames:null,recordDefinitionDescriptors:null,userRoles:null,userGroups:null,fieldTypes:null};return m(),{clear:m,getRecordDefinition:n,getRecordDefinitionFromOverlay:o,getRecordDefinitions:p,getGroupDataPage:q,getRoleDataPage:r,getRecordDefinitionDescriptors:u,getProcessDefinition:w,getProcessDefinitions:x,setProcessDefinition:y,getProcessDefinitionNames:z,getProcessDefinitionNamesSync:A,getNamedListDefinitionNameDataPage:t,getNamedListDefinition:s,getFieldTypes:B,getRecordAssociations:D}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.cache").factory("rxGlobalCache",["$q","rxBundleDescriptorDataPageResource",function(a,b){function c(){f=_.cloneDeep(g)}function d(){return f.bundleDescriptors?a.when(f.bundleDescriptors):b.get().then(function(a){return f.bundleDescriptors=a.data,f.bundleDescriptors})}function e(a){return d().then(function(b){return _.find(b,{id:a})})}var f,g={bundleDescriptors:null};return c(),{clear:c,getBundleDescriptors:d,getBundleDescriptor:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker").factory("rxDefinitionPickerCache",["$q","rxRecordDefinitionDataPageResource","rxNamedListDefinitionDataPageResource","rxProcessDefinitionDataPageResource","rxAssociationDefinitionDataPageResource","RX_VIEW_DEFINITION","rxViewDefinitionDataPageResource",function(a,b,c,d,e,f,g){function h(a){rx.assert.assertFunction(a.$on,"Should be scope instance"),a.$on("$destroy",function(){i(a)}),w.push(a)}function i(a){_.remove(w,a),_.isEmpty(w)&&j()}function j(){v=_.clone(x)}function k(){return v.allRecordDefinitionDescriptors||(v.allRecordDefinitionDescriptors=b.get(-1,0,{propertySelection:["name"]},{"default-bundle-scope":void 0}).then(function(a){return v.allRecordDefinitionDescriptors=a.data,v.allRecordDefinitionDescriptors})),a.when(v.allRecordDefinitionDescriptors)}function l(){return v.rxRecordDefinitionDescriptors||(v.rxRecordDefinitionDescriptors=b.get(-1,0,{propertySelection:["name"],rxDefinitionsOnly:!0},{"default-bundle-scope":void 0}).then(function(a){return v.rxRecordDefinitionDescriptors=a.data,v.rxRecordDefinitionDescriptors})),a.when(v.rxRecordDefinitionDescriptors)}function m(){return v.allViewDefinitionDescriptors||(v.allViewDefinitionDescriptors=g.get(-1,0,{propertySelection:["name"],viewType:f.viewType.regular},{"default-bundle-scope":void 0}).then(function(a){return v.allViewDefinitionDescriptors=a.data,v.allViewDefinitionDescriptors})),a.when(v.allViewDefinitionDescriptors)}function n(){return v.allProcessDefinitionDescriptors||(v.allProcessDefinitionDescriptors=d.get(-1,0,{propertySelection:["name"]},{"default-bundle-scope":void 0}).then(function(a){return v.allProcessDefinitionDescriptors=a.data,v.allProcessDefinitionDescriptors})),a.when(v.allRecordDefinitionDescriptors)}function o(){return v.bundleProcessDefinitionDescriptors||(v.bundleProcessDefinitionDescriptors=d.get(-1,0,{propertySelection:["name"],requireDependent:!0}).then(function(a){return v.bundleProcessDefinitionDescriptors=a.data,v.bundleProcessDefinitionDescriptors})),a.when(v.bundleProcessDefinitionDescriptors)}function p(){return v.bundleRecordDefinitionDescriptors||(v.bundleRecordDefinitionDescriptors=b.get(-1,0,{propertySelection:["name"],requireDependent:!0}).then(function(a){return v.bundleRecordDefinitionDescriptors=a.data,v.bundleRecordDefinitionDescriptors})),a.when(v.bundleRecordDefinitionDescriptors)}function q(){return v.bundleViewDefinitionDescriptors||(v.bundleViewDefinitionDescriptors=g.get(-1,0,{propertySelection:["name"],requireDependent:!0,viewType:f.viewType.regular}).then(function(a){return v.bundleViewDefinitionDescriptors=a.data,v.bundleViewDefinitionDescriptors})),a.when(v.bundleViewDefinitionDescriptors)}function r(){return v.allNamedListDefinitionDescriptors||(v.allNamedListDefinitionDescriptors=c.get(-1,0,{propertySelection:["name"]},{"default-bundle-scope":void 0}).then(function(a){return v.allNamedListDefinitionDescriptors=a.data,v.allNamedListDefinitionDescriptors})),a.when(v.allNamedListDefinitionDescriptors)}function s(){return v.bundleNamedListDefinitionDescriptors||(v.bundleNamedListDefinitionDescriptors=c.get(-1,0,{propertySelection:["name"],requireDependent:!0}).then(function(a){return v.bundleNamedListDefinitionDescriptors=a.data,v.bundleNamedListDefinitionDescriptors})),a.when(v.bundleNamedListDefinitionDescriptors)}function t(){return v.allAssociationDescriptors||(v.allAssociationDescriptors=e.get(-1,0,{propertySelection:["name"]},{"default-bundle-scope":void 0}).then(function(a){return v.allAssociationDescriptors=a.plain().data,v.allAssociationDescriptors})),a.when(v.allAssociationDescriptors)}function u(){return v.bundleAssociationDescriptors||(v.bundleAssociationDescriptors=e.get(-1,0,{propertySelection:["name"],requireDependent:!0}).then(function(a){return v.bundleAssociationDescriptors=a.plain().data,v.bundleAssociationDescriptors})),a.when(v.bundleAssociationDescriptors)}var v,w=[],x={allViewDefinitionDescriptors:null,bundleViewDefinitionDescriptors:null,allRecordDefinitionDescriptors:null,rxRecordDefinitionDescriptors:null,bundleRecordDefinitionDescriptors:null,allNamedListDefinitionDescriptors:null,bundleNamedListDefinitionDescriptors:null,allAssociationDescriptors:null,bundleAssociationDescriptors:null,allProcessDefinitionDescriptors:null,bundleProcessDefinitionDescriptors:null};return j(),{registerConsumer:h,getBundleRecordDefinitionDescriptors:p,getAllRecordDefinitionDescriptors:k,getRxRecordDefinitionDescriptors:l,getBundleViewDefinitionDescriptors:q,getAllViewDefinitionDescriptors:m,getAllNamedListDefinitionDescriptors:r,getBundleNamedListDefinitionDescriptors:s,getBundleAssociationDefinitionDescriptors:u,getAllAssociationDefinitionDescriptors:t,getAllProcessDefinitionDescriptors:n,getBundleProcessDefinitionDescriptors:o}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("RxAutoComplete",["$q",function(a){function b(){this.initialize.apply(this,arguments)}return b.prototype={initialize:angular.noop,getSuggestions:function(b){var c=b.text.substr(0,b.cursor.position),d=this._getLastToken(c);if(d){var e=this.extractData(d,b);if(e.component&&_.isFunction(e.component.getAutoCompleteList))return e.component.getAutoCompleteList({fieldPath:e.fieldPath})}return a.when([])},isAutoCompleteAvailable:function(a){var b=!0,c=a.text.substr(0,a.cursor.position),d=this._getLastToken(c);if(d){var e=this.extractData(d,a);if(e.component&&_.isFunction(e.component.getAutoCompleteList))if(_.endsWith(_.trim(c),'"')){var f=c.lastIndexOf(d),g=c.substr(f+d.length);g=g.replace(/\s+/g,""),'="'!==g&&(b=!1)}else b=!1;else b=!1}else b=!1;return b},extractData:function(){rx.assert.fail("Method extractData should be implemented")},_getLastToken:function(a){return _.last(this._findTokens(a))},_findTokens:function(a){return a.match(/(\$[^{} ]+\$)|((\${[^{]+}))/g)}},b.extend=Backbone.Model.extend,b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxDesignerCellHighlighter",function(){function a(a){var b={bpmn:{"bpmn.Event":".scalable circle.outer","bpmn.Annotation":".rotatable path.stroke",link:"path.connection","bpmn.Flow":"path.connection","bpmn.Gateway":".scalable polygon.body","bpmn.Activity":".scalable rect.outer","basic.Rect":".scalable rect"},rx:{"rx.TextAnnotation":".rotatable path.stroke","rx.TextAnnotationAssociation":"path.connection","rx.SequenceFlow":"path.connection","rx.ParallelGateway":".scalable polygon.body","rx.ExclusiveGateway":".scalable polygon.body","rx.StartEvent":".scalable circle.outer","rx.EndEvent":".scalable circle.outer","rx.CallActivity":".scalable rect.outer","rx.SubProcess":".scalable rect.outer","rx.ReceiveTask":".scalable rect.outer","rx.ProcessAction":".scalable rect.outer","rx.UserTask":".scalable rect.outer","rx.TimerEvent":".scalable circle.outer"}},c=Backbone.View.extend({cellView:void 0,cellViewHighlighterV:void 0,options:{strokeWidth:10,circleRadius:31.5,color:"green"},initialize:function(a){this.cellView=a,this.listenTo(this.cellView.paper,"scale translate",this.update),this.$el=this.cellView.$el},render:function(a){this.options=_.extend({},_.result(this,"options"),a||{}),this.cellView.model.on("remove",this.remove),this.update()},update:function(){this._eraseHighlight(),this._drawHighlight()},remove:function(a){this._eraseHighlight(),Backbone.View.prototype.remove.apply(this,arguments)},_eraseHighlight:function(){this.cellViewHighlighterV&&this.cellViewHighlighterV.remove()},_drawHighlight:function(){var a=b.rx[this.cellView.model.prop("type")]||b.bpmn[this.cellView.model.prop("type")],c=this.cellView.$el.find(a).first(),d=c[0].outerHTML?V(c[0].outerHTML).clone():void 0;d&&(d.attr({stroke:this.options.color,"stroke-width":this.options.strokeWidth}),"circle"==d.node.tagName&&d.attr({r:this.options.circleRadius}),this.cellViewHighlighterV=d,c.closest("g").prepend(d.node))}});return new c(a)}return{get:function(b){return b instanceof joint.dia.CellView?new a(b):angular.noop}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxDesignerUserPreferences",["$q","debounce","rxUserPreferencesServer","RX_USER_PREFERENCES","RX_DESIGNER",function(a,b,c,d,e){function f(a,f,g){var h=this;rx.assert.assertString(a),rx.assert.assertString(f),this.componentId=a,this.uiComponentSettingData={},this.uiComponentSettingData[d.fields.version]=f,this.uiComponentSettingData[d.fields.componentTypeName]=e.designer,this.uiComponentSettingData[d.fields.preferences]=g,this.savePreference=b(function(){return c.setUiComponentPreferences(h.componentId,h.uiComponentSettingData)},1e3)}function g(a,b,c){return new f(a,b,c)}return f.prototype={setStencilSettings:function(a){this.uiComponentSettingData[d.fields.preferences].stencilSettings=a,this.savePreference()},getStencilSettings:function(){var a=this;return c.getUiComponentPreferences(a.componentId).then(function(b){return b=b||{},_.assign(a.uiComponentSettingData[d.fields.preferences],b).stencilSettings})["catch"](function(){return a.uiComponentSettingData[d.fields.preferences].stencilSettings})}},{getInstance:g}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxOverlay",["rxCurrentUser","rxSession","RX_OVERLAY",function(a,b,c){function d(d,e){var f=a.get()||{},g=_.pick(b.getCurrentOverlayContext(),"overlayGroupId").overlayGroupId||f.defaultOverlayGroupId;return g===d&&null===e?c.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP:g===d?c.operationTypes.CUSTOMIZED_IN_THIS_OVERLAY_GROUP:c.operationTypes.NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP}function e(a,b){var e=b.overlayDescriptor||{parentOverlayGroupId:null},f=d(b.overlayGroupId,e.parentOverlayGroupId);return f===c.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP||b[a]}return{getOverlayOperation:d,isCustomizationEnabled:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxTimerEditor",["$uibModal",function(a){function b(b){return b=b||{},a.open({templateUrl:"scripts/components/designer/editors/timer-editor.html",controller:"TimerEditorController",backdrop:"static",resolve:{expressionContext:function(){return b.expressionContext}},windowClass:"rx-timer-editor-dialog"})}return{open:b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxActionElementInterface",["rxId","$q","dialogs","rxDesignerCache","$rootScope","definitionNameFilter","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h){function i(a){return"REQUIRED"===a.fieldOption&&(""===a.defaultValue||null===a.defaultValue||void 0===a.defaultValue)}function j(a){return _.includes(["createRecord","updateRecord","getRecord","getRecordsByQuery","deleteRecord"],a)}function k(a){return _.includes(["createRecord","updateRecord"],a)}function l(a){return"updateRecord"==a}function m(a){return _.includes(["associateRecords","associateChildRecord","disassociateRecords"],a)}function n(a){return"setSecurityLabel"===a}function o(a){return"getRecordsByQuery"===a}return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ActionElementInterface={_onChangeRxData:function(a,b,d){var e=this;if("rxData/inputMap/recordDefinitionName"===d.propertyPath&&(j(e.prop("rxData/actionTypeName"))||n(e.prop("rxData/actionTypeName")))){var f=e.prop("rxData/inputMap/recordDefinitionName");f!=e._lastRecordDefinitionName&&(e._lastRecordDefinitionName?c.confirm("Warning!","Input Map fields will be cleared. Do you want to continue?").result.then(function(){e._setRecordDefinitionName(f)},function(){e.prop("rxData/inputMap/recordDefinitionName",e._lastRecordDefinitionName)}):e._setRecordDefinitionName(f))}},_setRecordDefinitionName:function(a){var b=this,c=b.prop("rxData/actionTypeName");b._lastRecordDefinitionName=a,(k(c)||o(c))&&d.getRecordDefinition(a.replace(/^\"|\"$/g,"")).then(function(a){b._rebuildInputMap(a)}),b.commonDataDictionary=null,e.$broadcast(g.events.refreshInspector,b)},_rebuildInputMap:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData")),d={recordDefinitionName:b.inputs.rxData.inputMap.recordDefinitionName},e={recordDefinitionName:c.inputMap.recordDefinitionName},f=j(c.actionTypeName),g=this,h={type:"rx-inspector-input-map-fields",group:"inputMap"};if("updateRecord"===c.actionTypeName&&(d.recordID=b.inputs.rxData.inputMap.recordID,e.recordID=c.inputMap.recordID,d.attributes={enforceRequiredFields:!1},h.attributes={enforceRequiredFields:!1}),a){if(o(c.actionTypeName)){var i=g.prop("rxData/inputMap");_.map(i,function(a,f){d[f]=b.inputs.rxData.inputMap[f],e[f]=c.inputMap[f]});var k={group:"inputMap",label:"buil input",type:"rx-inspector-get-records-input-map-fields",index:2,attrs:{}};b.inputs.rxData.inputMap.inputMapFields=k}else f?b.inputs.rxData.inputMap=h:b.inputs.rxData.inputMap=_.assign(d,this._buildInspectorInputMap(a,b.readonly));c.inputMap=_.assign(e,this._buildDataInputMap(a))}else f?b.inputs.rxData.inputMap=h:b.inputs.rxData.inputMap=angular.copy(d),c.inputMap=angular.copy(e);this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0}),this.trigger("rx:change:inputs",this)},_buildInspector:function(a){var b=angular.copy(this.get("rxInspector")),c={recordDefinitionName:b.inputs.rxData.inputMap.recordDefinitionName},d=this.prop("rxData/actionTypeName");if(b.inputs.rxData.inputMap.recordID&&(c.recordID=b.inputs.rxData.inputMap.recordID),o(d)){var e={group:"inputMap",label:"buil input",type:"rx-inspector-get-records-input-map-fields",index:2,attrs:{}};b.inputs.rxData.inputMap.inputMapFields=e}else j(d)?(b.inputs.rxData.inputMap={type:"rx-inspector-input-map-fields",group:"inputMap"},l(d)&&(b.inputs.rxData.inputMap.attributes={enforceRequiredFields:!1})):b.inputs.rxData.inputMap=_.assign(c,this._buildInspectorInputMap(a,b.readonly));this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.trigger("rx:change:inputs",this)},_buildInspectorInputMap:function(a,b){var c=this.prop("rxData/actionTypeName"),d={};return this._getFieldDefinitions(a).forEach(function(a){if("updateRecord"!==c||a.id!==h.coreFieldIds.id){var e={label:a.name,type:"rx-inspector-expression-node-field",group:"inputMap"};if(a.resourceType===h.dataTypes.selection.resourceType&&(e.type="rx-inspector-expression-input-select",e.options=_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})),i(a))e.attrs={label:{"class":"required"}};else if(b){var f={},g={};f["rxData/inputMap/"+a.name]=void 0,g["rxData/inputMap/"+a.name]="",e.when={and:[{ne:f},{ne:g}]}}b&&(e.attrs=e.attrs||{},$(e.attrs).prop({input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}})),d[a.name]=e}}),d},_buildDataInputMap:function(a){var b={};return a&&this._getFieldDefinitions(a).forEach(function(a){b[a.name]=""}),b},_getFieldDefinitions:function(a){var b=angular.copy(this.get("rxData")),c=_(a.fieldDefinitions).filter(function(a){return"SYSTEM"!=a.fieldOption}).sortBy("name").value();return"createRecord"===b.actionTypeName&&(c=_.sortBy(c,function(a){return!i(a)})),c}},{isFieldRequired:i,isRecordAction:j,isCreateOrUpdateRecordAction:k,isUpdateRecordAction:l,isAssociationAction:m,isSetSecurityLabel:n,isGetRecordsByQuery:o}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxDataDictionary",["rxUtils",function(a){function b(b){return a.flattenTree({children:angular.copy(b)}).filter(function(a){return a&&angular.isDefined(a.value)})}return{convertTreeToList:b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxDefaultExpressionConfigurator",["$q","$rootScope","rxUtils","rxDataDictionary","rxExpressionConfigurationInterface","rxPropertyNavigator","RX_EXPRESSION_EDITOR",function(a,b,c,d,e,f,g){function h(a,b){return _.filter(c.flattenTree(a),b)}function i(a,b){var c="rxInspector/inputs/",d=c+a.replace(/\/\d*\//g,"/item/");if(!b.prop(d)){var e=d.split("/");e.splice(-1,0,"properties"),d=e.join("/")}return d}function j(a,b){_.forEach(a,function(a){a.tooltip=b?b+" > "+a.label:a.label,a.children&&j(a.children,a.tooltip)})}return e.extend({_model:null,_currentExpressionField:"",_availableExpressionFields:[],_expressionResults:{},initialize:function(b){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),
this._model=b,this._defaultDictionaryConfig={validateExpression:function(b,c){return a.when(!0)},updateDataDictionary:function(b,c){return a.when(b)},getExpandedNodes:function(b,c){var d=_.cloneDeep(b);return _.remove(d,{label:"General"}),a.when(d)},operators:g.operators.math}},getDataDictionary:function(){return _.cloneDeep(this.cellDataDictionary)},supportDynamicQualification:function(){return!!_.isFunction(this._model.supportDynamicQualification)&&this._model.supportDynamicQualification(this._currentExpressionField)},setCurrentExpressionField:function(a){var b=this._model;this._currentExpressionField=a,this._availableExpressionFields=_.filter(f.getExpressionFields(),function(a){return!_.isUndefined(b.prop(a.path))})},getCurrentExpressionField:function(){var a=this,b=_.find(this._availableExpressionFields,{path:a._currentExpressionField});return b||(b=this._model.prop(i(a._currentExpressionField,this._model))),this.updateDataDictionary(this.commonDataDictionary,this._currentExpressionField).then(function(c){return a.getExpandedNodes(c,a._currentExpressionField).then(function(d){return{value:a._model.prop(a._currentExpressionField),dataDictionary:c,label:b.label,operators:a.getOperators(a._currentExpressionField),expandedNodes:d}})})},getNextExpressionField:function(){var a=this,b=_.findIndex(this._availableExpressionFields,{path:a._currentExpressionField})+1;return this._currentExpressionField=this._availableExpressionFields[b].path,this.getCurrentExpressionField()},getPreviousExpressionField:function(){var a=this,b=_.findIndex(this._availableExpressionFields,{path:a._currentExpressionField})-1;return this._currentExpressionField=this._availableExpressionFields[b].path,this.getCurrentExpressionField()},doesPreviousExpressionFieldExist:function(){var a=this,b=_.findIndex(this._availableExpressionFields,{path:a._currentExpressionField});return 0!==b&&b!==-1},doesNextExpressionFieldExist:function(){var a=this,b=_.findIndex(this._availableExpressionFields,{path:a._currentExpressionField});return b!==this._availableExpressionFields.length-1&&b!==-1},validateExpressionField:function(a){return this.validateExpression(this._currentExpressionField,a)},setDefaultDictionaryConfig:function(a){_.assign(this._defaultDictionaryConfig,a)},registerExpressionConfig:function(a){this._updateDataDictionaryConfigs||(this._updateDataDictionaryConfigs=[]),rx.assert.assertInstanceof(a.regExp,RegExp,"regExp must be a regular expression."),_.defaults(a,this._defaultDictionaryConfig),this._updateDataDictionaryConfigs.push(a)},shouldRebuildCellDataDictionary:function(a){return!angular.equals(a,this.commonDataDictionary)},buildDataDictionary:function(c){if(this.shouldRebuildCellDataDictionary(arguments)){var e,f=this;return this.commonDataDictionary=c||this.commonDataDictionary,e=_.map(this._updateDataDictionaryConfigs,function(a){return a.updateDataDictionary.call(f,_.cloneDeep(f.commonDataDictionary))}),e.push(this._defaultDictionaryConfig.updateDataDictionary.call(f,_.cloneDeep(f.commonDataDictionary))),a.all(e).then(function(a){return f.cellDataDictionary=_(a).each(function(a){j(a)}).map(d.convertTreeToList).flatten().uniq("value").value(),b.$broadcast(g.events.refreshExpression),f.cellDataDictionary})}return b.$broadcast(g.events.refreshExpression),a.when(this.cellDataDictionary)},getOperators:function(a){if(a){var b=_.find(this._updateDataDictionaryConfigs,function(b){return a.match(b.regExp)})||this._defaultDictionaryConfig;return b.operators}return this._defaultDictionaryConfig.operators},updateDataDictionary:function(b,c){if(c){var d=_.find(this._updateDataDictionaryConfigs,function(a){return c.match(a.regExp)})||this._defaultDictionaryConfig;return a.when(d.updateDataDictionary.call(this,_.cloneDeep(b),c)).then(function(a){return j(a),a})}return a.when(this._defaultDictionaryConfig.updateDataDictionary.call(this,_.cloneDeep(b),c)).then(function(a){return j(a),a})},getExpandedNodes:function(b,c){if(c){var d=_.find(this._updateDataDictionaryConfigs,function(a){return c.match(a.regExp)})||this._defaultDictionaryConfig;return a.when(d.getExpandedNodes.call(this,_.cloneDeep(b),c))}return a.when(this._defaultDictionaryConfig.getExpandedNodes.call(this,_.cloneDeep(b),c))},validateExpression:function(b,c){if(b){var d=_.find(this._updateDataDictionaryConfigs,function(a){return b.match(a.regExp)})||this._defaultDictionaryConfig;return a.when(d.validateExpression.call(this,b,c))}return a.when(this._defaultDictionaryConfig.validateExpression.call(this,b,c))},findElement:h,addResult:function(a){this._model.prop(this._currentExpressionField,a)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxExpressionConfigurationInterface",function(){return joint.shapes.rx=joint.shapes.rx||{},Backbone.Model.extend({initialize:function(){},buildDataDictionary:function(a){},getDataDictionary:function(){},getOperators:function(a){},getCurrentExpressionField:function(){},setCurrentExpressionField:function(a){},getNextExpressionField:function(a){},getPreviousExpressionField:function(a){},doesPreviousExpressionFieldExist:function(a){},doesNextExpressionFieldExist:function(a){},validateExpressionField:function(){},addResult:function(){},getResults:function(){}})})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxExpressionEditor",["$uibModal","rxDefaultExpressionConfigurator",function(a,b){function c(c){c=c||{};var d={};return d.legend=c.expressionContext.legend,d.useDynamicQualification=c.expressionContext.useDynamicQualification,d.autoCompleteData=c.expressionContext.autoCompleteData||c.expressionContext.cell,d.autoComplete=c.expressionContext.autoComplete,d.expressionConfigurator={},c.expressionContext.expressionConfigurator?d.expressionConfigurator=c.expressionContext.expressionConfigurator:d.expressionConfigurator=b.getInstance(c.expressionContext.cell),d.expressionConfigurator.commonDataDictionary=c.expressionContext.dataDictionary||d.expressionConfigurator.commonDataDictionary,d.expressionConfigurator.setCurrentExpressionField(c.expressionContext.path),a.open({templateUrl:"scripts/components/expression-editor/expression-editor.html",controller:"ExpressionEditorController",backdrop:"static",resolve:{expressionContext:function(){return d}},windowClass:"rx-expression-editor-dialog "+(c.windowClass||"")})}return{open:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxRichExpressionEditorAutoCompletePlugin",["$q",function(a){return CKEDITOR.plugins.add("rx-autocomplete",{init:function(b){var c={};b.addCommand("autoComplete",{exec:function(b,d){d=d||{};var e=d.cursor||b.getCursor(),f=a.defer();f.promise.then(function(a){b.contextMenu&&(c={},b.addMenuGroup("suggestions"),$.each(a,function(a,d){var e="suggestionBox suggestionBoxItem"+a;c[e]=CKEDITOR.TRISTATE_OFF,b.addMenuItem(e,{id:d.id,label:d.label,group:"suggestions",icon:null,onClick:function(){b.focus(),b.insertHtml(this.id)}})})),b.contextMenu.show(b.document.getBody(),null,e.x,e.y)}),b.fire("updateAutoCompleteSuggestions",{deferred:f,text:d.text||b.getData(),cursor:e})}}),b.contextMenu.addListener(function(){return c}),b.contextMenu.onHide=function(){c={}},delete b._.menuItems.paste,delete b._.menuItems.cut,delete b._.menuItems.copy,b.getCursor=function(){b.gettingCursorPosition=!0;var a=b.document.createElement("span");b.insertElement(a);for(var c=0,d=0,e=a.$;e.offsetParent;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;c+=e.offsetLeft,d+=e.offsetTop,d+=30,a.setText(b.id);var f=b.getData().indexOf(b.id);return a.remove(),b.gettingCursorPosition=!1,{x:c,y:d,position:f}}}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxRichExpressionEditorPlugin",function(){function a(a){var b=a.match(/(\$[^{} ]+\$)|((\${[^{]+}))/g),c=a.replace(/(\$[^{} ]+\$)|((\${[^{]+}))/g,"__$RX_EXPRESSION$__");return c=c.replace(/ /g,"&nbsp;"),_.each(b,function(a){c=c.replace("__$RX_EXPRESSION$__",a)}),c}return CKEDITOR.plugins.add("rx-data-dictionary-item",{requires:"widget",init:function(b){function c(a){var c=d(a),e=_(b.dictionaryList).find(function(a){return _.isArray(a.value)?_.includes(a.value,c):a.value==c}),f=a;if(a=a.replace(/"/g,"&quot;"),e){var g=e.tooltip||"",h=g.replace("&","&amp;").replace('"',"&quot;");f='<span class="rx-data-dictionary-item" data-value="'+a+'" title="'+h+'"><span class="rx-data-dictionary-item-icon"><i class="icon '+(e.icon||"d-icon-angle_left")+'">&nbsp;</i></span><span class="rx-data-dictionary-item-value">'+e.label+"</span></span>"}else a.match(/^\${ruleContext\.\d+}/g)&&(f='<span class="rx-data-dictionary-item rx-data-dictionary-invalid-item" data-value="'+a+'"><span class="rx-data-dictionary-item-icon"><i class="icon d-icon-field_text">&nbsp;</i></span><span class="rx-data-dictionary-item-value">'+a.match(/\d+(?=})/)[0]+"</span></span>");return f}function d(a){var b=a;return/\$\\([A-Z]+)\$/.test(a)&&(b=b.split("\\").join("")),b}b.widgets.add("rx-data-dictionary-item",{inline:!0,upcast:function(a){if(a.hasClass("rx-data-dictionary-item")){var b=a.attributes;return b.style?b.style+=";display:inline-block":b.style="display:inline-block",!0}},downcast:function(a){return new CKEDITOR.htmlParser.cdata(a.attributes["data-value"])}}),b.on("toHtml",function(b){var d=_.isArray(b.data.dataValue)?b.data.dataValue[0]:b.data.dataValue;d=a(d);var e=d.match(/(\$[^{} ]+\$)|((\${[^{]+}))|("[^"]+")|('[^']+')/g);_(e).uniq().forEach(function(a){var b=c(a),e=new RegExp(a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g");d=d.replace(e,b)}).value(),b.data.dataValue=d+(e?"<span>&nbsp;</span>":"")},null,null,4),b.on("toDataFormat",function(a){a.data.dataValue=a.data.dataValue.replace(/<p>|<span>|<\/p>|<\/span>|<br \/>/g,""),a.data.dataValue=CKEDITOR.tools.htmlDecode(a.data.dataValue),a.data.dataValue=a.data.dataValue.replace(new RegExp(String.fromCharCode(160),"g")," ")},null,null,15),b.on("key",function(a){13==a.data.keyCode&&a.cancel()}),b.on("paste",function(a){var b=a.data.dataTransfer.getData("value");b&&(a.data.dataValue=b)})}}),{}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").factory("rxPropertyNavigator",function(){function a(a){c=a}function b(){return c}var c=[];return{getExpressionFields:b,setExpressionFields:a}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-editor").provider("rxPropertyEditor",function(){var a={},b=null;return{registerEditor:function(b,c){rx.assert.assertStringWithLength(c);var d=_.isArray(b)?b:[b];_.each(d,function(b){rx.assert.assertStringWithLength(b),rx.assert.assert(!a.hasOwnProperty(b),"Property editor for data type "+b+" has already been registered."),a[b]=c})},registerDefaultDataType:function(c){rx.assert.assert(a.hasOwnProperty(c),"Property editor for data type "+c+" has not been registered."),b=c},$get:["$templateCache",function(c){function d(a){return"/rx/components/property-editor/"+a+".html"}function e(c){var e;return a.hasOwnProperty(c)?e=d(c):(rx.assert.assert(b,"Property editor for data type "+c+" has not been registered."),e=d(b)),e}function f(b){return a.hasOwnProperty(b)}for(var g in a){var h=d(g);c.put(h,a[g])}return{getPropertyEditorTemplateUrl:e,isDataTypeRegistered:f}}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-filter").factory("rxSearchFilterModel",["$filter","RX_RECORD_DEFINITION","RX_DATA_TYPES",function(a,b,c){function d(a){return _.intersection(h.slice(),_.keys(a)).length>0}function e(a){return _.reduce(a,function(a,b,c){return _.reduce(b,function(a,b,d){var e=_.isString(b)?'"'+b+'"':b;switch(c){case"eq":return"'"+d+"'="+e;case"ne":return"'"+d+"'="+e;case"lt":return"'"+d+"'<"+e;case"lte":return"'"+d+"'<="+e;case"gt":return"'"+d+"'>"+e;case"gte":return"'"+d+"'>="+e;case"in":return"'"+d+"' IN "+e;default:return"'"+d+"'="+e}},!1)},!1)}function f(a){return d(a)?e(a):_.reduce(a,function(a,b,c){var d=_.map(b,f,this);switch(c){case"and":return"("+d.join(" AND ")+")";case"or":return"("+d.join(" OR ")+")";default:return"("+d.join(" AND ")+")"}},!1)}var g=function(b){function e(a){var b=[];return _.forEach(a,function(a){var c=f(a);b.push(c)}),b}function f(b){var d;switch(b.type){case c.integer:case c.real:case c.decimal:d={name:b.displayName,label:b.displayName,id:b.field,type:b.type,options:[{label:a("translate")("com.bmc.arsys.rx.standardlib.components.search-field.searchbox.placeholder")+" "+b.displayName,type:"number",from:0,to:0,minValue:b.minValue,maxValue:b.maxValue,criteria:{id:b.field,name:b.displayName}}]};break;case c.dateTime:case c.dateOnly:case c.timeOnly:d={name:b.displayName,label:b.displayName,id:b.field,type:b.type,options:[{name:b.displayName,label:b.displayName,type:"timeStampRange",format:"mediumDate",startDatePicker:{date:new Date},endDatePicker:{date:new Date},criteria:{id:b.field,name:b.displayName}}]};break;case c.selection:d={name:b.displayName,label:b.displayName,id:b.field,type:b.type,expanded:!0,options:[]},_.forEach(b.options,function(a){d.options.push({name:a,label:a,id:b.field,type:"constant",criteria:{name:b.displayName,id:b.field,type:b.type,value:[a]}})});break;case c["boolean"]:d={name:b.displayName,label:b.displayName,type:b.type,id:b.field,options:[]},_.forEach([!0,!1],function(a){d.options.push({name:a,label:a,type:"constant",criteria:{id:b.field,type:b.type,name:b.displayName,value:a}})});break;default:case c.character:d={name:b.displayName,label:b.displayName,id:b.field,type:b.type,options:[{label:a("translate")("com.bmc.arsys.rx.standardlib.components.search-field.searchbox.placeholder")+" "+b.displayName,type:"search",subtype:"keyword"}]}}return d}function g(b,d){var e=[],f=b&&b.and||[],g=_.map(f,function(a){return i(a)});return _.each(g,function(b){var f,g,h=_.keys(b[0])[0],i=_.find(d,{field:h}),j={name:i.displayName},k={id:i.field,name:i.displayName,type:i.type};switch(i.type){case c.dateTime:case c.dateOnly:case c.timeOnly:f=_.find(b,function(a){return["gt","gte"].indexOf(a.op)>=0}),g=_.find(b,function(a){return["lt","lte"].indexOf(a.op)>=0}),k.value={startDate:f[i.field],endDate:g[i.field]},j.label=a("date")(k.value.startDate,"medium")+" - "+a("date")(k.value.endDate,"medium"),j.criteria=k,e.push(j);break;case c.integer:case c.real:case c.decimal:f=_.find(b,function(a){return["gt","gte"].indexOf(a.op)>=0}),g=_.find(b,function(a){return["lt","lte"].indexOf(a.op)>=0}),k.value={from:f[i.field],to:g[i.field]},j.label=k.value.from+" - "+k.value.to,j.criteria=k,e.push(j);break;default:_.each(b,function(a){var b=a[i.field];j.label=b,j.name=b,i.type==c["boolean"]?k.value=b:k.value=[b],j.criteria=k,e.push(_.cloneDeep(j))})}}),e}function h(a){return _.reduce(a,function(a,b,c){return["lt","gt","gte","lte"].indexOf(c)>=0?(b.op=c,b):b},!1)}function i(a){return d(a)?h(a):_.reduce(a,function(a,b,c){var d=_.map(b,i,this);switch(c){case"and":return d;case"or":return d;default:return a}},!1)}this.initialFilter=b.initialFilters,this.filters=e(b.fields),this.selectedFilters=b.selectedFilters?g(b.selectedFilters,b.fields)||null:[],this.getSelectedFiltersExpression=function(){var a={},b=_.groupBy(this.selectedFilters,"criteria.id");return _.size(b)&&(a.and=[]),_.each(b,function(b){var d={};_.each(b,function(a){var b,e,f={};switch(a.criteria.type){case c.integer:case c.real:case c.decimal:d.and||(d={and:[]}),b={gte:{}},e={lte:{}},b.gte[a.criteria.id]=a.criteria.value.from,e.lte[a.criteria.id]=a.criteria.value.to,d.and.push(b,e);break;case c.dateTime:case c.dateOnly:case c.timeOnly:d.and||(d={and:[]}),b={gte:{}},e={lte:{}},b.gte[a.criteria.id]=new Date(a.criteria.value.startDate).toISOString(),e.lte[a.criteria.id]=new Date(a.criteria.value.endDate).toISOString(),a.criteria.type==c.dateOnly?(b.gte[a.criteria.id]=moment(b.gte[a.criteria.id]).format("YYYY-MM-DD"),e.lte[a.criteria.id]=moment(e.lte[a.criteria.id]).format("YYYY-MM-DD")):a.criteria.type==c.timeOnly&&(b.gte[a.criteria.id]=moment(b.gte[a.criteria.id]).format("hh:mm:ss"),e.lte[a.criteria.id]=moment(e.lte[a.criteria.id]).format("hh:mm:ss")),d.and.push(b,e);break;default:case c["boolean"]:case c.selection:case c.character:d.or||(d={or:[]}),f={eq:{}},f.eq[a.criteria.id]=_.isArray(a.criteria.value)?String(a.criteria.value[0]):String(a.criteria.value),d.or.push(f)}}),a.and.push(d)}),a}},h=["eq","ne","regex","lt","lte","gt","gte","in"];return{getSearchFilterModel:function(a){return new g(a)},generateSearchQuery:function(a){return(a||[]).map(function(a){return f(a)}).join(" AND ")}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").factory("rxHttpResponseErrorInterceptor",["$q","rxServerErrorHandler",function(a,b){function c(a){var b=[{status:404,contains:"/resources/i18n/locale"}];return _.find(b,function(b){return a.status===b.status&&a.data&&a.data.indexOf(b.contains)!=-1})}return{responseError:function(d){return c(d)||b.handleServerResponseError(d),a.reject(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").factory("rxHttpResponseMessageInterceptor",["rxServerMessageHandler","RX_ERROR_HANDLING",function(a,b){return{response:function(c){if(_.includes(c.config.url,"record/recordinstance")){var d=c.headers()[b.AR_MESSAGES_HEADER];d&&a.handleServerResponseMessage(d)}return c}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").factory("rxScriptErrorHandler",["rxNotificationMessage","RX_ERROR_HANDLING","rxLog","rxUtils",function(a,b,c,d){function e(e,f){var g=b.errorMessages.scriptError;d.isNonEmptyString(e.message)&&(g+=" "+e.message),a.error(_.trunc(g,b.maxErrorMessageLength),{suppressLog:!0}),c.error(g)}return{handleScriptError:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").factory("rxServerErrorHandler",["rxNotificationMessage","RX_ERROR_HANDLING","rxString","rxUtils",function(a,b,c,d){function e(a){var b=a.messageText;return a.messageAppendedText&&(b?b+=": "+a.messageAppendedText:b=a.messageAppendedText),b}function f(a){var d;if(0===a.status)d=b.errorMessages.httpNetworkError;else{var e=a.status||"";a.statusText&&(e+=" "+a.statusText),d=c.format(b.errorMessages.httpDefaultError,e)}return d}function g(c){a.error(_.trunc(c,b.maxErrorMessageLength))}function h(a){var b=!1;if(a.config&&_.isFunction(a.config.handleResponseError)&&(b=a.config.handleResponseError(a)),!b){var c,d=i(a);d?angular.forEach(d,function(a){c=e(a),g(c)}):(c=f(a),g(c))}}function i(a){return a&&a.data?_.filter(a.data,function(a){return"ERROR"===a.messageType&&(a.messageText||a.messageAppendedText)}):null}return{getServerResponseErrorDetails:i,handleServerResponseError:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.error-handling").factory("rxServerMessageHandler",["rxNotificationMessage","RX_ERROR_HANDLING","rxString",function(a,b,c){function d(d){var e=_.trunc(c.format("%s (%s): %s; %s",d.messageType,d.messageNumber,d.messageText||"",d.messageAppendedText||""),b.maxArMessageLength);"WARNING"===d.messageType?a.warning(e):a.info(e)}function e(a){var c=[];try{c=JSON.parse(a)}catch(e){}_(c).reject(function(a){return a.messageNumber===b.AR_NOTE_LOG_INFO}).forEach(d).value()}return{handleServerResponseMessage:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.expression-engine").factory("rxExpressionEngine",["rxExpressionHelper","rxUtils","rxLog",function(a,b,c){function d(a,b){return Boolean(a)&&Boolean(b)}function e(a,b){return Boolean(a)||Boolean(b)}function f(a,b){return _.contains(a,b)}function g(a){var b=!1;switch(a.type){case"BinaryExpression":b=g(a.left)&&g(a.right);break;case"UnaryExpression":b=g(a.argument);break;case"Literal":b=!0}return b}function h(a){if(!l[a]){var b=jsep(a);if(!g(b))throw new Error("Invalid syntax");l[a]=jsep(a)}return l[a]}function i(a,b){switch(a.type){case"BinaryExpression":var c=i(a.left,b),d=i(a.right,b);if(m[a.operator]){var e=m[a.operator](c,d);if(_.isNaN(e))throw new Error("Operator: "+a.operator+" has invalid arguments: "+c+", "+d);return e}throw new Error("Unknown binary operator: "+a.operator);case"Literal":return _.startsWith(a.value,"rx-${")?_.result(b,a.value.slice(5,-1)):a.value;case"UnaryExpression":if(n[a.operator]){var f=i(a.argument,b),g=n[a.operator](f);if(_.isNaN(g))throw new Error("Operator: "+a.operator+" has invalid argument: "+f);return g}throw new Error("Unknown unary operator: "+a.operator);default:throw new Error("Invalid syntax")}}function j(d,e){var f=d;if(_.isString(d))if(d=_.trim(d),b.isNonEmptyString(d)){var g,j=a.prepare(d);try{g=h(j)}catch(k){throw new Error('Cannot parse expression "'+d+'": '+k.message+".")}try{f=i(g,e||{})}catch(k){throw new Error('Cannot evaluate expression "'+d+'": '+k.message+".")}}else f=null;return c.debug('EVALUATED EXPRESSION "'+d+'" : '+f),f}function k(c){var d=!0;if(b.isNonEmptyString(c)){var e=a.prepare(c);try{h(e)}catch(f){d=!1}}return d}jsep.addBinaryOp("LIKE",7),jsep.addBinaryOp("AND",2),jsep.addBinaryOp("OR",1),jsep.addBinaryOp("=",6);var l={},m={"=":function(a,b){return Boolean(a==b)},"+":function(a,b){return _.isUndefined(a)?b:_.isUndefined(b)?a:a+b},"-":function(a,b){return _.isUndefined(a)&&(a=0),_.isUndefined(b)&&(b=0),a-b},"*":function(a,b){return _.isUndefined(a)&&(a=0),_.isUndefined(b)&&(b=0),a*b},"/":function(a,b){return _.isUndefined(a)||_.isUndefined(b)?0:a/b},"<":function(a,b){return a<b},">":function(a,b){return a>b},">=":function(a,b){return a>=b},"<=":function(a,b){return a<=b},"!=":function(a,b){return a!=b},"%":function(a,b){return _.isUndefined(a)||_.isUndefined(b)?0:a%b},AND:d,and:d,OR:e,or:e,LIKE:f,like:f},n={"-":function(a){return _.isUndefined(a)?0:-Number(a)},"!":function(a){return!Boolean(a)}};return{evaluate:j,isValid:k}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.expression-engine").factory("rxExpressionHelper",function(){function a(a){return a.replace(/null/gi,null)}function b(a){return a.replace(/not/gi,"!")}function c(a){return a.replace(/or/gi,"OR")}function d(a){return a.replace(/and/gi,"AND")}function e(a){return a.replace(/like/gi,"LIKE")}function f(a,b,c){var d=c.match(a);return{matches:d,expression:c.replace(a,b)}}function g(a,b,c){return _.each(a,function(a){c=c.replace(b,a)}),c}function h(a,b,c){return _.each(a,function(a){c=c.replace(b,'"rx-'+a+'"')}),c}function i(a){var b=a.replace(new RegExp(String.fromCharCode(160),"g")," "),c=f(/'[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"/g,"RX_STRING",b),d=f(/\${[^}]+}/g,"RX_EXPRESSION",c.expression),e=d.expression;return _.each(j,function(a){e=a(e)}),e=h(d.matches,"RX_EXPRESSION",e),g(c.matches,"RX_STRING",e)}var j=[];return j.push(a),j.push(b),j.push(d),j.push(c),j.push(e),{prepare:i,extractTokens:f,insertTokens:g}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.i18n").factory("i18n",["rxString",function(a){var b={sendUserMessage:"Send Message",sendUserMessageByTemplate:"Send Message by Templ","com.bmc.arsys.server.rx.services.expression.ExpressionServiceImpl":"Expressions","com.bmc.arsys.server.rx.services.record.RecordServiceImpl":"Records","com.bmc.arsys.rx.usermessage.business.impl.UserMessageServiceImpl":"User Messages","com.example.taskmanager.service.TaskService":"Tasks","com.bmc.arsys.rx.approval.business.impl.ApprovalServiceImpl":"Approvals","com.bmc.arsys.rx.services.process.domain.StartEventDefinition":"Start","com.bmc.arsys.rx.services.process.domain.EndEventDefinition":"End","com.bmc.arsys.rx.services.process.domain.ParallelGatewayDefinition":"Parallel","com.bmc.arsys.rx.services.process.domain.ExclusiveGatewayDefinition":"Exclusive","com.bmc.arsys.rx.services.process.domain.UserTaskDefinition":"User Task","com.bmc.arsys.rx.services.process.domain.CallActivityDefinition":"Call Activity","com.bmc.arsys.rx.services.process.domain.SubProcessDefinition":"Sub Process","com.bmc.arsys.rx.services.process.domain.ReceiveTaskDefinition":"Receive Task","com.bmc.arsys.rx.services.process.domain.TextAnnotation":"Annotation","com.bmc.arsys.rx.services.process.domain.BoundaryEventDefinition":"Timer","com.bmc.arsys.rx.services.rule.domain.ShowMessageAction":"Show Message","com.bmc.arsys.rx.services.rule.domain.SetFieldAction":"Set Field","com.bmc.arsys.rx.services.rule.domain.StartProcessInstanceAction":"Start Process",ruleQualificationResourceType:"Qualification"};return function(c,d){d=!_.isBoolean(d)||d;var e=b[c];return!e&&d&&(e=a.prettify(c)),e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.i18n").factory("rxTranslationLoaderErrorHandler",["$q","$log",function(a,b){return function(b,c){return a.when({})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer").factory("rxNamedListDefinitionExpressionConfigurator",["$q","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b,c){return c.extend({initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var c={operators:b.operators.all};this.setDefaultDictionaryConfig(c)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer").factory("rxNamedListDefinitionModel",["$q","definitionNameFilter","rxBundleCache","rxDesignerCache","rxString","RX_EXPRESSION_EDITOR","rxNamedListDefinitionExpressionConfigurator","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER",function(a,b,c,d,e,f,g,h,i){var j=Backbone.Model.extend({constructor:function(a){var b=this.getRxData(a),c=this.getRxInspector(a);Backbone.Model.call(this,{id:"namedListDefinition",type:"rx.NamedListDefinition",rxData:b,rxInspector:c})},initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this._expressionConfigurator=new g(this);var a=this.get("rxData");a.recordDefinitionName&&this._onChangeRxData(null,a,{propertyPath:"rxData/recordDefinitionName",propertyValue:a.recordDefinitionName})},getExpressionConfigurator:function(){return this._expressionConfigurator},persist:function(a){var d=_.cloneDeep(this.get("rxData"));if(a.lastUpdateTime)d.name=a.name;else{var e=c.getBundleId(),f=e?e+":":"";d.name=f+b(d.name,"encode")}_.assign(a,d)},isLink:function(){return!1},prop:joint.dia.Cell.prototype.prop,_onChangeRxData:function(a,b,c){if("rxData/recordDefinitionName"===c.propertyPath){var d=this,e=d.get("rxInspector"),f=angular.copy(this.get("rxData"));return this.getFieldNameOptions().then(function(b){e.inputs.rxData.labelFieldId.options=b,e.inputs.rxData.valueFieldId.options=b,a&&(f.labelFieldId=null,f.valueFieldId=null),d.unset("rxData",{silent:!0,ignoreCommandManager:!0}),d.set("rxData",f,{ignoreCommandManager:!0}),d.unset("rxInspector",{ignoreCommandManager:!0}),d.set("rxInspector",e,{ignoreCommandManager:!0})})}},getCurrentRecordDefinition:function(){return d.getRecordDefinition(this.get("rxData").recordDefinitionName)},getFieldNameOptions:function(){return this.getCurrentRecordDefinition().then(function(a){var b=[];return a&&(b=_(a.fieldDefinitions).map(function(a){return{content:a.name,value:+a.id}}).compact().sortBy("content").unshift(h.EMPTY_FIELD_NAME_OPTION).value()),b})},getRxData:function(a){var c=_.cloneDeep(_.pick(a,["name","recordDefinitionName","queryCriteria","labelFieldId","valueFieldId","shouldSortOnLabel"]));return c.name=b(c.name),c},getRxInspector:function(a){var b=!a.lastUpdateTime,c=!1,d=function(a){var b=c?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},b,a)},e=d();return{inputs:{rxData:{name:{label:"Name of List",type:"rx-inspector-text",group:"general",tooltip:{text:"Use this field to associate the named list with a record, to be finally displayed in the view definition.",placement:"top"},attrs:d({label:{"class":"required"},input:{readonly:!b,maxlength:254}})},recordDefinitionName:{label:"Record Definition",type:"rx-inspector-definition-picker",definitionType:i.definitionTypes.record.type,group:"general",attrs:d({label:{"class":"required"}}),align:"left"},queryCriteria:{label:"Condition to Filter List Results",type:"rx-inspector-expression-textarea-field",group:"general",tooltip:{text:"Define a condition using expressions to filter list results.",placement:"top"},attrs:e},labelFieldId:{label:"Label Field to be Displayed to the User",type:"select",group:"general",options:[],attrs:d({label:{"class":"required"}})},valueFieldId:{label:"Source Field for Value of Selection",type:"rx-inspector-select",group:"general",tooltip:{text:"Use this field to associate the named list with a record. This named list is finally displayed in the view definition.",placement:"top"},options:[],attrs:d({label:{"class":"required"}})}}},groups:{general:{label:"General",index:1}}}}});return{getModel:function(a){return new j(a)},getDataDictionary:function(b,c){var f={};return b.recordDefinitionName?d.getRecordDefinition(b.recordDefinitionName).then(function(a){return f={label:"Record Instance"},f.children=a?_(a.fieldDefinitions).map(function(a){if(a.resourceType!==h.dataTypes.attachment.resourceType)return{label:e.prettify(a.name),type:c.fields.type,icon:c.fields.icon,value:"'"+a.name+"'"}}).compact().sortBy("label").value():[],f}):a.when([])},validate:function(b){var c=[],d=b.name;return _.isEmpty(_.trim(d))&&(d="Named List Definition",c.push({elementId:b.id,elementName:d,propertyName:"name",type:"error",message:"Name of List cannot be blank."})),_.isEmpty(_.trim(b.recordDefinitionName))&&c.push({elementId:b.id,elementName:d,propertyName:"recordDefinitionName",type:"error",message:"Record Definition cannot be blank."}),_.isEmpty(_.trim(b.labelFieldId))&&c.push({elementId:b.id,elementName:d,propertyName:"labelFieldId",type:"error",message:"Label Field cannot be blank."}),_.isEmpty(_.trim(b.valueFieldId))&&c.push({elementId:b.id,elementName:d,propertyName:"valueFieldId",type:"error",message:"Value Field cannot be blank."}),a.when(c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer").factory("rxNamedListDataDictionary",["rxNamedListDefinitionModel","$q",function(a,b){function c(){g={plainNamedListDefinition:{},currentDataDictionary:{}}}function d(a){return angular.equals(a,g.plainNamedListDefinition)?b.when(g.currentDataDictionary):(g.plainNamedListDefinition=angular.copy(a),f(a).then(function(a){return g.currentDataDictionary=a,g.currentDataDictionary}))}var e={fields:{label:"Field Name",type:"Field Name",icon:"d-icon-arrow_right_square_input"}},f=function(b){return a.getDataDictionary(b,e).then(function(a){return _.compact([a])})},g={plainNamedListDefinition:{},currentDataDictionary:{}},h=function(){return _.values(e)};return{clear:c,getCommonDataDictionary:d,getLegend:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.navigation.navigation-guard").factory("rxNavigationGuard",["$rootScope","$window","$state","$q",function(a,b,c,d){function e(a,b,c,d,e){var f;return i.some(function(g){return!!(f=g(a,b,c,d,e))}),f}function f(a){return i.unshift(a),function(){var b=i.indexOf(a);b>=0&&i.splice(b,1)}}function g(){i=[]}var h,i=[];return b.onbeforeunload=function(a){var c=e(a);if(c)return(a||b.event).returnValue=c,c},a.$on("$stateChangeStart",function(f,g,i,j,k){var l=[],m=e(f,g,i,j,k);return m&&!b.confirm(m)?f.preventDefault():void(h?h=!1:(f.preventDefault(),a.$broadcast("beforeUnload",l),d.all(l).then(function(){h=!0,c.go(g,i)})))}),{registerGuardian:f,clearGuardians:g}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.navigation.previous-state").provider("rxPreviousState",function(){function a(a){return angular.isString(a)?a:a.name}function b(b,d){var e=a(b);return c.some(function(b){var c=a(b);return c===e&&(!b.params||angular.equals(b.params,d))})}var c=[""];return{ignoreState:function(d,e){if(!b(d,e)){var f=a(d);
c.push({name:f,params:e})}},$get:["$rootScope","$state",function(a,c){function d(){return g}function e(a,b){if(g)c.go(g.state,g.params);else{if(!a)throw new Error("previous state is invalid");c.go(a,b)}}function f(){g=null}var g=null,h=null;return a.$on("$stateChangeStart",function(a,c,d,e,f){h=g,b(e,f)||(g={state:e,params:f})}),a.$on("$stateChangeError",function(){g=h,h=null}),a.$on("$stateChangeSuccess",function(){h=null}),{get:d,go:e,reset:f}}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").factory("rxProcessElementSearch",["rxId",function(a){function b(a,b){return _.find(a.flowElements,b)||_.find(a.artifacts,b)}function c(a,c){var d=b(a,c);return d||(d=_.find(h(a),c)),d}function d(a,c){var d,e=b(a,{id:c});return d=e?a:_.find(h(a),function(a){return b(a,{id:c})})}function e(a,b){return c(a,{id:b})}function f(a,b){return _.filter(h(a),b)}function g(a,b){return _.each(h(a),b)}function h(a){return _([]).concat(a.flowElements||[],a.artifacts||[]).transform(function(a,b){a.push(b),b.flowElements&&a.push(h(b))}).flatten().value()}return{each:g,find:c,filter:f,findById:e,findOwner:d,flattenElements:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxApprovalProcessElement",["$q","$injector","RX_PROCESS_DESIGNER","RX_APPROVAL_PROCESS","rxDesignerCache","rxRecordInstanceDataPageResource","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface","rxProcessShapeInterface","rxProcessShapeViewInterface","rxDefaultExpressionConfigurator","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ApprovalProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),!this.model.get("parent")&&this.model.get("expanded")&&_.isUndefined(this.model.get("embeds"))&&!this.model._expanding&&this.expand()},getPaperScale:function(){return new V(this.paper.viewport).scale()}}),joint.shapes.rx.ApprovalProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend({_expanding:!1,defaults:joint.util.deepSupplement({type:"rx.ApprovalProcess",activityType:"call-activity",content:"Approval Process",subProcess:!0,expanded:!1,collapsedSize:{width:70,height:60},size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){b.inputMap&&b.inputMap["Record Definition Name"]&&(b.inputMap=_.omit(b.inputMap,"Record Definition Name"));var c=[];for(var d in b.inputMap){var e=b.inputMap[d];e&&("RecordInstance"===d?c.push({assignTarget:d,expression:e}):/^\"|\"$/g.test(e)?c.push({assignTarget:d,expression:e}):c.push({assignTarget:d,expression:'"'+e+'"'}))}b.inputMap=c}return b},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),this.listenTo(this,"change:expanded",this._updateGeometryGroup)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new l(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},_onChangeRxData:function(a,b,c){var d=this;/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&d._rebuildOutputMap(c.propertyValue),b.label&&a.prop("rxData/inputMap/Approval Process Name",b.label,{ignoreCommandManager:!0})},updateInspectorConfig:function(b){var c=this,e=angular.copy(this.get("rxInspector"));if(this._updateGeometryGroup(),e.inputs.rxData.outputMap){var g=m.getProcessVariables(b);e.inputs.rxData.outputMap.item.properties.assignTarget.options=g,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",e,{silent:!0}),c.trigger("rx:change:inputs",c)}if(this.prop("rxInspector/inputs/rxData/inputMap")){var h=[];return f.withName(d.apForm.definitionName).get(-1,0,{propertySelection:d.apForm.fields.formName.id}).then(function(a){_.forEach(a.data,function(a,b){h.push(a[d.apForm.fields.formName.id])}),h?c.prop("rxInspector/inputs/rxData/inputMap/Record Definition Name/options",h):c.prop("rxInspector/inputs/rxData/inputMap/Record Definition Name/options","")})}return a.when()},_updateGeometryGroup:function(){var a=this.get("rxInspector"),b={input:{readonly:!0,disabled:!0}},c=this.get("expanded")?b:{};a.inputs.position.x.attrs=a.inputs.position.y.attrs=c,a.inputs.size.width.attrs=a.inputs.size.height.attrs=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",a,{silent:!0}),this.trigger("rx:change:inputs",this)},getCalledProcessDefinition:function(){return e.getProcessDefinition(this.prop("rxData/calledProcessDefinitionName"))},_prepareForExpand:function(){var c=this,d=a.defer();return this.getCalledProcessDefinition().then(function(a){g.loadFlowElementDependencies(a).then(function(){var f=c.prop("rxData/calledProcessDefinitionName")+":"+c.get("id"),h=g.getProcessClone(f);if(!h){var i=b.get("rxProcessDesignerElementManager"),j=i.cloneProcessDefinition(a);h={definition:j,graph:i.getGraph(j,{readonly:!0})},g.setProcessClone(f,h),e.setProcessDefinition(j)}d.resolve(h)})},function(){d.reject()}),d.promise},_afterExecuteExpand:function(){this.attr({".body":{fill:"#f2f2f2"},".sub-process":{visibility:"hidden"}})},_prepareCellModel:function(a){this.constructor.__super__._prepareCellModel.apply(this,arguments),a.set({inCallActivity:!0},{silent:!0})},_executeCollapse:function(){this.unembedElements(),this.set("parentCallActivity",null,{silent:!0}),this.attr({".body":{fill:"#ffffff"},".sub-process":{visibility:"visible"}})}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.callActivity,name:"com.bmc.arsys.rx.approval:Approval Process",calledProcessDefinitionName:"com.bmc.arsys.rx.approval:Approval Process",description:"",inputMap:{},outputMap:[],multiInstanceLoopDefinition:null};return a&&(_.assign(b,a),b.inputMap={},a.inputMap.forEach(function(a){b.inputMap[a.assignTarget]=a.expression,"Approval Process Name"===a.assignTarget&&(b.label=a.expression)})),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},inputMap:{"Record Definition Name":{label:"Record Definition",type:"select",group:"inputMap",options:[],attrs:b({label:{"class":"required"}})},RecordInstance:{label:"Record",type:"rx-inspector-expression-node-field",group:"inputMap",attrs:b({label:{"class":"required"}})},"Approval Flow Name":{label:"Approval Flow Name",type:"rx-inspector-approval-flow-selector-field",group:"inputMap"}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxInspector(d),f=this.getRxData(a);return a&&0===a.outputMap.length&&d&&(delete e.groups.outputMap,delete e.inputs.rxData.outputMap),{rxData:f,rxInspector:e}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.ApprovalProcess(b)},validate:function(b,c){var d=[],e=b.outputMap||[],f=b.label;_.isEmpty(_.trim(b.label))&&b.hasOwnProperty("label")&&d.push({elementId:b.id,elementName:"Approval Process",propertyName:"label",type:"error",message:"Label cannot be blank."});var g=_.where(c.flowElements,{targetNode:b.id}).length,h=_.where(c.flowElements,{sourceNode:b.id}).length;0!==g&&1===h||d.push({elementId:b.id,elementName:f,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),_.each(e,function(a,c){_.isEmpty(_.trim(a.assignTarget))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),_.isEmpty(_.trim(a.expression))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var i=_.uniq(e,"assignTarget");return i.length!==e.length&&d.push({elementId:b.id,elementName:f,type:"error",message:"Output Map parameter names must be unique."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxARApprovalProcessElement",["$q","$injector","RX_PROCESS_DESIGNER","RX_AR_APPROVAL_PROCESS","rxDesignerCache","rxRecordInstanceDataPageResource","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface","rxDefaultExpressionConfigurator","rxProcessShapeInterface","rxProcessShapeViewInterface","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ARApprovalProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),!this.model.get("parent")&&this.model.get("expanded")&&_.isUndefined(this.model.get("embeds"))&&!this.model._expanding&&this.expand()},getPaperScale:function(){return new V(this.paper.viewport).scale()}}),joint.shapes.rx.ARApprovalProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend({_expanding:!1,defaults:joint.util.deepSupplement({type:"rx.ARApprovalProcess",activityType:"call-activity",content:"AR Approval Process",subProcess:!0,expanded:!1,collapsedSize:{width:70,height:60},size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){var c=[];_.forEach(b.inputMap,function(a,d){var e=b.inputMap[d];e&&("Request ID"===d?c.push({assignTarget:d,expression:e}):/^\"|\"$/g.test(e)?c.push({assignTarget:d,expression:e}):c.push({assignTarget:d,expression:'"'+e+'"'}))}),b.inputMap=c}return b},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),this.listenTo(this,"change:expanded",this._updateGeometryGroup)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new j(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},_onChangeRxData:function(a,b,c){var d=this;/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&d._rebuildOutputMap(c.propertyValue)},updateInspectorConfig:function(b){var c=this,e=a.defer(),g=[],h=angular.copy(this.get("rxInspector"));if(this._updateGeometryGroup(),h.inputs.rxData.outputMap){var i=m.getProcessVariables(b);h.inputs.rxData.outputMap.item.properties.assignTarget.options=i,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",h,{silent:!0}),c.trigger("rx:change:inputs",c)}if(this.prop("rxInspector/inputs/rxData/inputMap")){var j=[],k=[];g.push(f.withName(d.apForm.definitionName).get(-1,0,{propertySelection:d.apForm.fields.formName.id}).then(function(a){_.forEach(a.data,function(a,b){j.push(a[d.apForm.fields.formName.id])}),_.isEmpty(j)?c.prop("rxInspector/inputs/rxData/inputMap/Form Name/options",""):c.prop("rxInspector/inputs/rxData/inputMap/Form Name/options",j)})),g.push(f.withName(d.apProcessDefinitionForm.definitionName).get(-1,0,{propertySelection:d.apProcessDefinitionForm.fields.process.id}).then(function(a){_.forEach(a.data,function(a,b){k.push(a[d.apProcessDefinitionForm.fields.process.id])}),_.isEmpty(k)?c.prop("rxInspector/inputs/rxData/inputMap/Approval Process Name/options",""):c.prop("rxInspector/inputs/rxData/inputMap/Approval Process Name/options",k)})),a.all(g).then(function(){e.resolve()})}else e.resolve();return e.promise},_updateGeometryGroup:function(){var a=this.get("rxInspector"),b={input:{readonly:!0,disabled:!0}},c=this.get("expanded")?b:{};a.inputs.position.x.attrs=a.inputs.position.y.attrs=c,a.inputs.size.width.attrs=a.inputs.size.height.attrs=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",a,{silent:!0}),this.trigger("rx:change:inputs",this)},getCalledProcessDefinition:function(){return e.getProcessDefinition(this.prop("rxData/calledProcessDefinitionName"))},_prepareForExpand:function(){var c=this,d=a.defer();return this.getCalledProcessDefinition().then(function(a){g.loadFlowElementDependencies(a).then(function(){var f=c.prop("rxData/calledProcessDefinitionName")+":"+c.get("id"),h=g.getProcessClone(f);if(!h){var i=b.get("rxProcessDesignerElementManager"),j=i.cloneProcessDefinition(a);h={definition:j,graph:i.getGraph(j,{readonly:!0})},g.setProcessClone(f,h),e.setProcessDefinition(j)}d.resolve(h)})},function(){d.reject()}),d.promise},_afterExecuteExpand:function(){this.attr({".body":{fill:"#f2f2f2"},".sub-process":{visibility:"hidden"}})},_prepareCellModel:function(a){this.constructor.__super__._prepareCellModel.apply(this,arguments),a.set({inCallActivity:!0},{silent:!0})},_executeCollapse:function(){this.unembedElements(),this.set("parentCallActivity",null,{silent:!0}),this.attr({".body":{fill:"#ffffff"},".sub-process":{visibility:"visible"}})}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.callActivity,name:"com.bmc.arsys.rx.approval:AR Approval Process",calledProcessDefinitionName:"com.bmc.arsys.rx.approval:AR Approval Process",description:"",inputMap:{},outputMap:[]};return a&&(_.assign(b,a),b.inputMap={},_.forEach(a.inputMap,function(a,c){b.inputMap[a.assignTarget]=a.expression.replace(/^\"|\"$/g,"")})),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},inputMap:{"Request ID":{label:"Record",type:"rx-inspector-expression-node-field",group:"inputMap",attrs:b({label:{"class":"required"}})},"Form Name":{label:"Form Name",type:"select",group:"inputMap",options:[],attrs:b({label:{"class":"required"}})},"Approval Process Name":{label:"Approval Process Name",type:"select",group:"inputMap",options:[],attrs:b({label:{"class":"required"}})}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxInspector(d),f=this.getRxData(a);return a&&0===a.outputMap.length&&d&&(delete e.groups.outputMap,delete e.inputs.rxData.outputMap),{rxData:f,rxInspector:e}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.ARApprovalProcess(b)},validate:function(b,c){var d=[],e=b.outputMap||[],f=b.label;_.isEmpty(_.trim(b.label))&&b.hasOwnProperty("label")&&d.push({elementId:b.id,elementName:"Approval Process",propertyName:"label",type:"error",message:"Label cannot be blank."});var g=_.where(c.flowElements,{targetNode:b.id}).length,h=_.where(c.flowElements,{sourceNode:b.id}).length;0!==g&&1===h||d.push({elementId:b.id,elementName:f,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),_.each(e,function(a,c){_.isEmpty(_.trim(a.assignTarget))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),_.isEmpty(_.trim(a.expression))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var i=_.uniq(e,"assignTarget");return i.length!==e.length&&d.push({elementId:b.id,elementName:f,type:"error",message:"Output Map parameter names must be unique."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxArtifactShapeInterface",["rxId","rxProcessShapeInterface",function(a,b){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ArtifactShapeInterface=_.assign({},joint.shapes.rx.ProcessShapeInterface,{labelPath:null,persist:function(b){var c=_.find(b.artifacts,{id:a.get(this.id)});return this.canPersist()?c?_.assign(c,this.prop("rxData")):(c=this.createNewProcessElement(),b.artifacts.push(c)):c&&(_.pull(b.artifacts,c),c=null),c}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxAssignmentProcessElement",["$q","$injector","RX_PROCESS_DESIGNER","RX_ASSIGNMENT_PROCESS","rxString","rxDesignerCache","rxRecordInstanceDataPageResource","rxDefaultExpressionConfigurator","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface","rxProcessShapeInterface","rxProcessShapeViewInterface","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.AssignmentProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),!this.model.get("parent")&&this.model.get("expanded")&&_.isUndefined(this.model.get("embeds"))&&!this.model._expanding&&this.expand()},getPaperScale:function(){return new V(this.paper.viewport).scale()}}),joint.shapes.rx.AssignmentProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend({_expanding:!1,defaults:joint.util.deepSupplement({type:"rx.AssignmentProcess",activityType:"call-activity",content:"Assignment Process",subProcess:!0,expanded:!1,collapsedSize:{width:70,height:60},size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){var c=[];for(var d in b.inputMap){var e=b.inputMap[d];e&&("Application Record Instance"===d?c.push({assignTarget:d,expression:e}):/^\"|\"$/g.test(e)?c.push({assignTarget:d,expression:e}):c.push({assignTarget:d,expression:'"'+e+'"'}))}b.inputMap=c}return b},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),this.listenTo(this,"change:expanded",this._updateGeometryGroup)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new h(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},_onChangeRxData:function(a,b,c){var d=this;/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&d._rebuildOutputMap(c.propertyValue)},updateInspectorConfig:function(b){var c=this,e=angular.copy(this.get("rxInspector"));if(this._updateGeometryGroup(),e.inputs.rxData.outputMap){var f=n.getProcessVariables(b);e.inputs.rxData.outputMap.item.properties.assignTarget.options=f,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",e,{silent:!0}),c.trigger("rx:change:inputs",this)}if(this.prop("rxInspector/inputs/rxData/inputMap")){var h=[];return g.withName(d.assignmentProcessForm.definitionName).get(-1,0,{}).then(function(a){_.forEach(a.data,function(a,b){h.push(a[d.assignmentProcessForm.fields.processName.id])}),h?c.prop("rxInspector/inputs/rxData/inputMap/Assignment Process Name/options",h):c.prop("rxInspector/inputs/rxData/inputMap/Record Definition Name/options","")})}return a.when()},_updateGeometryGroup:function(){var a=this.get("rxInspector"),b={input:{readonly:!0,disabled:!0}},c=this.get("expanded")?b:{};a.inputs.position.x.attrs=a.inputs.position.y.attrs=c,a.inputs.size.width.attrs=a.inputs.size.height.attrs=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",a,{silent:!0}),this.trigger("rx:change:inputs",this)},getCalledProcessDefinition:function(){return f.getProcessDefinition(this.prop("rxData/calledProcessDefinitionName"))},_prepareForExpand:function(){var c=this,d=a.defer();return this.getCalledProcessDefinition().then(function(a){i.loadFlowElementDependencies(a).then(function(){var e=c.prop("rxData/calledProcessDefinitionName")+":"+c.get("id"),g=i.getProcessClone(e);if(!g){var h=b.get("rxProcessDesignerElementManager"),j=h.cloneProcessDefinition(a);g={definition:j,graph:h.getGraph(j,{readonly:!0})},i.setProcessClone(e,g),f.setProcessDefinition(j)}d.resolve(g)})},function(){d.reject()}),d.promise},_afterExecuteExpand:function(){this.attr({".body":{fill:"#f2f2f2"},".sub-process":{visibility:"hidden"}})},_prepareCellModel:function(a){this.constructor.__super__._prepareCellModel.apply(this,arguments),a.set({inCallActivity:!0},{silent:!0})},_executeCollapse:function(){this.unembedElements(),this.set("parentCallActivity",null,{silent:!0}),this.attr({".body":{fill:"#ffffff"},".sub-process":{visibility:"visible"}})}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.callActivity,name:"com.bmc.arsys.rx.assignment:Wait for Assignment",calledProcessDefinitionName:"com.bmc.arsys.rx.assignment:Wait for Assignment",description:"",outputMap:[],multiInstanceLoopDefinition:null};return a&&(_.assign(b,a),b.inputMap={},a.inputMap.forEach(function(a){"Application Record Instance"===a.assignTarget?b.inputMap[a.assignTarget]=a.expression:b.inputMap[a.assignTarget]=a.expression.replace(/^\"|\"$/g,"")})),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},inputMap:{"Application Record Instance":{label:"Record",type:"rx-inspector-expression-node-field",group:"inputMap",attrs:b({label:{"class":"required"}})},"Assignment Process Name":{label:"Assignment Process Name",type:"select",options:[],group:"inputMap",attrs:b({label:{"class":"required"}})}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxInspector(d),f=this.getRxData(a);return a&&0===a.outputMap.length&&d&&(delete e.groups.outputMap,delete e.inputs.rxData.outputMap),{rxData:f,rxInspector:e}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.AssignmentProcess(b)},validate:function(b,c){var d=[],f=b.outputMap||[],g=b.label;e.isEmptySafe(b.label)&&b.hasOwnProperty("label")&&d.push({elementId:b.id,elementName:"Assignment Process",propertyName:"label",type:"error",message:"Label cannot be blank."});var h=_.where(c.flowElements,{targetNode:b.id}).length,i=_.where(c.flowElements,{sourceNode:b.id}).length;0!==h&&1===i||d.push({elementId:b.id,elementName:g,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),_.each(f,function(a,c){e.isEmptySafe(a.assignTarget)&&d.push({elementId:b.id,elementName:g,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),e.isEmptySafe(a.expression)&&d.push({elementId:b.id,elementName:g,propertyName:"outputMap/"+c+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var j=_.uniq(f,"assignTarget");return j.length!==f.length&&d.push({elementId:b.id,elementName:g,type:"error",message:"Output Map parameter names must be unique."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxCallActivityElementExpressionConfigurator",["$q","rxId","RX_RECORD_DEFINITION","RX_EXPRESSION_EDITOR","rxMultiInstanceExpressionConfigurator","rxDesignerCache",function(a,b,c,d,e,f){var g=/\$\{.*\}/,h=function(a){return a&&a.match(g)};return e.extend({initialize:function(d){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var e={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(c,e){return d._lastCalledProcessDefinitionName&&!h(d._lastCalledProcessDefinitionName)?f.getProcessDefinition(d._lastCalledProcessDefinitionName).then(function(e){var f=_(c).find({label:"General"}),g=_(c).find({label:"Process Variables"}),h={label:d.prop("rxData/label"),children:[]},i=[];return e.outputParams.forEach(function(a){h.children.push({label:a.name,icon:"d-icon-arrow_chart",value:"${activityResults."+b.get(d.id)+"."+a.name+"}"})}),g&&i.push(g),h.children.length?a.when(i.concat(f,h)):a.when(i.concat(f))}):a.when(c)}};this.registerExpressionConfig(e);var g={regExp:/^(rxData\/inputMap\/)/g,updateDataDictionary:function(b,e){return d._lastCalledProcessDefinitionName&&!h(d._lastCalledProcessDefinitionName)&&e?f.getProcessDefinition(d._lastCalledProcessDefinitionName).then(function(a){var d=_(a.inputParams).find({name:_(e.split("/")).findLast(),resourceType:c.dataTypes.selection.resourceType});if(d){var f=_(d.optionNamesById).map(function(a,b){return{label:a,value:b}}).value();b.unshift({label:"Options",children:f})}return b}):a.when(b)}};this.registerExpressionConfig(g);var i={regExp:/^rxData\/calledProcessDefinitionName$/g,validateExpression:function(b,c){return c&&!c.match(/\$\{.*\}/)?f.getProcessDefinitionNames().then(function(a){return _.includes(a,c)}):a.when(!0)}};this.registerExpressionConfig(i)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxCallActivityElement",["$q","$injector","$rootScope","RX_PROCESS_DESIGNER","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","RX_EXPRESSION_EDITOR","i18n","rxId","dialogs","definitionNameFilter","rxDesignerCache","rxCallActivityElementModel","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface","rxProcessShapeInterface","rxProcessShapeViewInterface","rxMultiInstanceConfiguration","rxMultiInstanceInterface","rxProcessElementSearch",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){return"REQUIRED"===a.fieldOption&&(null===a.defaultValue||_.isUndefined(a.defaultValue))}joint.shapes.rx=joint.shapes.rx||{};var w=/\$\{.*\}/,x=function(a){return a&&a.match(w)};return{getRxData:function(a){var b={resourceType:d.processElementResourceTypes.callActivity,name:"Call Activity",calledProcessDefinitionName:"",description:"",inputMap:[],outputMap:[],loopType:"",multiInstanceLoopDefinition:null};return a&&!a.lastUpdateTime&&a.calledProcessDefinitionName&&(b.calledProcessDefinitionName=a.calledProcessDefinitionName,b.name=a.calledProcessDefinitionName),a&&(_.assign(b,a),b.inputMap={},a.inputMap.forEach(function(a){b.inputMap[a.assignTarget]=a.expression})),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},calledProcessDefinitionName:{label:"Called Process",type:"rx-inspector-select-expression-dropdown",group:"properties",index:3,definitionType:f.definitionTypes.process.type,attrs:b({label:{"class":"required"}})},sampleProcessDefinitionName:{label:"Sample Process",type:"select",options:[],group:"properties",index:4,attrs:b(),when:{regex:{"rxData/calledProcessDefinitionName":w}}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}},when:{or:[{and:[{ne:{"rxData/calledProcessDefinitionName":""}},{not:{regex:{"rxData/calledProcessDefinitionName":w}}}]},{and:[{regex:{"rxData/calledProcessDefinitionName":w}},{ne:{"rxData/sampleProcessDefinitionName":""}}]}]}}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a),f=this.getRxInspector(d);return a&&0===a.outputMap.length&&d&&(delete f.groups.outputMap,delete f.inputs.rxData.outputMap),{rxData:e,rxInspector:f}},getShape:function(a){var b=a?{
calledProcessDefinitionName:a,inputMap:[],outputMap:[]}:null,c=this.getRxConfig(b);return new joint.shapes.rx.CallActivity(c)},validate:function(b,c){var e,f=[],g=a.defer(),i=b.outputMap||[],j=b.label;if(_.isEmpty(_.trim(b.label)))j=h(d.processElementResourceTypes.callActivity),b.hasOwnProperty("label")&&f.push({elementId:b.id,elementName:j,propertyName:"label",type:"error",message:"Label cannot be blank."});else{var k=u.filter(c,{label:j});k.length>1&&f.push({elementId:b.id,elementName:j,propertyName:"label",type:"error",message:"Label must be unique."})}var m=_.where(c.flowElements,{targetNode:b.id}).length,n=_.where(c.flowElements,{sourceNode:b.id}).length;if(0!==m&&1===n||f.push({elementId:b.id,elementName:j,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),_.isEmpty(_.trim(b.calledProcessDefinitionName)))f.push({elementId:b.id,elementName:j,propertyName:"calledProcessDefinitionName",type:"error",message:"Called Process cannot be blank."});else{var o=b.calledProcessDefinitionName;x(b.calledProcessDefinitionName)&&(o=b.sampleProcessDefinitionName?b.sampleProcessDefinitionName:null),o&&(e=l.getProcessDefinition(o),e.then(function(a){a&&_(a.inputParams).filter(v).pluck("name").each(function(a){var c=_(b.inputMap).find({assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||f.push({elementId:b.id,elementName:j,propertyName:"inputMap/"+a,type:"warning",message:'Input Map Property "'+a+'" cannot be blank.'})}).value()},function(){f.push({elementId:b.id,elementName:j,propertyName:"calledProcessDefinitionName",type:"error",message:"Called Process Name is not valid."})}))}_.each(i,function(a,c){_.isEmpty(_.trim(a.assignTarget))&&f.push({elementId:b.id,elementName:j,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),_.isEmpty(_.trim(a.expression))&&f.push({elementId:b.id,elementName:j,propertyName:"outputMap/"+c+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var p=_.uniq(i,"assignTarget");return p.length!==i.length&&f.push({elementId:b.id,elementName:j,type:"error",message:"Output Map parameter names must be unique."}),s.validate(b,j,f),e?e["finally"](function(){g.resolve(f)}):g.resolve(f),g.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxCallActivityElementModel",["$q","$injector","$rootScope","RX_PROCESS_DESIGNER","RX_RECORD_DEFINITION","RX_EXPRESSION_EDITOR","RX_INSPECTOR_SELECT_EXPRESSION_DROPDOWN","i18n","rxId","dialogs","definitionNameFilter","rxDesignerCache","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxCallActivityElementExpressionConfigurator","rxExpandableProcessShapeViewInterface","rxProcessShapeInterface","rxProcessShapeViewInterface","rxMultiInstanceConfiguration","rxMultiInstanceInterface","rxProcessElementSearch","actionTypeNameFilter","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a){return l.getProcessDefinitionNames().then(function(b){return _(b).without(a).map(function(a){return{content:k(a),value:a}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()})}function y(a){return"REQUIRED"===a.fieldOption&&(null===a.defaultValue||_.isUndefined(a.defaultValue))}joint.shapes.rx=joint.shapes.rx||{};var z=/\$\{.*\}/,A=function(a){return a&&a.match(z)};return joint.shapes.rx.CallActivityView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this.model,"rx:change:calledProcessDefinitionName",this.onChangeLastCalledProcessDefinitionName),!this.model.get("parent")&&this.model.get("expanded")&&_.isUndefined(this.model.get("embeds"))&&!this.model._expanding&&this.expand()},onChangeLastCalledProcessDefinitionName:function(){this.model.get("expanded")&&(this.collapse(),this.expand())},getPaperScale:function(){return new V(this.paper.viewport).scale()}}),joint.shapes.rx.CallActivity=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend(joint.shapes.rx.MultiInstanceInterface).extend({_lastCalledProcessDefinitionName:"",_lastSelectExpressionDropdownValue:"",_lastSampleProcessDefinition:null,_expanding:!1,defaults:joint.util.deepSupplement({type:"rx.CallActivity",activityType:"call-activity",content:h(d.processElementResourceTypes.callActivity),subProcess:!0,expanded:!1,collapsedSize:{width:70,height:60},size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){var c=[];for(var d in b.inputMap){var e=b.inputMap[d];e&&c.push({assignTarget:d,expression:e})}b.calledProcessDefinitionName=b.calledProcessDefinitionName.trim(),b.inputMap=c,this._persistMultiInstanceInfo(b)}return b},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),this.listenTo(this,"change:expanded",this._updateGeometryGroup),a&&a.rxData&&a.rxData.calledProcessDefinitionName&&(this._lastCalledProcessDefinitionName=a.rxData.calledProcessDefinitionName,A(this._lastCalledProcessDefinitionName)&&(this._lastSelectExpressionDropdownValue=g.dropDownOptionsValue.expression)),a&&a.rxData&&a.rxData.sampleProcessDefinitionName&&(this._lastSampleProcessDefinition=a.rxData.sampleProcessDefinitionName)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new o(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},_onChangeRxData:function(a,b,c){var d=this,e=A(b.calledProcessDefinitionName);!d._lastCalledProcessDefinitionName&&b.calledProcessDefinitionName?(d._lastSelectExpressionDropdownValue=d.selectExpressionDropdownValue,d._setCalledProcess(b.calledProcessDefinitionName)):d._lastCalledProcessDefinitionName&&!b.calledProcessDefinitionName?j.confirm("Warning!","Called Process, Input Map and Output Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setCalledProcess(b.calledProcessDefinitionName),d._lastSelectExpressionDropdownValue=d.selectExpressionDropdownValue,d._lastSampleProcessDefinition=null},function(){d.prop("rxData/calledProcessDefinitionName",d._lastCalledProcessDefinitionName),d.selectExpressionDropdownValue=d._lastSelectExpressionDropdownValue}):d._lastCalledProcessDefinitionName!=b.calledProcessDefinitionName&&j.confirm("Warning!","Input Map and Output Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setCalledProcess(b.calledProcessDefinitionName),d._lastSampleProcessDefinition=null},function(){d.prop("rxData/calledProcessDefinitionName",d._lastCalledProcessDefinitionName)}),e&&b.sampleProcessDefinitionName?d._lastSampleProcessDefinition?b.sampleProcessDefinitionName!=d._lastSampleProcessDefinition&&j.confirm("Warning!","Input Map and Output Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setSampleProcess(b.sampleProcessDefinitionName)},function(){d.prop("rxData/sampleProcessDefinitionName",d._lastSampleProcessDefinition)}):d._setSampleProcess(b.sampleProcessDefinitionName):e&&!b.sampleProcessDefinitionName&&d._lastSampleProcessDefinition&&j.confirm("Warning!","Input Map and Output Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setSampleProcess(b.sampleProcessDefinitionName)},function(){d.prop("rxData/sampleProcessDefinitionName",d._lastSampleProcessDefinition)}),/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&d._rebuildOutputMap(c.propertyValue)},_setSampleProcess:function(a){var b=this;b._lastSampleProcessDefinition=a,l.getProcessDefinition(a).then(function(a){b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0}),b._rebuildInputMap(a),b._updateMultiInstanceInfo().then(function(){c.$broadcast(f.events.refreshInspector,b)})})},_setCalledProcess:function(a){var b=this;if(b._lastCalledProcessDefinitionName=a,b.prop("rxData/sampleProcessDefinitionName","",{ignoreCommandManager:!0,silent:!0}),A(a)){b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0});var d=angular.copy(b.get("rxInspector")),e=angular.copy(b.get("rxData"));delete d.inputs.rxData.inputMap,e.inputMap=[],b.unset("rxInspector",{silent:!0}),b.prop("rxInspector",d,{silent:!0}),b._updateMultiInstanceInfo().then(function(){b.trigger("rx:change:calledProcessDefinitionName"),c.$broadcast(f.events.refreshInspector,b)})}else l.getProcessDefinition(a).then(function(a){b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0}),b._rebuildInputMap(a),b._updateMultiInstanceInfo().then(function(){b.trigger("rx:change:calledProcessDefinitionName"),c.$broadcast(f.events.refreshInspector,b)})})},_initInputMap:function(a){var b=angular.copy(this.get("rxInspector"));b.inputs.rxData.inputMap=this._buildInspectorInputMap(a,b.readonly),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0})},_rebuildInputMap:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData"));a?(b.inputs.rxData.inputMap=this._buildInspectorInputMap(a,b.readonly),c.inputMap=this._buildDataInputMap(a)):(delete b.inputs.rxData.inputMap,c.inputMap=[]),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0})},_buildDataInputMap:function(a){var b={};return a.inputParams.forEach(function(a){b[a.name]=""}),b},_buildInspectorInputMap:function(a,b){var c={},d=_.sortBy(a.inputParams,function(a){return!y(a)});return d.forEach(function(d){var f={label:d.name,type:"rx-inspector-expression-node-field",group:"inputMap"};if(d.resourceType===e.dataTypes.selection.resourceType&&(f.type="rx-inspector-expression-input-select",f.options=_.map(d.optionNamesById,function(a,b){return{content:a,value:b}})),y(d))f.attrs={label:{"class":"required"}};else if(b){var g={},h={};g["rxData/inputMap/"+a.name]=void 0,h["rxData/inputMap/"+a.name]="",f.when={and:[{ne:g},{ne:h}]}}b&&(f.attrs=f.attrs||{},f.attrs.select=f.attrs.input=f.attrs.textarea={readonly:!0,disabled:!0}),c[d.name]=f}),c},updateInspectorConfig:function(b){var c=this,d=[],e=angular.copy(this.get("rxInspector"));if(this._updateGeometryGroup(),e.inputs.rxData.outputMap){var f=w.getProcessVariables(b);e.inputs.rxData.outputMap.item.properties.assignTarget.options=f,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",e,{silent:!0}),c.trigger("rx:change:inputs",c)}return d.push(c._updateMultiInstanceInfo()),this.prop("rxInspector/inputs/rxData/sampleProcessDefinitionName/options").length||x(this.get("ownerProcessDefinitionName")).then(function(a){c.prop("rxInspector/inputs/rxData/sampleProcessDefinitionName/options",a),c._lastCalledProcessDefinitionName&&(A(c._lastCalledProcessDefinitionName)?c._lastSampleProcessDefinition&&d.push(l.getProcessDefinition(c._lastSampleProcessDefinition).then(function(a){c._initInputMap(a)})):d.push(l.getProcessDefinition(c._lastCalledProcessDefinitionName).then(function(a){c._initInputMap(a)})))}),A(this.prop("rxData/calledProcessDefinitionName"))&&(this.selectExpressionDropdownValue=g.dropDownOptionsValue.expression),a.all(d)},_updateGeometryGroup:function(){var a=this.get("rxInspector"),b={input:{readonly:!0,disabled:!0}},c=this.get("expanded")?b:{};a.inputs.position.x.attrs=a.inputs.position.y.attrs=c,a.inputs.size.width.attrs=a.inputs.size.height.attrs=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",a,{silent:!0}),this.trigger("rx:change:inputs",this)},_showMultiInstanceInfo:function(){var a=A(this._lastCalledProcessDefinitionName);return this.prop("rxInspector/readonly")?this.prop("rxData/multiInstanceLoopDefinition"):this._lastCalledProcessDefinitionName&&a?this.prop("rxData/sampleProcessDefinitionName"):!(!this._lastCalledProcessDefinitionName||a)&&this._lastCalledProcessDefinitionName},_canExpand:function(){var b=a.defer();return this._lastCalledProcessDefinitionName?A(this._lastCalledProcessDefinitionName)?b.reject("Dynamic Call Activity cannot be expanded."):this.getCalledProcessDefinition().then(function(a){a.layout?b.resolve():b.reject("The Called Process does not have a layout.")}):b.reject("Please select a Called Process before expanding this Call Activity."),b.promise},getCalledProcessDefinition:function(){return l.getProcessDefinition(this._lastCalledProcessDefinitionName)},_prepareForExpand:function(){var c=this,d=a.defer();return this.getCalledProcessDefinition().then(function(a){m.loadFlowElementDependencies(a).then(function(){var e=c._lastCalledProcessDefinitionName+":"+c.get("id"),f=m.getProcessClone(e);if(!f){var g=b.get("rxProcessDesignerElementManager"),h=g.cloneProcessDefinition(a);f={definition:h,graph:g.getGraph(h,{readonly:!0})},m.setProcessClone(e,f),l.setProcessDefinition(h)}d.resolve(f)})},function(){d.reject()}),d.promise},_afterExecuteExpand:function(){this.attr({".body":{fill:"#f2f2f2"},".sub-process":{visibility:"hidden"}})},_prepareCellModel:function(a){this.constructor.__super__._prepareCellModel.apply(this,arguments),a.set({inCallActivity:!0},{silent:!0})},_executeCollapse:function(){this.unembedElements(),this.set("parentCallActivity",null,{silent:!0}),this.attr({".body":{fill:"#ffffff"},".sub-process":{visibility:"visible"}})}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxEndEventElement",["$q","i18n","RX_PROCESS_DESIGNER","rxProcessShapeInterface","rxProcessShapeViewInterface","rxProcessElementSearch",function(a,b,c,d,e,f){joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.EndEventView=joint.dia.ElementView.extend(joint.shapes.rx.ProcessShapeViewInterface);var g="End";return joint.shapes.rx.EndEvent=joint.shapes.bpmn.Event.extend(joint.shapes.rx.ProcessShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.EndEvent",size:{width:50,height:50},attrs:{".label":{fill:"gray",text:b(c.processElementResourceTypes.endEvent)}},eventType:"end"},joint.shapes.bpmn.Event.prototype.defaults),defaultName:g,labelPath:"attrs/.label/text",clearLabel:!0,elementCanvasSize:{width:30,height:30}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.endEvent,name:g,description:""};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:c,when:a?{and:[{ne:{"rxData/label":void 0}},{ne:{"rxData/label":""}}]}:void 0},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.EndEvent(a)},validate:function(d,e){var g=[],h=_.isEmpty(_.trim(d.label))?b(c.processElementResourceTypes.endEvent):d.label,i=_.where(e.flowElements,{targetNode:d.id}).length;i<1&&g.push({elementId:d.id,elementName:h,type:"warning",message:"At least one inbound sequence flow is required."});var j=_.where(e.flowElements,{sourceNode:d.id}).length;if(j>0&&g.push({elementId:d.id,elementName:h,type:"error",message:"Cannot have outbound sequence flows."}),!_.isEmpty(_.trim(d.label))){var k=f.filter(e,{label:h});k.length>1&&g.push({elementId:d.id,elementName:h,propertyName:"label",type:"error",message:"Label must be unique."})}return a.when(g)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxExclusiveGatewayElement",["$q","i18n","RX_PROCESS_DESIGNER","rxProcessShapeInterface","rxProcessElementSearch",function(a,b,c,d,e){joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ExclusiveGatewayView=joint.dia.ElementView.extend(joint.shapes.rx.ProcessShapeViewInterface);var f="Exclusive Gateway";return joint.shapes.rx.ExclusiveGateway=joint.shapes.bpmn.Gateway.extend(joint.shapes.rx.ProcessShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.ExclusiveGateway",icon:"cross",size:{width:60,height:60},attrs:{".label":{fill:"gray",text:b(c.processElementResourceTypes.exclusiveGateway)}}},joint.shapes.bpmn.Gateway.prototype.defaults),defaultName:f,labelPath:"attrs/.label/text",clearLabel:!0,elementCanvasSize:{width:40,height:40}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.exclusiveGateway,name:f,description:""};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:c,when:a?{and:[{ne:{"rxData/label":void 0}},{ne:{"rxData/label":""}}]}:void 0},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.ExclusiveGateway(a)},validate:function(d,f){var g=[],h=_.isEmpty(_.trim(d.label))?b(c.processElementResourceTypes.exclusiveGateway):d.label,i=_.where(f.flowElements,{targetNode:d.id}).length,j=_.where(f.flowElements,{sourceNode:d.id}).length,k=1===i&&j>1||1===j&&i>1;if(k){if(j>0){var l=_.where(f.flowElements,{sourceNode:d.id}),m=_.filter(l,function(a){return _.isEmpty(_.trim(a.condition))}).length;(0===m||m>1)&&g.push({elementId:d.id,elementName:h,propertyName:"label",type:"warning",message:"Exclusive Gateway must have one outgoing Sequence Flow with no Condition specified."})}}else g.push({elementId:d.id,elementName:h,type:"error",message:"The number of connections is invalid."});if(!_.isEmpty(_.trim(d.label))){var n=e.filter(f,{label:h});n.length>1&&g.push({elementId:d.id,elementName:h,propertyName:"label",type:"error",message:"Label must be unique."})}return a.when(g)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxExpandableProcessShapeViewInterface",["rxProcessShapeViewInterface",function(a){var b=20,c=35,d=25,e=200,f=200;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ExpandableProcessShapeViewInterface=_.assign({},joint.shapes.rx.ProcessShapeViewInterface,{initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this.model,"expand:begin",this.expandBeginHandler),this.listenTo(this.model,"expand:done",this.expandDoneHandler),this.listenTo(this.model,"collapse:begin",this.collapseBeginHandler),this.listenTo(this.model,"collapse:done",this.collapseDoneHandler),this.listenTo(this.model,"change:expanded",this.onChangeExpanded)},expand:function(){var a=this;this.model.expand().then(function(){a.parentResize(),a.isExpanding=!1})},parentResize:function(){var a=this;if(a.resizeAfterExpand(),a.model.get("parent")){var b=a.paper.findViewByModel(a.model.get("parent"));b&&b.parentResize&&!b.isExpanding&&b.parentResize()}},collapse:function(){this.notify("cell:collapse:begin"),this.model.collapse()},onChangeExpanded:function(){this.model.get("expanded")?this.expand():this.collapse()},expandBeginHandler:function(){this.notify("cell:expand:begin")},expandDoneHandler:function(){if(!this.isExpanding&&(this.resizeAfterExpand(),this.model.get("parent"))){var a=this.paper.findViewByModel(this.model.get("parent"));a&&a.expandDoneHandler&&a.expandDoneHandler()}},collapseBeginHandler:function(){this.notify("cell:collapse:begin")},collapseDoneHandler:function(){var a=this.model.get("collapsedSize"),b=this.model.get("position"),c=this.model.get("position"),d=g.rect(b.x,b.y,c.width,c.height),e=g.rect(b.x,b.y,a.width,a.height);this.model.resize(a.width,a.height),this.notify("cell:collapse:done",d,e)},resizeAfterExpand:function(){var a=this.model.get("collapsedSize"),h=this.model.get("position"),i=this.getEmbeddedBBox(),j=i.width+2*b,k=i.height+c+d;j<e&&(j=e),k<f&&(k=f);var l=g.rect(h.x,h.y,a.width,a.height),m=g.rect(h.x,h.y,j,k);this.model.resize(j,k),this.notify("cell:expand:done",l,m)},pointerdblclick:function(a,b,c){"rx.CallActivity"!=this.model.get("parentType")&&this.canInteract()&&(this.model.set("expanded",!this.model.get("expanded"),{ignoreCommandManager:!0}),this.isExpanding=!0,this._parent.pointerdblclick.apply(this,arguments))}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxExpandableProcessShapeInterface",["$q","rxNotificationMessage","rxProcessShapeInterface",function(a,b,c){joint.shapes.rx=joint.shapes.rx||{};var d=20,e=35;return joint.shapes.rx.ExpandableProcessShapeInterface=_.assign({},joint.shapes.rx.ProcessShapeInterface,{expand:function(){var c=this,d=a.defer();return this._expanding=!0,this._canExpand().then(function(){c._prepareForExpand().then(function(a){c.trigger("expand:begin"),c._executeExpand(a)["finally"](function(){c._expanding=!1,d.resolve()}),c.trigger("expand:done")},function(){c.trigger("expand:error"),c.set("expanded",!1,{silent:!0,ignoreCommandManager:!0}),c._expanding=!1,d.reject()})},function(a){c._expanding=!1,c.set("expanded",!1,{silent:!0,ignoreCommandManager:!0}),d.reject(),a&&b.info(a)}),d.promise},collapse:function(){this._expanding||(this.trigger("collapse:begin"),this._executeCollapse(),this._expanding=!1,this.trigger("collapse:done"))},unembedElements:function(){var a=this;angular.forEach(this.getEmbeddedCells(),function(b){b.rxUnembed=!0,a.unembed(b,{silent:!0}),_.isFunction(b.unembedElements)&&b.unembedElements(),b.remove({silent:!0})})},_executeCollapse:angular.noop,isExpandable:!0,_canExpand:function(){return a.when()},_prepareForExpand:function(){return a.when()},_executeExpand:function(b){var c=this,d=b.graph,e=[],f=_.filter(d.cells,function(a){return"rx.SequenceFlow"!=a.type&&"rx.TextAnnotationAssociation"!=a.type}),g=_.min(_.map(f,function(a){return a.position.x})),h=_.min(_.map(f,function(a){return a.position.y}));return this.collection.trigger("batch:start"),d.cells=_.sortBy(d.cells,function(a){return"rx.SequenceFlow"==a.type||"rx.TextAnnotationAssociation"==a.type}),d.cells.forEach(function(a){var d=joint.util.getByPath(c.collection.cellNamespace,a.type,"."),f=new d(a);c._prepareCellModel(f,b,g,h),f.graph=c.collection.graph,f.get("expanded")&&e.push(f.expand()),c.embed(f,{rxSilent:!0,silent:!0}),c.collection.add(f)}),this.collection.trigger("batch:stop"),this._afterExecuteExpand(),a.all(e)},_afterExecuteExpand:function(){},_prepareCellModel:function(a,b,c,f){var g=a.get("position"),h=this.get("position"),i={};g&&(i.position={x:g.x+h.x-c+d,y:g.y+h.y-f+e});var j=a.get("vertices");a.isLink()&&_.size(j)&&(_.each(j,function(a){a.x=a.x+h.x-c+d,a.y=a.y+h.y-f+e}),a.unset("vertices"),a.set("vertices",j)),i.z=this.get("z")+1,i.parentType=this.get("type"),a.set(i,{silent:!0})}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxMultiInstanceConfiguration",function(){function a(a){var b={label:{"class":"required"}},c=angular.copy(d);return a&&_.assign(b,f),c.properties.inputDataItem.attrs=b,c.properties.loopDataInputRef.attrs=b,c.properties.completionCondition.attrs={},c}function b(a){var b=angular.copy(e);return a&&_.assign(b.attrs,f),b}function c(a,b,c){a.multiInstanceLoopDefinition&&(_.isEmpty(_.trim(a.multiInstanceLoopDefinition.inputDataItem))&&c.push({elementId:a.id,elementName:b,type:"error",propertyName:"multiInstanceLoopDefinition/inputDataItem",message:"Input Data Item cannot be blank."}),_.isEmpty(_.trim(a.multiInstanceLoopDefinition.loopDataInputRef))&&c.push({elementId:a.id,elementName:b,type:"error",propertyName:"multiInstanceLoopDefinition/loopDataInputRef",message:"Input Data cannot be blank."}))}var d={type:"object",group:"multiInstance",properties:{inputDataItem:{label:"Input Data Item",type:"select",options:[]},loopDataInputRef:{label:"Input Data",type:"rx-inspector-expression-node-field"},completionCondition:{label:"Completion Criteria",type:"rx-inspector-expression-node-field"}},when:{regex:{"rxData/loopType":/true|false/}}},e={type:"select",label:"Loop Type",group:"multiInstance",attrs:{},options:[{value:"",content:""},{value:"false",content:"Parallel"},{value:"true",content:"Sequential"}]},f={input:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}};return{validate:c,getLoopTypeInspectorConfig:b,getMultiInstanceLoopInspectorConfig:a}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxMultiInstanceExpressionConfigurator",["RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b){return b.extend({initialize:function(b){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.registerExpressionConfig({regExp:/^rxData\/multiInstanceLoopDefinition\/completionCondition$/g,operators:a.operators.all}),this.registerExpressionConfig({regExp:/^rxData\/multiInstanceLoopDefinition/g,updateDataDictionary:function(a,b){var c=this.findElement(a,function(a){return _.includes(a.value,"._associations.")});return _.each(c,function(a){a.value=a.value.slice(0,-4)+"}"}),a},operators:a.operators.math})}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxMultiInstanceInterface",["$q","RX_EXPRESSION_EDITOR","rxMultiInstanceConfiguration","rxProcessShape","rxDesignerCache",function(a,b,c,d,e){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.MultiInstanceInterface={_inputDataItemPath:"rxInspector/inputs/rxData/multiInstanceLoopDefinition/properties/inputDataItem/options",initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),a.rxData.multiInstanceLoopDefinition&&this.prop("rxData/loopType",String(a.rxData.multiInstanceLoopDefinition.isSequential),{silent:!0}),this.listenTo(this,"change:rxData",this._onChangeRxDataMultiInstanceInfo),this._initMultiInstanceMarkup(),this._initMultiInstanceIcons(),this._updateMultiInstanceIcons()},_initMultiInstanceMarkup:function(){this.markup=this.markup.replace(/<path class="sub-process"\/>/,'<g class="rx-icon-container"><image class="icon-multi-instance-sequential"/><image class="icon-multi-instance-parallel"/><path class="sub-process"/></g>')},_updateMultiInstanceInfo:function(){var b=a.defer(),c=b.promise;return this._showMultiInstanceInfo()?c=this._updateInputDataItems():(this._removeMultiInstanceInfo(),b.resolve()),c},_updateInputDataItems:function(){var b=this,c=a.defer();return this._getInputDataItems().then(function(a){var d=angular.copy(b.get("rxInspector"));a=_.compact(a),a.unshift(""),d.inputs.rxData.multiInstanceLoopDefinition||b._initMultiInstanceInfoInspector(d);var e=angular.copy(b.get("rxData"));b.prop("rxInspector/readonly")?d.inputs.rxData.multiInstanceLoopDefinition.properties.inputDataItem.options=[e.multiInstanceLoopDefinition.inputDataItem]:(d.inputs.rxData.multiInstanceLoopDefinition.properties.inputDataItem.options=a,e.multiInstanceLoopDefinition&&!_.contains(a,e.multiInstanceLoopDefinition.inputDataItem)&&(delete e.multiInstanceLoopDefinition.inputDataItem,b.unset("rxData",{silent:!0}),b.prop("rxData",e,{ignoreCommandManager:!0}))),b.unset("rxInspector",{silent:!0}),b.set("rxInspector",d,{silent:!0}),c.resolve()}),c.promise},_onChangeRxDataMultiInstanceInfo:function(a,b,c){if("rxData/loopType"===c.propertyPath){if(c.propertyValue){var d=this.prop("rxData/multiInstanceLoopDefinition")||{};_.extend(d,{inputDataItem:"",loopDataInputRef:"",completionCondition:""}),this.prop("rxData/multiInstanceLoopDefinition",d)}else this.prop("rxData/multiInstanceLoopDefinition",null);this._updateMultiInstanceIcons()}else c.commandManager&&this._updateMultiInstanceIcons()},_initMultiInstanceIcons:function(){var a=angular.copy(this.get("attrs")),b={width:10,height:10,y:1};a[".sub-process"]={d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",stroke:"#000000",fill:"transparent",transform:"scale(0.3, 0.3) translate(0, 6)"},a[".sub-process"].display=this.prop("subProcess")?"":"none",a[".icon-multi-instance-sequential"]=angular.copy(b),a[".icon-multi-instance-parallel"]=angular.copy(b),a[".icon-multi-instance-sequential"]["xlink:href"]=joint.shapes.bpmn.icons.multiInstanceSequential,a[".icon-multi-instance-parallel"]["xlink:href"]=joint.shapes.bpmn.icons.multiInstanceParallel,a[".rx-icon-container"]={ref:".body","x-alignment":"middle","ref-x":.5,"ref-dy":-15},_.defaults(a[".icon"],a.image),delete a.image,delete a.path,this.unset("attrs",{silent:!0}),this.set("attrs",a)},_updateMultiInstanceIcons:function(){var a=this.prop("rxData/loopType"),b=this.get("attrs");b[".icon-multi-instance-sequential"].display="true"==a?"":"none",b[".icon-multi-instance-parallel"].display="false"==a?"":"none",this.prop("subProcess")&&(b[".sub-process"].transform=a?"scale(0.3, 0.3) translate(50, 6)":"scale(0.3, 0.3) translate(0, 6)"),this.unset("attrs",{silent:!0}),this.set("attrs",b,{rxSilent:!0})},_showMultiInstanceInfo:function(){return!0},supportDynamicQualification:function(a){return"rxData/multiInstanceLoopDefinition/completionCondition"===a},_initMultiInstanceInfoInspector:function(a){a.inputs.rxData.loopType=c.getLoopTypeInspectorConfig(a.readonly),a.inputs.rxData.multiInstanceLoopDefinition=c.getMultiInstanceLoopInspectorConfig(a.readonly)},_removeMultiInstanceInfo:function(){var a=angular.copy(this.get("rxInspector"));delete a.inputs.rxData.multiInstanceLoopDefinition,delete a.inputs.rxData.loopType,this.unset("rxInspector",{silent:!0}),this.set("rxInspector",a,{silent:!0}),this.prop("rxData/multiInstanceLoopDefinition",null),this.prop("rxData/loopType","")},_getInputDataItems:function(){return e.getProcessDefinition(this.get("ownerProcessDefinitionName")).then(function(a){return d.getProcessVariables(a)})},_persistMultiInstanceInfo:function(a){var b=this.get("rxData");return"true"===b.loopType||"false"===b.loopType?(a.multiInstanceLoopDefinition=a.multiInstanceLoopDefinition||{},a.multiInstanceLoopDefinition.isSequential=JSON.parse(b.loopType)):a.multiInstanceLoopDefinition=null,delete a.loopType,a}},{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxParallelGatewayElement",["$q","i18n","RX_PROCESS_DESIGNER","rxProcessShapeInterface","rxProcessElementSearch",function(a,b,c,d,e){joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ParallelGatewayView=joint.dia.ElementView.extend(joint.shapes.rx.ProcessShapeViewInterface);var f="Parallel Gateway";return joint.shapes.rx.ParallelGateway=joint.shapes.bpmn.Gateway.extend(joint.shapes.rx.ProcessShapeInterface).extend({
defaults:joint.util.deepSupplement({type:"rx.ParallelGateway",icon:"plus",size:{width:60,height:60},attrs:{".label":{fill:"gray",text:b(c.processElementResourceTypes.parallelGateway)}}},joint.shapes.bpmn.Gateway.prototype.defaults),defaultName:f,labelPath:"attrs/.label/text",clearLabel:!0,elementCanvasSize:{width:40,height:40}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.parallelGateway,name:f,description:""};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:c,when:a?{and:[{ne:{"rxData/label":void 0}},{ne:{"rxData/label":""}}]}:void 0},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.ParallelGateway(a)},validate:function(d,f){var g=[],h=_.isEmpty(_.trim(d.label))?b(c.processElementResourceTypes.parallelGateway):d.label,i=_.where(f.flowElements,{targetNode:d.id}).length,j=_.where(f.flowElements,{sourceNode:d.id}).length,k=1===i&&j>1||1===j&&i>1;if(k||g.push({elementId:d.id,elementName:h,type:"error",message:"The number of connections is invalid."}),!_.isEmpty(_.trim(d.label))){var l=e.filter(f,{label:h});l.length>1&&g.push({elementId:d.id,elementName:h,propertyName:"label",type:"error",message:"Label must be unique."})}return a.when(g)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessActionElementExpressionConfigurator",["$q","rxId","RX_RECORD_DEFINITION","RX_EXPRESSION_EDITOR","rxMultiInstanceExpressionConfigurator","definitionNameFilter","rxDesignerCache",function(a,b,c,d,e,f,g){return e.extend({initialize:function(e){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var h="getRecordsByQuery"===e.prop("rxData/actionTypeName"),i={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(c,d){var f=_(c).find({label:"Activities"});if(f){var g=_(f.children).find({id:b.get(e.id)});_.remove(c,f),g&&c.push(g)}return a.when(c)}};this.registerExpressionConfig(i);var j={updateDataDictionary:function(b,d){return e.prop("rxData/inputMap/recordDefinitionName")?g.getRecordDefinition(e.getRecordDefinitionName()).then(function(a){if(h){var g=_(a.fieldDefinitions).map(function(a){return{label:a.name,type:"Record Definition Field",icon:"d-icon-field_text",value:["${queryExpression."+a.id+"}","${queryExpression."+a.name+"}"],id:a.id}}).value();b.unshift({label:f(e.prop("rxData/inputMap/recordDefinitionName"))+" Fields",children:g})}if(d){var i=_(a.fieldDefinitions).find({name:_(d.split("/")).findLast(),resourceType:c.dataTypes.selection.resourceType});if(i){var j=_(i.optionNamesById).map(function(a,b){return{label:a,value:b}}).value();b.unshift({label:"Options",children:j})}}return b},function(){return b}):a.when(b)},operators:h?d.operators.all:d.operators.math};this.setDefaultDictionaryConfig(j)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessActionElement",["$q","i18n","dialogs","rxId","rxString","actionTypeNameFilter","definitionNameFilter","RX_PROCESS_DESIGNER","$rootScope","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","rxProcessShapeInterface","rxMultiInstanceInterface","rxMultiInstanceConfiguration","rxProcessElementSearch","rxDesignerCache","rxProcessActionElementModel","rxActionElementInterface",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=[];return{setActionTypes:function(a){s=a},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b(),d={readonly:a,inputs:{rxData:{loopType:n.getLoopTypeInspectorConfig(a),actionTypeName:{label:"Action Type Name",type:"rx-inspector-read-only-text",filter:"actionTypeName",group:"properties",index:1,attrs:b({input:{readonly:!0,disabled:!0}})},label:{label:"Label",type:"text",group:"properties",index:2,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:3,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},runAsUser:{label:"Run as",type:"rx-inspector-select",options:[{value:"true",content:"Current User"},{value:"false",content:"Administrator"},{value:"null",content:"Inherit from Process"}],group:"properties",tooltip:"Allows you to execute the process action with permissions inherited from the process or permissions of the selected user role",index:4,attrs:b(),defaultValue:"null"},inputMap:{},outputMap:{type:"list",group:"outputMap",item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}},multiInstanceLoopDefinition:n.getMultiInstanceLoopInspectorConfig(a)},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}};return d},getRxData:function(a,b){var c=f(b.actionTypeName),d={resourceType:h.processElementResourceTypes.processAction,name:c,description:"",runAsUser:"null",actionTypeName:b.actionTypeName,inputMap:{},outputMap:[],loopType:"",multiInstanceLoopDefinition:null};return a&&(_.assign(d,a),d.runAsUser=String(d.runAsUser)),d},getRxConfig:function(a,c,d){rx.assert.assertObject(a),rx.assert.assertStringWithLength(a.actionTypeName),rx.assert.assertArrayWithLength(s);var f=_.find(s,{actionTypeName:a.actionTypeName}),g=r.isRecordAction(f.actionTypeName),h=r.isCreateOrUpdateRecordAction(f.actionTypeName),i=r.isAssociationAction(f.actionTypeName),j=r.isSetSecurityLabel(f.actionTypeName),l=r.isGetRecordsByQuery(f.actionTypeName);rx.assert.assertObject(f,"Unknown action type: "+a.actionTypeName),d=d||{};var m=d.readonly===!0,n=this.getRxInspector(m),o=this.getRxData(a,f),p={rxInspector:n,rxData:o};j&&!_.find(f.inputParams,{name:"recordSource"})&&f.inputParams.unshift({dataType:"String",dataTypeDetail:null,name:"recordSource",required:!1}),0===p.rxData.inputMap.length&&(p.rxData.inputMap={});var q=j?f.inputParams:_.sortBy(f.inputParams,function(a){return!a.required});return q.forEach(function(a,c){var d,f=(g||j)&&"recordDefinitionName"===a.name||i&&"associationDefinitionName"===a.name,n="securityLabel"===a.name,o="recordSource"===a.name,q=j&&"recordDefinitionName"===a.name,r=j&&"recordID"===a.name,s=j&&"record"===a.name,t=l&&("pageSize"===a.name||"initialPageIndex"===a.name),u=l&&"fieldIDs"===a.name;d=f?"rx-inspector-definition-picker":n||o?"select":t?"rx-inspector-tooltip-field":"rx-inspector-expression-node--field";var v={group:"inputMap",label:b(a.name),type:d,index:c,attrs:{}};if(g&&"values"===a.name)return!1;if(f&&i?v.definitionType=k.definitionTypes.association.type:f?v.definitionType=k.definitionTypes.record.type:n?v.options=[]:t?("pageSize"===a.name?(v.tooltipText="Page Size specifies the maximum number of records that can be retrieved at one time in Get Record activity. Page Size can be adjusted to optimize performance.",v.label=b(a.name)+" (Maximum Records)",a.defaultValue=1e3):"initialPageIndex"===a.name&&(v.tooltipText="Initial Page Index specifies the index of the first page of records retrieved from database in a Get Record activity. The index value increments by +1 on subsequent retrievals. The default value of '0' will be adequate for most situation, but the value can be increased for special case.",a.defaultValue=0),v.inputType="number"):u?v.when=!0:o&&(v.options=[{value:"true",content:"Database"},{value:"false",content:"Process Variable"}]),q||r?v.when={eq:{"rxData/inputMap/recordSource":"true"}}:s&&(v.when={ne:{"rxData/inputMap/recordSource":"true"}}),a.required||q||r||s)v.attrs.label={"class":"required"};else if(m){var w={},x={};w["rxData/inputMap/"+a.name]=void 0,x["rxData/inputMap/"+a.name]="",v.when={and:[{ne:w},{ne:x}]}}m&&(v.attrs.input=v.attrs.select={readonly:!0,disabled:!0}),g||p.rxInspector.inputs.rxData.multiInstanceLoopDefinition.properties.inputDataItem.options.push({content:e.prettify(a.name),value:a.name}),h||(p.rxInspector.inputs.rxData.inputMap[a.name]=v),_.isUndefined(a.defaultValue)?p.rxData.inputMap[a.name]="":p.rxData.inputMap[a.name]=a.defaultValue}),h&&(p.rxInspector.inputs.rxData.inputMap={type:"rx-inspector-input-map-fields",group:"inputMap"},r.isUpdateRecordAction(f.actionTypeName)&&(p.rxInspector.inputs.rxData.inputMap.attributes={enforceRequiredFields:!1})),"void"==f.outputParams.dataType&&delete p.rxInspector.inputs.rxData.outputMap,a.id&&(_.assign(p.rxData,_.pick(a,_(p.rxData).keys().remove(function(a){return"inputMap"!==a}).value())),p.rxData.runAsUser=String(p.rxData.runAsUser),_.isArray(a.inputMap)&&0!==a.inputMap.length&&(p.rxData.inputMap={},a.inputMap.forEach(function(a){var b=a.assignTarget;if(h){var c=/values\[\"(.*)\"\]/.exec(b);c&&(b=c[1])}p.rxData.inputMap[b]=a.expression}))),a&&a.outputMap&&0===a.outputMap.length&&m&&(delete p.rxInspector.groups.outputMap,delete p.rxInspector.inputs.rxData.outputMap),a&&!a.multiInstanceLoopDefinition&&m&&(delete p.rxInspector.groups.multiInstance,delete p.rxInspector.inputs.rxData.loopType,delete p.rxInspector.inputs.rxData.multiInstanceLoopDefinition),p},getShape:function(a){rx.assert.assertObject(a),rx.assert.assertArrayWithLength(s);var b=this.getRxConfig({actionTypeName:a.actionTypeName});return b.content=f(a.actionTypeName),new joint.shapes.rx.ProcessAction(b)},validate:function(b,c){var d,g=[],h=b.outputMap||[],i=a.defer(),j=b.label;if(_.isEmpty(_.trim(b.label)))j=f(b.actionTypeName),b.hasOwnProperty("label")&&g.push({elementId:b.id,elementName:j,propertyName:"label",type:"error",message:"Label cannot be blank."});else{var k=o.filter(c,{label:j});k.length>1&&g.push({elementId:b.id,elementName:j,propertyName:"label",type:"error",message:"Label must be unique."})}var l=_.where(c.flowElements,{targetNode:b.id}).length,m=_.where(c.flowElements,{sourceNode:b.id}).length;0!==l&&1===m||g.push({elementId:b.id,elementName:j,type:"warning",message:"One outbound and at least one inbound sequence flow is required."});var q=_.find(s,{actionTypeName:b.actionTypeName});if(q)if("createRecord"===b.actionTypeName){var t=_.find(b.inputMap,{assignTarget:"recordDefinitionName"}),u=_.filter(b.inputMap,function(a){var b=a.assignTarget;return 0===b.indexOf('values["')&&b.indexOf('"]')===b.length-2});if(t){var v=t.expression.replace(/^\"|\"$/g,"");d=p.getRecordDefinition(v).then(function(a){var c=_(a.fieldDefinitions).filter(r.isFieldRequired).pluck("name").value();_.each(c,function(a){var c=_.find(u,{assignTarget:'values["'+a+'"]'});c&&!_.isEmpty(_.trim(c))||g.push({elementId:b.id,elementName:j,propertyName:"inputMap/"+a,type:"warning",message:e.prettify(a)+" cannot be blank."})})})}else g.push({elementId:b.id,elementName:j,propertyName:"inputMap/recordDefinitionName",type:"warning",message:"Record Definition Name cannot be blank."})}else if("setSecurityLabel"===b.actionTypeName){var w=["recordDefinitionName","record","recordID"],x=_(q.inputParams).filter("required").map("name").value(),y=_.filter(w,function(a){return _.find(b.inputMap,{assignTarget:a})});_.isEmpty(y)?g.push({elementId:b.id,elementName:j,propertyName:"inputMap/"+name,type:"warning",message:"Record Definition Name, Record ID and Record cannot be blank."}):_.includes(y,"record")||_.includes(y,"recordDefinitionName")?_.includes(y,"record")||_.includes(y,"recordID")||g.push({elementId:b.id,elementName:j,propertyName:"inputMap/recordID",type:"warning",message:"Record ID cannot be blank."}):g.push({elementId:b.id,elementName:j,propertyName:"inputMap/recordDefinitionName",type:"warning",message:"Record Definition Name cannot be blank."}),_.each(x,function(a){var c=_.find(b.inputMap,{assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||g.push({elementId:b.id,elementName:j,propertyName:"inputMap/"+a,type:"warning",message:e.prettify(a)+" cannot be blank."})})}else{var z=_(q.inputParams).filter("required").map("name").value();_.each(z,function(a){var c=_.find(b.inputMap,{assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||g.push({elementId:b.id,elementName:j,propertyName:"inputMap/"+a,type:"warning",message:e.prettify(a)+" cannot be blank."})})}else g.push({elementId:b.id,elementName:j,type:"error",message:b.actionTypeName+" is not a registered action type."});_.each(h,function(a,c){_.isEmpty(_.trim(a.assignTarget))&&g.push({elementId:b.id,elementName:j,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:'Output Map Parameter\'s "Name" cannot be blank.'}),_.isEmpty(_.trim(a.expression))&&g.push({elementId:b.id,elementName:j,propertyName:"outputMap/"+c+"/expression",type:"error",message:'Output Map Parameter\'s "Source" cannot be blank.'})});var A=_.uniq(h,"assignTarget");return A.length!==h.length&&g.push({elementId:b.id,elementName:j,type:"error",message:"Output Map parameter names must be unique."}),n.validate(b,j,g),d?d["finally"](function(){i.resolve(g)}):i.resolve(g),i.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessActionElementModel",["$q","i18n","dialogs","rxId","actionTypeNameFilter","definitionNameFilter","RX_PROCESS_DESIGNER","$rootScope","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","rxProcessShapeInterface","rxMultiInstanceInterface","rxMultiInstanceConfiguration","rxProcessActionElementExpressionConfigurator","rxProcessElementSearch","rxDesignerCache","rxActionElementInterface","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a){var b=new RegExp("\\${queryExpression.([^}]+)}","g");return(a||"").replace(b,"'$1'")}return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ProcessActionView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ProcessShapeViewInterface).extend({className:function(){var a=joint.shapes.bpmn.ActivityView.prototype.className.apply(this,arguments);return a+" "+this.model.get("rxData").actionTypeName}}),joint.shapes.rx.ProcessAction=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ProcessShapeInterface).extend(joint.shapes.rx.ActionElementInterface).extend(joint.shapes.rx.MultiInstanceInterface).extend({defaults:joint.util.deepSupplement({type:"rx.ProcessAction",size:{width:70,height:60},attrs:{".icon":{width:12,height:12,"ref-x":3},rect:{rx:2,ry:2}},icon:"gear"},joint.shapes.bpmn.Activity.prototype.defaults),_lastRecordSource:"true",elementCanvasSize:{width:90,height:60},initialize:function(a){var b=a.rxData.actionTypeName;joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),a&&a.rxData&&(this.listenTo(this,"change:rxData",this._onChangeRxData),(q.isRecordAction(b)||q.isSetSecurityLabel(b))&&a.rxData.inputMap.recordDefinitionName?this._lastRecordDefinitionName=this.getRecordDefinitionName():q.isSetSecurityLabel(b)&&a.rxData.inputMap.record&&(this._lastRecordSource="false"))},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new n(this),this._expressionConfigurator},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){var c=[],d=this.prop("rxData/actionTypeName"),e=q.isCreateOrUpdateRecordAction(d);q.isSetSecurityLabel(d);for(var f in b.inputMap){var g=b.inputMap[f];g&&e&&"recordDefinitionName"!==f&&"recordID"!==f?c.push({assignTarget:'values["'+f+'"]',expression:g}):g&&_.includes(["recordDefinitionName","associationDefinitionName","securityLabel"],f)&&!/^\"|\"$/g.test(g)?c.push({assignTarget:f,expression:'"'+g+'"'}):g&&q.isGetRecordsByQuery(d)&&"queryExpression"===f?c.push({assignTarget:f,expression:s(g)}):"fieldIDs"===f?c.push({assignTarget:f,expression:'"'+this.getFieldIds()+'"'}):!g&&0!==g||"initialPageIndex"!==f?g&&"recordSource"!==f&&c.push({assignTarget:f,expression:g}):c.push({assignTarget:f,expression:g})}b.inputMap=c;var h=r.getProcessVariables(a);this.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",h,{silent:!0}),b.runAsUser=JSON.parse(b.runAsUser),this._persistMultiInstanceInfo(b)}return b},getFieldIds:function(){var a=_(this.inputMapFields).values().first();return _(a).map("id").join()},_onChangeRxData:function(a,b,d){var e=this,f=e.prop("rxData/inputMap/recordSource")?JSON.parse(e.prop("rxData/inputMap/recordSource")):null;joint.shapes.rx.ActionElementInterface._onChangeRxData.apply(this,arguments),/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(d.propertyPath)&&this._rebuildOutputMap(d.propertyValue),e._lastRecordSource!==e.prop("rxData/inputMap/recordSource")&&"setSecurityLabel"===b.actionTypeName&&(f?f&&c.confirm("Warning!","Record will be cleared. Do you want to continue?").result.then(function(){e._lastRecordSource=e.prop("rxData/inputMap/recordSource"),e._lastRecordDefinitionName="",e._setSecurityLabel(),e.prop("rxData/inputMap/record","")},function(){e.prop("rxData/inputMap/recordSource",e._lastRecordSource)}):c.confirm("Warning!","Record Definition and Record ID will be cleared. Do you want to continue?").result.then(function(){e._lastRecordSource=e.prop("rxData/inputMap/recordSource"),e._lastRecordDefinitionName="",e._setSecurityLabel(),e.prop("rxData/inputMap/recordDefinitionName",""),e.prop("rxData/inputMap/recordID","")},function(){e.prop("rxData/inputMap/recordDefinitionName",e._lastRecordDefinitionName),e.prop("rxData/inputMap/recordSource",e._lastRecordSource)}))},_setRecordDefinitionName:function(a){var b=this;this._lastRecordDefinitionName=a,p.getRecordDefinition(this.getRecordDefinitionName()).then(function(a){b._updateMultiInstanceInfo().then(function(){var c=b.prop("rxData/actionTypeName");if(q.isCreateOrUpdateRecordAction(c)){var d=b.prop("rxData/inputMap");d=_.assign(d,b._buildDataInputMap(a)),b.prop("rxData/inputMap",d,{silent:!0}),b._buildInspector(a)}else if(q.isGetRecordsByQuery(c)){var e=b.prop("rxData/inputMap"),f=b.inputMapFields?b.inputMapFields[_.keys(b.inputMapFields)[0]]:null;e=f?_.omit(e,function(a,b){return _.find(f,{name:b})}):e,e=_.assign(e,b._buildDataInputMap(a)),b.prop("rxData/inputMap",null,{silent:!0}),b.prop("rxData/inputMap",e),b._buildInspector(a)}else q.isSetSecurityLabel(c)?b._setSecurityLabel(a):b.trigger("rx:change:inputs",b)})})},getSecurityLabels:function(a){return _(a).map(function(a){return{content:f(a.name),value:a.name}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()},_setSecurityLabel:function(a){this.prop("rxData/inputMap/securityLabel",""),this.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",null),a&&this.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",this.getSecurityLabels(a.securityLabels)),this.trigger("rx:change:inputs",this)},updateInspectorConfig:function(b){var c=this,d=[],e=c.prop("rxData/actionTypeName"),f=angular.copy(this.get("rxInspector")),g=c.prop("rxData");if(f.inputs.rxData.outputMap){var h=r.getProcessVariables(b);f.inputs.rxData.outputMap.item.properties.assignTarget.options=h,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",f,{silent:!0}),c.trigger("rx:change:inputs",c)}d.push(c._updateMultiInstanceInfo()),q.isRecordAction(e)?c.prop("rxData/inputMap/recordDefinitionName")&&d.push(p.getRecordDefinition(c.getRecordDefinitionName()).then(function(a){(q.isCreateOrUpdateRecordAction(c.prop("rxData/actionTypeName"))||q.isGetRecordsByQuery(c.prop("rxData/actionTypeName")))&&c._buildInspector(a)})):q.isSetSecurityLabel(e)&&(c.prop("rxData/inputMap/recordDefinitionName")&&!c.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options").length&&d.push(p.getRecordDefinition(c.getRecordDefinitionName()).then(function(a){a&&c.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",c.getSecurityLabels(a.securityLabels))})),c.prop("rxData/inputMap/record")?c.prop("rxData/inputMap/recordSource","false",{silent:!0}):(_.isUndefined(c.prop("rxData/inputMap/recordSource"))||""===c.prop("rxData/inputMap/recordSource"))&&c.prop("rxData/inputMap/recordSource","true",{silent:!0})),q.isGetRecordsByQuery(e)&&(g.inputMap.hasOwnProperty("pageSize")||g.inputMap.hasOwnProperty("initialePageIndex"))&&(g.inputMap.pageSize=parseInt(g.inputMap.pageSize),g.inputMap.initialPageIndex=parseInt(g.inputMap.initialPageIndex));var i=c.prop("rxData/inputMap/queryExpression"),j=/\'([^']+)\'/g;return i&&!_.isEmpty(i.match(j))&&c.prop("rxData/inputMap/queryExpression",i.replace(j,"${queryExpression.$1}")),a.all(d)},_getFieldDefinitions:function(a){return _(a.fieldDefinitions).filter(function(a){return"SYSTEM"!=a.fieldOption}).sort(function(a,b){return a.name.localeCompare(b.name)}).value()},getCurrentRecordDefinition:function(){return p.getRecordDefinition(this._lastRecordDefinitionName)},getRecordDefinitionName:function(){var a=this.prop("rxData/inputMap/recordDefinitionName");return a?a.replace(/^\"|\"$/g,""):a},getAutoCompleteList:function(b){return b.fieldPath&&this.prop("rxData/inputMap/recordDefinitionName")?p.getRecordDefinition(this.getRecordDefinitionName()).then(function(c){var d=_.find(c.fieldDefinitions,function(a){return a.id===Number(b.fieldPath)||a.name===b.fieldPath});return d&&d.resourceType===i.dataTypes.selection.resourceType?_(d.optionNamesById).values().map(function(a){return{id:a,label:a}}).value():a.when([])}):a.when([])}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessDefinitionElement",["$q","$filter","rxBundleCache","RX_DESIGNER","RX_PROCESS_DESIGNER","RX_RECORD_DEFINITION","RX_PROCESS_DEFINITION","rxGUID","fieldTypeNameFilter","rxDesignerCache",function(a,b,c,d,e,f,g,h,i,j){function k(a){return a.map(function(a){return{value:a.resourceType,content:a.displayName,customField:a.customField||!1}}).sort(function(a,b){return a.customField&&!b.customField?1:b.customField&&!a.customField?-1:a.content.localeCompare(b.content)})}var l=null,m=null,n=[];return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ProcessModelView=joint.dia.ElementView.extend({}),joint.shapes.rx.ProcessModel=joint.dia.Element.extend({markup:"<g></g>",defaults:{type:"rx.ProcessModel",position:{x:0,y:0},size:{width:1,height:1}},isRemovable:!1,initialize:function(a){a&&a.id||this.set("id",h.generate(),{silent:!0}),this.listenTo(this,d.events.permissionsChanged,this._onPermissionsChanged)},_onPermissionsChanged:function(a){var b=angular.copy(this.get("rxData"));b.permissions=a,this.set("rxData",b)},getParentId:function(){return!1},isLink:function(){return!1},fromProcessDefinition:function(a){var c=_.cloneDeep(_.pick(a,["name","description","isEnabled","runAsUser","inputParams","outputParams","permissions","contextKeyParam"]));if(c.name=b("definitionName")(c.name,"decode"),c.permissions=c.permissions||[],_.each([].concat(c.inputParams||[]).concat(c.outputParams||[]),function(a){a.required="REQUIRED"===a.fieldOption,a.resourceType===f.dataTypes.selection.resourceType&&_.isArray(a.options)&&(a.options=a.options.join("\n")),delete a.fieldOption}),a.lastUpdateTime){var d=this.get("rxInspector").inputs.rxData.name.attrs;d.input=d.input||{},d.input.readonly=!0}return c.runAsUser=String(c.runAsUser),c.contextKeyParam=c.contextKeyParam||null,this.set("rxData",c),this},updateParameters:function(a){var b={inputParams:_.cloneDeep(a.inputParams),outputParams:_.cloneDeep(a.outputParams)};_.each([].concat(b.inputParams||[]).concat(b.outputParams||[]),function(a){a.required="REQUIRED"===a.fieldOption,a.resourceType===f.dataTypes.selection.resourceType&&_.isArray(a.options)&&(a.options=a.options.join("\n")),delete a.fieldOption}),this.prop("rxData/inputParams",b.inputParams,{silent:!0}),this.prop("rxData/outputParams",b.outputParams,{silent:!0})},persist:function(a){var d=_.cloneDeep(this.get("rxData"));if(d.permissions||(d.permissions=[]),a.lastUpdateTime)d.name=a.name;else{var e=c.getBundleId(),g=e?e+":":"";d.name=g+b("definitionName")(d.name,"encode")}return _.each([].concat(d.inputParams||[]).concat(d.outputParams||[]),function(a){a.fieldOption=a.required?"REQUIRED":"OPTIONAL",delete a.required,a.resourceType===f.dataTypes.selection.resourceType&&_.isString(a.options)&&(a.options=_(a.options.split(/\r\n|\r|\n/g)).compact().unique().value()),""===a.defaultValue&&(a.defaultValue=null)}),d.runAsUser=JSON.parse(d.runAsUser),_.assign(a,d),null},canPersist:function(){return!1},getAutoCompleteList:function(b){var c=[];if(b.fieldPath){var d=_([]).concat(this.prop("rxData/outputParams")).concat(this.prop("rxData/inputParams")).find(function(a){return a.name===b.fieldPath});d&&(c=_(d.optionNamesById).values().map(function(a){return{id:a,label:a}}).value())}return a.when(c)},getBBox:function(){return joint.g.rect(0,0,0,0)},isEmbeddedIn:function(){return!1}}),{setFieldTypes:function(a){l=_.without(_.toArray(f.dataTypes),f.dataTypes.attachment),m=_.without(l,f.dataTypes.selection,f.dataTypes.recordInstance);var b=_.map(a,function(a){return{displayName:i(a.fieldTypeName),resourceType:a.fieldDefinitionType,customField:!0}});l=k(_.unique(_.union(l,b),"resourceType")),m=k(_.unique(_.union(m,b),"resourceType"))},setUserGroups:function(a){n=_(a).filter(function(a){return a.groupId>9}).pluck("groupName").value()},getModel:function(a){a=a||{};var b=a.readonly===!0,c=function(a){var c=b?{"input, textarea, select":{readonly:!0}}:{};return _.assign({},c,a)};return new joint.shapes.rx.ProcessModel({rxInspector:{inputs:{rxData:{name:{label:"Name",type:"text",group:"properties",attrs:c({label:{"class":"required"},input:{maxlength:254}})},description:{label:"Description",type:"textarea",group:"properties",attrs:c(),when:b?{ne:{"rxData/description":""}}:void 0},isEnabled:{label:"Enabled",type:"toggle",group:"properties",defaultValue:!0,attrs:c()},runAsUser:{label:"Run as",type:"rx-inspector-select",options:[{value:"true",content:"Current User"},{value:"false",content:"Administrator"}],group:"properties",tooltip:"Allows you to execute process actions with the permissions of the selected user role.",attrs:c(),defaultValue:"false"},parameters:{type:"rx-inspector-process-parameter-editor",group:"parameters",inputDataTypes:l,outputDataTypes:m},permissions:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.permission.label",type:"rx-permission-editor",group:"permissions"}}},groups:{properties:{label:"General",index:1},parameters:{label:"Parameters",index:2},permissions:{label:"Permissions",index:3}}}})},validate:function(c){var d=[],g=c.inputParams||[],h=c.outputParams||[],i=c.permissions||[],k=b("definitionName")(c.name,"decode");_.isEmpty(_.trim(k))?(k="Process Definition",d.push({elementId:c.id,elementName:k,propertyName:"name",type:"error",message:"Process Name cannot be blank."})):!c.lastUpdateTime&&_(j.getProcessDefinitionNamesSync()).contains(c.name)&&d.push({elementId:c.id,elementName:k,propertyName:"name",type:"error",message:"Process with this Name already exists."}),1!=_.filter(c.flowElements,{resourceType:e.processElementResourceTypes.startEvent}).length&&d.push({elementId:c.id,elementName:k,type:"error",message:"Process must have a single Start Event."}),_.find(c.flowElements,{resourceType:e.processElementResourceTypes.endEvent})||d.push({elementId:c.id,elementName:k,type:"error",message:"Process must have at least one End Event."});var l=[];_.each(g,function(a,b){_.isEmpty(_.trim(a.name))?d.push({elementId:c.id,elementName:k,propertyName:"inputParams/"+b+"/name",type:"error",message:"Input parameter name cannot be blank."}):l.push(a.name),a.resourceType===f.dataTypes.selection.resourceType&&_.isEmpty(a.optionNamesById)&&d.push({elementId:c.id,elementName:k,propertyName:"inputParams/"+b+"/options",type:"error",message:"Options cannot be blank."}),a.resourceType===f.dataTypes.recordInstance.resourceType&&_.isEmpty(_.trim(a.recordDefinitionName))&&d.push({elementId:c.id,elementName:k,propertyName:"inputParams/"+b+"/recordDefinitionName",type:"error",message:"Record Definition cannot be blank."}),_.isNumber(a.id)&&a.id<=1e3&&d.push({elementId:c.id,elementName:k,propertyName:"inputParams/"+b+"/id",type:"error",message:"Parameter ID must be greater than 1000."})}),_.uniq(l).length!==l.length&&d.push({elementId:c.id,elementName:k,type:"error",message:"Input parameter names must be unique."});var m=[];_.each(h,function(a,b){_.isEmpty(_.trim(a.name))?d.push({elementId:c.id,elementName:k,propertyName:"outputParams/"+b+"/name",type:"error",message:"Output parameter name cannot be blank."}):m.push(a.name),_.isNumber(a.id)&&a.id<=1e3&&d.push({elementId:c.id,elementName:k,propertyName:"outputParams/"+b+"/id",type:"error",message:"Parameter ID must be greater than 1000."})}),_.uniq(m).length!==m.length&&d.push({elementId:c.id,elementName:k,type:"error",message:"Output parameter names must be unique."});var n=_.pluck(i,"ownerId.value");return _.uniq(n).length!==n.length&&d.push({elementId:c.id,elementName:k,type:"error",message:"Permitted group names must be unique."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessShapeInterface",["rxId","$q","RX_EXPRESSION_EDITOR","$rootScope",function(a,b,c,d){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ProcessShapeInterface={labelPath:"content",initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.on("change:position",this.onChangePosition),this.on("change:rxData",this._onCellChanged),this.get("rxData").label=this.prop(this.labelPath)},createNewProcessElement:function(){return _.assign({},this.prop("rxData"),{id:a.get(this.id)})},updateContent:function(){var a=this.get("content"),b=this.id?a:_.trunc(a,{length:20}),c=b===a?"":a;joint.env.test("svgforeignobject")?this.attr({".content":{html:b,title:c}}):this.attr({".content":{text:b,title:c}})},persist:function(b){var c=_.find(b.flowElements,{id:a.get(this.id)});return this.canPersist()?c?_.assign(c,this.prop("rxData")):(c=this.createNewProcessElement(),b.flowElements.push(c)):c&&(_.pull(b.flowElements,c),c=null),c},getParentId:function(){return this.get("parent")},canPersist:function(){return"rx.CallActivity"!=this.get("parentType")},getLayout:function(){return _.omit(this.toJSON(),["rxData","rxInspector","embeds","layout","parentProcessDefinition","ownerProcessDefinitionName"])},canBeEmbedded:function(a,b){var c=b.model.getNeighbors(this);return 0===c.length||_.every(c,function(b){return b.get("parent")==a.model.id})},canEmbedElement:function(a,b){return!1},onChangePosition:function(a,b,c){var d=a.getParentId();if(d&&c.translateBy&&"rxMoveElements"!=c.translateBy&&!this.get("inCallActivity")){var e=a.collection.get(d);if(e){var f=this.collection.graph.getConnectedLinks(this);if(f.length){var g=e.getBBox(),h=a.getBBox();g.containsPoint(h.origin())&&g.containsPoint(h.topRight())&&g.containsPoint(h.corner())&&g.containsPoint(h.bottomLeft())||a.set("position",a.previous("position"));
}}}},_onCellChanged:function(a,b,c){"rxData/label"==c.propertyPath&&(a.labelPath&&a.prop(a.labelPath,this.getLabel()),this.updateName())},updateName:function(){this.prop("rxData/name",this.getLabel()||this.defaultName)},getLabel:function(){return this.prop("rxData/label")},_rebuildOutputMap:function(a){var b=angular.copy(this.get("rxInspector")),e=b.inputs.rxData.outputMap.item.properties.assignTarget.options;_.contains(e,a)||(e.push(a),e=_(e).uniq().sortBy().value(),b.inputs.rxData.outputMap.item.properties.assignTarget.options=e,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),d.$broadcast(c.events.refreshInspector,this))}},{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessShapeViewInterface",function(){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ProcessShapeViewInterface={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments)},canInteract:function(){return _.isFunction(this.paper.options.interactive)?this.paper.options.interactive(this):this.paper.options.interactive},prepareEmbedding:function(){var a=this.paper.model.getConnectedLinks(this.model),b=this.model.get("parent")&&a.length;b||joint.dia.ElementView.prototype.prepareEmbedding.apply(this,arguments)},getEmbeddedBBox:function(){var a,b=this.model.getEmbeddedCells(),c=this;if(b.length){var d=_(b).filter(function(a){return"rx.SequenceFlow"!=a.get("type")}).map(function(a){var b=c.paper.findViewByModel(a);return new V(b.el).bbox(!1,c.paper.viewport)}).value(),e=_.min(_.map(d,function(a){return a.x})),f=_.min(_.map(d,function(a){return a.y})),h=_.max(_.map(d,function(a){return a.x+a.width})),i=_.max(_.map(d,function(a){return a.y+a.height}));a=g.rect(e,f,h-e,i-f)}else a=g.rect(0,0,0,0);return a}},{}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessShape",["rxDesignerCache","definitionNameFilter",function(a,b){return{getRecordDefinitionNameList:function(){return a.getRecordDefinitionDescriptors().then(function(a){return _(a).map(function(a){return{value:a.name,content:b(a.name)}}).sort(function(a,b){return a.value.toLowerCase().localeCompare(b.value.toLowerCase())}).unshift({value:"",content:""}).value()})},getProcessVariables:function(a){var b=_(a.inputParams).pluck("name").uniq().value(),c=_(a.outputParams).pluck("name").uniq().value(),d=_(a.flowElements).pluck("outputMap").flatten().compact().pluck("assignTarget").compact().uniq().value(),e=_(a.flowElements).pluck("signalParams").flatten().compact().value(),f=_([]).concat(b,c,d,e).uniq().sortBy().value();return f}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxReceiveTaskElementExpressionConfigurator",["$q","rxId","RX_EXPRESSION_EDITOR","rxMultiInstanceExpressionConfigurator",function(a,b,c,d){return d.extend({initialize:function(c){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var d={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(d){var e=_(d).find({label:"General"}),f=_(d).find({label:"Process Variables"}),g=c.prop("rxData/signalParams"),h={label:c.prop("rxData/label"),children:[]},i=[];return g.forEach(function(a){h.children.push({label:a,value:"${activityResults."+b.get(c.id)+"."+a+"}",icon:"d-icon-arrow_chart"})}),f&&i.push(f),h.children.length?a.when(i.concat(e,h)):a.when(i.concat(e))}};this.registerExpressionConfig(d)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxReceiveTaskElement",["$q","i18n","rxId","RX_EXPRESSION_EDITOR","RX_PROCESS_DESIGNER","$rootScope","rxProcessShapeInterface","rxProcessShapeViewInterface","rxMultiInstanceInterface","rxReceiveTaskElementModel","rxMultiInstanceConfiguration","rxProcessElementSearch",function(a,b,c,d,e,f,g,h,i,j,k,l){return{getRxData:function(a){var b={resourceType:e.processElementResourceTypes.receiveTask,name:"Receive Task",description:"",signalParams:[],outputMap:[],loopType:"",multiInstanceLoopDefinition:null};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{loopType:k.getLoopTypeInspectorConfig(a),label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},signalParams:{type:"list",group:"signalParams",index:3,item:{type:"rx-inspector-input-select",label:"Parameter Name",options:[],attrs:b({label:{"class":"required"}})},attrs:b({label:{"class":"required"}})},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}},multiInstanceLoopDefinition:k.getMultiInstanceLoopInspectorConfig(a)},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},signalParams:{label:"Signal Parameters",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a),f=this.getRxInspector(d);return a&&0===a.outputMap.length&&d&&(delete f.groups.outputMap,delete f.inputs.rxData.outputMap),a&&!a.multiInstanceLoopDefinition&&d&&(delete f.groups.multiInstance,delete f.inputs.rxData.loopType,delete f.inputs.rxData.multiInstanceLoopDefinition),{rxData:e,rxInspector:f}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.ReceiveTask(a)},validate:function(c,d){var f=[],g=c.outputMap||[],h=c.signalParams||[],i=c.label;if(_.isEmpty(_.trim(c.label)))i=b(e.processElementResourceTypes.receiveTask),c.hasOwnProperty("label")&&f.push({elementId:c.id,elementName:i,propertyName:"label",type:"error",message:"Label cannot be blank."});else{var j=l.filter(d,{label:i});j.length>1&&f.push({elementId:c.id,elementName:i,propertyName:"label",type:"error",message:"Label must be unique."})}var m=_.where(d.flowElements,{targetNode:c.id}).length,n=_.where(d.flowElements,{sourceNode:c.id}).length;if(0===m||1!==n)f.push({elementId:c.id,elementName:i,type:"warning",message:"One outbound and at least one inbound sequence flow is required."});else{var o=_.findIndex(c.signalParams,function(a){return _.isEmpty(_.trim(a))});o!==-1&&f.push({elementId:c.id,elementName:i,propertyName:"signalParams/"+o,type:"error",message:"Signal Parameter Name cannot be blank."})}var p=_.uniq(h);p.length!==h.length&&f.push({elementId:c.id,elementName:i,type:"error",message:"Signal Parameter names must be unique."}),_.each(g,function(a,b){_.isEmpty(_.trim(a.assignTarget))&&f.push({elementId:c.id,elementName:i,propertyName:"outputMap/"+b+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),_.isEmpty(_.trim(a.expression))&&f.push({elementId:c.id,elementName:i,propertyName:"outputMap/"+b+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var q=_.uniq(g,"assignTarget");return q.length!==g.length&&f.push({elementId:c.id,elementName:i,type:"error",message:"Output Map Parameter names must be unique."}),k.validate(c,i,f),a.when(f)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxReceiveTaskElementModel",["$q","i18n","rxId","RX_EXPRESSION_EDITOR","RX_PROCESS_DESIGNER","$rootScope","rxProcessShapeInterface","rxProcessShapeViewInterface","rxMultiInstanceInterface","rxMultiInstanceConfiguration","rxReceiveTaskElementExpressionConfigurator","rxProcessElementSearch","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.ReceiveTaskView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ProcessShapeViewInterface),joint.shapes.rx.ReceiveTask=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ProcessShapeInterface).extend(joint.shapes.rx.MultiInstanceInterface).extend({defaults:joint.util.deepSupplement({type:"rx.ReceiveTask",size:{width:70,height:60},attrs:{".icon":{width:12,height:12,"ref-x":3},rect:{rx:2,ry:2}},icon:"message",content:b(e.processElementResourceTypes.receiveTask)},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new k(this),this._expressionConfigurator},updateInspectorConfig:function(a){var b=angular.copy(this.get("rxInspector"));if(b.inputs.rxData.outputMap){var c=m.getProcessVariables(a);b.inputs.rxData.outputMap.item.properties.assignTarget.options=c,b.inputs.rxData.signalParams.item.options=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.trigger("rx:change:inputs",this)}return this._updateMultiInstanceInfo()},_showMultiInstanceInfo:function(){return!this.prop("rxInspector/readonly")||this.prop("rxData/multiInstanceLoopDefinition")},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments),c=m.getProcessVariables(a);return this.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",c,{silent:!0}),this._persistMultiInstanceInfo(b),b},_onChangeRxData:function(a,b,c){var e=this;/^rxData\/signalParams/.test(c.propertyPath)&&e._updateInputDataItems().then(function(){f.$broadcast(d.events.refreshInspector,e)}),/^(rxData\/signalParams\/)[0-9]+/.test(c.propertyPath)&&e._rebuildSignalParams(c.propertyValue),/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&e._rebuildOutputMap(c.propertyValue)},_onChangeSize:function(){_.each(this.getEmbeddedCells(),function(a){a._snapToParentBorder&&a._snapToParentBorder()})},_rebuildSignalParams:function(a){var b=angular.copy(this.get("rxInspector")),c=b.inputs.rxData.signalParams.item.options;_.contains(c,a)||(c.push(a),c=_(c).uniq().sortBy().value(),b.inputs.rxData.signalParams.item.options=c,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),f.$broadcast(d.events.refreshInspector,this))},canEmbedElement:function(a){return"rx.TimerEvent"===_.get(a,"model.attributes.type")&&!this.get("inCallActivity")}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxSequenceFlowElementExpressionConfigurator",["$q","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b,c){return c.extend({initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.registerExpressionConfig({regExp:/^rxData\/condition$/g,operators:b.operators.all})}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxSequenceFlowElement",["$q","i18n","rxId","RX_PROCESS_DESIGNER","RX_EXPRESSION_EDITOR","rxProcessShapeInterface","rxSequenceFlowElementModel","rxProcessShapeViewInterface",function(a,b,c,d,e,f,g,h){var i="Sequence Flow";return{getRxData:function(a,b){var c={resourceType:d.processElementResourceTypes.sequenceFlow,name:i,description:"",sourceNode:"",targetNode:"",condition:"",sourceResourceType:null,targetResourceType:null};if(a){var e=_.find(b.flowElements,{id:a.sourceNode}),f=_.find(b.flowElements,{id:a.targetNode});e&&(c.sourceResourceType=e.resourceType),f&&(c.targetResourceType=f.resourceType),_.assign(c,a)}return c},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{flowType:{type:"select",options:[{value:"default",content:"Default"},{value:"conditional",content:"Conditional"},{value:"normal",content:"Normal"},{value:"message",content:"Message"},{value:"association",content:"Association"},{value:"conversation",content:"Conversation"}],label:"Type",group:"properties",index:1},labels:{label:"Label",type:"list",attrs:{'[data-attribute="labels"]':{"class":"list sequence-flow-label"}},group:"properties",index:2,item:{type:"object",properties:{attrs:{text:{text:{type:"text",index:1,attrs:c}}},position:{type:"range",label:"Label Position",min:.1,max:.9,step:.1,defaultValue:.5,index:2,attrs:c}}}},rxData:{description:{label:"Description",type:"textarea",group:"properties",index:3,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},condition:{label:"Condition",type:"rx-inspector-expression-node-field",group:"properties",index:4,when:{eq:{"rxData/sourceResourceType":d.processElementResourceTypes.exclusiveGateway}}}}},groups:{properties:{label:"General",index:1}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a,b),f=this.getRxInspector(d);if(b&&a){var g=angular.fromJson(b.layout)||{cells:[]},h=g.cells.filter(function(b,c,d){return a.id.indexOf(b.id)>-1})[0];!h.labels&&f.readonly&&"rx.SequenceFlow"==h.type&&(delete f.inputs.labels,e.description||""!==e.condition||(delete f.groups,delete f.inputs))}return{rxData:e,rxInspector:f}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.SequenceFlow(a)},registerValidators:function(a){function c(c,d,e){var f=a.attributes.commandManager.graph,g=f.getCell(d.data.id);if("rx.SequenceFlow"===g.get("type")){var h=f.getCell(g.get("target").id),i=f.getCell(g.get("source").id),j=i.get("type"),k=i.get("parent");if(!h||!i)return void e("The sequence flow must have a source and a target.");if(h===i)return void e("The sequence flow must connect two different elements.");if(h.get("parent")!==k&&"rx.TimerEvent"===j&&f.getCell(k).get("parent")!==h.get("parent"))return void e("The elements can only be connected if they belong to the same sub process.");var l=h.get("type"),m=h.get("rxData").label||b(h.get("rxData").resourceType);if("rx.StartEvent"===l||"rx.TimerEvent"===l)return void e('Element "'+m+'" cannot have inbound sequence flows.');if("rx.TextAnnotation"===l)return void e("Text Annotation cannot have inbound sequence flows.");var n=i.get("rxData").label||b(i.get("rxData").resourceType);if("rx.EndEvent"===j)return void e('Element "'+n+'" cannot have outbound sequence flows.');var o=f.getConnectedLinks(i,{outbound:!0}).length;return"rx.ExclusiveGateway"!==j&&"rx.ParallelGateway"!==j&&o>1?void e('Element "'+n+'" can have only one outbound sequence flow.'):void 0}}a.validate("change:source change:target",c)},validate:function(){return a.when([])}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxSequenceFlowElementModel",["$q","i18n","rxId","RX_PROCESS_DESIGNER","rxSequenceFlowElementExpressionConfigurator","rxProcessShapeInterface","rxProcessShapeViewInterface",function(a,b,c,d,e,f,g){joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.SequenceFlowView=joint.dia.LinkView.extend(joint.shapes.rx.ProcessShapeViewInterface).extend({className:function(){var a=joint.dia.LinkView.prototype.className.apply(this,arguments);return"rx.CallActivity"==this.model.get("parentType")&&(a+=" rx-non-interactive"),a}});var h="Sequence Flow";return joint.shapes.rx.SequenceFlow=joint.shapes.bpmn.Flow.extend(joint.shapes.rx.ProcessShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.SequenceFlow",router:{name:"manhattan"},labels:[{attrs:{text:{text:""}},position:"0.5"}]},joint.shapes.bpmn.Flow.prototype.defaults),defaultName:h,labelPath:null,initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.on("change:labels",this.onLabelsChanged)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new e(this),this._expressionConfigurator},onLabelsChanged:function(a,b,c){"labels/0/attrs/text/text"==c.propertyPath&&this.updateName()},getLabel:function(){return this.prop("labels/0/attrs/text/text")},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(this.canPersist()){var e=c.get(this.get("source").id),f=c.get(this.get("target").id),g=_.find(a.flowElements,{id:e}),h=_.find(a.flowElements,{id:f}),i=g&&g.resourceType,j=h&&h.resourceType;this.get("rxData");this.prop("rxData/sourceResourceType",i,{ignoreCommandManager:!0}),this.prop("rxData/targetResourceType",j,{ignoreCommandManager:!0}),_.assign(b,{sourceNode:e,targetNode:f}),i&&j&&i===d.processElementResourceTypes.exclusiveGateway||delete b.condition,delete b.sourceResourceType,delete b.targetResourceType}return b},supportDynamicQualification:function(a){return"rxData/condition"===a},getParentId:function(){var a=this.get("parent");if(!a){var b=this.getSourceElement();b&&(a=b.getParentId())}return a}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxStartEventElement",["$q","i18n","RX_PROCESS_DESIGNER","rxProcessShapeInterface","rxProcessShapeViewInterface","rxProcessElementSearch",function(a,b,c,d,e,f){var g="rx.StartEvent";joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.StartEventView=joint.dia.ElementView.extend(joint.shapes.rx.ProcessShapeViewInterface);var h="Start";return joint.shapes.rx.StartEvent=joint.shapes.bpmn.Event.extend(joint.shapes.rx.ProcessShapeInterface).extend({defaults:joint.util.deepSupplement({type:g,size:{width:50,height:50},attrs:{".label":{fill:"gray",text:b(c.processElementResourceTypes.startEvent)}},eventType:"start"},joint.shapes.bpmn.Event.prototype.defaults),defaultName:h,labelPath:"attrs/.label/text",clearLabel:!0,elementCanvasSize:{width:30,height:30}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.startEvent,name:h,description:""};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b(),d={readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:c,when:a?{and:[{ne:{"rxData/label":void 0}},{ne:{"rxData/label":""}}]}:void 0},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}};return d},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.StartEvent(a)},validate:function(d,e){var g=[],h=_.isEmpty(_.trim(d.label))?b(c.processElementResourceTypes.startEvent):d.label,i=_.where(e.flowElements,{targetNode:d.id}).length;i>0&&g.push({elementId:d.id,elementName:h,type:"error",message:"Cannot have inbound sequence flows."});var j=_.where(e.flowElements,{sourceNode:d.id}).length;if(1!=j&&g.push({elementId:d.id,elementName:h,type:"warning",message:"A single outbound sequence flow is required."}),!_.isEmpty(_.trim(d.label))){var k=f.filter(e,{label:h});k.length>1&&g.push({elementId:d.id,elementName:h,propertyName:"label",type:"error",message:"Label must be unique."})}return a.when(g)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxSubProcessElement",["$q","i18n","$injector","RX_PROCESS_DESIGNER","rxId","rxDesignerCache","rxProcessElementSearch","rxProcessShapeInterface","rxProcessShapeViewInterface","rxMultiInstanceInterface","rxMultiInstanceConfiguration","rxMultiInstanceExpressionConfigurator","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface",function(a,b,c,d,e,f,h,i,j,k,l,m,n,o){joint.shapes.rx=joint.shapes.rx||{};var p=20;return joint.shapes.rx.SubProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),!this.model.getEmbeddedCells().length&&_.isUndefined(this.model.get("embeds"))&&this.model.get("expanded")&&!this.model._expanding&&this.expand(),this.listenTo(this.model,"change:size",this.onChangeSize),this.listenTo(this.model,"change:embeds",this.onChangeEmbeds)},onChangeSize:function(){this._canResize()||this._resizeToEmbeddedElements()},onChangeEmbeds:function(a,b){var c=this.model.previous("embeds");this.model._expanding||c&&!(b.length>c.length)||this._resizeToEmbeddedElements()},_resizeToEmbeddedElements:function(){var a=this.getEmbeddedBBox(),b=this.model.get("position"),c=this.model.get("size"),d=a.width+a.x-b.x+p,e=a.height+a.y-b.y+p;d<c.width&&(d=c.width),e<c.height&&(e=c.height),this.model.resize(d,e)},_canResize:function(){var a=!0,b=this;if(this.model.get("expanded")){var c=new V(this.el).bbox(!1,b.paper.viewport);c.width-=p,c.height-=p;var d=g.rect(c);_.each(this.model.getEmbeddedCells(),function(c){var e=b.paper.findViewByModel(c),f=g.rect(new V(e.el).bbox(!1,b.paper.viewport));if(!(d.containsPoint(f.origin())&&d.containsPoint(f.topRight())&&d.containsPoint(f.corner())&&d.containsPoint(f.bottomLeft())))return a=!1,!1})}return a}}),joint.shapes.rx.SubProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend(joint.shapes.rx.MultiInstanceInterface).extend({defaults:joint.util.deepSupplement({type:"rx.SubProcess",activityType:"event-sub-process",content:"Sub Process",expanded:!1,subProcess:!0,size:{width:70,height:60},collapsedSize:{width:70,height:60},attrs:{rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.on("change:size",this._onChangeSize)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new m(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},createNewProcessElement:function(){var a=joint.shapes.rx.ProcessShapeInterface.createNewProcessElement.apply(this,arguments);return a.flowElements=[],a.artifacts=[],a},getEmbeddedLayout:function(){return _.invoke(this.getEmbeddedCells(),"getLayout")},getLayout:function(){return _.omit(this.toJSON(),["rxData","rxInspector","embeds","parentProcessDefinition","ownerProcessDefinitionName"])},canEmbedElement:function(a){return this.get("expanded")&&"rx.TimerEvent"!==_.get(a,"model.attributes.type")},persist:function(a){var b=_.find(a.flowElements,{id:e.get(this.id)});return this.canPersist()?(b?_.assign(b,this.prop("rxData")):(b=this.createNewProcessElement(),a.flowElements.push(b)),this._persistMultiInstanceInfo(b)):b&&(_.pull(a.flowElements,b),b=null),b},updateInspectorConfig:function(){return this._updateMultiInstanceInfo()},_getOwnerProcessDefinition:function(){return f.getProcessDefinition(this.get("ownerProcessDefinitionName"))},_showMultiInstanceInfo:function(){return!this.prop("rxInspector/readonly")||this.prop("rxData/multiInstanceLoopDefinition")},_prepareForExpand:function(){var a=this;return this._getOwnerProcessDefinition().then(function(b){var d=h.findById(b,e.get(a.get("id")))||{},f=c.get("rxProcessDesignerElementManager");return{definition:b,graph:f.getGraph(d,{readonly:!!a.get("inCallActivity"),ownerProcessDefinitionName:a.get("ownerProcessDefinitionName")})}})},_afterExecuteExpand:function(){this.attr({".sub-process":{display:"none"}})},_prepareCellModel:function(a,b){var c={silent:!0};this.constructor.__super__._prepareCellModel.apply(this,arguments),this.get("inCallActivity")&&a.set("inCallActivity",!0,c),a.unset("parent",c)},_executeCollapse:function(){this.attr({".sub-process":{display:""}}),this.unembedElements()},updateLayout:function(a){if(this.get("expanded")){var b=h.findById(a,e.get(this.get("id"))),c=_(this.getEmbeddedLayout()).value();b&&(b.layout=c?JSON.stringify({cells:c}):null)}}}),{getRxData:function(a){var b={resourceType:d.processElementResourceTypes.subProcess,name:"Sub Process",description:"",loopType:"",multiInstanceLoopDefinition:null};return a&&_.assign(b,_.omit(a,["flowElements, artifacts"])),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{loopType:l.getLoopTypeInspectorConfig(a),label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},multiInstanceLoopDefinition:l.getMultiInstanceLoopInspectorConfig(a)},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},multiInstance:{label:"Multi Instance Loop",index:2},geometry:{label:"Geometry",index:3,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a),f=this.getRxInspector(d);return{rxData:e,rxInspector:f}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.SubProcess(a)},validate:function(e,f){var g=[],i=a.defer(),j=[],k=c.get("rxProcessDesignerElementManager"),m=e.label;if(_.isEmpty(_.trim(e.label)))m=b(d.processElementResourceTypes.subProcess),e.hasOwnProperty("label")&&j.push({elementId:e.id,elementName:m,propertyName:"label",type:"error",message:"Label cannot be blank."});else{var n=h.filter(f,{label:m});n.length>1&&j.push({elementId:e.id,elementName:m,propertyName:"label",type:"error",message:"Label must be unique."})}var o=_.where(f.flowElements,{targetNode:e.id}).length,p=_.where(f.flowElements,{sourceNode:e.id}).length;return 0!==o&&1===p||j.push({elementId:e.id,elementName:m,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),0===e.flowElements.length&&j.push({elementId:e.id,elementName:m,type:"error",message:"Sub Process has no elements."}),l.validate(e,m,j),_.each(e.flowElements,function(a){g.push(k.validateElement(a,e))}),a.all(g).then(function(a){j=j.concat(_.compact(_.flatten(a))),i.resolve(j)}),i.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxTextAnnotationAssociationElement",["$q","rxId","RX_PROCESS_DESIGNER","rxArtifactShapeInterface","rxProcessShapeViewInterface",function(a,b,c,d,e){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.TextAnnotationAssociationView=joint.dia.LinkView.extend(joint.shapes.rx.ProcessShapeViewInterface),joint.shapes.rx.TextAnnotationAssociation=joint.shapes.bpmn.Flow.extend(joint.shapes.rx.ArtifactShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.TextAnnotationAssociation",flowType:"association"},joint.shapes.bpmn.Flow.prototype.defaults),persist:function(a){var c=joint.shapes.rx.ArtifactShapeInterface.persist.apply(this,arguments);return this.canPersist()&&_.assign(c,{sourceNode:b.get(this.get("source").id),targetNode:b.get(this.get("target").id)}),c}}),{getRxData:function(a){var b={resourceType:c.processElementResourceTypes.textAnnotationAssociation,sourceNode:"",targetNode:""};return a&&_.assign(b,a),b},getRxConfig:function(a,b){var c=this.getRxData(a,b);return{rxData:c,rxInspector:void 0}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.TextAnnotationAssociation(a)},registerValidators:function(a){function b(b,c,d){var e=a.attributes.commandManager.graph,f=e.getCell(c.data.id);if("rx.TextAnnotationAssociation"===f.get("type")){var g=e.getCell(f.get("target").id),h=e.getCell(f.get("source").id);if(!g||!h)return void d("Text Annotation Association must have a source and a target.");if(g.get("parent")!=h.get("parent"))return void d("Elements can only be connected if they belong to the same Sub Process.");var i=g.get("type");if("rx.TextAnnotation"===i)return void d("Text Annotation cannot have inbound Text Annotation Associations.");var j=h.get("type");return"rx.TextAnnotation"!==j?void d("Only Text Annotation element can have outbound Text Annotation Associations."):void 0}}a.validate("change:source change:target",b)},validate:function(){return a.when([])}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxTextAnnotationElement",["$q","RX_PROCESS_DESIGNER","rxArtifactShapeInterface","rxProcessShapeViewInterface",function(a,b,c,d){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.TextAnnotationView=joint.shapes.bpmn.AnnotationView.extend(joint.shapes.rx.ProcessShapeViewInterface),joint.shapes.rx.TextAnnotation=joint.shapes.bpmn.Annotation.extend(joint.shapes.rx.ArtifactShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.TextAnnotation",size:{width:60,height:50},attrs:{rect:{rx:2,ry:2}}},joint.shapes.bpmn.Annotation.prototype.defaults),initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.set("content",this.get("rxData").text),this.on("change:rxData",this._onChangeRxData)},_onChangeRxData:function(){this.set("content",this.get("rxData").text)}}),{getRxData:function(a){var c={resourceType:b.processElementResourceTypes.textAnnotation,text:""};return a&&_.assign(c,a),c},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{text:{label:"Notes",type:"textarea",group:"properties",index:1,attrs:b({label:{"class":"required"}})}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.TextAnnotation(a)},validate:function(b){var c=[];return _.isEmpty(_.trim(b.text))&&c.push({elementId:b.id,elementName:"Text Annotation",propertyName:"text",type:"error",message:"Notes cannot be blank."}),a.when(c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxTimerEventElement",["RX_PROCESS_DESIGNER","rxProcessShapeInterface","rxProcessShapeViewInterface","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator","i18n","$q","rxId",function(a,b,c,d,e,f,h,i){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.TimerEventView=joint.dia.ElementView.extend(joint.shapes.rx.ProcessShapeViewInterface).extend({pointerdown:function(a,b,c){var d=this.model.getParentId();
if(d){var e=this.model.collection.get(d),f=e.getLayout(),h=this.model.get("position"),i=this.model.get("size"),j=g.rect(h.x,h.y,i.width,i.height).center();this.constraint=g.rect(f.position.x,f.position.y,f.size.width,f.size.height);var k=this.constraint.intersectionWithLineFromCenterToPoint(j);k&&k.x&&k.y&&joint.dia.ElementView.prototype.pointerdown.apply(this,[a,k.x,k.y])}else joint.dia.ElementView.prototype.pointerdown.apply(this,arguments)},pointermove:function(a,b,c){if(this.constraint){var d=this.constraint.intersectionWithLineFromCenterToPoint(g.point(b,c));d&&joint.dia.ElementView.prototype.pointermove.apply(this,[a,d.x,d.y])}}}),joint.shapes.rx.TimerEvent=joint.shapes.bpmn.Event.extend(joint.shapes.rx.ProcessShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.TimerEvent",size:{width:50,height:50},attrs:{".label":{fill:"gray",text:f(a.processElementResourceTypes.timerEvent)}},eventType:"intermediate",icon:"clock"},joint.shapes.bpmn.Event.prototype.defaults),initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:parent",this._snapToParentBorder)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new e(this),this._expressionConfigurator},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments),c=this.get("parent");return b&&(c&&(b.attachedToNode=i.get(c)),b.event={resourceType:"com.bmc.arsys.rx.services.process.domain.TimerEventDefinition",timeExpression:b.timer||""},delete b.timer),b},onChangePosition:function(){this._snapToParentBorder()},_snapToParentBorder:function(){var a=this.get("parent");if(a){var b=this.collection.get(a),c=b.position(),d=b.attributes.size,e=this.position(),f=this.attributes.size;c.bottom=c.y+d.height,c.right=c.x+d.width,e.centerY=e.y-f.height/2,e.centerX=e.x+f.width/2,e.centerY===c.y&&e.centerY===c.bottom||e.centerX!==c.x&&e.centerX!==c.right?e.centerY===c.y&&e.centerY===c.bottom||(e.centerY<=c.y?this.position(e.x,c.y-f.height/2):this.position(e.x,c.y+d.height-f.height/2)):e.centerX<=c.x?this.position(c.x-f.width/2,e.y):this.position(c.x+d.width-f.width/2,e.y)}},getOperators:function(){return d.operators.math},labelPath:"attrs/.label/text",clearLabel:!0,elementCanvasSize:{width:30,height:30}}),{getRxData:function(b){var c={resourceType:a.processElementResourceTypes.timerEvent,name:"Timer",description:""};return b&&(_.assign(c,b),c.timer=c.event&&c.event.timeExpression),c},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b(),d={readonly:a,inputs:{rxData:{description:{label:"Description",type:"textarea",group:"properties",index:1,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},timer:{label:"Timer",type:"rx-inspector-timer-field",group:"properties",index:2,attrs:b({label:{"class":"required"},textarea:{disabled:!0}})}}},groups:{properties:{label:"General",index:1},geometry:{label:"Geometry",index:2,closed:!0}}};return d},getRxConfig:function(a,b){b=b||{};var c=b.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(c)}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.TimerEvent(a)},registerValidators:function(a){function b(b,c,d){var e=a.attributes.commandManager.graph,f=e.getCell(c.data.id);if(f){if("rx.TimerEvent"!==f.get("type"))return;var g=f.get("parent"),h=_.get(c,"data.previous.parent");if(!g)return void d("The Timer Event can only be added to a User Task or a Receive Task element.");if(c&&"change:parent"===c.action&&h&&g!==h)return void d("Timer Event event cannot be detached from its parent.")}}a.validate("add change:parent",b)},validate:function(a,b){var c=[],d=_.where(b.flowElements,{sourceNode:a.id}).length;return 1!==d&&c.push({elementId:a.id,elementName:"Timer",type:"warning",message:"One outbound sequence flow is required."}),0===a.event.timeExpression.length&&c.push({elementId:a.id,elementName:"Timer",type:"warning",message:"Timer cannot be blank."}),h.when(c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxUserTaskElementExpressionConfigurator",["$q","rxId","RX_RECORD_DEFINITION","RX_EXPRESSION_EDITOR","rxMultiInstanceExpressionConfigurator","rxDesignerCache",function(a,b,c,d,e,f){return e.extend({initialize:function(e){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var g={regExp:/^rxData\/completeTaskCondition$/g,updateDataDictionary:function(c,d){var f,g=_(c).find({label:"Activities"});return g&&(f=_(g.children).find({id:b.get(e.id)}),f&&(f.children.forEach(function(a){a.value="${userTask."+a.label+"}"}),_.remove(c,g),c.push(f))),a.when(c)},operators:d.operators.all};this.registerExpressionConfig(g);var h={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(c,d){var f=_(c).find({label:"Activities"}),g=[];if(f){var h=_(f.children).find({id:b.get(e.id)});if(h){var i=_(c).find({label:"General"}),j=_(c).find({label:"Process Variables"});j&&g.push(j),g.push(i),g.push(h)}}return a.when(g)},operators:d.operators.math};this.registerExpressionConfig(h);var i={updateDataDictionary:function(b,d){return e._lastRecordDefinitionName&&d?f.getRecordDefinition(e._lastRecordDefinitionName).then(function(a){if(d){var e=_(a.fieldDefinitions).find({name:_(d.split("/")).findLast(),resourceType:c.dataTypes.selection.resourceType});if(e){var f=_(e.optionNamesById).map(function(a,b){return{label:a,value:b}}).value();b.unshift({label:"Options",children:f})}}return b}):a.when(b)},operators:d.operators.math};this.setDefaultDictionaryConfig(i)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxUserTaskElement",["$q","i18n","rxString","RX_PROCESS_DESIGNER","RX_DEFINITION_PICKER","RX_USER_TASK","rxDesignerCache","rxUserTaskElementModel","rxMultiInstanceConfiguration","rxProcessElementSearch",function(a,b,c,d,e,f,g,h,i,j){function k(a){return"REQUIRED"===a.fieldOption&&(""===a.defaultValue||null===a.defaultValue||void 0===a.defaultValue)}return{getRxData:function(a){function b(b){c[b]={},(a[b]||[]).forEach(function(a){c[b][a.assignTarget]=a.expression})}var c={resourceType:d.processElementResourceTypes.userTask,name:"User Task",description:"",recordDefinitionName:"",recordInstanceOrId:"",completeTaskCondition:"",inputMap:[],outputMap:[],taskCancellationInputMap:[],loopType:"",multiInstanceLoopDefinition:null,mode:f.mode.createRecord};return a&&(_.assign(c,a),b("inputMap"),b("taskCancellationInputMap")),c},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},mode:{label:"Mode",type:"rx-inspector-group-button",group:"properties",index:3,options:[{value:f.mode.createRecord,content:"Create Record"},{value:f.mode.updateRecord,content:"Update Record"}],attrs:c},recordDefinitionName:{label:"Record Definition",type:"select",options:[],group:"properties",index:4,attrs:b({label:{"class":"required"}})},recordInstanceOrId:{label:"Record ID",type:"rx-inspector-expression-node-field",group:"properties",index:5,attrs:b({label:{"class":"required"}}),when:a?{and:[{ne:{"rxData/recordInstanceOrId":""}},{ne:{"rxData/recordInstanceOrId":void 0}}]}:{and:[{regex:{"rxData/recordDefinitionName":/^(?=\s*\S).*$/}},{eq:{"rxData/mode":f.mode.updateRecord}}]}},completeTaskCondition:{label:"Completion Criteria",type:"rx-inspector-expression-node-field",group:"properties",index:6,when:{regex:{"rxData/recordDefinitionName":/^(?=\s*\S).*$/}},attrs:b({label:{"class":"required"}})},inputMap:{type:"rx-inspector-input-map-fields",group:"inputMap",when:{regex:{"rxData/recordDefinitionName":/^(?=\s*\S).*$/}}},outputMap:{type:"list",group:"outputMap",item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}},when:{regex:{"rxData/recordDefinitionName":/^(?=\s*\S).*$/}},attrs:c}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},taskCancellationInputMap:{label:"Cancellation Input Map",index:4,closed:!0},multiInstance:{label:"Multi Instance Loop",index:5},geometry:{label:"Geometry",index:6,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a),f=this.getRxInspector(d);return a&&0===a.outputMap.length&&d&&(delete f.groups.outputMap,delete f.inputs.rxData.outputMap),{rxData:e,rxInspector:f}},getShape:function(){var a=this.getRxConfig();return new joint.shapes.rx.UserTask(a)},validate:function(e,f){var h,l=[],m=a.defer(),n=e.outputMap||[],o=e.label;if(c.isEmptySafe(e.label))o=b(d.processElementResourceTypes.userTask),e.hasOwnProperty("label")&&l.push({elementId:e.id,elementName:o,propertyName:"label",type:"error",message:"Label cannot be blank."});else{var p=j.filter(f,{label:o});p.length>1&&l.push({elementId:e.id,elementName:o,propertyName:"label",type:"error",message:"Label must be unique."})}var q=_.where(f.flowElements,{targetNode:e.id}).length,r=_.where(f.flowElements,{sourceNode:e.id}).length;0!==q&&1===r||l.push({elementId:e.id,elementName:o,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),c.isEmptySafe(e.recordDefinitionName)?l.push({elementId:e.id,elementName:o,propertyName:"recordDefinitionName",type:"error",message:"Record Definition cannot be blank."}):(c.isEmptySafe(e.recordInstanceOrId)&&(h=g.getRecordDefinition(e.recordDefinitionName).then(function(a){var b=_(a.fieldDefinitions).filter(k).pluck("name").value();_.each(b,function(a){var b=_.find(e.inputMap,{assignTarget:a});b&&!c.isEmptySafe(b.expression)||l.push({elementId:e.id,elementName:o,propertyName:"inputMap/"+a,type:"warning",message:'Input Map Property "'+a+'" cannot be blank.'})})})),c.isEmptySafe(e.completeTaskCondition)&&l.push({elementId:e.id,elementName:o,propertyName:"completeTaskCondition",type:"warning",message:"Completion Criteria cannot be blank."})),_.each(n,function(a,b){c.isEmptySafe(a.assignTarget)&&l.push({elementId:e.id,elementName:o,propertyName:"outputMap/"+b+"/assignTarget",type:"error",message:'Output Map Parameter\'s "Name" cannot be blank.'}),c.isEmptySafe(a.expression,b)&&l.push({elementId:e.id,elementName:o,propertyName:"outputMap/"+b+"/expression",type:"error",message:'Output Map Parameter\'s "Source" cannot be blank.'})});var s=_.uniq(n,"assignTarget");return s.length!==n.length&&l.push({elementId:e.id,elementName:o,type:"error",message:"Output Map parameter names must be unique."}),i.validate(e,o,l),h?h["finally"](function(){m.resolve(l)}):m.resolve(l),m.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxUserTaskElementModel",["$q","dialogs","i18n","rxId","RX_PROCESS_DESIGNER","RX_RECORD_DEFINITION","RX_EXPRESSION_EDITOR","RX_DEFINITION_PICKER","RX_USER_TASK","$rootScope","rxString","rxDesignerCache","rxProcessShapeViewInterface","rxProcessShapeInterface","definitionNameFilter","rxUserTaskElementExpressionConfigurator","rxMultiInstanceConfiguration","rxMultiInstanceInterface","rxProcessElementSearch","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a){return"REQUIRED"===a.fieldOption&&null===a.defaultValue}function v(){return l.getRecordDefinitionDescriptors().then(function(a){return _(a).filter({recordDefinitionType:f.recordDefinitionTypes.regular.recordDefinitionType}).map(function(a){return{content:o(a.name),value:a.name}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()})}return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.UserTaskView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ProcessShapeViewInterface),joint.shapes.rx.UserTask=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ProcessShapeInterface).extend(joint.shapes.rx.MultiInstanceInterface).extend({_lastRecordDefinitionName:null,_expressionConfigurator:null,_lastMode:null,defaults:joint.util.deepSupplement({type:"rx.UserTask",size:{width:70,height:60},attrs:{".icon":{width:12,height:12,"ref-x":3},rect:{rx:2,ry:2}},icon:"user",content:c(e.processElementResourceTypes.userTask)},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);return b&&(this._transformMap(b,"inputMap"),this._transformMap(b,"taskCancellationInputMap"),this._persistMultiInstanceInfo(b)),delete b.mode,b},_transformMap:function(a,b){var c=[];for(var d in a[b]){var e=a[b][d];e&&c.push({assignTarget:d,expression:e})}a[b]=c},_updateCls:function(){this.get("rxInspector").cls=k.isEmptySafe(this.get("rxData").recordInstanceOrId)?"":"rx-user-task-mode-update"},initialize:function(a){if(this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),a&&a.rxData&&a.rxData.recordDefinitionName){var b=a.rxData.recordInstanceOrId||"";this.prop("rxData/recordInstanceOrId",b),this._lastRecordDefinitionName=a.rxData.recordDefinitionName,this._lastMode=a.rxData.recordInstanceOrId?i.mode.updateRecord:i.mode.createRecord,this.prop("rxData/mode",this._lastMode)}this._updateCls()},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new p(this),this._expressionConfigurator},_onChangeRxData:function(a,c,d){var e=this;e._lastRecordDefinitionName!==c.recordDefinitionName&&(e._lastRecordDefinitionName?b.confirm("Warning!","Input Map, Output Map, Record ID, and Completion Criteria fields will be cleared. Do you want to continue?").result.then(function(){e._setRecordDefinitionName(c.recordDefinitionName)},function(){e.prop("rxData/recordDefinitionName",e._lastRecordDefinitionName)}):e._setRecordDefinitionName(c.recordDefinitionName)),e._lastMode!==c.mode&&(e._lastMode&&e.prop("rxData/recordInstanceOrId")?b.confirm("Warning!","Record ID field will be cleared. Do you want to continue?").result.then(function(){e.prop("rxData/recordInstanceOrId",""),e._lastMode=c.mode},function(){e.prop("rxData/mode",e._lastMode)}):(e.prop("rxData/recordInstanceOrId",""),e._lastMode=c.mode)),/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(d.propertyPath)&&e._rebuildOutputMap(d.propertyValue),e._updateCls()},_onChangeSize:function(){_.each(this.getEmbeddedCells(),function(a){a._snapToParentBorder&&a._snapToParentBorder()})},_setRecordDefinitionName:function(a){var b=this;this._lastRecordDefinitionName=a,l.getRecordDefinition(a).then(function(a){b.prop("rxData/recordInstanceOrId","",{silent:!0}),b.prop("rxData/completeTaskCondition","",{silent:!0}),b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0}),b._rebuildInputMaps(a),b._updateMultiInstanceInfo().then(function(){j.$broadcast(g.events.refreshInspector,b)})})},_rebuildInputMaps:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData"));a?(b.inputs.rxData.taskCancellationInputMap=this._buildInspectorMap(a,"taskCancellationInputMap",!1),c.inputMap=this._buildDataMap(a),c.taskCancellationInputMap=this._buildDataMap(a)):(c.inputMap={},delete b.inputs.rxData.taskCancellationInputMap,c.taskCancellationInputMap={}),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0})},_buildInspector:function(a){var b=angular.copy(this.get("rxInspector"));b.inputs.rxData.taskCancellationInputMap=this._buildInspectorMap(a,"taskCancellationInputMap",!1),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.trigger("rx:change:inputs",this)},_buildInspectorMap:function(a,b,c){var d={},e=this.prop("rxInspector/readonly"),g=this._getFieldDefinitions(a);return c&&(g=_.sortBy(g,function(a){return!u(a)})),g.forEach(function(a){var g={label:a.name,type:"rx-inspector-expression-node-field",group:b};if(a.resourceType===f.dataTypes.selection.resourceType&&(g.type="rx-inspector-expression-input-select",g.options=_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})),c&&u(a))g.attrs={label:{"class":"required"}};else if(e){var h={},i={};h["rxData/"+b+"/"+a.name]=void 0,i["rxData/"+b+"/"+a.name]="",g.when={and:[{ne:h},{ne:i}]}}e&&(g.attrs=g.attrs||{},$(g.attrs).prop({"input, textarea, select":{readonly:!0,disabled:!0}})),d[a.name]=g}),d},_buildDataMap:function(a){var b={};return this._getFieldDefinitions(a).forEach(function(a){b[a.name]=""}),b},_getFieldDefinitions:function(a){return _(a.fieldDefinitions).filter(function(a){return"SYSTEM"!=a.fieldOption}).sort(function(a,b){return a.name.localeCompare(b.name)}).value()},getCurrentRecordDefinition:function(){return l.getRecordDefinition(this._lastRecordDefinitionName)},getRecordDefinitionName:function(){return this._lastRecordDefinitionName},updateInspectorConfig:function(b){var c=this,d=[],e=angular.copy(this.get("rxInspector"));if(this.prop("rxInspector/inputs/rxData/recordDefinitionName/options").length||v().then(function(a){c.prop("rxInspector/inputs/rxData/recordDefinitionName/options",a),c.trigger("rx:change:inputs",c)}),e.inputs.rxData.outputMap){var f=t.getProcessVariables(b);e.inputs.rxData.outputMap.item.properties.assignTarget.options=f,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",e,{silent:!0}),c.trigger("rx:change:inputs",c)}return c._lastRecordDefinitionName&&d.push(l.getRecordDefinition(c._lastRecordDefinitionName).then(function(a){c._buildInspector(a),d.push(c._updateMultiInstanceInfo())})),a.all(d)},getAutoCompleteList:function(b){return b.fieldPath&&this.prop("rxData/recordDefinitionName")?l.getRecordDefinition(this._lastRecordDefinitionName).then(function(c){var d=_.find(c.fieldDefinitions,function(a){return a.id===Number(b.fieldPath)||a.name===b.fieldPath});return d&&d.resourceType===f.dataTypes.selection.resourceType?_(d.optionNamesById).values().map(function(a){return{id:a,label:a}}).value():a.when([])}):a.when([])},_showMultiInstanceInfo:function(){return this.prop("rxInspector/readonly")?this.prop("rxData/multiInstanceLoopDefinition"):this._lastRecordDefinitionName},supportDynamicQualification:function(a){return"rxData/completeTaskCondition"===a||joint.shapes.rx.MultiInstanceInterface.supportDynamicQualification.apply(this,arguments)},canEmbedElement:function(a){return"rx.TimerEvent"===_.get(a,"model.attributes.type")&&!this.get("inCallActivity")}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxWaitForApprovalReviewElement",["$q","$injector","$filter","RX_PROCESS_DESIGNER","rxDesignerCache","rxProcessDesignerCache","rxExpandableProcessShapeInterface","rxExpandableProcessShapeViewInterface","rxDefaultExpressionConfigurator","rxProcessShapeInterface","rxProcessShapeViewInterface","actionTypeNameFilter","approvalCompletionCriteriaFilter","rxProcessShape",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.WaitForApprovalReviewView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.ExpandableProcessShapeViewInterface).extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),!this.model.get("parent")&&this.model.get("expanded")&&_.isUndefined(this.model.get("embeds"))&&!this.model._expanding&&this.expand()},getPaperScale:function(){return new V(this.paper.viewport).scale()}}),joint.shapes.rx.WaitForApprovalReview=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.ExpandableProcessShapeInterface).extend({_expanding:!1,defaults:joint.util.deepSupplement({type:"rx.WaitForApprovalReview",activityType:"call-activity",content:"Wait For Approval Review",subProcess:!0,expanded:!1,collapsedSize:{width:70,height:60},size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},persist:function(a){var b=joint.shapes.rx.ProcessShapeInterface.persist.apply(this,arguments);if(b){b.inputMap&&b.inputMap.complexInputMap&&(b.inputMap=_.omit(b.inputMap,"complexInputMap")),b.recordDefinitionName&&(b=_.omit(b,"recordDefinitionName"));var c=[];for(var d in b.inputMap){var e=b.inputMap[d];e&&("Application Record Instance"===d?c.push({assignTarget:d,expression:e}):/^\"|\"$/g.test(e)?c.push({assignTarget:d,expression:e}):c.push({assignTarget:d,expression:'"'+e+'"'}))}b.calledProcessDefinitionName=b.calledProcessDefinitionName.trim(),b.inputMap=c}return b},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:size",this._onChangeSize),this.listenTo(this,"change:expanded",this._updateGeometryGroup)},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new i(this),this._expressionConfigurator},_onChangeSize:function(a,b){this.get("expanded")||this.set("collapsedSize",b)},_onChangeRxData:function(a,b,c){var d=this;/^(rxData\/outputMap\/)[0-9]+(\/assignTarget)$/g.test(c.propertyPath)&&d._rebuildOutputMap(c.propertyValue),b.inputMap.complexInputMap&&"rxData/inputMap/complexInputMap"==c.propertyPath&&(a.trigger("batch:start"),a.prop("rxData/inputMap/Approval Process Name",b.inputMap.complexInputMap.processName),a.prop("rxData/inputMap/Approver List",b.inputMap.complexInputMap.approversList),a.prop("rxData/inputMap/Approval Completion Criteria",b.inputMap.complexInputMap.multipleApprovers),a.trigger("batch:stop"))},updateInspectorConfig:function(b){var c=this,d=angular.copy(this.get("rxInspector"));if(this._updateGeometryGroup(),d.inputs.rxData.outputMap){var e=n.getProcessVariables(b);d.inputs.rxData.outputMap.item.properties.assignTarget.options=e,c.unset("rxInspector",{silent:!0}),c.prop("rxInspector",d,{silent:!0}),c.trigger("rx:change:inputs",c)}return b.inputParams&&1==b.inputParams.length&&!angular.equals(b.inputParams[0].recordDefinitionName,c.prop("rxData/inputMap/Application Record Instance"))&&57e3==b.inputParams[0].id&&(c.prop("rxData/inputMap/Application Record Instance","${processContext."+b.inputParams[0].name+"}"),c.recordDefinitionName=b.inputParams[0].recordDefinitionName),a.when()},_updateGeometryGroup:function(){var a=this,b=this.get("rxInspector"),c={input:{readonly:!0,disabled:!0}},d=this.get("expanded")?c:{};b.inputs.position.x.attrs=b.inputs.position.y.attrs=d,b.inputs.size.width.attrs=b.inputs.size.height.attrs=d,this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),a.trigger("rx:change:inputs",a)},getCalledProcessDefinition:function(){return e.getProcessDefinition(this.prop("rxData/calledProcessDefinitionName"))},_prepareForExpand:function(){var c=this,d=a.defer();return this.getCalledProcessDefinition().then(function(a){f.loadFlowElementDependencies(a).then(function(){var g=c.prop("rxData/calledProcessDefinitionName")+":"+c.get("id"),h=f.getProcessClone(g);if(!h){var i=b.get("rxProcessDesignerElementManager"),j=i.cloneProcessDefinition(a);h={definition:j,graph:i.getGraph(j,{readonly:!0})},f.setProcessClone(g,h),e.setProcessDefinition(j)}d.resolve(h)})},function(){d.reject()}),d.promise},_afterExecuteExpand:function(){this.attr({".body":{fill:"#f2f2f2"},".sub-process":{visibility:"hidden"}})},_prepareCellModel:function(a){this.constructor.__super__._prepareCellModel.apply(this,arguments),a.set({inCallActivity:!0},{silent:!0})},_executeCollapse:function(){this.unembedElements(),this.set("parentCallActivity",null,{silent:!0}),this.attr({".body":{fill:"#ffffff"},".sub-process":{visibility:"visible"}})}}),{getRxData:function(a){var b={resourceType:d.processElementResourceTypes.callActivity,name:"Wait For Approval Review",calledProcessDefinitionName:"com.bmc.arsys.rx.approval:Wait for Approval Review",description:"",outputMap:[],multiInstanceLoopDefinition:null};if(a){_.assign(b,a),b.inputMap={};var e={};a.inputMap.forEach(function(a){var d=a.expression.replace(/^\"|\"$/g,"");b.inputMap[a.assignTarget]=d,"Approval Process Name"===a.assignTarget&&(e.processName=d),"Approver List"===a.assignTarget&&(e.approversList=d),"Approval Completion Criteria"===a.assignTarget&&(e.multipleApprovers=c("approvalCompletionCriteria")(d))}),b.inputMap.complexInputMap=e}return b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},description:{label:"Description",type:"textarea",group:"properties",index:2,attrs:c,when:a?{and:[{ne:{"rxData/description":void 0}},{ne:{"rxData/description":""}}]}:void 0},inputMap:{"Application Record Instance":{label:"Record Instance",type:"text",group:"inputMap",attrs:{label:{"class":"required"},input:{readonly:!0}}},complexInputMap:{type:"rx-inspector-wait-for-approval-field",group:"inputMap"},"Approval Process Name":{label:"WFAD Name",type:"text",group:"inputMap",attrs:{label:{"class":"required"},input:{readonly:!0}}},"Approver List":{label:"Approvers",type:"textarea",group:"inputMap",attrs:{label:{"class":"required"},textarea:{readonly:!0}}},"Approval Completion Criteria":{label:"Completion Criteria",type:"rx-inspector-read-only-text",filter:"approvalCompletionCriteria",group:"inputMap",attrs:{label:{"class":"required"},input:{readonly:!0}}}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"rx-inspector-input-select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}}},position:{x:{type:"number",group:"geometry",label:"X",attrs:c},y:{type:"number",group:"geometry",label:"Y",attrs:c}},size:{width:{type:"number",group:"geometry",label:"Width",attrs:c},height:{type:"number",group:"geometry",label:"Height",attrs:c}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3},multiInstance:{label:"Multi Instance Loop",index:4},geometry:{label:"Geometry",index:5,closed:!0}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0,e=this.getRxData(a),f=this.getRxInspector(d);return a&&0===a.outputMap.length&&d&&(delete f.groups.outputMap,delete f.inputs.rxData.outputMap),{rxData:e,rxInspector:f}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.WaitForApprovalReview(b)},validate:function(b,c){var d=[],e=b.outputMap||[],f=b.label;_.isEmpty(_.trim(b.label))&&b.hasOwnProperty("label")&&d.push({elementId:b.id,elementName:"Wait For Approval Review",propertyName:"label",type:"error",message:"Label cannot be blank."});var g=_.where(c.flowElements,{targetNode:b.id}).length,h=_.where(c.flowElements,{sourceNode:b.id}).length;0!==g&&1===h||d.push({elementId:b.id,elementName:f,type:"warning",message:"One outbound and at least one inbound sequence flow is required."}),_.each(e,function(a,c){_.isEmpty(_.trim(a.assignTarget))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/assignTarget",type:"error",message:"Output Map Parameter Name cannot be blank."}),_.isEmpty(_.trim(a.expression))&&d.push({elementId:b.id,elementName:f,propertyName:"outputMap/"+c+"/expression",type:"error",message:"Output Map Parameter Source cannot be blank."})});var i=_.uniq(e,"assignTarget");return i.length!==e.length&&d.push({elementId:b.id,elementName:f,type:"error",message:"Output Map parameter names must be unique."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessAutoComplete",["RxAutoComplete",function(a){function b(a){var b,c=a.match(/\${activityResults\.rx-([\d\w-]+)\.(.*)}$/);return c&&c[1]&&(b={id:c[1],fieldPath:c[2],type:"activity"}),b}function c(a){var b,c=a.match(/\${userTask\.(.*)}$/);return c&&(b={fieldPath:c[1],type:"userTask"}),b}function d(a){var b,c=a.match(/\${processContext\.(.*)}$/);return c&&c[1]&&(b={fieldPath:c[1],type:"process"}),b}function e(a){return new g(a)}var f=[b,c,d],g=a.extend({initialize:function(a){rx.assert.assertDefinedAndNotNull(a),this.graph=a},extractData:function(a,b){for(var c,d={component:null,fieldPath:null},e=0;!c&&e<f.length;)c=f[e](a),e++;if(c)switch(c.type){case"activity":d.component=this.graph.getCell(c.id),d.fieldPath=c.fieldPath;break;case"process":var g=_.find(this.graph.getCells(),function(a){return"rx.ProcessModel"==a.get("type")});g&&(d.component=g,d.fieldPath=c.fieldPath);break;case"userTask":d.component=b.cell,d.fieldPath=c.fieldPath}return d}});return{getInstance:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessDataDictionary",["$q","RX_PROCESS_DESIGNER","RX_RECORD_DEFINITION","rxDesignerCache","rxString","rxProcessElementSearch","bundlePathFilter","definitionNameFilter",function(a,b,c,d,e,f,g,h){function i(){l={plainProcessDefinition:{},currentDataDictionary:{}}}function j(b,c){return angular.equals(b,l.plainProcessDefinition)?a.when(l.currentDataDictionary):(l.plainProcessDefinition=angular.copy(b),n(b,c).then(function(a){return l.currentDataDictionary=a,l.currentDataDictionary}))}var k={processInput:{label:"Process Input Parameter",type:"1. Process Input Parameter",icon:"d-icon-arrow_right_square_input"},processOutput:{label:"Process Output Parameter",type:"2. Process Output Parameter",icon:"d-icon-arrow_right_square_o"},outputMapEntry:{label:"Local Process Variable",type:"3. Output Map Entry",icon:"d-icon-arrows_right"},activityOutput:{label:"Activity Output",type:"Activity Output",icon:"d-icon-arrow_chart"},keyword:{label:"Keyword",type:"Keyword",icon:"d-icon-dollar"}},l={plainProcessDefinition:{},currentDataDictionary:{}},m=function(){return _.values(k)},n=function(i,j,l){function m(a){return _(a).sortBy("type").uniq("value").value()}var n=function(a,b){return a.label.localeCompare(b.label)},o=[],p=f.flattenElements(i),q=function(a,b){return _(b).map(function(b){var c={label:e.prettify(b.name),value:"${activityResults."+a+"."+b.name+"}",type:k.activityOutput.type,icon:k.activityOutput.icon};return 0===_.size(b.dataTypeDetail)?c.icon=k.activityOutput.icon:c.children=q(a+"."+b.name,b.dataTypeDetail),c}).sort(n).value()},r=_(p).filter(function(a){return a.resourceType===b.processElementResourceTypes.processAction&&!_.includes(["createRecord","getRecord","getRecordsByQuery"],a.actionTypeName)}).transform(function(a,b){var c=_.find(j,{actionTypeName:b.actionTypeName});c.outputParams.length&&a.push({label:b.label,id:b.id,children:q(b.id,c.outputParams)})}).value(),s=_(p).filter(function(a){return a.resourceType===b.processElementResourceTypes.receiveTask&&a.signalParams.length>0}).map(function(a){return{label:a.label,children:_.map(a.signalParams,function(a){return{label:a,value:"${processContext."+a+"}",type:k.outputMapEntry.type,
icon:k.outputMapEntry.icon}}).sort(n)}}).sort(n).value(),t=_(p).filter(function(a){return a.resourceType===b.processElementResourceTypes.receiveTask&&a.signalParams.length>0}).map(function(a){return{label:a.label,children:_.map(a.signalParams,function(b){return{label:b,value:"${activityResults."+a.id+"."+b+"}",type:k.activityOutput.type,icon:k.activityOutput.icon}}).sort(n)}}).sort(n).value(),u=_(i.inputParams).filter(function(a){return _.find(c.dataTypes,{resourceType:a.resourceType})&&a.resourceType!=c.dataTypes.recordInstance.resourceType}).pluck("name").compact().map(function(a){return{label:a,type:k.processInput.type,icon:k.processInput.icon,value:"${processContext."+a+"}"}}).value(),v=_(i.outputParams).pluck("name").uniq().compact().map(function(a){return{label:a,type:k.processOutput.type,icon:k.processOutput.icon,value:"${processContext."+a+"}"}}).value(),w=_(p).pluck("outputMap").flatten().compact().pluck("assignTarget").uniq().compact().map(function(a){return{label:a,type:k.outputMapEntry.type,icon:k.outputMapEntry.icon,value:"${processContext."+a+"}"}}).value(),x={label:"Process Variables",children:[]},y={label:"General",children:[{label:"Current User",type:k.keyword.type,icon:k.keyword.icon,value:"$USER$"},{label:"Current Date",type:k.keyword.type,icon:k.keyword.icon,value:"$DATE$"},{label:"Current Time",type:k.keyword.type,icon:k.keyword.icon,value:"$TIME$"},{label:"Current Date and Time",type:k.keyword.type,icon:k.keyword.icon,value:"$TIMESTAMP$"},{label:"Process Correlation ID",type:k.keyword.type,icon:k.keyword.icon,value:"$PROCESSCORRELATIONID$"},{label:"Current Week Day",type:k.keyword.type,icon:k.keyword.icon,value:"$WEEKDAY$"},{label:"Current Groups",type:k.keyword.type,icon:k.keyword.icon,value:"$GROUPS$"},{label:"Current Group IDs",type:k.keyword.type,icon:k.keyword.icon,value:"$GROUPIDS$"},{label:"Current Roles",type:k.keyword.type,icon:k.keyword.icon,value:"$ROLES$"},{label:"Current User Locale",type:k.keyword.type,icon:k.keyword.icon,value:"$LOCALE$"},{label:"NULL",type:k.keyword.type,icon:k.keyword.icon,value:"$NULL$"}]};y.children=y.children.sort(n);var z={label:"Activities",children:[]},A=function(){var a=_.filter(p,function(a){return a.resourceType==b.processElementResourceTypes.callActivity&&a.calledProcessDefinitionName}),c=_.pluck(a,"calledProcessDefinitionName");return d.getProcessDefinitions(c).then(function(b){return _(a).map(function(a){var c=_.find(b,{name:a.calledProcessDefinitionName});if(c&&c.outputParams.length)return{label:a.label,children:_(c.outputParams).pluck("name").uniq().map(function(b){return{label:b,type:k.activityOutput.type,icon:k.activityOutput.icon,value:"${activityResults."+a.id+"."+b+"}"}}).sort(n).value()}}).compact().value()})},B=function(a){var b=_.find(a.recordDefinitions,{name:a.element.recordDefinitionName}),c=a.actionOutputPrefix||"",d=_(b.fieldDefinitions).map(function(b){var d;return d=a.association?"${"+a.groupPrefix+"."+a.element.id+"._associations."+a.association.value.associationGuid+"."+a.association.value.participantRoleName+"[0]."+b.id+"}":["${"+a.groupPrefix+"."+a.element.id+c+"."+b.id+"}","${"+a.groupPrefix+"."+a.element.id+c+"."+b.name+"}"],{label:b.name,type:a.legendType.type,icon:a.legendType.icon,value:d}}).sort(n).value();if(a.associations&&a.associations[b.name]){var e=C(a,a.associations[b.name].data);e.length&&d.unshift({label:"Associations",type:a.legendType.type,children:e})}if(!_.isEmpty(c)){var f=_.clone(d);d=[{label:"Output",type:a.legendType.type,icon:a.legendType.icon,value:"${"+a.groupPrefix+"."+a.element.id+c+"}",children:f}]}return{icon:a.legendType.icon,type:a.legendType.type,label:a.element.label,id:a.element.id,children:d}},C=function(a,b){var c=[];return b.length&&_.each(b,function(b){var d={},e=_.find(a.associations[a.element.recordDefinitionName].data,function(a){return a.value.recordDefinition===b.value.recordDefinition});e&&(d[b.value.recordDefinition]={data:e.children});var f=B({recordDefinitions:a.recordDefinitions,element:{recordDefinitionName:b.value.recordDefinition,id:a.element.id,label:a.element.label},groupPrefix:a.groupPrefix,legendType:a.legendType,associations:d,association:_.assign(b,{nodeAId:a.element.recordDefinitionName})});c.push({label:h(b.value.participantRoleName),type:a.legendType.type,icon:a.legendType.icon,children:f.children,value:"${"+a.groupPrefix+"."+a.element.id+"._associations."+b.value.associationGuid+"."+b.value.participantRoleName+"[0]}"})}),c},D=function(a){return B(_.assign(a,{groupPrefix:"activityResults",legendType:k.activityOutput}))},E=function(){var c=_.filter(p,function(a){return a.resourceType==b.processElementResourceTypes.userTask&&a.recordDefinitionName}),e=_.map(c,function(a){return d.getRecordDefinition(a.recordDefinitionName)});return a.all(e).then(function(a){return _.map(c,function(b){return D({recordDefinitions:a,element:b})})})},F=function(){return d.getFieldTypes().then(function(a){var b=_.filter(a,function(a){return"standardlib"!==g(a.fieldTypeName)}),c=_.filter(i.inputParams,function(a){return _.find(b,{fieldDefinitionType:a.resourceType})});return _(c).map(function(a){var c=_.find(b,{fieldDefinitionType:a.resourceType});if(c)return{label:a.name,value:"${processContext."+a.name+"}",type:k.processInput.type,children:_(c.fieldValueTypeDetail).map(function(b){return{label:e.prettify(b.name),type:k.processInput.type,icon:k.processInput.icon,value:"${processContext."+a.name+"."+b.name+"}"}}).sort(n).value()}}).compact().value()})},G=function(){var b=_(i.inputParams).filter(function(a){return a.resourceType==c.dataTypes.recordInstance.resourceType&&a.recordDefinitionName}).map(function(a){return{label:a.name,id:a.name,recordDefinitionName:a.recordDefinitionName.replace(/^\"|\"$/g,"")}}).value(),e={},f=_.pluck(b,"recordDefinitionName");return e.recordDefinitions=d.getRecordDefinitions(f),e.associations=d.getRecordAssociations(f),a.all(e).then(function(c){var e=_.keys(c.associations);if(e.length){var f=function(a){return _(a).values().transform(function(a,b){b.value&&a.push(b.value),(b.data||b.children)&&a.push(f(b.data||b.children))}).flatten().value()},g=_(f(c.associations)).pluck("recordDefinition").uniq().value();return a.when(d.getRecordDefinitions(g)).then(function(a){var d=c.recordDefinitions;return a&&(d=_.union(d,a)),_.map(b,function(a){var b=B({recordDefinitions:d,element:a,groupPrefix:"processContext",legendType:k.processInput,associations:c.associations});return b.value="${processContext."+a.id+"}",b})})}return _.map(b,function(a){var b=B({recordDefinitions:c.recordDefinitions,element:a,groupPrefix:"processContext",legendType:k.processInput});return b.value="${processContext."+a.id+"}",b})})},H=function(){var c=_.filter(p,function(a){return a.resourceType===b.processElementResourceTypes.processAction&&_.includes(["createRecord","getRecord","getRecordsByQuery"],a.actionTypeName)&&_.find(a.inputMap,{assignTarget:"recordDefinitionName"})}),e=_(c).pluck("inputMap").flatten().filter({assignTarget:"recordDefinitionName"}).pluck("expression").map(function(a){return d.getRecordDefinition(a.replace(/^\"|\"$/g,""))}).value();return a.all(e).then(function(a){return _.map(c,function(b){var c=_(b.inputMap).filter({assignTarget:"recordDefinitionName"}).pluck("expression").value()[0].replace(/^\"|\"$/g,"");return D({recordDefinitions:a,element:{id:b.id,label:b.label,recordDefinitionName:c},actionOutputPrefix:"getRecordsByQuery"===b.actionTypeName?".output[0]":".output"})})})},I={callActivities:A(),userTasks:E(),recordActions:H(),recordInstanceInputParams:G(),inputParamsWithCustomFields:F()};return a.all(I).then(function(a){return z.children=z.children.concat(r,t,a.callActivities,a.userTasks,a.recordActions).sort(n),x.children=_(x.children).concat(a.inputParamsWithCustomFields,a.recordInstanceInputParams,w,v,u,_(s).pluck("children").flatten().value()).uniq().sort(n).value(),x.children.length&&(x.children=m(x.children),o.push(x)),o.push(y),z.children.length&&o.push(z),o})};return{clear:i,getCommonDataDictionary:j,getLegend:m}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessDesignerCache",["$q","RX_PROCESS_DESIGNER","rxDesignerCache","rxProcessElementSearch",function(a,b,c,d){function e(b){_.isArray(b)||(b=[b]),b=_.compact(b);var f=_(b).map(function(a){return _.pluck(d.filter(a,"calledProcessDefinitionName"),"calledProcessDefinitionName")}).flatten().unique().value();return f.length?c.getProcessDefinitions(f).then(function(a){return e(a)}):a.when()}function f(a){return i.processClones[a]}function g(a,b){i.processClones[a]=b}function h(){i={processClones:{}}}var i={processClones:{}};return{clear:h,getProcessClone:f,setProcessClone:g,loadFlowElementDependencies:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessDesignerConfiguration",["i18n","rxProcessDesignerElementManager","rxDesignerUserPreferences","rxDesignerCache","actionTypeNameFilter","bundlePathFilter","serviceNameFilter","RX_PROCESS_DESIGNER",function(a,b,c,d,e,f,g,h){var i=[{group:"Annotations",resourceType:h.processElementResourceTypes.textAnnotation,"default":!0,favorite:!1,timestamp:null},{group:"Events",resourceType:h.processElementResourceTypes.startEvent,"default":!0,favorite:!1,timestamp:null},{group:"Events",resourceType:h.processElementResourceTypes.endEvent,"default":!0,favorite:!1,timestamp:null},{group:"Events",resourceType:h.processElementResourceTypes.timerEvent,"default":!0,favorite:!1,timestamp:null},{group:"Activities",resourceType:h.processElementResourceTypes.callActivity,"default":!0,favorite:!1,timestamp:null},{group:"Activities",resourceType:h.processElementResourceTypes.receiveTask,"default":!0,favorite:!1,timestamp:null},{group:"Activities",resourceType:h.processElementResourceTypes.subProcess,"default":!0,favorite:!1,timestamp:null},{group:"Activities",resourceType:h.processElementResourceTypes.userTask,"default":!0,favorite:!1,timestamp:null},{group:"Gateways",resourceType:h.processElementResourceTypes.parallelGateway,"default":!0,favorite:!1,timestamp:null},{group:"Gateways",resourceType:h.processElementResourceTypes.exclusiveGateway,"default":!0,favorite:!1,timestamp:null}],j=c.getInstance(h.userPreferences.componentId,h.userPreferences.version,{stencilSettings:i}),k=function(a,b,c){var d=null;d=b.calledProcessDefinitionName?_.find(a,function(a){return a.calledProcessDefinitionName==b.calledProcessDefinitionName}):b.actionTypeName?_.find(a,function(a){return a.actionTypeName==b.actionTypeName}):_.find(a,{resourceType:b.resourceType}),d[c]=b[c]},l=function(a){return"Activities"===a?1:"Annotations"===a?2:"Events"===a?3:"Gateways"===a?4:"Records"===a?5:"User Message"===a?6:7};return{updateStencilConfiguration:function(a){var b=_.filter(d.getProcessDefinitionNamesSync(),function(a){return _(h.approvalElementResourceTypes).values().contains(a)}),c=_.filter(d.getProcessDefinitionNamesSync(),function(a){return _(h.assignmentElementResourceTypes).values().contains(a)});return j.getStencilSettings().then(function(d){var e=_.remove(d,{resourceType:h.processElementResourceTypes.processAction}),f=_.remove(d,function(a){return _.include(h.approvalElementResourceTypes,a.resourceType)||_.include(h.assignmentElementResourceTypes,a.resourceType)});return _.each(a,function(a){var b=_.find(e,{resourceType:h.processElementResourceTypes.processAction,actionTypeName:a.actionTypeName})||{};d.push({group:g(a.serviceName),resourceType:h.processElementResourceTypes.processAction,actionTypeName:a.actionTypeName,"default":!_.isBoolean(b["default"])||b["default"],favorite:!!_.isBoolean(b.favorite)&&b.favorite,timestamp:b.timestamp||null})}),_.each(b,function(a){var b=_.find(f,{resourceType:h.processElementResourceTypes.callActivity,calledProcessDefinitionName:a})||{};d.push({group:"Approvals",resourceType:a,"default":!_.isBoolean(b["default"])||b["default"],favorite:!!_.isBoolean(b.favorite)&&b.favorite,timestamp:b.timestamp||null})}),_.each(c,function(a){var b=_.find(f,{resourceType:h.processElementResourceTypes.callActivity,calledProcessDefinitionName:a})||{};d.push({group:"Assignment",resourceType:a,"default":!_.isBoolean(b["default"])||b["default"],favorite:!!_.isBoolean(b.favorite)&&b.favorite,timestamp:b.timestamp||null})}),_.find(d,{resourceType:h.processElementResourceTypes.timerEvent})||d.push({group:"Events",resourceType:h.processElementResourceTypes.timerEvent,"default":!0,favorite:!1,timestamp:null}),j.setStencilSettings(d),d})},get:function(a,b){var c=this;return j.getStencilSettings().then(function(d){return"recent"===a&&(a="timestamp"),d=_.filter(d,a),c._buildGroupsAndShapes(d,b)})},addToRecent:function(a){j.getStencilSettings().then(function(b){var c=null;c=a.calledProcessDefinitionName?_.find(b,{calledProcessDefinitionName:a.calledProcessDefinitionName}):a.actionTypeName?_.find(b,{actionTypeName:a.actionTypeName}):_.find(b,{resourceType:a.resourceType}),c&&(c.timestamp=_.now());var d=_.filter(b,"timestamp");if(d.length>20){var e=_.min(d,"timestamp");e.timestamp=null}j.setStencilSettings(b)})},removeRecents:function(){j.getStencilSettings().then(function(a){_.forEach(a,function(a){a.timestamp=null}),j.setStencilSettings(a)})},getSettings:function(){return j.getStencilSettings().then(function(b){return _(b).groupBy("group").map(function(b,c){return b=_(b).each(function(b){b.actionTypeName?b.label=e(b.actionTypeName):b.calledProcessDefinitionName?b.label=e(b.calledProcessDefinitionName):b.label=a(b.resourceType)}).sortBy("label").value(),{label:c,children:b}}).sortBy("label").sortBy(function(a){return l(a.label)}).value()})},setField:function(a,b){j.getStencilSettings().then(function(c){k(c,a,b),j.setStencilSettings(c)})},setGroup:function(a,b){j.getStencilSettings().then(function(c){_.forEach(a,function(a){k(c,a,b)}),j.setStencilSettings(c)})},_buildGroupsAndShapes:function(a,c){var d={},f={};return _(a).pluck("group").uniq().sortBy().sortBy(l).forEach(function(g,h){d[g]={label:g,index:h},f[g]=_(a).filter({group:g}).sortBy(function(a){return a.actionTypeName?e(a.actionTypeName):null}).map(function(a){var d=null;return a.actionTypeName&&(d=_.find(c,{actionTypeName:a.actionTypeName})),b.getShape(a.resourceType,d)}).value()}).value(),{groups:d,shapes:f}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").factory("rxProcessDesignerElementManager",["$q","rxId","rxProcessElementSearch","RX_PROCESS_DESIGNER","rxProcessDefinitionElement","rxStartEventElement","rxEndEventElement","rxUserTaskElement","rxCallActivityElement","rxProcessActionElement","rxParallelGatewayElement","rxExclusiveGatewayElement","rxSequenceFlowElement","rxTextAnnotationElement","rxTextAnnotationAssociationElement","rxSubProcessElement","rxReceiveTaskElement","rxApprovalProcessElement","rxWaitForApprovalReviewElement","rxTimerEventElement","rxAssignmentProcessElement","rxARApprovalProcessElement",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(a){function c(a){return _([]).concat(a.artifacts,a.flowElements).forEach(function(f){var g=new RegExp('("id":"|"parent":")('+b.getBase(f.id)+')"',"g");e[f.id]=e[f.id]||b.generate(),f.id=e[f.id],a.layout&&(a.layout=a.layout.replace(g,"$1"+b.getBase(f.id)+'"')),f.attachedToNode&&(e[f.attachedToNode]=e[f.attachedToNode]||b.generate(),f.attachedToNode=e[f.attachedToNode]),f.sourceNode&&(e[f.sourceNode]=e[f.sourceNode]||b.generate(),e[f.targetNode]=e[f.targetNode]||b.generate(),f.sourceNode=e[f.sourceNode],f.targetNode=e[f.targetNode]),f.resourceType==d.processElementResourceTypes.subProcess&&c(f)}).value(),a}var e={},f=JSON.stringify(c(a));return _.each(e,function(a,b){var c=new RegExp("(activityResults\\.)("+b+")([\\.\\}]+)","g");f=f.replace(c,"$1"+a+"$3")}),JSON.parse(f)}function x(a,c){var d=b.get(c),e=_.remove(a.flowElements,{id:d})[0];return e||(e=_.remove(a.artifacts,{id:d})[0]),e}var y={};return y[d.processElementResourceTypes.startEvent]=f,y[d.processElementResourceTypes.endEvent]=g,y[d.processElementResourceTypes.userTask]=h,y[d.processElementResourceTypes.callActivity]=i,y[d.processElementResourceTypes.processAction]=j,y[d.processElementResourceTypes.subProcess]=p,y[d.processElementResourceTypes.parallelGateway]=k,y[d.processElementResourceTypes.exclusiveGateway]=l,y[d.processElementResourceTypes.sequenceFlow]=m,y[d.processElementResourceTypes.receiveTask]=q,y[d.processElementResourceTypes.textAnnotation]=n,y[d.processElementResourceTypes.textAnnotationAssociation]=o,y[d.processElementResourceTypes.timerEvent]=t,y[d.approvalElementResourceTypes.approvalProcess]=r,y[d.approvalElementResourceTypes.waitForApprovalReview]=s,y[d.approvalElementResourceTypes.arApprovalPorcess]=v,y[d.assignmentElementResourceTypes.assignmentProcess]=u,{getShape:function(a){var b=y[a];return b.getShape.apply(b,_.drop(arguments))},setActionTypes:function(a){j.setActionTypes(a)},setFieldTypes:function(a){e.setFieldTypes(a)},setUserGroups:function(a){e.setUserGroups(a)},getProcessModel:function(){return e.getModel()},registerValidators:function(a){_.each(y,function(b){_.isFunction(b.registerValidators)&&b.registerValidators(a)})},removeElementById:function(a,b){var d,e=c.findOwner(a,b);return e&&(d=x(e,b)),d},validateProcess:function(b){var c=a.defer(),d=this,f=_([]).concat(b.flowElements||[],b.artifacts||[]).map(function(a){return d.validateElement(a,b)}).value();return f.push(e.validate(b)),a.all(f).then(function(a){c.resolve(_.compact(_.flatten(a)))}),c.promise},validateElement:function(a,b){var d=y[a.resourceType];if(_.isFunction(d.validate)){var e=c.findOwner(b,a.id);return d.validate(a,e)}},getGraph:function(a,e){var f=angular.fromJson(a.layout)||{cells:[]};return e=e||{},f.cells.forEach(function(g){var h=c.findById(a,b.get(g.id)),i=y[h.resourceType];if(_.includes(["rx.ReceiveTask","rx.UserTask"],g.type)){var j=_.filter(f.cells,{parent:g.id});j&&j.length&&(g.embeds=j)}"rx.ApprovalProcess"===g.type&&(i=y[d.approvalElementResourceTypes.approvalProcess]),"rx.WaitForApprovalReview"===g.type&&(i=y[d.approvalElementResourceTypes.waitForApprovalReview]),"rx.AssignmentProcess"===g.type&&(i=y[d.assignmentElementResourceTypes.assignmentProcess]),"rx.ARApprovalProcess"===g.type&&(i=y[d.approvalElementResourceTypes.arApprovalPorcess]),e.ownerProcessDefinitionName?g.ownerProcessDefinitionName=e.ownerProcessDefinitionName:g.ownerProcessDefinitionName=a.lastUpdateTime?a.name:a.id,_.extend(g,i.getRxConfig(h,a,e))}),f},fillLabels:function(a,d){a.layout&&c.each(a,function(a){var c=d.getCell(b.getBase(a.id));c&&c.labelPath&&(a.label=c.prop(c.labelPath))})},cloneProcessDefinition:function(a){var c=_.cloneDeep(a);return c.id=b.generate(),w(c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance").factory("rxProcessInstanceCommands",["rxCommandResource",function(a){var b=a.withType("com.bmc.arsys.rx.application.process.command.StartProcessInstanceCommand"),c=a.withType("com.bmc.arsys.rx.application.process.command.SuspendProcessInstanceCommand"),d=a.withType("com.bmc.arsys.rx.application.process.command.ActivateProcessInstanceCommand"),e=a.withType("com.bmc.arsys.rx.application.process.command.CancelProcessInstanceCommand");return{start:function(a,c){return rx.assert.assertStringWithLength(a),rx.assert.assertObject(c),b.execute({processDefinitionName:a,processInputValues:c})},suspend:function(a,b){return rx.assert.assertStringWithLength(a),rx.assert.assertStringWithLength(b),c.execute({processDefinitionName:a,processInstanceId:b})},resume:function(a,b){return rx.assert.assertStringWithLength(a),rx.assert.assertStringWithLength(b),d.execute({processDefinitionName:a,processInstanceId:b})},cancel:function(a,b,c){return rx.assert.assertStringWithLength(a),rx.assert.assertStringWithLength(b),e.execute({processDefinitionName:a,processInstanceId:b,cancelReason:c||null})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").factory("rxProcessInstanceGridFilter",function(){return{generateQueryParams:function(a){var b={};return _.each(a.userFilters.and,function(a){_.each(a.or,function(a){var c=_.keys(a.eq)[0],d=_.values(a.eq)[0];_.isUndefined(b[c])?b[c]=d:b[c]+=","+d})}),b}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").factory("rxProcessManagementUtils",function(){function a(a){return!_.includes(["$LASTHOUR$","$LASTDAY$","$LASTWEEK$","$LASTMONTH$","$LASTTHREEMONTH$"],a)}return{isCustomTimeFrame:a}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxJoinRecordDefinitionDataDictionary",["$q",function(a){function b(){_.assign(d,{joinRecordDefinition:{},currentDataDictionary:{}})}function c(b,c){return angular.equals(b,d.joinRecordDefinition)?a.when(d.currentDataDictionary):(d.joinRecordDefinition=angular.copy(b),f(b,c).then(function(a){return d.currentDataDictionary=a,d.currentDataDictionary}))}var d={},e={fields:{label:"Field Name",type:"Field Name",icon:"d-icon-arrow_right_square_input"}},f=function(a,b){return b.getDataDictionary(a,e)},g=function(){return _.values(e)};return{clear:b,getCommonDataDictionary:c,getLegend:g}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxAttachmentFieldDefinition",["$q","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c,d,e){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.AttachmentFieldDefinition=e.extend({defaults:{type:"rx.AttachmentFieldDefinition",icon:"field_attachment"},getRxData:function(a){var b=joint.shapes.rx.AttachmentFieldDefinition.__super__.getRxData.call(this,a);return delete b.defaultValue,b.maxSize=b.maxSize||null,b},getRxInspector:function(a){var b=d.isReadOnly(a);return joint.shapes.rx.AttachmentFieldDefinition.__super__.getRxInspector.call(this,a,{maxSize:{label:"Max File Size",type:"number",group:"details",attrs:{input:{disabled:b}}},searchable:{label:"Searchable",type:"toggle",group:"details",attrs:{input:{disabled:b}}}})},persist:function(a){joint.shapes.rx.AttachmentFieldDefinition.__super__.persist.call(this,a);var b=_.find(a.fieldDefinitions,{id:this.get("id")});b&&(b.searchable=b.searchable||!1,b.maxSize=b.maxSize||1e6)}}),{getModel:function(a){return new joint.shapes.rx.AttachmentFieldDefinition(a)},getNewFieldDefinition:function(){return d.getNewFieldDefinition({resourceType:b.dataTypes.attachment.resourceType})},validate:function(a){return d.validate(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxBooleanFieldDefinition",["rxFieldDefinition","rxFieldDefinitionModel","RX_RECORD_DEFINITION",function(a,b,c){var d=c.dataTypes["boolean"].resourceType;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.BooleanFieldDefinition=b.extend({defaults:{type:"rx.BooleanFieldDefinition"},getRxInspector:function(b){return joint.shapes.rx.BooleanFieldDefinition.__super__.getRxInspector.call(this,b,{defaultValue:{label:"Default Value",type:"select",options:[{value:"",content:""},{value:"true",content:"True"},{value:"false",content:"False"}],group:"details",attrs:{select:{disabled:a.isReadOnly(b)||!a.isPropertiesCustomizationEnabled(b)}}}})}}),{getModel:function(a){return new joint.shapes.rx.BooleanFieldDefinition(a)},getNewFieldDefinition:function(){return a.getNewFieldDefinition({resourceType:d})},validate:function(b){return a.validate(b)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxCharacterFieldDefinition",["$q","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","rxFieldDefinition","rxFieldDefinitionModel","definitionNameFilter","rxDesignerCache",function(a,b,c,d,e,f,g){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.CharacterFieldDefinition=e.extend({defaults:{type:"rx.CharacterFieldDefinition",icon:"field_text"},initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData)},_onChangeRxData:function(a,c,d){"rxData/customId"===d.propertyPath&&_.includes(b.AR_PASSWORD_FIELD_IDS,d.propertyValue)&&this.prop("rxData/namedListDefinition",null)},getRxData:function(a){var b=joint.shapes.rx.CharacterFieldDefinition.__super__.getRxData.call(this,a);return b.maxLength=b.maxLength||null,b},getRxInspector:function(a){var e=d.isReadOnly(a),f=!d.isPropertiesCustomizationEnabled(a),g={and:_(b.AR_PASSWORD_FIELD_IDS).map(function(a){return[{ne:{"rxData/id":a}},{ne:{"rxData/customId":a}}]}).flatten().value()};return joint.shapes.rx.CharacterFieldDefinition.__super__.getRxInspector.call(this,a,{shouldPersistEncrypted:{label:"Encrypted",type:"toggle",group:"details",attrs:{input:{disabled:e||f}}},namedListDefinition:{label:"Named List",type:"rx-inspector-definition-picker",definitionType:c.definitionTypes.namedList.type,group:"details",options:[],attrs:{input:{disabled:e||f}},when:g},maxLength:{label:"Length",type:"number",group:"details",attrs:{input:{disabled:e||_.includes(b.AR_CORE_FIELD_IDS,a.id)||f}}},defaultValue:{label:"Default Value",type:"text",group:"details",attrs:{input:{disabled:e||f}}},searchDefinition:{label:"Enable Full Text Search",type:"toggle",group:"details",attrs:{input:{disabled:e||f}}}})},persist:function(a){joint.shapes.rx.CharacterFieldDefinition.__super__.persist.call(this,a);var b=_.find(a.fieldDefinitions,{id:this.get("id")});b&&(b.shouldPersistEncrypted=b.shouldPersistEncrypted||!1,b.maxLength=b.maxLength||0,b.namedListDefinition=b.namedListDefinition||null,b.searchDefinition=b.searchDefinition?{stripTagsForSearch:!1,enableLiteralSearch:!1,searchCategoryName:null}:null)},updateInspectorConfig:function(){var b=a.defer(),c=this;return this.prop("rxInspector/inputs/rxData/namedListDefinition/options").length?b.resolve():g.getNamedListDefinitionNameDataPage().then(function(a){a=_.map(_.clone(a),function(a){return{value:a,content:f(a)}}),a.unshift({value:"",content:""}),c.prop("rxInspector/inputs/rxData/namedListDefinition/options",a,{ignoreCommandManager:!0}),b.resolve()}),b.promise}}),{getModel:function(a){return new joint.shapes.rx.CharacterFieldDefinition(a)},getNewFieldDefinition:function(){return d.getNewFieldDefinition({resourceType:b.dataTypes.character.resourceType,maxLength:254})},validate:function(a){return d.validate(a).then(function(b){return(!_.isFinite(a.maxLength)||a.maxLength<0)&&b.push({elementId:a.id,elementName:a.name,propertyName:"maxLength",type:"error",message:"Length must be a valid number greater than 0, or blank."}),b})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxDateOnlyFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.DateOnlyFieldDefinition=c.extend({defaults:{type:"rx.DateOnlyFieldDefinition",icon:"calendar"},getRxInspector:function(a){var c=b.isReadOnly(a);return joint.shapes.rx.DateOnlyFieldDefinition.__super__.getRxInspector.call(this,a,{defaultValue:{label:"Default Value",type:"rx-inspector-datepicker",group:"details",attrs:{input:{disabled:c},button:{disabled:c}}}})}}),{getModel:function(a){return new joint.shapes.rx.DateOnlyFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.dateOnly.resourceType})},validate:function(a){return b.validate(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxDateTimeFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.DateTimeFieldDefinition=c.extend({defaults:{type:"rx.DateTimeFieldDefinition",icon:"calendar_clock_o"},getRxInspector:function(a){var c=b.isReadOnly(a),d=!b.isPropertiesCustomizationEnabled(a);return joint.shapes.rx.DateTimeFieldDefinition.__super__.getRxInspector.call(this,a,{defaultValue:{label:"Default Value",type:"rx-inspector-datetimepicker",group:"details",attrs:{input:{disabled:c||d},button:{disabled:c||d},timepicker:{disabled:c||d}}}})}}),{getModel:function(a){return new joint.shapes.rx.DateTimeFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.dateTime.resourceType})},validate:function(a){return b.validate(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxDecimalFieldDefinition",["$q","RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c,d){var e=1e26,f=-1e26;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.DecimalFieldDefinition=d.extend({defaults:{type:"rx.DecimalFieldDefinition",icon:"field_integer_number"},getRxInspector:function(a){var b=c.isReadOnly(a);return joint.shapes.rx.DecimalFieldDefinition.__super__.getRxInspector.call(this,a,{precision:{label:"Precision",type:"rx-inspector-number-input",group:"details",attrs:{label:{"class":"required"},input:{disabled:b,min:1,max:9}}},minValue:{label:"Minimum Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{label:{"class":"required"},input:{disabled:b,min:f,max:e}}},maxValue:{label:"Maximum Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{label:{"class":"required"},input:{disabled:b,min:f,max:e}}},defaultValue:{label:"Default Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{input:{disabled:b,min:f,max:e}}}})}}),{getModel:function(a){return new joint.shapes.rx.DecimalFieldDefinition(a)},getNewFieldDefinition:function(){return c.getNewFieldDefinition({resourceType:b.dataTypes.decimal.resourceType,precision:2,minValue:f,maxValue:e})},validate:function(a){return c.validate(a).then(function(b){var c=a.name;return _.isFinite(a.minValue)||b.push({elementId:a.id,elementName:c,propertyName:"minValue",type:"error",message:"Minimum Value cannot be blank."}),_.isFinite(a.maxValue)||b.push({elementId:a.id,elementName:c,propertyName:"maxValue",type:"error",message:"Maximum Value cannot be blank."}),a.precision>0&&a.precision<10||b.push({elementId:a.id,elementName:a.name,propertyName:"precision",type:"error",message:"Precision must be a valid number between 1 and 9."}),b})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxJoinRecordDefinitionModel",["$q","$filter","rxDesignerCache","rxString","rxRecordDefinitionModel","rxRecordDefinitionResource","rxExpressionConfigurationInterface","rxDefaultExpressionConfigurator","RX_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,c,e){var f=b("definitionName")(c.name);return{label:[f,a.label].join(" "),children:_(c.fieldDefinitions).map(function(b){if(b.resourceType!==k.dataTypes.attachment.resourceType)return{label:[f,d.prettify(b.name)].join("."),type:e.fields.type,icon:e.fields.icon,value:["${",f,".",a.type,".",b.name,"}"].join("")}}).compact().sortBy("label").value()}}function m(a,b,c){var d=new RegExp("\\${"+b+"\\."+k.sourceTypes.primary+"\\.([^}]+)}","g"),e=new RegExp("\\${"+c+"\\."+k.sourceTypes.secondary+"\\.([^}]+)}","g");return(a||"").replace(d,"#$1#").replace(/#/g,"$").replace(e,"'$1'")}function n(a,b,c){var d=new RegExp("\\$([^$]+)\\$","g"),e=new RegExp("'([^']+)'","g");return(a||"").replace(d,"${"+b+"."+k.sourceTypes.primary+".$1}").replace(e,"${"+c+"."+k.sourceTypes.secondary+".$1}")}return e.extend({defaults:{type:k.recordDefinitionTypes.join.recordDefinitionType},initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this._expressionConfigurator=new h(this),this._expressionConfigurator.setDefaultDictionaryConfig({operators:_.cloneDeep(j.operators.all)})},persist:function(a){this.constructor.__super__.persist.apply(this,arguments);var b=this.getRxData(a),c=this.prop("rxData/joinCriteria");a.joinCriteria=m(c,b.primaryRecord,b.secondaryRecord);
},getExpressionConfigurator:function(){return this._expressionConfigurator},getRecordDefinitionFields:function(b){var d=a.defer(),e=k.sourceTypes[b];return c.getRecordDefinition(this.prop("rxData/"+b+"RecordDefinitionName")).then(function(a){var b=_.cloneDeep((a||{}).fieldDefinitions||[]);_.each(b,function(a){a.fieldMapping={resourceType:k.joinFieldMapping,sourceFieldId:a.id,source:e}}),d.resolve(b)})["catch"](function(){d.reject()}),d.promise},getRecordDefinitionLabel:function(a){return b("definitionName")(this.prop("rxData/"+k.sourceTypesInvertedMap[a]+"RecordDefinitionName"))},getDataDictionary:function(b,d){var e=[{label:"(Primary)",type:k.sourceTypes.primary,name:b.primaryRecordDefinitionName},{label:"(Secondary)",type:k.sourceTypes.secondary,name:b.secondaryRecordDefinitionName}];return a.all(e.map(function(a){return c.getRecordDefinition(a.name).then(function(b){return l(a,b||{},d)})}))},getRxData:function(a){var c=this.constructor.__super__.getRxData.apply(this,arguments);return c.primaryRecordDefinitionName=a.primaryRecordDefinitionName,c.secondaryRecordDefinitionName=a.secondaryRecordDefinitionName,c.primaryRecord=b("definitionName")(a.primaryRecordDefinitionName),c.secondaryRecord=b("definitionName")(a.secondaryRecordDefinitionName),c.joinType=b("recordDefinitionJoinType")(a.joinType),c.joinCriteria=this.prop("rxData/joinCriteria")||a.joinCriteria,a.lastUpdateTime&&(c.joinCriteria=n(c.joinCriteria,c.primaryRecord,c.secondaryRecord)),c},getRxInspector:function(a){var b=_.omit(a,"fieldDefinitions"),c=_.find(_.values(k.joinTypes),{value:a.joinType})||{},d=!b.lastUpdateTime,e=!0,g=!0,h=!0;return d||(g=this._isCustomizationAllowed("allowOtherPropertiesOverlay",a),h=this._isCustomizationAllowed("allowPermissionsOverlay",a)),{inputs:{rxData:{name:{label:"Name",type:"text",group:"general",attrs:{label:{"class":"required"},input:{readonly:!d,maxlength:254}}},description:{label:"Description",type:"textarea",group:"general",attrs:{textarea:{disabled:!g}}},primaryRecord:{label:"Primary Record",type:"text",group:"general",attrs:{label:{"class":"required"},input:{disabled:!0}}},secondaryRecord:{label:"Secondary Record",type:"text",group:"general",attrs:{label:{"class":"required"},input:{disabled:!0}}},joinType:{label:"Join Type",type:"select",group:"general",options:[{value:c.value,content:c.displayName}],attrs:{label:{"class":"required"},select:{disabled:!0}}},joinCriteria:{label:"ON Statement",type:"rx-inspector-expression-node-field",group:"general"},overlayDescriptor:{label:"",type:"rx-customization-perspective",group:"general",customizationOptionsDirective:"rx-record-customization-options",definitionName:a.name,revertPrompt:"Are you sure you want to revert customization for selected record definition?",revertCommand:f.revertCustomization,revertCompleteEventName:i.events.refreshDesigner},owner:{label:"Owner",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:e}}},lastUpdateTime:{label:"Modified Date",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:e}}},lastChangedBy:{label:"Modified By",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:e}}},permissions:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.permission.label",type:"rx-permission-editor",group:"general",isReadOnly:!h},shouldExportData:{label:"Should Export Data",type:"rx-inspector-toggle-field",group:"general",tooltip:"Enabling this causes the record data to be automatically exported whenever the application or library being created is packaged for deployment.",attrs:{toggle:{disabled:!g}}},searchTitleField:{label:"Global Search Title Field",type:"select",group:"general",attrs:{select:{disabled:!g}}},securityLabels:{type:"rx-inspector-security-label-editor",group:"securityLabels",isReadOnly:!g}}},groups:{general:{label:"General",index:1},securityLabels:{label:"Security Labels",index:2}}}}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxRecordDefinitionModel",["$q","$filter","rxOverlay","rxBundleCache","rxFieldDefinitionManager","rxFieldDefinitionModel","rxRecordDefinitionResource","RX_DESIGNER","RX_OVERLAY","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j){return f.extend({defaults:{type:j.recordDefinitionTypes.regular.recordDefinitionType},persist:function(a){var c=this.get("rxData");if(!a.lastUpdateTime){var e=d.getBundleId(),f=e?e+":":"";a.name=f+b("definitionName")(c.name,"encode")}_.assign(a,_.pick(c,["description","permissions","shouldExportData","overlayDescriptor","isSharedInstanceStorage","isFinal","isAbstract","inheritanceDescriptor","securityLabels","indexDefinitions"])),c.searchTitleField&&(a.weightedRelevancyFields={TITLE:c.searchTitleField})},initialize:function(){this.listenTo(this,h.events.permissionsChanged,this._onPermissionsChanged),this.listenTo(this,"change:rxData",this._onChangeRxData)},_onChangeRxData:function(a,b,c){this._isOverlayCustomizationChange.apply(this,arguments)&&(b.overlayDescriptor=b.overlayDescriptor||{},"rxData/indexDefinitions"===c.propertyPath?b.overlayDescriptor.indexesOverlayType=i.overlayTypes.additive:b.overlayDescriptor.otherPropertiesOverlayType=i.overlayTypes.overwrite,this.set("rxData",b,{ignoreCommandManager:!0,silent:!0}))},_onPermissionsChanged:function(a){var b=angular.copy(this.get("rxData"));b.lastUpdateTime&&a.permissions?(b.permissions=a.permissions,b.overlayDescriptor||(b.overlayDescriptor={}),b.overlayDescriptor.permissionsOverlayType=a.permissionsOverlayType):b.permissions=a,this.set("rxData",b)},_isCustomizationAllowed:function(a,b){return c.isCustomizationEnabled(a,b)},getRxData:function(a){var c=_.cloneDeep(_.pick(a,["name","description","owner","lastUpdateTime","lastChangedBy","permissions","overlayDescriptor","overlayGroupId","inheritanceDescriptor","isAbstract","isFinal","isSharedInstanceStorage","shouldExportData","weightedRelevancyFields","securityLabels","indexDefinitions","fieldDefinitions","allowPermissionsOverlay","allowOtherPropertiesOverlay","allowIndexesOverlay","allowFieldsOverlay","resourceType"]));return c.name=b("definitionName")(c.name,"decode"),c.lastUpdateTime=b("date")(c.lastUpdateTime,"medium"),c.weightedRelevancyFields&&(c.searchTitleField=c.weightedRelevancyFields.TITLE),c},updateInspectorConfig:function(a){var b=_(a).filter("searchDefinition").map(function(a){return{content:a.name,value:a.id}}).value(),c=this.get("rxData").fieldDefinitions;angular.equals(c,a)||joint.util.setByPath(this.attributes,"rxData/fieldDefinitions",a,"/"),joint.util.setByPath(this.attributes,"rxInspector/inputs/rxData/searchTitleField/options",b,"/"),this.trigger("rx:change:inputs",this)},getRxInspector:function(a){var b=_.omit(a,"fieldDefinitions"),c=!b.lastUpdateTime,d=!0,e=!0,f=!0,i=!0;return c||(e=this._isCustomizationAllowed("allowOtherPropertiesOverlay",a),f=this._isCustomizationAllowed("allowPermissionsOverlay",a),i=this._isCustomizationAllowed("allowIndexesOverlay",a)),{inputs:{rxData:{name:{label:"Name",type:"text",group:"general",attrs:{label:{"class":"required"},input:{readonly:!c,maxlength:254}}},description:{label:"Description",type:"textarea",group:"general",attrs:{textarea:{disabled:!e}}},overlayDescriptor:{label:"",type:"rx-customization-perspective",group:"general",customizationOptionsDirective:"rx-record-customization-options",definitionName:a.name,revertPrompt:"Are you sure you want to revert customization for selected record definition?",revertCommand:g.revertCustomization,revertCompleteEventName:h.events.refreshDesigner},owner:{label:"Owner",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:d}}},lastUpdateTime:{label:"Modified Date",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:d}}},lastChangedBy:{label:"Modified By",type:"text",group:"general",when:{ne:{"rxData/lastUpdateTime":void 0}},attrs:{input:{disabled:d}}},permissions:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.permission.label",type:"rx-permission-editor",group:"general",isReadOnly:!f},shouldExportData:{label:"Should Export Data",type:"rx-inspector-toggle-field",group:"general",tooltip:"Enabling this causes the record data to be automatically exported whenever the application or library being created is packaged for deployment.",attrs:{toggle:{disabled:!e}}},searchTitleField:{label:"Global Search Title Field",type:"select",group:"general",attrs:{select:{disabled:!e}}},inheritance:{label:"",type:"rx-inheritance-selector",group:"inheritance",isReadOnly:!e},securityLabels:{type:"rx-inspector-security-label-editor",group:"securityLabels",isReadOnly:!e},indexDefinitions:{type:"rx-inspector-record-index-editor",group:"indexes",isReadOnly:!i}}},groups:{general:{label:"General",index:1},inheritance:{label:"Record Inheritance",index:2},securityLabels:{label:"Security Labels",index:3},indexes:{label:"Indexes",index:4}}}},validate:function(c){var d=a.defer(),f=[],g=c.fieldDefinitions||[],h=b("definitionName")(c.name,"decode");_.isEmpty(_.trim(h))&&(h="Record Definition",f.push({elementId:c.id,elementName:h,propertyName:"name",type:"error",message:"Record Name cannot be blank."}));var i=_.filter(g,function(a){return!_.isEmpty(_.trim(a.name))}),k=_.filter(g,function(a){return!_.isEmpty(_.trim(a.customId))||!(_.isString(a.id)&&a.id.match(/^rx-/))}),l=_.uniq(i,"name");if(i.length!==l.length){var m=_.difference(i,l);_.each(m,function(a){f.push({elementId:a.id,elementName:a.name,propertyName:"name",type:"error",message:"Field name must be unique."})})}var n=_.uniq(k,function(a){return a.customId||a.id});if(k.length!==n.length&&_(k).difference(n).each(function(a){f.push({elementId:a.id,elementName:a.name,propertyName:"customId",type:"error",message:"Field ID must be unique."})}).value(),_(k).filter(function(a){var b=a.customId;return _.isFinite(b)&&!(b>0&&b%1===0&&b<j.AR_MAX_FIELD_ID)}).each(function(a){f.push({elementId:a.id,elementName:a.name,propertyName:"customId",type:"error",message:"Field ID must be in the range of 1 to "+j.AR_MAX_FIELD_ID+"."})}).value(),_(k).filter(function(a){var b=a.customId;return _.isNumber(b)&&_.includes(j.AR_CORE_FIELD_IDS,b)}).each(function(a){f.push({elementId:a.id,elementName:a.name,propertyName:"customId",type:"error",message:"Field ID <%%> cannot be assigned to custom fields.".replace("%%",a.customId)})}).value(),c.weightedRelevancyFields){var o=_.find(c.fieldDefinitions,{id:c.weightedRelevancyFields.TITLE});o&&!o.searchDefinition&&f.push({elementId:c.id,elementName:h,propertyName:"searchTitleField",type:"error",message:"You need to specify a Full Text Search enabled field as the Global Search Title Field"})}var p=_.map(c.fieldDefinitions,function(a){return e.validate(a)});return a.all(p).then(function(a){d.resolve(_.compact(_.flatten(_.union(f,a))))}),d.promise}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxFieldDefinitionManager",["RX_RECORD_DEFINITION","rxCharacterFieldDefinition","rxDateTimeFieldDefinition","rxDateOnlyFieldDefinition","rxTimeOnlyFieldDefinition","rxIntegerFieldDefinition","rxDecimalFieldDefinition","rxRealFieldDefinition","rxSelectionFieldDefinition","rxAttachmentFieldDefinition","rxBooleanFieldDefinition",function(a,b,c,d,e,f,g,h,i,j,k){var l={};return l[a.dataTypes.character.resourceType]=b,l[a.dataTypes.dateTime.resourceType]=c,l[a.dataTypes.dateOnly.resourceType]=d,l[a.dataTypes.timeOnly.resourceType]=e,l[a.dataTypes.integer.resourceType]=f,l[a.dataTypes.decimal.resourceType]=g,l[a.dataTypes.real.resourceType]=h,l[a.dataTypes.selection.resourceType]=i,l[a.dataTypes.attachment.resourceType]=j,l[a.dataTypes["boolean"].resourceType]=k,{getModel:function(a){var b=l[a.resourceType];return b.getModel.apply(b,arguments)},getNewFieldDefinition:function(a){var b=l[a];return b.getNewFieldDefinition.apply(b,arguments)},validate:function(a){var b=l[a.resourceType];return b.validate.apply(b,arguments)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxFieldDefinitionModel",["rxFieldDefinition","RX_DESIGNER","RX_OVERLAY","RX_RECORD_DESIGNER","RX_RECORD_DEFINITION",function(a,b,c,d,e){return Backbone.Model.extend({prop:joint.dia.Cell.prototype.prop,constructor:function(a,b){if(a.rxData)Backbone.Model.apply(this,arguments);else{var c=this.getRxData(a),d=this.getRxInspector(a);Backbone.Model.call(this,{rxData:c,rxInspector:d})}},initialize:function(){this.listenTo(this,b.events.permissionsChanged,this._onPermissionsChanged),this.listenTo(this,"change:rxData",this._onChangeRxDataBase)},_isOverlayCustomizationChange:function(a,b,d){var e=a.get("overlayOperation");return e!==c.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP&&d.propertyPath&&!_.includes(["rxData/permissions","rxData/overlayDescriptor"],d.propertyPath)&&b.lastUpdateTime},_onChangeRxDataBase:function(a,b,d){this._isOverlayCustomizationChange.apply(this,arguments)&&(b.overlayDescriptor||(b.overlayDescriptor={}),this.get("isReverted")&&this.set("isReverted",!1),b.overlayDescriptor.otherPropertiesOverlayType=c.overlayTypes.overwrite,this.set("rxData",b,{ignoreCommandManager:!0}))},_onPermissionsChanged:function(a){var b=angular.copy(this.get("rxData"));this.get("isReverted")&&this.set("isReverted",!1),b.lastUpdateTime&&a.permissions?(b.permissions=a.permissions,b.explicitPermissions=a.permissions,b.overlayDescriptor||(b.overlayDescriptor={}),b.overlayDescriptor.permissionsOverlayType=a.permissionsOverlayType):b.permissions=a,this.set("rxData",b)},isLink:function(){return!1},persist:function(b){var c=_.find(b.fieldDefinitions,{id:this.get("id")});c?_.assign(c,this.get("rxData")):(c=_.clone(this.get("rxData")),b.fieldDefinitions.push(c)),a.isSystemField(c)||(c.fieldOption=c.required?"REQUIRED":"OPTIONAL"),delete c.required,c.hasOwnProperty("defaultValue")&&_.isEmpty(_.trim(c.defaultValue))&&(c.defaultValue=null),_.isEmpty(_.trim(c.description))&&(c.description=null)},remove:function(a){this.collection.remove(this.cid,a)},getRxData:function(a){var b=_.cloneDeep(a);return b.required="OPTIONAL"!==b.fieldOption,_.isBoolean(b.anyUserAllowedToSubmit)||(b.anyUserAllowedToSubmit=2===a.id||8===a.id),b},getRxInspector:function(b,c){var f=_.find(_.values(e.dataTypes),{resourceType:b.resourceType}),g=a.isReadOnly(b),h=a.isInheritedField(b),i=!!b.lastUpdateTime,j=!!b.fieldMapping,k=!a.isPropertiesCustomizationEnabled(b),l=!a.isPermissionsCustomizationEnabled(b),m={inputs:{rxData:{name:{label:"Name",type:"text",group:"general",attrs:{label:{"class":"required"},input:{disabled:h||k}}},description:{label:"Description",type:"textarea",group:"general",attrs:{textarea:{disabled:g||k}}},overlayDescriptor:{label:"",context:"field",type:"rx-customization-perspective",group:"general",revertPrompt:"Are you sure you want to revert customization for selected field definition?",revertCompleteEventName:d.events.fieldOverlayReverted},resourceType:{label:"Data Type",type:"select",options:[{value:f.resourceType,content:f.displayName}],group:"details",attrs:{label:{"class":"required"},select:{disabled:!0}}},required:{type:"toggle",label:"Required",group:"details",attrs:{input:{disabled:g||k}}},anyUserAllowedToSubmit:{type:"toggle",label:"Allow anyone to submit",group:"details",attrs:{input:{disabled:g||k}}},permissions:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.permission.label",type:"rx-permission-editor",group:"details",isReadOnly:l||i&&j}}},groups:{general:{label:"General",index:1},details:{label:"Details",index:2}}};return i||!j&&a.isCoreField(b)||h?m.inputs.rxData.id={label:"Field ID",type:"number",group:"details",attrs:{input:{disabled:!0}}}:m.inputs.rxData.customId={label:"Field ID",type:"rx-inspector-number-input",group:"details",attrs:{input:{min:1,pattern:"\\d+"}}},_.assign(m.inputs.rxData,c),m}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxFieldDefinition",["$q","rxGUID","$filter","rxOverlay","RX_RECORD_DEFINITION",function(a,b,c,d,e){function f(a){return"SYSTEM"===a.fieldOption}function g(a){return a.id<=e.AR_MAX_RESERVED_FIELD_ID}function h(a){return a.hasOwnProperty("isInherited")&&a.isInherited}function i(a){return m(a)&&!l(a)||f(a)||h(a)}function j(a){return l(a)||d.isCustomizationEnabled("allowOtherPropertiesOverlay",a)}function k(a){return l(a)||d.isCustomizationEnabled("allowPermissionsOverlay",a)}function l(a){return _.isUndefined(a.lastUpdateTime)}function m(a){return!!a.fieldMapping}return{getNewFieldDefinition:function(a){return _.assign({id:b.generate("rx-"),name:"New Field",description:null,fieldOption:"OPTIONAL",defaultValue:null,allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1},a)},validate:function(b){var c=[],d=b.name;return _.isEmpty(_.trim(d))&&(d="Field Definition",c.push({elementId:b.id,elementName:d,propertyName:"name",type:"error",message:"Field Name cannot be blank."})),_.isFinite(b.maxValue)&&_.isFinite(b.minValue)&&b.minValue>b.maxValue&&c.push({elementId:b.id,elementName:d,propertyName:"minValue",type:"error",message:"Minimum Value cannot be greater than Maximum Value."}),_.isFinite(b.defaultValue)&&(_.isFinite(b.minValue)&&b.defaultValue<b.minValue&&c.push({elementId:b.id,elementName:d,propertyName:"defaultValue",type:"error",message:"Default Value cannot be less than Minimum Value."}),_.isFinite(b.maxValue)&&b.defaultValue>b.maxValue&&c.push({elementId:b.id,elementName:d,propertyName:"defaultValue",type:"error",message:"Default Value cannot be greater than Maximum Value."})),_.isNumber(b.customId)&&b.customId>0&&b.customId<e.AR_MAX_RESERVED_FIELD_ID&&!_.includes(e.AR_CORE_FIELD_IDS,b.customId)&&c.push({elementId:b.id,elementName:b.name,propertyName:"customId",type:"info",message:"Creation of a field in the BMC reserved range may cause a failure in a future application upgrade if the field conflicts with a similar field introduced in the upgrade."}),a.when(c)},isJoinFormField:m,isTransient:l,isSystemField:f,isCoreField:g,isInheritedField:h,isReadOnly:i,isPropertiesCustomizationEnabled:j,isPermissionsCustomizationEnabled:k}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxIntegerFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){var d=2147483647,e=-2147483648;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.IntegerFieldDefinition=c.extend({defaults:{type:"rx.IntegerFieldDefinition",icon:"field_integer_number"},getRxInspector:function(a){var c=b.isReadOnly(a),f=!b.isPropertiesCustomizationEnabled(a);return joint.shapes.rx.IntegerFieldDefinition.__super__.getRxInspector.call(this,a,{minValue:{type:"rx-inspector-number-input",label:"Minimum Value",group:"details",attrs:{label:{"class":"required"},input:{disabled:c||f,min:e,max:d,pattern:"-?\\d+"}}},maxValue:{type:"rx-inspector-number-input",label:"Maximum Value",group:"details",attrs:{label:{"class":"required"},input:{disabled:c||f,min:e,max:d,pattern:"-?\\d+"}}},defaultValue:{label:"Default Value",type:"rx-inspector-number-input",group:"details",attrs:{input:{disabled:c||f,min:e,max:d,pattern:"-?\\d+"}}}})}}),{getModel:function(a){return new joint.shapes.rx.IntegerFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.integer.resourceType,minValue:e,maxValue:d})},validate:function(a){return b.validate(a).then(function(b){var c=a.name;return _.isFinite(a.minValue)||b.push({elementId:a.id,elementName:c,propertyName:"minValue",type:"error",message:"Minimum Value cannot be blank."}),_.isFinite(a.maxValue)||b.push({elementId:a.id,elementName:c,propertyName:"maxValue",type:"error",message:"Maximum Value cannot be blank."}),b})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxRealFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){var d=-1,e=1845e16,f=-1845e16;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RealFieldDefinition=c.extend({defaults:{type:"rx.RealFieldDefinition",icon:"field_floating_number"},getRxInspector:function(a){var c=b.isReadOnly(a);return joint.shapes.rx.RealFieldDefinition.__super__.getRxInspector.call(this,a,{precision:{label:"Precision",type:"rx-inspector-number-input",group:"details",attrs:{label:{"class":"required"},input:{disabled:c}}},minValue:{label:"Minimum Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{label:{"class":"required"},input:{disabled:c,min:f,max:e}}},maxValue:{label:"Maximum Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{label:{"class":"required"},input:{disabled:c,min:f,max:e}}},defaultValue:{label:"Default Value",type:"rx-inspector-number-input",step:"any",group:"details",attrs:{input:{disabled:c,min:f,max:e}}}})}}),{getModel:function(a){return new joint.shapes.rx.RealFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.real.resourceType,precision:6,minValue:f,maxValue:e})},validate:function(a){return b.validate(a).then(function(b){var c=a.name;return _.isFinite(a.minValue)||b.push({elementId:a.id,elementName:c,propertyName:"minValue",type:"error",message:"Minimum Value cannot be blank."}),_.isFinite(a.maxValue)||b.push({elementId:a.id,elementName:c,propertyName:"maxValue",type:"error",message:"Maximum Value cannot be blank."}),(!_.isFinite(a.precision)||a.precision<1&&a.precision!=d)&&b.push({elementId:a.id,elementName:a.name,propertyName:"precision",type:"error",message:"Precision must be a valid number greater than 0, or equal to -1."}),b})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxSelectionFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.SelectionFieldDefinition=c.extend({defaults:{type:"rx.SelectionFieldDefinition",icon:"field_dropdown"},initialize:function(){c.prototype.initialize.apply(this),this.listenTo(this,"change:rxData",this._onChangeRxData)},_onChangeRxData:function(a,b,c){if("rxData/optionNamesById"===c.propertyPath){var d=this.get("rxInspector");d.inputs.rxData.defaultValue.options=_.map(b.optionNamesById,function(a,b){return{content:a,value:b}})||[],this.set("rxInspector",d,{ignoreCommandManager:!0})}},getRxInspector:function(a){var c=b.isReadOnly(a),d=!b.isPropertiesCustomizationEnabled(a),e=_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})||[];return joint.shapes.rx.SelectionFieldDefinition.__super__.getRxInspector.call(this,a,{optionNamesById:{label:"Options",type:"rx-inspector-selection-field-editor",group:"details",attrs:{label:{"class":"rx-inspector-selection-field-editor"},input:{disabled:d},textarea:{disabled:c||d,"class":"textarea rx-inspector-select-options"}}},defaultValue:{label:"Default Value",type:"select",group:"details",options:e,attrs:{div:{"class":"hidden"}}}})}}),{getModel:function(a){return new joint.shapes.rx.SelectionFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.selection.resourceType,optionNamesById:{}})},validate:function(a){return b.validate(a).then(function(b){return _.isEmpty(a.optionNamesById)&&b.push({elementId:a.id,elementName:a.name,propertyName:"options",type:"error",message:'Property "Options" cannot be blank.'}),b})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").factory("rxTimeOnlyFieldDefinition",["RX_RECORD_DEFINITION","rxFieldDefinition","rxFieldDefinitionModel",function(a,b,c){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.TimeOnlyFieldDefinition=c.extend({defaults:{type:"rx.TimeOnlyFieldDefinition",icon:"clock_o"},getRxInspector:function(a){var c=b.isReadOnly(a),d=!b.isPropertiesCustomizationEnabled(a);return joint.shapes.rx.TimeOnlyFieldDefinition.__super__.getRxInspector.call(this,a,{defaultValue:{label:"Default Value",type:"rx-inspector-timepicker",group:"details",attrs:{input:{disabled:c||d},timepicker:{disabled:c||d}}}})}}),{getModel:function(a){return new joint.shapes.rx.TimeOnlyFieldDefinition(a)},getNewFieldDefinition:function(){return b.getNewFieldDefinition({resourceType:a.dataTypes.timeOnly.resourceType})},validate:function(a){return b.validate(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources").factory("rxMockResource",["rxResource","$q","$log","RX_RESOURCE_URLS",function(a,b,c,d){var e=a.withUrlConfiguration(d.mockApi);return function(a){var d=e.all(a);return d.getById=function(a){var e=b.defer();return a=Number(a),d.getList().then(function(b){var d=null;b.some(function(b){if(b&&b.id&&b.id===a)return d=b,!1}),d?e.resolve(d):(c.debug("Resource not found:",a),e.reject("Resource not found!"))}),e.promise},d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources").factory("rxResource",["Restangular","RX_RESOURCE_URLS","rxUtils",function(a,b,c){var d={},e=function(a){var b=Array.prototype.slice.call(arguments,0);return rx.assert.assertArrayWithLength(b),b.join("/").replace("//","/")},f=function(a,d){rx.assert.assertStringWithLength(a,"Sub URL must be a valid string.");var f=a.split("/"),g=null,h=null;1==f.length?(g=null,h=f[0]):f.length>1&&(g=f.slice(0,f.length-1).join("/"),h=f[f.length-1]);var i=null;if(c.isNonEmptyString(g)){var j=this.configuration.baseUrl||b.applicationApi,k=e(j,g);i=this.withUrlConfiguration(k,d)}else i=this.withConfig(d||angular.noop);return i.get=function(a,b,d,e){return rx.assert.assertString(a),rx.assert.assert(c.isNullOrUndefined(b)||_.isObject(b)),rx.assert.assert(c.isNullOrUndefined(d)||_.isObject(d)),rx.assert.assert(c.isNullOrUndefined(e)||_.isObject(e)),i.all(h).withHttpConfig(e).get(a,b,d)},i.getList=function(a,b){return rx.assert.assert(c.isNullOrUndefined(a)||_.isObject(a)),rx.assert.assert(c.isNullOrUndefined(b)||_.isObject(b)),i.all(h).getList(a,b)},i.post=function(a,b,d,e){return rx.assert.assertObject(a),rx.assert.assert(c.isNullOrUndefined(b)||_.isObject(b)),rx.assert.assert(c.isNullOrUndefined(d)||_.isObject(d)),rx.assert.assert(c.isNullOrUndefined(e)||_.isObject(e)),i.all(h).withHttpConfig(e).post(a,b,d)},i.create=i.post,i.remove=function(a,b,d){return rx.assert.assert(c.isNullOrUndefined(b)||_.isObject(b)),rx.assert.assert(c.isNullOrUndefined(d)||_.isObject(d)),i.one(h,a).remove(b,d)},i["delete"]=i.remove,i},g=function(a,b){rx.assert.assertStringWithLength(a),rx.assert.assertFunction(b);var c=e(this.configuration.baseUrl,a);d[c]=d[c]||[],d[c].push(b)},h=function(a,b){rx.assert.assertStringWithLength(a),rx.assert.assert(c.isNullOrUndefined(b)||_.isFunction(b));var d=this.withConfig(function(c){_.isFunction(b)&&b(c),c.setBaseUrl(a)});return d.withUrlConfiguration=_.bind(h,d),d.withSubUrlConfiguration=_.bind(f,d),d.addFilter=_.bind(g,d),d};return h.call(a,b.applicationApi,function(a){a.addResponseInterceptor(function(a,b,e,f,g,h){if("getList"===b&&c.isNonEmptyArray(d[f])){var i=[];return _.forEach(a,function(a){var b=!0;_.forEach(d[f],function(c){b&&!c(a)&&(b=!1)}),b&&i.push(a)}),i}return a})})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleActionElementExpressionConfigurator",["$q","RX_EXPRESSION_EDITOR","$rootScope","RX_RECORD_DEFINITION","rxDefaultExpressionConfigurator","definitionNameFilter","rxRuleDesignerCache","rxDesignerCache",function(a,b,c,d,e,f,g,h){return e.extend({initialize:function(d){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var e="getRecordsByQuery"===d.prop("rxData/actionTypeName"),i=this;c.$on(b.events.refreshInspector,function(a,b){b===i.model&&(i.shouldRebuild=!0)});var j={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(b,c){var e=a.defer(),f=_.find(g.getActionTypes(),{actionTypeName:d.prop("rxData/actionTypeName")});_.remove(b,function(a){return"Record Definition Field"===a.type});var i=[];if(f.outputParams){var j=function(){_.each(f.outputParams,function(a){i.push({icon:"d-icon-arrow_chart",type:"Output Map Entry",label:a.name,value:"${actionResult."+a.name+"}"})}),b.unshift({label:d.get("content"),children:i}),e.resolve(b)},k=d.prop("rxData/inputMap/recordDefinitionName");if(_.isUndefined(k))j();else{var l=".output.",m={label:"Output",type:"Output Map Entry",icon:"d-icon-arrow_chart",value:"${actionResult.output}",children:[]};"getRecordsByQuery"==f.actionTypeName&&(l=".output[0].",m.value="${actionResult.output[0]}"),h.getRecordDefinition(d.getRecordDefinitionName()).then(function(a){a?(_.each(a.fieldDefinitions,function(a){i.push({icon:"d-icon-arrow_chart",type:"Output Map Entry",label:a.name,value:["${actionResult"+l+a.id+"}","${actionResult"+l+a.name+"}"]})}),m.children=i,b.unshift({label:d.get("content"),children:[m]}),e.resolve(b)):e.resolve(b)},function(){e.resolve(b)})}}return e.promise},operators:b.operators.math};this.registerExpressionConfig(j);var k={updateDataDictionary:function(b,c){return d.prop("rxData/inputMap/recordDefinitionName")?h.getRecordDefinition(d.getRecordDefinitionName()).then(function(a){if(e){var c=_(a.fieldDefinitions).map(function(a){return{label:a.name,type:"Record Definition Field",icon:"d-icon-field_text",value:["${queryExpression."+a.id+"}","${queryExpression."+a.name+"}"],id:a.id}}).value();b.unshift({label:f(d.prop("rxData/inputMap/recordDefinitionName"))+" Fields",children:c})}return b},function(){return b}):a.when(b)},operators:"getRecordsByQuery"===d.prop("rxData/actionTypeName")?b.operators.all:b.operators.math};this.setDefaultDictionaryConfig(k)},shouldRebuildCellDataDictionary:function(a){var b=!angular.equals(a,this.commonDataDictionary)||this.shouldRebuild;return this.shouldRebuild=_.isBoolean(this.shouldRebuild)?!this.shouldRebuild:this.shouldRebuild,b}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleActionElement",["$q","i18n","dialogs","definitionNameFilter","rxId","rxDesignerCache","rxRuleDesignerCache","rxActionElementInterface","ruleActionTypeNameFilter","rxRuleExpressionValidation","rxRuleShapeViewInterface","rxRuleActionElementModel","rxRuleShapeInterface","rxString","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return{getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},textarea:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=(b(),{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},inputMap:{},outputMap:{type:"list",group:"outputMap",index:3,item:{type:"object",properties:{assignTarget:{type:"select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}}}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3}}});return c},getRxData:function(a,b){var c=i(b.actionTypeName);return{resourceType:o.ruleElementResourceTypes.ruleAction,name:c,label:c,actionTypeName:b.actionTypeName,inputMap:{},outputMap:[]}},getRxConfig:function(a,c,d){d=d||{};var e=d.readonly===!0,f=_.find(g.getActionTypes(),{actionTypeName:a.actionTypeName||a}),i=h.isRecordAction(f.actionTypeName),j=h.isAssociationAction(f.actionTypeName),k=h.isCreateOrUpdateRecordAction(f.actionTypeName),l=h.isSetSecurityLabel(f.actionTypeName),m=h.isGetRecordsByQuery(f.actionTypeName),n={rxData:this.getRxData(a,f),rxInspector:this.getRxInspector(e)};l&&!_.find(f.inputParams,{name:"recordSource"
})&&f.inputParams.unshift({dataType:"String",dataTypeDetail:null,name:"recordSource",required:!1});var o=l?f.inputParams:_.sortBy(f.inputParams,function(a){return!a.required});return o.forEach(function(a,c){var d,f=(i||l)&&"recordDefinitionName"===a.name||j&&"associationDefinitionName"===a.name,g="securityLabel"===a.name,h="recordSource"===a.name,o=l&&"recordDefinitionName"===a.name,p=l&&"recordID"===a.name,q=l&&"record"===a.name,s=m&&("pageSize"===a.name||"initialPageIndex"===a.name),t=m&&"fieldIDs"===a.name;d=f?"rx-inspector-definition-picker":g||h?"select":s?"rx-inspector-tooltip-field":"rx-inspector-expression-node-field";var u={group:"inputMap",label:b(a.name),type:d,index:c,attrs:{}};if(i&&"values"===a.name)return!1;if(f&&j?u.definitionType=r.definitionTypes.association.type:f?u.definitionType=r.definitionTypes.record.type:g?u.options=[]:s?("pageSize"===a.name?(u.tooltipText="Page Size specifies the maximum number of records that can be retrieved at one time in Get Record activity. Page Size can be adjusted to optimize performance.",u.label=b(a.name)+" (Maximum Records)",a.defaultValue=1e3):"initialPageIndex"===a.name&&(u.tooltipText="Initial Page Index specifies the index of the first page of records retrieved from database in a Get Record activity. The index value increments by +1 on subsequent retrievals. The default value of '0' will be adequate for most situation, but the value can be increased for special case.",a.defaultValue=0),u.inputType="number"):t?u.when=!0:h&&(u.options=[{value:"true",content:"Database"},{value:"false",content:"Current Record"}]),o||p?u.when={eq:{"rxData/inputMap/recordSource":"true"}}:q&&(u.when=!0),a.required||o||p||q)u.attrs.label={"class":"required"};else if(e){var v={},w={};v["rxData/inputMap/"+a.name]=void 0,w["rxData/inputMap/"+a.name]="",u.when={and:[{ne:v},{ne:w}]}}e&&(u.attrs.input=u.attrs.select={readonly:!0,disabled:!0}),k||(n.rxInspector.inputs.rxData.inputMap[a.name]=u),_.isUndefined(a.defaultValue)?n.rxData.inputMap[a.name]="":n.rxData.inputMap[a.name]=a.defaultValue}),k&&(n.rxInspector.inputs.rxData.inputMap={type:"rx-inspector-input-map-fields",group:"inputMap"},h.isUpdateRecordAction(f.actionTypeName)&&(n.rxInspector.inputs.rxData.inputMap.attributes={enforceRequiredFields:!1})),0===f.outputParams.length&&(delete n.rxInspector.groups.outputMap,delete n.rxInspector.inputs.rxData.outputMap,delete n.rxData.outputMap),a.resourceType&&(_.assign(n.rxData,_.pick(a,_.keys(n.rxData))),n.rxData.label=a.name,n.rxData.inputMap={},a.inputMap.forEach(function(a){var b=a.assignTarget;if(h.isCreateOrUpdateRecordAction(f.actionTypeName)){var c=/values\[\"(.*)\"\]/.exec(b);c&&(b=c[1])}n.rxData.inputMap[b]=a.expression}),a.outputMap.forEach(function(a){n.rxData.outputMap[a.assignTarget]=a.expression})),n},getShape:function(a){var b=this.getRxConfig(a);return b.content=i(a.actionTypeName||a),new joint.shapes.rx.RuleAction(b)},registerValidators:function(a){a.validate("add",function(b,c,d){var e=a.attributes.commandManager.graph,f=e.getCell(c.data.id);if(f instanceof joint.shapes.bpmn.Activity){var g=_.find(e.getCells(),function(a){return"rx.RuleModel"===a.get("type")});if(_.isEmpty(g.get("rxData").recordDefinitionNames))return void d("You must select a record definition before adding actions to the rule.")}})},validate:function(b,c){var d=[],e=a.defer(),k=[],l=b.label;_.isEmpty(_.trim(b.name))&&b.hasOwnProperty("name")&&d.push({elementId:b.id,elementName:i(b.actionTypeName),propertyName:"label",type:"error",message:"Label cannot be blank."}),b.inputMap&&k.push(f.getRecordDefinition(c.recordDefinitionNames[0]).then(function(a){_.each(b.inputMap,function(c){var e=j.validateExpression(c.expression,a);_.isEmpty(e)||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+c.assignTarget,type:"error",message:"Expression "+c.assignTarget+" uses fields that are not in the primary record definition. Field IDs: "+e.join()+"."})})}));var m=_.find(g.getActionTypes(),{actionTypeName:b.actionTypeName});if(m)if("createRecord"===b.actionTypeName){var o=_.find(b.inputMap,{assignTarget:"recordDefinitionName"}),p=_.filter(b.inputMap,function(a){var b=a.assignTarget;return 0===b.indexOf('values["')&&b.indexOf('"]')===b.length-2});if(o){var q=o.expression.replace(/^\"|\"$/g,"");k.push(f.getRecordDefinition(q).then(function(a){var c=_(a.fieldDefinitions).filter(h.isFieldRequired).pluck("name").value();_.each(c,function(a){var c=_.find(p,{assignTarget:'values["'+a+'"]'});c&&!_.isEmpty(_.trim(c))||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+a,type:"error",message:n.prettify(a)+" cannot be blank."})})}))}else d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/recordDefinitionName",type:"error",message:"Record Definition Name cannot be blank."})}else if("setSecurityLabel"===b.actionTypeName){var r=["recordDefinitionName","record","recordID"],s=_(m.inputParams).filter("required").map("name").value(),t=_.filter(r,function(a){return _.find(b.inputMap,{assignTarget:a})});_.isEmpty(t)?d.push({elementId:b.id,elementName:l,propertyName:"inputMap/"+name,type:"error",message:"Record Definition Name, Record ID and Record cannot be blank."}):_.includes(t,"record")||_.includes(t,"recordDefinitionName")?_.includes(t,"record")||_.includes(t,"recordID")||d.push({elementId:b.id,elementName:l,propertyName:"inputMap/recordID",type:"error",message:"Record ID cannot be blank."}):d.push({elementId:b.id,elementName:l,propertyName:"inputMap/recordDefinitionName",type:"error",message:"Record Definition Name cannot be blank."}),_.each(s,function(a){var c=_.find(b.inputMap,{assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||d.push({elementId:b.id,elementName:l,propertyName:"inputMap/"+a,type:"error",message:n.prettify(a)+" cannot be blank."})})}else{var u=_(m.inputParams).filter("required").map("name").value();_.each(u,function(a){var c=_.find(b.inputMap,{assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+a,type:"error",message:n.prettify(a)+" cannot be blank."})})}else d.push({elementId:b.id,elementName:b.name,type:"error",message:b.actionTypeName+" is not a registered action type."});return _.isEmpty(k)?e.resolve(d):a.all(k)["finally"](function(){e.resolve(d)}),e.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleActionElementModel",["$q","i18n","dialogs","definitionNameFilter","rxId","rxUtils","rxDesignerCache","rxActionElementInterface","rxRuleActionElementExpressionConfigurator","rxRuleShapeViewInterface","rxRuleShapeInterface",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b=new RegExp("\\${queryExpression.([^}]+)}","g");return(a||"").replace(b,"'$1'")}var m=null;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleActionView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface).extend({className:function(){var a=joint.shapes.bpmn.ActivityView.prototype.className.apply(this,arguments);return a+" "+this.model.get("rxData").actionTypeName}}),joint.shapes.rx.RuleAction=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend(joint.shapes.rx.ActionElementInterface).extend({defaults:joint.util.deepSupplement({type:"rx.RuleAction",size:{width:70,height:60},attrs:{image:{width:10,height:10,x:-2,y:-2},rect:{rx:2,ry:2}},icon:"action"},joint.shapes.bpmn.Activity.prototype.defaults),_lastRecordSource:"true",elementCanvasSize:{width:90,height:60},initialize:function(a){var b=a.rxData.actionTypeName;joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),a&&a.rxData&&(this.listenTo(this,"change:rxData",this._onChangeRxData),this._expressionConfigurator=new i(this),(h.isRecordAction(b)||h.isSetSecurityLabel(b))&&a.rxData.inputMap.recordDefinitionName?this._lastRecordDefinitionName=this.getRecordDefinitionName():h.isSetSecurityLabel(b)&&a.rxData.inputMap.record&&(this._lastRecordSource="false"))},getExpressionConfigurator:function(){return this._expressionConfigurator},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);if(b.name=this.prop("rxData/label"),b){var c=[],d=this.prop("rxData/actionTypeName"),e=h.isCreateOrUpdateRecordAction(d);h.isSetSecurityLabel(d);for(var f in b.inputMap){var g=b.inputMap[f];g&&e&&"recordDefinitionName"!==f&&"recordID"!==f?c.push({assignTarget:'values["'+f+'"]',expression:g}):g&&_.includes(["recordDefinitionName","associationDefinitionName","securityLabel"],f)&&!/^\"|\"$/g.test(g)?c.push({assignTarget:f,expression:'"'+g+'"'}):"fieldIDs"===f?c.push({assignTarget:f,expression:'"'+this.getFieldIds()+'"'}):g&&h.isGetRecordsByQuery(d)&&"queryExpression"===f?c.push({assignTarget:f,expression:l(g)}):!g&&0!==g||"initialPageIndex"!==f?g&&"recordSource"!==f&&c.push({assignTarget:f,expression:g}):c.push({assignTarget:f,expression:g})}"false"!==this.prop("rxData/inputMap/recordSource")||_.find(c,{assignTarget:"record"})||"setSecurityLabel"!==d||c.push({assignTarget:"record",expression:"$ENTRY$"}),b.inputMap=c}return b},_onChangeRxData:function(a,b,d){var e=this,f=e.prop("rxData/inputMap/recordSource")?JSON.parse(e.prop("rxData/inputMap/recordSource")):null;joint.shapes.rx.ActionElementInterface._onChangeRxData.apply(this,arguments),e._lastRecordSource!==e.prop("rxData/inputMap/recordSource")&&"setSecurityLabel"===b.actionTypeName&&(f?f&&c.confirm("Warning!","Record will be cleared. Do you want to continue?").result.then(function(){e._lastRecordSource=e.prop("rxData/inputMap/recordSource"),e._lastRecordDefinitionName="",e._setSecurityLabel(),e.prop("rxData/inputMap/record","")},function(){e.prop("rxData/inputMap/recordSource",e._lastRecordSource)}):c.confirm("Warning!","Record Definition and Record ID will be cleared. Do you want to continue?").result.then(function(){e._lastRecordSource=e.prop("rxData/inputMap/recordSource"),e._lastRecordDefinitionName="",e._setSecurityLabel(),e.prop("rxData/inputMap/recordDefinitionName",""),e.prop("rxData/inputMap/recordID","")},function(){e.prop("rxData/inputMap/recordDefinitionName",e._lastRecordDefinitionName),e.prop("rxData/inputMap/recordSource",e._lastRecordSource)}))},getFieldIds:function(){var a=_(this.inputMapFields).values().first();return _(a).map("id").join()},updateInspectorConfig:function(b){var c=this,d=[],e=c.prop("rxData/actionTypeName"),f=c.prop("rxData");if(h.isCreateOrUpdateRecordAction(e))c._lastRecordDefinitionName&&1==_.keys(c.prop("rxInspector/inputs/rxData/inputMap")).length&&d.push(g.getRecordDefinition(c._lastRecordDefinitionName.replace(/^\"|\"$/g,"")).then(function(a){c._buildInspector(a)}));else if(h.isSetSecurityLabel(e)){var i=c.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options");c.prop("rxData/inputMap/recordDefinitionName")&&!i.length?d.push(g.getRecordDefinition(c.getRecordDefinitionName()).then(function(a){a&&c.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",c.getSecurityLabels(a.securityLabels))})):c.prop("rxData/inputMap/record")&&!i.length&&d.push(g.getRecordDefinition(m).then(function(a){a&&c.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",c.getSecurityLabels(a.securityLabels))})),c.prop("rxData/inputMap/record")?c.prop("rxData/inputMap/recordSource","false",{silent:!0}):(_.isUndefined(c.prop("rxData/inputMap/recordSource"))||""===c.prop("rxData/inputMap/recordSource"))&&c.prop("rxData/inputMap/recordSource","true",{silent:!0})}h.isGetRecordsByQuery(e)&&c._lastRecordDefinitionName&&_.isEmpty(this.inputMapFields)&&d.push(g.getRecordDefinition(c._lastRecordDefinitionName.replace(/^\"|\"$/g,"")).then(function(a){c._buildInspector(a)})),h.isGetRecordsByQuery(e)&&(f.inputMap.hasOwnProperty("pageSize")||f.inputMap.hasOwnProperty("initialePageIndex"))&&(f.inputMap.pageSize=parseInt(f.inputMap.pageSize),f.inputMap.initialPageIndex=parseInt(f.inputMap.initialPageIndex));var j=c.prop("rxData/inputMap/queryExpression"),k=/\'([^']+)\'/g;return j&&!_.isEmpty(j.match(k))&&c.prop("rxData/inputMap/queryExpression",j.replace(k,"${queryExpression.$1}")),a.all(d)},setPrimaryRecordDefinition:function(a){var b=this;if(m=a,b.prop("rxData/outputMap")&&(m?g.getRecordDefinition(m).then(function(a){b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",null),b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",_.map(b._getFieldDefinitions(a),"name"))}):b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",[])),h.isSetSecurityLabel(b.prop("rxData/actionTypeName"))){var c=!f.tryParseJson(this.prop("rxData/inputMap/recordSource"),!0);c&&b._setSecurityLabel()}},_setRecordDefinitionName:function(a){var b=this,c=b.prop("rxData/actionTypeName");joint.shapes.rx.ActionElementInterface._setRecordDefinitionName.apply(this,arguments),h.isSetSecurityLabel(c)&&b._setSecurityLabel(a)},_setSecurityLabel:function(a){var b=this.prop("rxData/inputMap/recordSource")?JSON.parse(this.prop("rxData/inputMap/recordSource")):null,c=b?a:m,d=this;d.prop("rxData/inputMap/securityLabel",""),d.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",null),c?g.getRecordDefinition(c.replace(/^\"|\"$/g,"")).then(function(a){d.prop("rxInspector/inputs/rxData/inputMap/securityLabel/options",d.getSecurityLabels(a.securityLabels)),d.trigger("rx:change:inputs",d)}):d.trigger("rx:change:inputs",d)},getSecurityLabels:function(a){return _(a).map(function(a){return{content:d(a.name),value:a.name}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()},getRecordDefinitionName:function(){var a=this.prop("rxData/inputMap/recordDefinitionName");return a?a.replace(/^\"|\"$/g,""):a},getCurrentRecordDefinition:function(){return g.getRecordDefinition(this._lastRecordDefinitionName)}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleCancelProcessElement",["$q","i18n","dialogs","RX_RULE_DESIGNER","RX_DEFINITION_PICKER","RX_INSPECTOR_SELECT_EXPRESSION_DROPDOWN","rxString","rxDesignerCache","rxDefaultExpressionConfigurator","rxRuleExpressionValidation",function(a,b,c,d,e,f,g,h,i,j){var k=/\$\{.*\}/,l=function(a){return a&&a.match(k)};return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleCancelProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleCancelProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend({_lastProcessDefinitionName:"",_lastSelectExpressionDropdownValue:"",defaults:joint.util.deepSupplement({type:"rx.RuleCancelProcess",content:"Cancel Process",size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.prop("rxData/label",this.prop("rxData/name")),a&&a.rxData&&a.rxData.processDefinitionName&&(this.prop("size/width",this.elementCanvasSize.width),this.prop("size/height",this.elementCanvasSize.height),this._lastProcessDefinitionName=a.rxData.processDefinitionName,l(this._lastProcessDefinitionName)&&(this._lastSelectExpressionDropdownValue=f.dropDownOptionsValue.expression)),this._expressionConfigurator=new i(this)},getExpressionConfigurator:function(){return this._expressionConfigurator},_onChangeRxData:function(a,b,d){var e=this;b.processDefinitionName!==e._lastProcessDefinitionName&&(e._lastProcessDefinitionName?e._lastProcessDefinitionName&&!b.processDefinitionName?c.confirm("Warning!","Process To Cancel and Input Map parameters will be cleared. Do you want to continue?").result.then(function(){e._lastProcessDefinitionName=b.processDefinitionName,e.prop("rxData/processContextKey","",{silent:!0}),e.prop("rxData/cancelReason","",{silent:!0}),e._lastSelectExpressionDropdownValue=e.selectExpressionDropdownValue,e.trigger("rx:change:inputs",e)},function(){e.prop("rxData/processDefinitionName",e._lastProcessDefinitionName),e.selectExpressionDropdownValue=e._lastSelectExpressionDropdownValue}):c.confirm("Warning!","Input Map parameters will be cleared. Do you want to continue?").result.then(function(){e._lastProcessDefinitionName=b.processDefinitionName,e.prop("rxData/processContextKey","",{silent:!0}),e.prop("rxData/cancelReason","",{silent:!0}),e._lastSelectExpressionDropdownValue=e.selectExpressionDropdownValue,e.trigger("rx:change:inputs",e)},function(){e.selectExpressionDropdownValue=e._lastSelectExpressionDropdownValue,e.prop("rxData/processDefinitionName",e._lastProcessDefinitionName)}):(e._lastProcessDefinitionName=b.processDefinitionName,e._lastSelectExpressionDropdownValue=e.selectExpressionDropdownValue,e.trigger("rx:change:inputs",e)))},updateInspectorConfig:function(){return l(this.prop("rxData/processDefinitionName"))&&(this.selectExpressionDropdownValue=f.dropDownOptionsValue.expression),a.when()},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);return b.name=this.prop("rxData/label"),b&&(b.processDefinitionName=b.processDefinitionName.trim()),b}}),{getRxData:function(a){var b={resourceType:d.ruleElementResourceTypes.cancelProcessAction,name:"Cancel Process",processDefinitionName:""};return a&&_.assign(b,a),b},getRxInspector:function(){var a=function(a){return _.assign({},a)};return{inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:a({label:{"class":"required"}})},processDefinitionName:{label:"Process To Cancel",type:"rx-inspector-select-expression-dropdown",group:"properties",index:2,definitionType:e.definitionTypes.process.type,attrs:a({label:{"class":"required"}})},processContextKey:{label:"Context Key",type:"rx-inspector-expression-node-field",group:"inputMap",index:1,attrs:a({label:{"class":"required"}}),when:{ne:{"rxData/processDefinitionName":""}}},cancelReason:{label:"Cancellation Reason",type:"rx-inspector-expression-node-field",group:"inputMap",index:2,attrs:a(),when:{ne:{"rxData/processDefinitionName":""}}}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2}}}},getRxConfig:function(a,b,c){return c=c||{},{rxData:this.getRxData(a),rxInspector:this.getRxInspector()}},getShape:function(a){return new joint.shapes.rx.RuleCancelProcess(this.getRxConfig(a))},validate:function(b,c){var d=[],e=a.defer(),f=[],i=b.name||"Cancel Process";if(g.isEmptySafe(b.name)&&d.push({elementId:b.id,elementName:i,propertyName:"label",type:"error",message:"Label cannot be blank."}),g.isEmptySafe(b.processDefinitionName)?d.push({elementId:b.id,elementName:i,propertyName:"processDefinitionName",type:"error",message:"Process To Cancel cannot be blank."}):g.isEmptySafe(b.processContextKey)&&d.push({elementId:b.id,elementName:i,propertyName:"processContextKey",type:"error",message:"Context Key cannot be blank."}),_.includes(b.processContextKey,"${ruleContext.")){var k=h.getRecordDefinition(c.recordDefinitionNames[0]);f.push(k),k.then(function(a){var c=j.validateExpression(b.processContextKey,a);_.isEmpty(c)||d.push({elementId:b.id,elementName:i,propertyName:"processContextKey",type:"error",message:"Expression Context Key uses fields that are not in the primary record definition. Field IDs: "+c.join()+"."})})}if(_.includes(b.cancelReason,"${ruleContext.")){var l=h.getRecordDefinition(c.recordDefinitionNames[0]);f.push(l),l.then(function(a){var c=j.validateExpression(b.cancelReason,a);_.isEmpty(c)||d.push({elementId:b.id,elementName:i,propertyName:"cancelReason",type:"error",message:"Expression Cancel Reason uses fields that are not in the primary record definition. Field IDs: "+c.join()+"."})})}return _.isEmpty(f)?e.resolve(d):a.all(f)["finally"](function(){e.resolve(d)}),e.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleDefinitionElement",["$q","$filter","rxBundleCache","RX_RULE_DESIGNER","RX_RECORD_DEFINITION","rxDesignerCache","definitionNameFilter","rxGUID",function(a,b,c,d,e,f,g,h){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleModelView=joint.dia.ElementView.extend({}),joint.shapes.rx.RuleModel=joint.dia.Element.extend({markup:"<g></g>",defaults:{type:"rx.RuleModel",position:{x:0,y:0},size:{width:1,height:1}},isRemovable:!1,initialize:function(a){a&&a.id||this.set("id",h.generate(),{silent:!0})},setPrimaryRecordDefinition:angular.noop,getParentId:function(){return!1},isLink:function(){return!1},fromRuleDefinition:function(a){var c=_.cloneDeep(_.pick(a,["name","description","isEnabled","recordDefinitionNames"]));if(c.name=b("definitionName")(c.name,"decode"),a.lastUpdateTime){var d=["name"],e=this.get("rxInspector").inputs.rxData;_.forEach(d,function(a){e[a].attrs.input=e[a].attrs.input||{},e[a].attrs.input.readonly=!0})}return this.set("rxData",c),this},persist:function(a){var d=_.cloneDeep(this.get("rxData"));if(a.lastUpdateTime)d.name=a.name;else{var e=c.getBundleId(),f=e?e+":":"";d.name=f+b("definitionName")(d.name,"encode")}return _.assign(a,d),null},canPersist:function(){return!1},getAutoCompleteList:function(b){var c=this.prop("rxData/recordDefinitionNames/0");return b.fieldPath&&c?f.getRecordDefinition(c).then(function(c){var d=_.find(c.fieldDefinitions,function(a){return a.id===Number(b.fieldPath)});return d&&d.resourceType===e.dataTypes.selection.resourceType?_(d.optionNamesById).values().map(function(a){return{id:a,label:a}}).value():a.when([])}):a.when([])},getBBox:function(){return joint.g.rect(0,0,0,0)}}),{getModel:function(a){a=a||{};var b=a.readonly===!0,c=function(a){var c=b?{"input, textarea, select":{readonly:!0}}:{};return _.assign({},c,a)},d=function(){return c({label:{"class":"required"}})};return new joint.shapes.rx.RuleModel({rxInspector:{inputs:{rxData:{name:{label:"Name",type:"text",group:"properties",attrs:_.assign({input:{maxlength:254}},d())},description:{label:"Description",type:"textarea",group:"properties",attrs:c(),when:b?{ne:{"rxData/description":""}}:void 0},isEnabled:{label:"Enabled",type:"toggle",group:"properties",defaultValue:!0,attrs:c()},recordDefinitionNames:{type:"rx-inspector-rule-record-definitions-field",group:"recordDefinitions",attrs:d()}}},groups:{properties:{label:"General",index:1},recordDefinitions:{label:"Record Definitions",index:2}}}})},validate:function(c){var d=[],e=b("definitionName")(c.name,"decode");return _.isEmpty(_.trim(e))&&(e="Rule Definition",d.push({elementId:c.id,elementName:e,propertyName:"name",type:"error",message:"Rule Name cannot be blank."})),_.isEmpty(c.recordDefinitionNames)&&(e="Rule Definition",d.push({elementId:c.id,elementName:e,propertyName:"recordDefinitionNames",type:"error",message:"A Record Definition must be selected."})),_.isEmpty(c.actions)&&(e="Rule Definition",d.push({elementId:c.id,elementName:e,propertyName:null,type:"error",message:"Rule must have at least one action."})),_.some(c.recordDefinitionNames,function(a){return _.isEmpty(_.trim(a))})&&d.push({elementId:c.id,elementName:e,propertyName:"recordDefinitionNames",type:"error",message:"Record Definition cannot be blank."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleLinkElement",function(){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleLinkView=joint.dia.LinkView,joint.shapes.rx.RuleLink=joint.dia.Link.extend({defaults:joint.util.deepSupplement({attrs:{".marker-source":{style:"display:none;"},".marker-target":{style:"display:none;"},".connection-wrap":{style:"display:none;"},".link-tools":{style:"display:none;"},".marker-arrowheads":{style:"display:none;"}}},joint.dia.Link.prototype.defaults)}),{getShape:function(){return new joint.shapes.rx.RuleLink}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleQualificationElementExpressionConfigurator",["$q","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b,c){return c.extend({initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var c=_.cloneDeep(b.operators.all);c.unshift([{displayValue:"NEWVALUE()",contentValue:"NEWVALUE()",buttonStyle:"function"},{displayValue:"OLDVALUE()",contentValue:"OLDVALUE()",buttonStyle:"function"},{displayValue:"More",contentValue:"",buttonStyle:"disabled"}]);var d={regExp:/^rxData\/expression$/g,operators:c};this.registerExpressionConfig(d)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleQualificationElement",["$q","i18n","rxRuleExpressionValidation","rxDesignerCache","RX_RULE_DESIGNER","rxRuleQualificationElementModel",function(a,b,c,d,e,f){return{getRxData:function(a){var b=a||{},c={resourceType:e.ruleElementResourceTypes.qualification,expression:b.expression||"",name:b.name||void 0};return c},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};b();return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b()},expression:{label:"Expression",type:"rx-inspector-expression-node-field",group:"properties",index:2,when:{regex:{"rxData/recordDefinitionName":/^(?=\s*\S).*$/}},attrs:b({label:{"class":"required"}})}}},groups:{properties:{label:"General",index:1}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.RuleQualification(b)},registerValidators:function(a){a.validate("add",function(b,c,d){var e=a.attributes.commandManager.graph,f=e.getCell(c.data.id);if("rx.RuleQualification"==f.get("type")){var g=_.filter(e.get("cells").models,function(a){return"rx.RuleQualification"===a.get("type")});if(g.length>1)return void d("Rule must have a single Qualification element.")}})},validate:function(a,b){var e=[];return d.getRecordDefinition(b.recordDefinitionNames[0]).then(function(b){if(_.isEmpty(_.trim(a.expression)))e.push({elementId:a.id,elementName:a.name||"Qualification",propertyName:"expression",type:"error",message:"Expression cannot be blank."});else if(_.includes(a.expression,"${ruleContext.")){var d=c.validateExpression(a.expression,b);_.isEmpty(d)||e.push({elementId:a.id,elementName:a.name||"Qualification",propertyName:"expression",type:"error",message:"Expression uses fields that are not in the primary record definition. Field IDs: "+d.join()+"."})}return e})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleQualificationElementModel",["$q","i18n","rxRuleExpressionValidation","rxDesignerCache","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","rxRuleShapeInterface","rxRuleQualificationElementExpressionConfigurator","rxRuleShapeViewInterface",function(a,b,c,d,e,f,g,h,i){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleQualificationView=joint.dia.ElementView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleQualification=joint.shapes.bpmn.Gateway.extend(joint.shapes.rx.RuleShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.RuleQualification",icon:"qualification",breadcrumbLabel:"Qualification",size:{width:60,height:60},attrs:{".label":{fill:"gray",text:void 0,style:{"font-weight":"bold"}},image:{height:32,width:32,transform:"translate(24,24)"}}},joint.shapes.bpmn.Gateway.prototype.defaults),labelPath:"attrs/.label/text",clearLabel:!0,initialize:function(a){joint.shapes.bpmn.Gateway.prototype.initialize.apply(this,arguments),this._expressionConfigurator=new h(this),this.prop("rxData/label",this.prop("rxData/name"))},getExpressionConfigurator:function(){return this._expressionConfigurator},persist:function(a){var b=_.omit(this.prop("rxData"),"label","resourceType");return b.id=this.get("id"),a.qualification=b,a.qualification.name=this.prop("rxData/label"),a.qualification},supportDynamicQualification:function(a){return"rxData/expression"===a}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleSetFieldElement",["$q","i18n","RX_RULE_DESIGNER","RX_RECORD_DEFINITION","rxDesignerCache","rxRuleShapeInterface","rxDefaultExpressionConfigurator","rxRuleShapeViewInterface",function(a,b,c,d,e,f,g,h){function i(a,b){return a.name.localeCompare(b.name)}var j=null;return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleSetFieldView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleSetField=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend({_lastRecordDefinitionName:void 0,defaults:joint.util.deepSupplement({type:"rx.RuleSetField",activityType:"task",content:"Set Field",size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.prop("rxData/label",this.prop("rxData/name")),this._expressionConfigurator=new g(this)},getExpressionConfigurator:function(){return this._expressionConfigurator},_buildInspector:function(a){var b=angular.copy(this.get("rxInspector"));b.inputs.rxData.inputMap=this._buildInspectorMap(a,"inputMap"),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.trigger("rx:change:inputs",this)},_rebuildInspector:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData"));a?(b.inputs.rxData.inputMap=this._buildInspectorMap(a,"inputMap"),c.inputMap=this._buildDataMap(a)):(delete b.inputs.rxData.inputMap,c.inputMap={}),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0}),this.trigger("rx:change:inputs",this)},_buildInspectorMap:function(a,b){var c={},e=this.prop("rxInspector/readonly"),f=this._getFieldDefinitions(a);return f.forEach(function(a){var f={label:a.name,type:"rx-inspector-expression-node-field",group:b};if(a.resourceType===d.dataTypes.selection.resourceType&&(f.type="rx-inspector-expression-input-select",f.options=_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})),e){var g={},h={};g["rxData/"+b+"/"+a.name]=void 0,h["rxData/"+b+"/"+a.name]="",f.when={and:[{ne:g},{ne:h}]}}e&&(f.attrs=f.attrs||{},$(f.attrs).prop({"input, textarea, select":{readonly:!0,disabled:!0}})),c[a.name]=f}),c},_buildDataMap:function(a){var b={};return this._getFieldDefinitions(a).forEach(function(a){b[a.name]=""}),b},_getFieldDefinitions:function(a){return _(a.fieldDefinitions).filter(function(a){return"SYSTEM"!=a.fieldOption}).sort(i).value()},_transformMap:function(a,b){var c=[];for(var d in a[b]){var e=a[b][d];e&&c.push({assignTarget:d,expression:e})}a[b]=c},updateInspectorConfig:function(){var b=this,c=a.defer();return j&&j!==b._lastRecordDefinitionName?e.getRecordDefinition(j).then(function(a){_.isUndefined(b._lastRecordDefinitionName)&&!_.isEmpty(b.prop("rxData/inputMap"))?b._buildInspector(a):b._rebuildInspector(a),b._lastRecordDefinitionName=j,c.resolve()}):c.resolve(),c.promise},setPrimaryRecordDefinition:function(a){var b=this;j=a,_.isUndefined(b._lastRecordDefinitionName)||(j?e.getRecordDefinition(j).then(function(a){b._rebuildInspector(a),b._lastRecordDefinitionName=j}):(b._rebuildInspector(a),b._lastRecordDefinitionName=j))},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);return b&&this._transformMap(b,"inputMap"),b.name=this.prop("rxData/label"),b}}),{getRxData:function(a){function b(b){d[b]={},(a[b]||[]).forEach(function(a){d[b][a.assignTarget]=a.expression})}var d={resourceType:c.ruleElementResourceTypes.setField,name:"Set Field",dataSourceType:"CURRENT_TRANSACTION",inputMap:[]
};return a&&(_.assign(d,a),b("inputMap")),d},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.RuleSetField(b)},validate:function(b,c){var d=[];return _.isEmpty(_.trim(b.name))&&d.push({elementId:b.id,elementName:"Set Field",propertyName:"label",type:"error",message:"Label cannot be blank."}),_.isEmpty(b.inputMap)&&d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap",type:"error",message:"At least one field should be populated in the input map."}),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleShapeViewInterface",function(){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleShapeViewInterface={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments)}},{}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleShapeInterface",function(){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleShapeInterface={labelPath:"content",initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.on("change:position",this._onChangePosition),this.on("change:rxData",this._onCellChanged),this.get("rxData").label=this.prop(this.labelPath)},_onCellChanged:function(a){a.labelPath&&a.changedAttributes().rxData&&a.prop(a.labelPath,a.changedAttributes().rxData.label)},setPrimaryRecordDefinition:angular.noop,canBeEmbedded:_.constant(!1),updateContent:function(){var a=this.get("content"),b=this.id?a:_.trunc(a,{length:20}),c=b===a?"":a;joint.env.test("svgforeignobject")?this.attr({".content":{html:b,title:c}}):this.attr({".content":{text:b,title:c}})},persist:function(a){var b=_.omit(this.prop("rxData"),"label"),c=this.get("id"),d=_.find(a.actions,{id:c});return d?_.assign(d,b):(b.id=c,d=b,a.actions.push(d)),d},canPersist:function(){return!0}},{}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleShowAlertElement",["$q","i18n","RX_RULE_DESIGNER","rxDesignerCache","rxRuleExpressionValidation","rxRuleShapeInterface","rxDefaultExpressionConfigurator","rxRuleShapeViewInterface",function(a,b,c,d,e,f,g,h){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleShowAlertView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleShowAlert=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.RuleShowAlert",activityType:"task",content:"Show Alert",size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.prop("rxData/label",this.prop("rxData/name")),this._expressionConfigurator=new g(this)},getExpressionConfigurator:function(){return this._expressionConfigurator},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);return b.name=this.prop("rxData/label"),b}}),{getRxData:function(a){var b={resourceType:c.ruleElementResourceTypes.alert,name:"Show Alert",messageText:"",messageCode:1e4,messageType:"NOTE"};return a&&_.assign(b,a),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},messageText:{label:"Alert Text",type:"rx-inspector-expression-node-field",group:"properties",index:2,attrs:b({label:{"class":"required"}})},messageCode:{label:"Alert Code",type:"number",group:"properties",index:3,attrs:b({label:{"class":"required"}})},messageType:{label:"Alert Type",type:"select",group:"properties",index:4,options:["NOTE","WARNING","ERROR"],attrs:b({label:{"class":"required"}})}}},groups:{properties:{label:"General",index:1}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.RuleShowAlert(b)},registerValidators:function(a){a.validate("add",function(b,d,e){var f=a.attributes.commandManager.graph,g=f.getCell(d.data.id);if("rx.RuleShowAlert"===g.get("type")){var h=_.find(f.getCells(),function(a){return"rx.RuleTrigger"===a.get("type")});return h.get("rxData").resourceType===c.ruleElementResourceTypes.triggerTimeElement?void e("Show Alert action cannot be used in a rule with Timer Event trigger type"):void 0}})},validate:function(a,b){var f=[];return d.getRecordDefinition(b.recordDefinitionNames[0]).then(function(d){var g=a.name||"Show Alert";if(_.isEmpty(_.trim(a.name))&&f.push({elementId:a.id,elementName:g,propertyName:"label",type:"error",message:"Label cannot be blank."}),b.triggerEvent.resourceType===c.ruleElementResourceTypes.triggerTimeElement&&f.push({elementId:a.id,elementName:g,type:"error",message:"Show Alert action cannot be used in a rule with Timer Event trigger type"}),a.messageCode<1e4&&f.push({elementId:a.id,elementName:g,propertyName:"messageCode",type:"error",message:"Alert Code must be greater or equal to 10000."}),_.isEmpty(_.trim(a.messageText)))f.push({elementId:a.id,elementName:g,propertyName:"messageText",type:"error",message:"Alert Text cannot be blank."});else if(_.includes(a.messageText,"${ruleContext.")){var h=e.validateExpression(a.messageText,d);_.isEmpty(h)||f.push({elementId:a.id,elementName:g,propertyName:"messageText",type:"error",message:"Alert Text uses fields that are not in the primary record definition. Field IDs: "+h.join()+"."})}else a.messageText.length>255&&f.push({elementId:a.id,elementName:g,propertyName:"messageText",type:"error",message:"Alert Text cannot be longer than 255 characters."});return f})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleSignalProcessElement",["$q","i18n","dialogs","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION","RX_DEFINITION_PICKER","rxDesignerCache","rxRuleExpressionValidation","rxDefaultExpressionConfigurator","definitionNameFilter","rxRuleShapeInterface","rxRuleShapeViewInterface","rxProcessElementSearch",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(a){var b=n.filter(a,{resourceType:d.processElementResourceTypes.receiveTask});return _(b).map(function(a){return{content:k(a.name),value:a.name}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()},p=function(a,b){var c=n.filter(a,{resourceType:d.processElementResourceTypes.receiveTask}),e=b?_.find(c,{name:b}).signalParams:null;return e||[]};return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleSignalProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleSignalProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend({_lastProcessDefinitionName:"",_lastReceiveTaskName:"",defaults:joint.util.deepSupplement({type:"rx.RuleSignalProcess",content:"Signal Process",size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.prop("rxData/label",this.prop("rxData/name")),a&&a.rxData&&a.rxData.processDefinitionName&&(this.prop("size/width",90),this.prop("size/height",60),this._lastProcessDefinitionName=a.rxData.processDefinitionName,this._lastReceiveTaskName=a.rxData.receiveTaskName),this._expressionConfigurator=new j(this)},getExpressionConfigurator:function(){return this._expressionConfigurator},_onChangeRxData:function(a,b,d){var e=this;b.processDefinitionName!==e._lastProcessDefinitionName&&(e._lastProcessDefinitionName?e._lastProcessDefinitionName!=b.processDefinitionName&&c.confirm("Warning!","Receive Task Name and Input Map parameters will be cleared. Do you want to continue?").result.then(function(){e._setProcess(b.processDefinitionName)},function(){e.prop("rxData/processDefinitionName",e._lastProcessDefinitionName)}):e._setProcess(b.processDefinitionName)),b.receiveTaskName!==e._lastReceiveTaskName&&(b.receiveTaskName||e._lastReceiveTaskName)&&(e._lastReceiveTaskName?e._lastReceiveTaskName!=b.receiveTaskName&&c.confirm("Warning!","Input Map parameters will be cleared. Do you want to continue?").result.then(function(){e._setReceiveTaskName(b.receiveTaskName)},function(){e.prop("rxData/receiveTaskName",e._lastReceiveTaskName)}):e._setReceiveTaskName(b.receiveTaskName))},_setReceiveTaskName:function(a){var b=this;b._lastReceiveTaskName=a,a?h.getProcessDefinition(b.prop("rxData/processDefinitionName")).then(function(a){b._rebuildInputMap(a),b.trigger("rx:change:inputs",b)}):(b._rebuildInputMap(),b.trigger("rx:change:inputs",b))},_setProcess:function(a){var b=this;b._lastProcessDefinitionName=a,a?h.getProcessDefinition(a).then(function(a){b._lastReceiveTaskName="",b.prop("rxData/receiveTaskName","",{silent:!0}),b.prop("rxInspector/inputs/rxData/receiveTaskName/options",null),b.prop("rxInspector/inputs/rxData/receiveTaskName/options",o(a)),b._rebuildInputMap(),b.trigger("rx:change:inputs",b)}):(b._lastReceiveTaskName="",b.prop("rxData/receiveTaskName","",{silent:!0}),b.prop("rxInspector/inputs/rxData/receiveTaskName/options",null),b._rebuildInputMap(),b.trigger("rx:change:inputs",b))},_initInputMap:function(a){var b=angular.copy(this.get("rxInspector"));b.inputs.rxData.inputMap=this._buildInspectorInputMap(a),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0})},_rebuildInputMap:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData"));a?(b.inputs.rxData.inputMap=this._buildInspectorInputMap(a),c.inputMap=this._buildDataInputMap(a)):(delete b.inputs.rxData.inputMap,c.inputMap=[]),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0})},_buildDataInputMap:function(a){var b={},c=this.prop("rxData/receiveTaskName"),d=p(a,c);return d.forEach(function(a){b[a]=""}),b},_buildInspectorInputMap:function(a){var b={},c=this.prop("rxData/receiveTaskName"),d=p(a,c);return d&&d.forEach(function(a){var c={label:a,type:"rx-inspector-expression-node-field",group:"inputMap"};b[a]=c}),b},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);if(b.name=this.prop("rxData/label"),b){var c=[],e=angular.copy(b.correlationId);for(var f in b.inputMap){var g=b.inputMap[f];g&&c.push({assignTarget:f,expression:g})}b.processDefinitionName=b.processDefinitionName.trim(),b.inputMap=c,delete b.correlationId,b.correlation={resourceType:d.ruleElementResourceTypes.signalProcessAutomaticCorrelation,processCorrelationId:e}}return b},updateInspectorConfig:function(){var b=this,c=a.defer(),d=this.prop("rxData/correlation");return b._lastProcessDefinitionName?h.getProcessDefinition(b._lastProcessDefinitionName).then(function(a){b.prop("rxInspector/inputs/rxData/receiveTaskName/options",o(a)),b._initInputMap(a),c.resolve()}):c.resolve(),this.prop("rxData/correlationId")||_.isUndefined(d)||this.prop("rxData/correlationId",d.processCorrelationId),c.promise}}),{getRxData:function(a){var b={resourceType:d.ruleElementResourceTypes.signalProcessInstanceAction,name:"Signal Process",processDefinitionName:"",receiveTaskName:"",inputMap:[]};return a&&(_.assign(b,a),b.inputMap={},a.inputMap.forEach(function(a){b.inputMap[a.assignTarget]=a.expression})),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},processDefinitionName:{label:"Process",type:"rx-inspector-definition-picker",definitionType:g.definitionTypes.process.type,group:"properties",index:3,attrs:b({label:{"class":"required"}})},receiveTaskName:{label:"Receive Task",type:"select",options:[],group:"properties",index:3,attrs:b(),when:{ne:{"rxData/processDefinitionName":""}}},correlationId:{label:"Correlation ID",type:"rx-inspector-expression-node-field",group:"messageCorrelation",index:5,attrs:b({label:{"class":"required"}})}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},messageCorrelation:{label:"Message Correlation",index:3}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){return new joint.shapes.rx.RuleSignalProcess(this.getRxConfig(a))},validate:function(b,c){var d=[],e=a.defer(),f=[],g=b.label||"Signal Process";return _.isEmpty(_.trim(b.name))&&d.push({elementId:b.id,elementName:g,propertyName:"label",type:"error",message:"Label cannot be blank."}),_.isEmpty(_.trim(b.processDefinitionName))?d.push({elementId:b.id,elementName:g,propertyName:"processDefinitionName",type:"error",message:"Process Definition cannot be blank."}):b.receiveTaskName&&!_.isEmpty(b.inputMap)&&_.each(b.inputMap,function(a){if(_.includes(a.expression,"${ruleContext.")){var e=h.getRecordDefinition(c.recordDefinitionNames[0]);f.push(e),e.then(function(c){var e=i.validateExpression(a.expression,c);_.isEmpty(e)||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+a.assignTarget,type:"error",message:"Expression "+a.assignTarget+" uses fields that are not in the primary record definition. Field IDs: "+e.join()+"."})})}}),!_.isUndefined(b.correlation.processCorrelationId)&&b.correlation.processCorrelationId||d.push({elementId:b.id,elementName:g,propertyName:"correlationId",type:"error",message:"Correlation Id cannot be blank."}),_.isEmpty(f)?e.resolve(d):a.all(f)["finally"](function(){e.resolve(d)}),e.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleStartProcessElementExpressionConfigurator",["$q","rxDesignerCache","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b,c,d){var e=function(a){return a&&a.match(f)},f=/\$\{.*\}/;return d.extend({initialize:function(d){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var f={regExp:/^(rxData\/outputMap\/)[0-9]+(\/expression)$/g,updateDataDictionary:function(c,f){var g=a.defer();_.remove(c,function(a){return!("General"===a.label||"Record Definition Field"===a.type)});var h=d.prop("rxData/processDefinitionName");return e(h)&&(d.prop("rxData/sampleProcessDefinitionName")?h=d.prop("rxData/sampleProcessDefinitionName"):g.resolve(c)),h?b.getProcessDefinition(h).then(function(a){if(a&&!_.isEmpty(a.outputParams)){var b=[];_.each(a.outputParams,function(a){b.push({icon:"d-icon-arrow_chart",type:"Output Map Entry",label:a.name,value:"${actionResult."+a.name+"}"})}),c.unshift({label:d.get("content"),children:b})}g.resolve(c)}):g.resolve(c),g.promise},operators:c.operators.math};this.registerExpressionConfig(f)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleStartProcessElement",["$q","i18n","dialogs","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION","rxDesignerCache","rxRuleExpressionValidation","RX_DEFINITION_PICKER","rxRuleStartProcessElementModel",function(a,b,c,d,e,f,g,h,i,j){function k(a){return"REQUIRED"===a.fieldOption&&(null===a.defaultValue||_.isUndefined(a.defaultValue))}var l=/\$\{.*\}/,m=function(a){return a&&a.match(l)};return{getRxData:function(a){var b={resourceType:d.ruleElementResourceTypes.startProcessAction,name:"Start Process",processDefinitionName:"",inputMap:[]};return a&&(_.assign(b,a),b.inputMap={},a.inputMap.forEach(function(a){b.inputMap[a.assignTarget]=a.expression})),b},getRxInspector:function(a){var b=function(b){var c=a?{"input, textarea, select":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};return{readonly:a,inputs:{rxData:{label:{label:"Label",type:"text",group:"properties",index:1,attrs:b({label:{"class":"required"}})},processDefinitionName:{label:"Process To Start",type:"rx-inspector-select-expression-dropdown",group:"properties",index:2,definitionType:i.definitionTypes.process.type,attrs:b({label:{"class":"required"}})},sampleProcessDefinitionName:{label:"Sample Process",type:"select",options:[],group:"properties",index:3,attrs:b(),when:{regex:{"rxData/processDefinitionName":l}}},outputMap:{type:"list",group:"outputMap",index:4,item:{type:"object",properties:{assignTarget:{type:"select",label:"Name",options:[],attrs:b({label:{"class":"required"}})},expression:{type:"rx-inspector-expression-node-field",label:"Source",attrs:b({label:{"class":"required"}})}}},when:{eq:{_calledProcessHasOutputMap:!0}}}}},groups:{properties:{label:"General",index:1},inputMap:{label:"Input Map",index:2},outputMap:{label:"Output Map",index:3}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.RuleStartProcess(b)},validate:function(b,c){var d=[],e=a.defer(),f=[];if(_.isEmpty(_.trim(b.name))&&d.push({elementId:b.id,elementName:"Start Process",propertyName:"label",type:"error",message:"Label cannot be blank."}),_.isEmpty(_.trim(b.processDefinitionName)))d.push({elementId:b.id,elementName:b.name,propertyName:"processDefinitionName",type:"error",message:"Process To Start cannot be blank."});else{var i=b.processDefinitionName;if(m(b.processDefinitionName)&&(i=b.sampleProcessDefinitionName?b.sampleProcessDefinitionName:null,_.includes(b.processDefinitionName,"${ruleContext."))){var j=g.getRecordDefinition(c.recordDefinitionNames[0]);f.push(j),j.then(function(a){var c=h.validateExpression(b.processDefinitionName,a);_.isEmpty(c)||d.push({elementId:b.id,elementName:b.name,propertyName:"processDefinitionName",type:"error",message:"Expression "+b.processDefinitionName+" uses fields that are not in the primary record definition. Field IDs: "+c.join()+"."})})}if(i){var l=g.getProcessDefinition(i);f.push(l),l.then(function(a){_(a.inputParams).filter(k).pluck("name").each(function(a){var c=_(b.inputMap).find({assignTarget:a});c&&!_.isEmpty(_.trim(c.expression))||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+a,type:"error",message:'Input Map Property "'+a+'" cannot be blank.'})}).value()}),b.inputMap&&_.each(b.inputMap,function(a){if(_.includes(a.expression,"${ruleContext.")){var e=g.getRecordDefinition(c.recordDefinitionNames[0]);f.push(e),e.then(function(c){var e=h.validateExpression(a.expression,c);_.isEmpty(e)||d.push({elementId:b.id,elementName:b.name,propertyName:"inputMap/"+a.assignTarget,type:"error",message:"Expression "+a.assignTarget+" uses fields that are not in the primary record definition. Field IDs: "+e.join()+"."})})}})}}return _.isEmpty(f)?e.resolve(d):a.all(f)["finally"](function(){e.resolve(d)}),e.promise}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleStartProcessElementModel",["$q","i18n","dialogs","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DEFINITION","RX_INSPECTOR_SELECT_EXPRESSION_DROPDOWN","rxDesignerCache","rxRuleExpressionValidation","definitionNameFilter","rxRuleShapeInterface","rxRuleShapeViewInterface","rxRuleStartProcessElementExpressionConfigurator",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,b){return a.name.localeCompare(b.name)}function o(a){return"REQUIRED"===a.fieldOption&&(null===a.defaultValue||_.isUndefined(a.defaultValue))}function p(){return h.getProcessDefinitionNames().then(function(a){return _(a).map(function(a){return{content:j(a),value:a}}).sort(function(a,b){return a.content.localeCompare(b.content)}).unshift({content:"",value:""}).value()})}var q=/\$\{.*\}/,r=null,s=function(a){return a&&a.match(q)};return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleStartProcessView=joint.shapes.bpmn.ActivityView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleStartProcess=joint.shapes.bpmn.Activity.extend(joint.shapes.rx.RuleShapeInterface).extend({_lastProcessDefinitionName:"",_lastSelectExpressionDropdownValue:"",_lastSampleProcessDefinition:null,defaults:joint.util.deepSupplement({type:"rx.RuleStartProcess",content:"Start Process",size:{width:70,height:60},attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults),elementCanvasSize:{width:90,height:60},initialize:function(a){joint.shapes.bpmn.Activity.prototype.initialize.apply(this,arguments),this.prop("rxData/label",this.prop("rxData/name")),this.listenTo(this,"change:rxData",this._onChangeRxData),this._expressionConfigurator=new m(this),a&&a.rxData&&(a.rxData.processDefinitionName&&(this.prop("size/width",90),this.prop("size/height",60),this._lastProcessDefinitionName=a.rxData.processDefinitionName,s(this._lastProcessDefinitionName)&&(this._lastSelectExpressionDropdownValue=g.dropDownOptionsValue.expression)),a.rxData.sampleProcessDefinitionName&&(this._lastSampleProcessDefinition=a.rxData.sampleProcessDefinitionName),a.rxData.outputMap&&this.set("_calledProcessHasOutputMap",!0,{ignoreCommandManager:!0}))},getExpressionConfigurator:function(){return this._expressionConfigurator},_onChangeRxData:function(a,b){var d=this;b.processDefinitionName?d._lastProcessDefinitionName?d._lastProcessDefinitionName!=b.processDefinitionName&&c.confirm("Warning!","Input Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setProcess(b.processDefinitionName),d._lastSelectExpressionDropdownValue=d.selectExpressionDropdownValue},function(){d.prop("rxData/processDefinitionName",d._lastProcessDefinitionName)}):(d._setProcess(b.processDefinitionName),d._lastSelectExpressionDropdownValue=d.selectExpressionDropdownValue):d._lastProcessDefinitionName&&!b.processDefinitionName&&c.confirm("Warning!","Process To Start and Input Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setProcess(b.processDefinitionName),d._lastSelectExpressionDropdownValue=d.selectExpressionDropdownValue},function(){d.prop("rxData/processDefinitionName",d._lastProcessDefinitionName),d.selectExpressionDropdownValue=d._lastSelectExpressionDropdownValue}),b.sampleProcessDefinitionName?d._lastSampleProcessDefinition?b.sampleProcessDefinitionName!=d._lastSampleProcessDefinition&&c.confirm("Warning!","Input Map and Output Map parameters will be cleared. Do you want to continue?").result.then(function(){d._setSampleProcess(b.sampleProcessDefinitionName)},function(){d.prop("rxData/sampleProcessDefinitionName",d._lastSampleProcessDefinition)}):d._setSampleProcess(b.sampleProcessDefinitionName):d._lastSampleProcessDefinition&&d._setSampleProcess(b.sampleProcessDefinitionName)},_setSampleProcess:function(a){var b=this;b._lastSampleProcessDefinition=a,h.getProcessDefinition(a).then(function(a){b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0}),b.set("_calledProcessHasOutputMap",a&&!_.isEmpty(a.outputParams),{ignoreCommandManager:!0}),b._rebuildInputMap(a),b.trigger("rx:change:inputs",b)})},_setProcess:function(a){var b=this;if(b._lastProcessDefinitionName=a,b.prop("rxData/sampleProcessDefinitionName","",{ignoreCommandManager:!0}),a&&q.test(a)){var c=angular.copy(b.get("rxInspector")),d=angular.copy(b.get("rxData"));delete c.inputs.rxData.inputMap,d.inputMap=[],b.unset("rxInspector",{silent:!0}),b.prop("rxInspector",c,{silent:!0}),b.trigger("rx:change:inputs",b)}else h.getProcessDefinition(a).then(function(a){b.prop("rxData/outputMap",null,{silent:!0}),b.prop("rxData/outputMap",[],{silent:!0}),b.set("_calledProcessHasOutputMap",a&&!_.isEmpty(a.outputParams),{ignoreCommandManager:!0}),b._rebuildInputMap(a),b.trigger("rx:change:inputs",b)})},_initInputMap:function(a){var b=angular.copy(this.get("rxInspector"));b.inputs.rxData.inputMap=this._buildInspectorInputMap(a),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0})},_rebuildInputMap:function(a){var b=angular.copy(this.get("rxInspector")),c=angular.copy(this.get("rxData"));a?(b.inputs.rxData.inputMap=this._buildInspectorInputMap(a),c.inputMap=this._buildDataInputMap(a)):(delete b.inputs.rxData.inputMap,c.inputMap=[]),this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",b,{silent:!0}),this.unset("rxData",{silent:!0}),this.prop("rxData",c,{ignoreCommandManager:!0})},_buildDataInputMap:function(a){var b={};return a.inputParams.forEach(function(a){b[a.name]=""}),b},_buildInspectorInputMap:function(a){var b={},c=_.sortBy(a.inputParams,function(a){return!o(a)});return c.forEach(function(a){var c={label:a.name,type:"rx-inspector-expression-node-field",group:"inputMap"};a.resourceType===f.dataTypes.selection.resourceType&&(c.type="rx-inspector-expression-input-select",c.options=_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})),o(a)&&(c.attrs={label:{"class":"required"}}),b[a.name]=c}),b},updateInspectorConfig:function(){var b=this,c=[];return this.prop("rxInspector/inputs/rxData/sampleProcessDefinitionName/options").length||p().then(function(a){b.prop("rxInspector/inputs/rxData/sampleProcessDefinitionName/options",a),b._lastProcessDefinitionName&&(s(b._lastProcessDefinitionName)?b._lastSampleProcessDefinition&&c.push(h.getProcessDefinition(b._lastSampleProcessDefinition).then(function(a){b._initInputMap(a)})):c.push(h.getProcessDefinition(b._lastProcessDefinitionName).then(function(a){b._initInputMap(a)})))}),s(this.prop("rxData/processDefinitionName"))&&(this.selectExpressionDropdownValue=g.dropDownOptionsValue.expression),a.all(c)},persist:function(a){var b=joint.shapes.rx.RuleShapeInterface.persist.apply(this,arguments);if(b.name=this.prop("rxData/label"),b){var c=[];for(var d in b.inputMap){var e=b.inputMap[d];e&&c.push({assignTarget:d,expression:e})}b.processDefinitionName=b.processDefinitionName.trim(),b.inputMap=c,b.sampleProcessDefinitionName=this.prop("rxData/sampleProcessDefinitionName")}return b},setPrimaryRecordDefinition:function(a){var b=this;r=a,r?h.getRecordDefinition(r).then(function(a){b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",null),b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",_.map(b._getFieldDefinitions(a),"name"))}):b.prop("rxInspector/inputs/rxData/outputMap/item/properties/assignTarget/options",[])},_getFieldDefinitions:function(a){return _(a.fieldDefinitions).filter(function(a){return"SYSTEM"!=a.fieldOption}).sort(n).value()}}),{}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleTriggerElement",["$q","$sce","i18n","dialogs","ruleIntervalTimerFilter","ruleIntervalDurationIsoFilter","scheduleTimerJsonFilter","scheduleTimerExpressionBuilderFilter","RX_RULE_DESIGNER","rxRuleShapeInterface","rxRuleShapeViewInterface",function(a,b,c,d,e,f,g,h,i,j,k){return joint.shapes.rx=joint.shapes.rx||{},joint.shapes.rx.RuleTriggerView=joint.dia.ElementView.extend(joint.shapes.rx.RuleShapeViewInterface),joint.shapes.rx.RuleTrigger=joint.shapes.bpmn.Event.extend(joint.shapes.rx.RuleShapeInterface).extend({defaults:joint.util.deepSupplement({type:"rx.RuleTrigger",content:"Trigger",size:{width:50,height:50},attrs:{".label":{fill:"gray",text:"Trigger",y:"-30"}}},joint.shapes.bpmn.Event.prototype.defaults),labelPath:"attrs/.label/text",clearLabel:!0,isRemovable:!1,lastTriggerType:null,lastTimerType:null,initialize:function(a){joint.shapes.bpmn.Event.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),a&&a.rxData.triggerType&&(this.lastTriggerType=a.rxData.triggerType),a&&a.rxData.timerType&&(this.lastTimerType=a.rxData.timerType),_.isEmpty(a.rxData.timeCriteria)||this.prop("rxData/scheduleDefinition")||this.prop("rxData/scheduleDefinition",h(g(angular.copy(this.prop("rxData/timeCriteria")),"json")))},_onChangeRxData:function(a,b){var c=this,f=a.prop("rxData/triggerType");if(f!==c.lastTriggerType&&(_.isEmpty(b.eventTypes)&&_.isEmpty(b.timeCriteria)&&_.isEmpty(b.poolNumber)?c._setTriggerType(f):d.confirm("Warning!","If you change Trigger type, the previously entered data will be deleted. Do you want to continue?").result.then(function(){c._setTriggerType(f)},function(){c.prop("rxData/triggerType",c.lastTriggerType)})),a.prop("rxData/resourceType")===i.ruleElementResourceTypes.triggerTimeElement)if(c.lastTimerType!==b.timerType)_.isEmpty(b.timeCriteria)?c._setTimerType(b.timerType):d.confirm("Warning!","If you change from one Timer Type to another, the previously entered definition will be deleted. Do you want to continue?").result.then(function(){c._setTimerType(b.timerType)},function(){c.prop("rxData/timerType",c.lastTimerType)});else{var g={};"Interval"===b.timerType&&b.intervalDefinition?(g=e(b.intervalDefinition,"json"),g.resourceType="com.bmc.arsys.rx.services.rule.domain.IntervalTime"):"Schedule"===b.timerType&&b.scheduleDefinition&&(g=b.timeCriteria),_.eq(g,a.prop("rxData/timeCriteria"))||(a.prop("rxData/timeCriteria",null,{silent:!0}),a.prop("rxData/timeCriteria",g))}},persist:function(a){var b=a.triggerEvent,c=this.get("rxData");return c.poolNumber=parseInt(c.poolNumber),b.id=this.get("id"),b.resourceType=c.resourceType,c.resourceType===i.ruleElementResourceTypes.triggerTimeElement?(delete b.eventTypes,delete b.executionOrder,b.poolNumber=c.poolNumber,b.timeCriteria=c.timeCriteria):c.resourceType===i.ruleElementResourceTypes.triggerElement&&(delete b.timeCriteria,delete b.poolNumber,b.eventTypes=this.get("rxData").eventTypes,b.executionOrder=this.get("rxData").executionOrder),b},_setTriggerType:function(a){this.lastTriggerType=a,"Timer Event"===a?(this.trigger("batch:start"),this.prop("rxData/resourceType",i.ruleElementResourceTypes.triggerTimeElement),this.prop("rxData/eventTypes",null),this.prop("rxData/executionOrder",null),this.prop("rxData/intervalDefinition",""),this.prop("rxData/scheduleDefinition",""),this.prop("rxData/timeCriteria",{}),this.prop("rxData/poolNumber",null),this.trigger("batch:stop")):"Record Event"===a&&(this.trigger("batch:start"),this.prop("rxData/resourceType",i.ruleElementResourceTypes.triggerElement),this.prop("rxData/timeCriteria",null),this.prop("rxData/intervalDefinition",null),this.prop("rxData/scheduleDefinition",""),this.prop("rxData/poolNumber",null),this.prop("rxData/timerType","Interval"),this.lastTimerType="Interval",this.prop("rxData/eventTypes",[]),this.prop("rxData/executionOrder",500),this.trigger("batch:stop"))},_setTimerType:function(a){this.lastTimerType=a,"Interval"===a?(this.prop("rxData/scheduleDefinition",""),this.prop("rxData/intervalDefinition","")):"Schedule"===a&&(this.prop("rxData/intervalDefinition",null),this.prop("rxData/scheduleDefinition",""))}}),{getRxData:function(a){var b={resourceType:i.ruleElementResourceTypes.triggerElement,eventTypes:[],executionOrder:500,triggerType:"Record Event",timerType:"Interval",poolNumber:null};return a&&(_.assign(b,a),a.resourceType===i.ruleElementResourceTypes.triggerTimeElement&&(b.triggerType="Timer Event",a.timeCriteria.resourceType===i.ruleElementResourceTypes.scheduleTime?b.timerType="Schedule":b.intervalDefinition=f(b.timeCriteria))),
b},getRxInspector:function(a){var c=function(b){var c=a?{"input, textarea":{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)};c();return{readonly:a,inputs:{rxData:{triggerType:{label:"Trigger Type",type:"select",options:["Record Event","Timer Event"],index:1,group:"properties",attrs:c()},eventTypes:{label:"Record Event",type:"rx-inspector-checkbox-multiselect-field",index:2,options:[i.eventTypes],group:"properties",attrs:c(),when:{eq:{"rxData/triggerType":"Record Event"}}},timerType:{label:"Timer Type",type:"select",options:["Interval","Schedule"],index:2,group:"properties",attrs:c(),when:{eq:{"rxData/triggerType":"Timer Event"}}},intervalDefinition:{label:"Interval Definition",type:"rx-inspector-interval-timer-field",index:2,group:"properties",inputType:"textarea",attrs:c({label:{"class":"required"}}),when:{and:[{eq:{"rxData/triggerType":"Timer Event"}},{eq:{"rxData/timerType":"Interval"}}]}},scheduleDefinition:{label:"Schedule Definition",type:"rx-inspector-schedule-timer-field",index:2,group:"properties",inputType:"textarea",attrs:c({label:{"class":"required"}}),when:{and:[{eq:{"rxData/triggerType":"Timer Event"}},{eq:{"rxData/timerType":"Schedule"}}]}},poolNumber:{label:"Pool Number",type:"rx-inspector-tooltip-field",tooltip:"To distribute the load, use escalation pools. The Pool Number should be between 1 and the number of threads configured for the escalation queue.",inputType:"number",group:"options",index:3,attrs:c(),when:{eq:{"rxData/triggerType":"Timer Event"}}},executionOrder:{label:"Execution Order (1 - 1000)",type:"rx-inspector-tooltip-field",tooltip:{text:b.trustAsHtml("Execution Order determines the order in which rules will fire when there are two or more rules associated with the same Record Definition and Record Event.<br> <br> A rule with a smaller Execution Order number will fire before a rule with a larger Execution Order number.")},inputType:"number",group:"options",index:3,attrs:c({label:{"class":"required"}}),when:{eq:{"rxData/triggerType":"Record Event"}}}}},groups:{properties:{label:"General",index:1},options:{label:"Options",index:2}}}},getRxConfig:function(a,b,c){c=c||{};var d=c.readonly===!0;return{rxData:this.getRxData(a),rxInspector:this.getRxInspector(d)}},getShape:function(a){var b=this.getRxConfig(a);return new joint.shapes.rx.RuleTrigger(b)},validate:function(b,c){var d=[];return b.resourceType===i.ruleElementResourceTypes.triggerTimeElement?(_.isEmpty(b.timeCriteria)&&d.push({elementId:b.id,elementName:"Trigger Event",propertyName:"timerType",type:"error",message:"Time Definition cannot be blank."}),_.isNumber(b.poolNumber)&&b.poolNumber<=0&&d.push({elementId:b.id,elementName:"Trigger Event",propertyName:"poolNumber",type:"error",message:"Pool Number should be greater than 1."})):b.resourceType===i.ruleElementResourceTypes.triggerElement&&(_.isEmpty(b.eventTypes)||(b.executionOrder<1||b.executionOrder>1e3)&&d.push({elementId:b.id,elementName:"Trigger Event",propertyName:"executionOrder",type:"error",message:"Execution order must be between 1 and 1000."})),a.when(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleAutoComplete",["RxAutoComplete",function(a){function b(a){return new c(a)}var c=a.extend({initialize:function(a){rx.assert.assertDefinedAndNotNull(a),this.graph=a},extractData:function(a){var b={cell:null,fieldPath:null},c=a.match(/\${ruleContext\.(.*)}$/);if(c){var d=_.find(this.graph.getCells(),function(a){return"rx.RuleModel"==a.get("type")});d&&(b.component=d,b.fieldPath=c[1])}return b}});return{getInstance:b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleDataDictionary",["$q","rxDesignerCache","definitionNameFilter",function(a,b,c){function d(){g={plainRuleDefinition:{},currentDataDictionary:{}}}function e(b){return angular.equals(b,g.plainRuleDefinition)?a.when(g.currentDataDictionary):(g.plainRuleDefinition=angular.copy(b),i(b).then(function(a){return g.currentDataDictionary=a,g.currentDataDictionary}))}var f={keyword:{label:"Keyword",type:"Keyword",icon:"d-icon-dollar"},recordDefinitionField:{label:"Record Definition Field",type:"Record Definition Field",icon:"d-icon-field_text"}},g={plainRuleDefinition:{},currentDataDictionary:{}},h=function(){return _.values(f)},i=function(d){var e=_.cloneDeep(d),g=function(a,b){return a.label.localeCompare(b.label)},h=[],i={label:"General",children:[{label:"Current User",type:f.keyword.type,icon:f.keyword.icon,value:"$USER$"},{label:"Current Date",type:f.keyword.type,icon:f.keyword.icon,value:"$DATE$"},{label:"Current Time",type:f.keyword.type,icon:f.keyword.icon,value:"$TIME$"},{label:"Current Date and Time",type:f.keyword.type,icon:f.keyword.icon,value:"$TIMESTAMP$"},{label:"Current Week Day",type:f.keyword.type,icon:f.keyword.icon,value:"$WEEKDAY$"},{label:"Current Record",type:f.keyword.type,icon:f.keyword.icon,value:"$ENTRY$"},{label:"Current Operation",type:f.keyword.type,icon:f.keyword.icon,value:"$OPERATION$"},{label:"Current Record Definition",type:f.keyword.type,icon:f.keyword.icon,value:"$SCHEMA$"},{label:"Current Groups",type:f.keyword.type,icon:f.keyword.icon,value:"$GROUPS$"},{label:"Current Group IDs",type:f.keyword.type,icon:f.keyword.icon,value:"$GROUPIDS$"},{label:"Current Roles",type:f.keyword.type,icon:f.keyword.icon,value:"$ROLES$"},{label:"Current User Locale",type:f.keyword.type,icon:f.keyword.icon,value:"$LOCALE$"},{label:"NULL",type:f.keyword.type,icon:f.keyword.icon,value:"$NULL$"}]};i.children=i.children.sort(g);var j=function(a){var b=_.find(a.recordDefinitions,{name:a.element.recordDefinitionName}),c=_(b.fieldDefinitions).map(function(b){return{label:b.name,type:a.legendType.type,icon:a.legendType.icon,value:["${ruleContext."+b.id+"}","${ruleContext."+b.name+"}"],id:b.id}}).sort(g).value();return{type:a.legendType.type,label:a.element.label,id:a.element.id,children:c}},k=function(){if(e.recordDefinitionNames&&e.recordDefinitionNames[0]){var d={label:c(e.recordDefinitionNames[0])+" Fields",id:e.recordDefinitionNames[0],recordDefinitionName:e.recordDefinitionNames[0].replace(/^\"|\"$/g,"")};return b.getRecordDefinitions(d.recordDefinitionName).then(function(a){return j({recordDefinitions:a,element:d,legendType:f.recordDefinitionField})})}return a.when(!1)};return k().then(function(a){return a&&h.push(a),h.push(i),h})};return{clear:d,getCommonDataDictionary:e,getLegend:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleDesignerConfiguration",["i18n","rxRuleDesignerElementManager","rxUserPreferences","ruleActionTypeNameFilter","ruleServiceNameFilter","RX_RULE_DESIGNER","rxDesignerUserPreferences",function(a,b,c,d,e,f,g){var h=[{group:"Platform Actions",resourceType:f.ruleElementResourceTypes.setField,"default":!0,favorite:!1,timestamp:null},{group:"Platform Actions",resourceType:f.ruleElementResourceTypes.alert,"default":!0,favorite:!1,timestamp:null},{group:"Platform Actions",resourceType:f.ruleElementResourceTypes.startProcessAction,"default":!0,favorite:!1,timestamp:null},{group:"Platform Actions",resourceType:f.ruleElementResourceTypes.cancelProcessAction,"default":!0,favorite:!1,timestamp:null},{group:"Platform Actions",resourceType:f.ruleElementResourceTypes.signalProcessInstanceAction,"default":!0,favorite:!1,timestamp:null},{group:"Qualification",resourceType:f.ruleElementResourceTypes.qualification,"default":!0,favorite:!1,timestamp:null}],i=function(a,b,c){var d=null;d=b.actionTypeName?_.find(a,function(a){return a.actionTypeName==b.actionTypeName}):_.find(a,{resourceType:b.resourceType}),d[c]=b[c]},j=g.getInstance(f.userPreferences.componentId,f.userPreferences.version,{stencilSettings:h});return{updateStencilConfiguration:function(a){return j.getStencilSettings().then(function(b){var c=_.remove(b,{resourceType:f.ruleElementResourceTypes.ruleAction});return _.each(a,function(a){var d=a.actionTypeName,g=_.find(c,{resourceType:f.ruleElementResourceTypes.ruleAction,actionTypeName:d})||{};b.push({group:e(a.serviceName),resourceType:f.ruleElementResourceTypes.ruleAction,actionTypeName:d,"default":!_.isBoolean(g["default"])||g["default"],favorite:!!_.isBoolean(g.favorite)&&g.favorite,timestamp:g.timestamp||null})}),j.setStencilSettings(b),b})},get:function(a,b){var c=this;return j.getStencilSettings().then(function(d){"recent"===a&&(a="timestamp");var e=_.filter(d,function(a){return"getRecordsByQuery"!==a.actionTypeName}),f=_.filter(e,a);return c._buildGroupsAndShapes(f,b)})},addToRecent:function(a){j.getStencilSettings().then(function(b){var c=null;c=a.actionTypeName?_.find(b,function(b){return b.actionTypeName==a.actionTypeName}):a.resourceType?_.find(b,function(b){return b.resourceType==a.resourceType}):_.find(b,function(b){return b.resourceType==a.prop("rxData/resourceType")}),c&&(c.timestamp=_.now());var d=_.filter(b,"timestamp");if(d.length>20){var e=_.min(d,"timestamp");e.timestamp=null}j.setStencilSettings(b)})},removeRecents:function(){j.getStencilSettings().then(function(a){_.forEach(a,function(a){a.timestamp=null}),j.setStencilSettings(a)})},getSettings:function(){return j.getStencilSettings().then(function(b){return _(b).groupBy("group").map(function(b,c){return b=_(b).each(function(b){b.actionTypeName?b.label=d(b.actionTypeName):b.label=a(b.resourceType)}).sortBy("label").value(),{label:c,children:b}}).sortBy("label").value()})},setField:function(a,b){j.getStencilSettings().then(function(c){i(c,a,b),j.setStencilSettings(c)})},setGroup:function(a,b){j.getStencilSettings().then(function(c){_.forEach(a,function(a){i(c,a,b)}),j.setStencilSettings(c)})},_buildGroupsAndShapes:function(a,c){var e={},f={};return _(a).pluck("group").uniq().sortBy().sortBy(function(a){return"Qualification"===a?1:"Platform Actions"===a?2:3}).forEach(function(c,g){e[c]={label:c,index:g},f[c]=_(a).filter({group:c}).sortBy(function(a){return a.actionTypeName?d(a.actionTypeName):null}).map(function(a){var c=null;return a.actionTypeName&&(c=a.actionTypeName),b.getShape(a.resourceType,c)}).value()}).value(),{groups:e,shapes:f}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleDesignerElementManager",["$q","rxId","RX_RULE_DESIGNER","rxRuleDefinitionElement","rxRuleActionElement","rxRuleShowAlertElement","rxRuleSetFieldElement","rxRuleQualificationElement","rxRuleTriggerElement","rxRuleStartProcessElement","rxRuleCancelProcessElement","rxRuleSignalProcessElement","rxRuleLinkElement",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={};return n[c.ruleElementResourceTypes.ruleAction]=e,n[c.ruleElementResourceTypes.alert]=f,n[c.ruleElementResourceTypes.setField]=g,n[c.ruleElementResourceTypes.qualification]=h,n[c.ruleElementResourceTypes.triggerElement]=i,n[c.ruleElementResourceTypes.triggerTimeElement]=i,n[c.ruleElementResourceTypes.startProcessAction]=j,n[c.ruleElementResourceTypes.cancelProcessAction]=k,n[c.ruleElementResourceTypes.signalProcessInstanceAction]=l,n[c.ruleElementResourceTypes.link]=m,{getShape:function(a){var b=n[a];return b.getShape.apply(b,_.drop(arguments))},getRuleModel:function(){return d.getModel()},validateRule:function(b){var c=a.defer(),e=this,f=_.map(b.actions,function(a){return e.validateElement(a,b)});return f.push(i.validate(b.triggerEvent,b)),b.qualification&&f.push(h.validate(b.qualification,b)),f.push(d.validate(b)),a.all(f).then(function(a){c.resolve(_.compact(_.flatten(a)))}),c.promise},validateElement:function(a,b){var c=a.resourceType?n[a.resourceType]:h;if(_.isFunction(c.validate))return c.validate(a,b)},registerValidators:function(a){_.each(n,function(b){_.isFunction(b.registerValidators)&&b.registerValidators(a)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleMovementManager",["rxRuleDesignerElementManager","RX_RULE_DESIGNER",function(a,b){function c(a){return _.filter(a.model.getElements(),function(a){var b=a.get("type");return"basic.Text"!==b&&"rx.RuleModel"!==b})}function d(){return l}function e(a){l=a}function f(a,b){var d=c(b),e=a.get("elementIndex");if(e>2)return!1;var f=_.find(d,function(a){return"rx.RuleQualification"===a.get("type")});return f?2==e:1==e}function g(a,b){return a.get("elementIndex")===c(b).length-1}function h(d,e){var f,g;if("rx.RuleQualification"==d.get("type")&&0!==l.get("elementIndex")){var h=c(e);f=d.get("size");var i=_.find(h,function(a){return 1===a.get("elementIndex")}),j=_.find(e.model.getLinks(),function(a){return a.get("target").id===i.get("id")});j.remove(),g=a.getShape(b.ruleElementResourceTypes.link),g.set("source",{id:d.get("id")}),g.set("target",{id:i.get("id")}),e.model.addCell(g),g=a.getShape(b.ruleElementResourceTypes.link),g.set("source",{id:h[0].get("id")}),g.set("target",{id:d.get("id")}),e.model.addCell(g),d.prop("position",{x:(e.options.width-f.width)/2,y:i.get("position").y}),d.set("elementIndex",1);for(var k=i.get("elementIndex"),n=function(a){return a.get("elementIndex")===k+1};i;){k=i.get("elementIndex");var o=_.find(h,n);i.set("elementIndex",k+1);var p=i.get("position");i.prop("position",{x:p.x,y:p.y+i.get("size").height+m}),i=o}}else d.set("elementIndex",l.get("elementIndex")+1),f=d.get("size"),d.prop("position",{x:(e.options.width-f.width)/2,y:l.get("position").y+l.get("size").height+m}),g=a.getShape(b.ruleElementResourceTypes.link),g.set("source",{id:l.get("id")}),g.set("target",{id:d.get("id")}),e.model.addCell(g),l=d}function i(d,e){var f=d.get("elementIndex"),g=c(e);if(g.length>1)if(f===l.get("elementIndex"))l=_.find(g,function(a){return a.get("elementIndex")===f-1});else{var h=f,i=d.get("position"),j=a.getShape(b.ruleElementResourceTypes.link);j.set("source",{id:_.find(g,function(a){return a.get("elementIndex")===h-1}).get("id")}),j.set("target",{id:_.find(g,function(a){return a.get("elementIndex")===h+1}).get("id")}),e.model.addCell(j);var k=function(a){return a.get("elementIndex")===h+1};do{var m=_.find(g,k);m.set("elementIndex",h),h++;var n=m.get("position");m.set("position",{x:n.x,y:i.y}),i=n}while(h<=l.get("elementIndex"))}else l=g[0]}function j(c,d){var e=c.get("elementIndex"),f=d.model.getElements(),h=_.find(f,function(a){return a.get("elementIndex")===e-1});h.set("elementIndex",e,{silent:!0}),c.set("elementIndex",e-1,{silent:!0});var i=h.get("position");h.set("position",c.get("position")),c.set("position",i),_.find(d.model.getLinks(),function(a){return a.get("target").id===h.get("id")}).remove();var j=a.getShape(b.ruleElementResourceTypes.link);j.set("source",{id:_.find(f,function(a){return a.get("elementIndex")===e-2}).get("id")}),j.set("target",{id:c.get("id")}),d.model.addCell(j),g(h,d)?l=h:(_.find(d.model.getLinks(),function(a){return a.get("source").id===c.get("id")}).remove(),j=a.getShape(b.ruleElementResourceTypes.link),j.set("source",{id:h.get("id")}),j.set("target",{id:_.find(f,function(a){return a.get("elementIndex")===e+1}).get("id")}),d.model.addCell(j));var k=_.find(d.model.getLinks(),function(a){return a.get("source").id===h.get("id")&&a.get("target").id===c.get("id")}),m=k.get("source");return k.set("source",k.get("target")),k.set("target",m),[h.get("id"),c.get("id")]}function k(c,d){var e=c.get("elementIndex"),f=d.model.getElements(),h=_.find(f,function(a){return a.get("elementIndex")===e+1});h.set("elementIndex",e,{silent:!0}),c.set("elementIndex",e+1,{silent:!0});var i=h.get("position");h.set("position",c.get("position")),c.set("position",i),_.find(d.model.getLinks(),function(a){return a.get("target").id===c.get("id")}).remove();var j=a.getShape(b.ruleElementResourceTypes.link);j.set("source",{id:_.find(f,function(a){return a.get("elementIndex")===e-1}).get("id")}),j.set("target",{id:h.get("id")}),d.model.addCell(j),g(c,d)?l=c:(_.find(d.model.getLinks(),function(a){return a.get("source").id===h.get("id")}).remove(),j=a.getShape(b.ruleElementResourceTypes.link),j.set("source",{id:c.get("id")}),j.set("target",{id:_.find(f,function(a){return a.get("elementIndex")===e+2}).get("id")}),d.model.addCell(j));var k=_.find(d.model.getLinks(),function(a){return a.get("source").id===c.get("id")&&a.get("target").id===h.get("id")}),m=k.get("source");return k.set("source",k.get("target")),k.set("target",m),[c.get("id"),h.get("id")]}var l=null,m=60;return{getLastElement:d,isLastElement:g,isFirstActionElement:f,addElement:h,reorderElementsAfterDeletion:i,moveElementUp:j,moveElementDown:k,setLastElement:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleDesignerCache",function(){function a(a){e.ruleDefinitions[a.id]=a}function b(){e={ruleDefinitions:{},actionTypes:[]}}function c(a){e.actionTypes=a}function d(){return e.actionTypes}var e={ruleDefinitions:{},actionTypes:[]};return{setRuleDefinition:a,setActionTypes:c,getActionTypes:d,clear:b}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").factory("rxRuleExpressionValidation",function(){function a(a,c){var d=[],e=_.isString(a)?a.match(b):[];return _.each(e,function(a){var b=a.match(/\d+(?=})/)[0];_.find(c.fieldDefinitions,{id:parseInt(b)})||d.push(b)}),d}var b=/\${ruleContext\.\d+}/g;return{validateExpression:a}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.search").provider("rxSearchResultsState",function(){function a(a){return rx.assert.assertStringWithLength(a),b=a}var b=null;return{searchResultsState:a,$get:function(){return{get:function(){return b}}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").provider("rxAuthentication",function(){function a(a,b){return arguments.length&&(rx.assert.assertStringWithLength(a,"Invalid login state name."),c={name:a,params:b}),c}function b(a,b){return arguments.length&&(_.isString(a)?d={name:a,params:b}:_.isFunction(a)?d=a:_.isObject(a)&&_.isString(a.name)?d=a:rx.assert.fail("Invalid appState.")),d}var c=null,d=null;return{loginState:a,appState:b,$get:["$state","$rootScope","$q","rxAuthUserResource","rxUserResource","rxSession","RX_AUTH_EVENTS","RX_APP_STATES","rxNavigationGuard",function(e,f,g,h,i,j,k,l,m){function n(a){return h.login(a)}function o(){return h.logout().then(function(a){return f.$broadcast(k.logoutSuccess),a})["catch"](function(a){return f.$broadcast(k.logoutFailed),g.reject(a)})["finally"](function(){j.destroy(),u()})}function p(){var a=g.defer();return j.isAlive()?a.resolve():i.getCurrentUser().then(function(b){j.create(b.plain());var c=b.userOverlayGroupDescriptors;w(c)&&j.setCurrentOverlayContext(c[0],b.defaultOverlayGroupId),a.resolve()}),a.promise}function q(){v&&v.name!==l.home?(r(v),v=d):t()}function r(a){var b;b=_.isFunction(a)?a():_.cloneDeep(a),_.isString(b)&&(b={name:b}),e.go(b.name,b.params)}function s(){m.clearGuardians(),r(c)}function t(){d?r(d):j.isAlive()&&r(l.home)}function u(){v=d,s()}if(!c||!c.name)throw new Error("rxAuthentication service has not been configured properly.");var v={name:l.home};d&&(v=d);var w=function(a){return a&&_.isArray(a)&&a[0].userOverlayGroupDescriptorChildren&&a[0].userOverlayGroupDescriptorChildren.length>=1};return f.$on("$stateChangeStart",function(a,b,d){b&&b.name!==c.name&&(v={name:b.name,params:d})}),f.$on(k.notAuthenticated,function(){j.destroy(),s()}),f.$on(k.loginSuccess,q),{login:n,logout:o,initSession:p,loginState:a,appState:b,redirectToAppState:t}}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").factory("rxAuthorization",["$state","rxCurrentUser","RX_USER_GROUPS",function(a,b,c){function d(a){var c=b.get();return _.contains(c.groups,a)||_.contains(c.computedGroups,a)}function e(b){var e=a.get(b.name||b);if(!e)return!1;var f,g=e.access;return f=!(g&&!d(c.administrator))||_.some(g.permittedGroups||[],function(a){return d(a)})}return{isUserInGroup:d,isStateAuthorized:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").factory("rxSessionExpirationInterceptor",["RX_SESSION","rxSession","RX_RESOURCE_URLS",function(a,b,c){function d(d){if(0===d.config.url.indexOf(c.apiPrefix)){var e={idle:d.headers(a.expirationHeaders.idle),absolute:d.headers(a.expirationHeaders.absolute)};b.setSessionTimeouts(e)}return d}return{response:d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").factory("rxSessionExpirationService",["$uibModal","$rootScope","RX_AUTH_EVENTS","RX_SESSION","$timeout","rxSession","$window","rxCommandResource",function(a,b,c,d,e,f,g,h){function i(){r=h.withType(d.keepAliveCommand),angular.element(g).on(d.userInteractionEvents,v)}function j(a,b){var c=k(a,b);c&&(s[a].timeout=e(t[a],c))}function k(a,b){return s[a].warnAfter=u(b).subtract(d.minutesBeforeLogout,"minutes").diff(),n(a),s[a].warnAfter>0?s[a].warnAfter:null}function l(){f.isAlive()&&o({mode:d.expirationModes.absolute}),s.absolute.warnAfter=null,n("absolute")}function m(){f.isAlive()&&!s.lastUserInteraction?o({mode:d.expirationModes.idle}):p(),s.idle.warnAfter=null,n("idle")}function n(a){s[a]&&s[a].timeout&&(e.cancel(s[a].timeout),s[a].timeout=null)}function o(b){return b=b||{},a.open({templateUrl:"scripts/security/session-expiration-modal.view.html",controller:"SessionExpirationModalController",windowClass:"rx-session-expiration-dialog",backdrop:"static",resolve:{options:b}})}function p(){return r.execute({}).then(function(a){return s.lastUserInteraction=null,a})}function q(){s.lastUserInteraction=Date.now()}var r,s={idle:{},absolute:{}},t={idle:m,absolute:l},u=g.moment,v=_.throttle(q,d.userInteractionThrottleTimeMs);return i(),{keepSessionAlive:p,updateTimeoutHandler:j}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").factory("rxSession",["$window","$rootScope","$injector","rxCurrentUser",function(a,b,c,d){function e(a){d.set(a)}function f(){n=null,d.set(null)}function g(){return null!==d.get()}function h(){return p.absoluteTimeout}function i(){return p.idleTimeout}function j(b){m||(m=c.get("rxSessionExpirationService")),_.forEach(b,function(b,c){if(b){var d=a.moment(new Date(b)),e=g()&&d.isValid()&&d.isAfter(a.moment()),f=d.toDate();e&&"idle"===c&&!d.isSame(p.idleTimeout)?(p.idleTimeout=f,m.updateTimeoutHandler("idle",f)):e&&"absolute"===c&&!d.isSame(p.absoluteTimeout)&&(p.absoluteTimeout=f,m.updateTimeoutHandler("absolute",f))}})}function k(a,b){var c={},d=function(a,b){var c=!1;return o={},a.overlayGroupId===b?(o=a,void(c=!0)):void(_.isArray(a.userOverlayGroupDescriptorChildren)&&_.forEach(a.userOverlayGroupDescriptorChildren,function(a){c||d(a,b)}))};if(a){var e=a;b&&(d(a,b),e=o),c.overlayGroupName=e.overlayGroupName,c.overlayGroupId=e.overlayGroupId,c.tenantId=e.tenantId,c.tenantName=e.tenantName,n=c}}function l(){return n}var m,n=null,o={},p={absoluteTimeout:null,idleTimeout:null};return{create:e,destroy:f,isAlive:g,getAbsoluteSessionTimeout:h,getIdleSessionTimeout:i,setSessionTimeouts:_.throttle(j,1e3),setCurrentOverlayContext:k,getCurrentOverlayContext:l}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user-preferences").factory("rxUserPreferencesServer",["$q","rxCurrentUser","rxUtils","RX_USER_PREFERENCES","rxSettingsResource",function(a,b,c,d,e){function f(){return n||(n=e.getGridComponentData(d.settingName,p).then(function(a){n=a.plain().rows})),a.when(n)}function g(a,c){c[d.fields.loginName]=b.getName(),c[d.fields.componentId]=a;var f=j(c);return e.createComponentSettingData(d.settingName,f,p).then(function(a){var b=a.data.split("/");return c[d.fields.ownerKeyValue]=b[b.length-1],n.push(c),c})}function h(a,b){var c=k(a)[d.fields.ownerKeyValue];return i(c).then(function(a){var f=j(b,a,c);return e.updateComponentSettingData(d.settingName+"/"+c,f,p)})}function i(b){return o[b]||(o[b]=e.getComponentSettingData(d.settingName+"/"+b,p).then(function(a){return o[b]=_.reduce(a.values,function(a,b){return a[b[d.fields.settingName]]=b[d.fields.settingId],a},{}),o[b]})),a.when(o[b])}function j(a,b,c){return _.map(a,function(a,e){_.isUndefined(a)&&(a=""),_.isObject(a)&&(a=JSON.stringify(a));var f={componentName:d.settingName,settingName:e,settingValue:a,assigneeGroupPermission:""};return c&&(f[d.fields.ownerKeyValue]=c),b&&(f[d.fields.settingId]=b[e]),f})}function k(a){return _.find(n,function(c){return c[d.fields.componentId]===a&&c[d.fields.loginName]===b.getName()})}function l(a,b){return e.setContext(!1),f().then(function(){var c=k(a);return b=_.cloneDeep(b),c?_.isFunction(c.then)?void c.then(function(){return h(a,b)}):h(a,b):g(a,b)})}function m(a){return e.setContext(!1),f().then(function(){var b=k(a);return b&&_.isString(b[d.fields.preferences])&&(b[d.fields.preferences]=c.tryParseJson(b[d.fields.preferences])),_.get(b,d.fields.preferences)})}var n,o={},p={"default-bundle-scope":void 0};return{setUiComponentPreferences:l,getUiComponentPreferences:m}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user-preferences").factory("rxUserPreferences",["rxCurrentUser","rxLocalStorage",function(a,b){function c(){return"rx-user-preferences:"+(a.get().emailAddress||a.getName())}return{set:function(a,d){rx.assert.assertStringWithLength(a);var e=c(),f=b.get(e)||{};f[a]=d,b.set(e,f)},get:function(a){rx.assert.assertStringWithLength(a);var d=b.get(c())||{};return d[a]}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user").factory("rxOverlayRequestsInterceptor",["rxSession",function(a){var b={request:function(b){var c=a.getCurrentOverlayContext();return c&&c.overlayGroupId&&(b.headers["request-overlay-group"]=c.overlayGroupId),b}};return b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxBrowserLanguage",["$window",function(a){return function(){var b,c;return b=a.navigator.userAgent&&(c=a.navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))?c[1]+"-"+c[2]:a.navigator.languages&&a.navigator.languages.length?a.navigator.languages[0]:a.navigator.userLanguage||a.navigator.language,b&&b.toLowerCase().match(/^([a-z]*)/)[1]}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxCurrentUser",function(){function a(a){d=a}function b(){return d}function c(){return d&&d.loginName}var d=null;return{set:a,get:b,getName:c}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxDateUtils",function(){function a(a){return _.includes(_.values(i),a)}function b(a){return a.toISOString().substr(0,10)}function c(a){var b=moment(a);return b.hours()+":"+b.minutes()+":"+b.seconds()}function d(a){return a.toISOString()}function e(a,e){var f=null;switch(e){case i.dateOnly:f=b(a);break;case i.timeOnly:f=c(a);break;case i.dateTime:f=d(a)}return f}function f(a){return moment().startOf("day").add(moment.duration(a))}function g(a){return new Date(a)}function h(a,b){var c=null;switch(b){case i.dateOnly:c=g(a);break;case i.timeOnly:c=f(a);break;case i.dateTime:c=g(a)}return c}var i={dateOnly:"com.bmc.arsys.rx.standardlib.record.DateOnlyFieldDefinition",timeOnly:"com.bmc.arsys.rx.standardlib.record.TimeOnlyFieldDefinition",dateTime:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition"};return{isDateLike:a,toIsoDateString:b,toTimeString:c,toIsoDateTimeString:d,toIsoString:e,fromTimeString:f,fromIsoDateTimeString:g,fromIsoString:h}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxGUID",function(){return{generate:function(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return a&&(b=a+b),b}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxHttpLogInterceptor",["$q","rxUtils","rxLog",function(a,b,c){function d(a){var b=a.paramSerializer(a.params);return _.startsWith(a.url,"/")?location.origin+a.url+(b?"?"+b:""):a.url}return{request:function(a){return c.debug(a.method+" "+d(a)),a},response:function(a){var e=a.headers()["x-ar-messages"];if(e){var f=b.tryParseJson(e,[]);_.each(f,function(a){_.has(a,"messageText")&&c.log(a.messageText)})}return c.debug(a.config.method+" "+d(a.config)+" "+a.status+" ("+a.statusText+")"),a},responseError:function(b){return c.warning(b.config.method+" "+d(b.config)+" "+b.status+" ("+b.statusText+")"),a.reject(b)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").service("rxId",["rxGUID",function(a){function b(a){return a?a.slice(0,e.length)==e?a:e+a:a}function c(a){return a.slice(e.length)}function d(){return a.generate(e)}var e="rx-";return{get:b,getBase:c,generate:d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxLocalStorage",function(){return{set:function(a,b){rx.assert.assertStringWithLength(a),localStorage.setItem(a,JSON.stringify(b))},get:function(a){rx.assert.assertStringWithLength(a);var b=localStorage.getItem(a);return b?JSON.parse(b):null}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxLog",["$interpolate","$log","rxCurrentUser",function(a,b,c){function d(a){return b.log(a)}function e(a){return b.debug(i(a,"D"))}function f(a){return b.info(i(a,"I"))}function g(a){return b.warn(i(a,"W"))}function h(a){return b.error(i(a,"E"))}function i(b,d){var e={},f=c.get(),g="<CLI{{type}}> <TID: 0000000000> <RPC ID: 0000000000> <Queue:           > <USER: {{loginName}}                                         > <Tenant-ID:                                             > <Overlay-Group: {{overlayGroupId}}         > /* {{time}} */ {{message}}";return e.time=moment().format("ddd MMM DD YYYY HH:mm:ss.SSSS"),e.message=b,e.type=d,f&&(e.loginName=f.loginName,e.overlayGroupId=f.defaultOverlayGroupId),a(g)(e)}return{log:d,debug:e,info:f,warning:g,error:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxNotificationMessage",["growl","rxLog",function(a,b){var c={ttl:3e3},d={ttl:3e3},e={ttl:6e3},f={ttl:6e3};return{success:function(d,e){e=e||{},a.addSuccessMessage(d,_.defaults(e,c)),b.debug(d)},info:function(c,e){e=e||{},a.addInfoMessage(c,_.defaults(e,d)),b.info(c)},warning:function(c,d){d=d||{},a.addWarnMessage(c,_.defaults(d,e)),b.warning(c)},error:function(c,d){d=d||{},a.addErrorMessage(c,_.defaults(d,f)),d.suppressLog!==!0&&b.warning(c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxString",["rxUtils",function(a){function b(a){return _.isString(a)&&a.length?a.charAt(0).toUpperCase()+a.replace(/([A-Z]+)/g," $1").trim().slice(1).replace(/(\s+)/g," "):a}function c(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return _.isString(a)&&_.isString(b)&&c===d}function d(a){return _.isEmpty(_.trim(a))}function e(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&c.length>1;)d+=c.shift()+e.shift();return d+c.join("%s")}function f(c,d){if(rx.assert.assertStringWithLength(d),rx.assert.assertOptionalString(c),a.isNonEmptyString(c)){var e=c.split(d);c=b(_.last(e))}return c}return{prettify:b,caseInsensitiveEqual:c,isEmptySafe:d,format:e,extractAndPrettifyName:f}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").factory("rxUtils",function(){function a(a){function b(a){return Object.keys(a).map(function(b){return[b,a[b]]})}function c(a){return b(a).reduce(function(a,d){var e=d[0],f=d[1];return _.isObject(f)?b(c(f)).forEach(function(b){var c=b[0],d=b[1];a[e+"."+c]=d}):a[e]=f,a},{})}return c(a)}function b(a){var b={};return _.forOwn(a,function(a,c){c.indexOf(".")===-1?b[c]=a:_.merge(b,c.split(".").reduceRight(function(a,b){var c={};return c[b]=a,c},a))}),b}function c(a){return Boolean(_.isString(a)&&a.length)}function d(a){return Boolean(_.isArray(a)&&a.length)}function e(a){var b,c=[a],d=0,e=["children"];for(arguments.length>1&&(e=_.rest(arguments));d<c.length;)b=c[d++],b&&_.each(e,function(a){_.size(b[a])>0&&(c=c.concat(b[a]))});return c}function f(a){return _.isNull(a)||_.isUndefined(a)}function g(a,b){try{return JSON.parse(a)}catch(c){
return b}}return{isNonEmptyString:c,isNonEmptyArray:d,flattenTree:e,serializeObject:a,deserializeObject:b,isNullOrUndefined:f,tryParseJson:g}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").factory("rxViewComponentActionManager",["$q",function(a){function b(b){return _.reduce(b,function(b,c){return b.then(function(){var b=c.execute();switch(!0){case _.isUndefined(b):b=a.when();break;case!b.then:b=Boolean(b)?a.when():a.reject()}return b})},a.when())}return{executeActions:b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").factory("rxViewComponentEventManager",["RX_VIEW_COMPONENT",function(a){function b(a){rx.assert.assertFunction(a.isolateScope),this.$scope=a.isolateScope(),rx.assert.assertObject(this.$scope.rxConfiguration)}function c(a){return new b(a)}return b.prototype={canCallAction:function(){return _.isObject(this.$scope.rxConfiguration.on)&&(_.isObject(this.$scope.rxConfiguration.on.action)||_.isFunction(this.$scope.rxConfiguration.on.action))},canCallPropertyChanged:function(){return _.isObject(this.$scope.rxConfiguration.on)&&_.isFunction(this.$scope.rxConfiguration.on.propertyChanged)},action:function(b,c){rx.assert.assertStringWithLength(b);var d={componentDefinitionId:this.$scope.rxConfiguration.id,actionName:b,data:c||{}};this.canCallAction()&&(_.isFunction(this.$scope.rxConfiguration.on.action)?this.$scope.rxConfiguration.on.action(d):_.isFunction(this.$scope.rxConfiguration.on.action[b])&&this.$scope.rxConfiguration.on.action[b](d)),this.$scope.$emit(a.events.action,d)},propertyChanged:function(b){rx.assert.assertObject(b),rx.assert.assertStringWithLength(b.property),b.componentDefinitionId=this.$scope.rxConfiguration.id,this.canCallPropertyChanged()&&this.$scope.rxConfiguration.on.propertyChanged(b),this.$scope.$emit(a.events.propertyChanged,b)}},{getInstance:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").factory("rxViewComponentExpressionConfigurator",["$q","RX_EXPRESSION_EDITOR","rxDefaultExpressionConfigurator",function(a,b,c){return c.extend({initialize:function(a){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments);var c=_.cloneDeep(b.operators.all),d=_(c).flatten().find({contentValue:"$NULL$"});d.contentValue="NULL";var e={operators:c};this.setDefaultDictionaryConfig(e)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").factory("rxViewComponentManager",["rxGUID","rxString","rxViewComponentModel",function(a,b,c){return{getModel:function(a,b){return new c(this.getRxConfig(a,b))},getRxConfig:function(b,c){return{id:b.id||a.generate(),type:b.type,rxData:this.getRxData(b,c),rxInspector:this.getRxInspector(!1,b,c)}},getRxData:function(a,b){return _.reduce(b.propertiesByName,function(b,c){return c.isConfig&&(b[c.name]=a.propertiesByName[c.name]||c.defaultValue||null),b},{})},getRxInspector:function(a,c,d){var e=function(b){var c=a?{input:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},f=e(),g={};return _.forEach(d.propertiesByName,function(a,c){a.isConfig&&(g[a.name]={label:b.prettify(a.name),type:"rx-inspector-expression-node-field",group:"properties",index:c,localizable:!!a.localizable,attrs:a.isRequired===!0?e({label:{"class":"required"}}):f})}),{readonly:!1,inputs:{rxData:g},groups:{properties:{label:"General",index:1}}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").factory("rxViewComponentModel",["$q","rxString","rxViewComponent","RX_EXPRESSION_EDITOR","rxViewComponentExpressionConfigurator","RX_VIEW_DEFINITION",function(a,b,c,d,e,f){return Backbone.Model.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this._expressionConfigurator=new e(this)},getExpressionConfigurator:function(){return this._expressionConfigurator},isLink:function(){return!1},prop:joint.dia.Cell.prototype.prop,persist:function(a){var b=a.componentDefinitions,c=_.find(b,{id:this.get("id")}),d=this.describeViewComponent(),e=f.events.childUpdate,g=this.get("parentModel");c?_.assign(c.propertiesByName,d.propertiesByName):(b.push(d),e=f.events.childAdd),g&&g.trigger(e,d)},describeViewComponent:function(){return{resourceType:f.resourceTypes.viewComponent,id:this.get("id"),type:this.get("type"),propertiesByName:this.get("rxData")}},validate:function(){var d=[],e=this.get("rxData"),f=this.get("id"),g=this.get("type"),h=c.findDescriptor(g);return _.each(h.propertiesByName,function(a){a.isRequired&&_.isEmpty(_.trim(e[a.name]))&&d.push({elementId:f,elementName:h.name,propertyName:a.name,componentProperty:!0,type:"error",message:b.prettify(a.name)+" cannot be blank."})}),a.when(d)},remove:function(){var a=this.get("parentModel");a&&a.trigger(f.events.childRemove,this.get("id")),this.collection.remove(this.cid)},updateInspectorConfig:function(){return a.when({})}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").provider("rxViewComponent",function(){function a(a){a.runTimeDirective&&(a.type=a.type||a.runTimeDirective,console.warn(a.type+': "runTimeDirective" option has been deprecated, use "type" instead.')),a.designTimeDirective&&(a.designType=a.designType||a.designTimeDirective,console.warn(a.designType+': "designTimeDirective" option has been deprecated, use "designType" instead.')),rx.assert.assertStringWithLength(a.name),rx.assert.assertStringWithLength(a.type),_.isString(a.bundleId)&&a.bundleId.length||console.warn(a.designType+': "bundleId" must be specified. Otherwise, this view component will not be available in View Designer.'),a.designType=a.designType||c;var f=_.find(b,{type:a.type});rx.assert.assertNullOrUndefined(f,'The component of type "'+a.type+'" has already been registered!'),a.icon=a.icon||e,a.group=a.group||d,b.push(a)}var b=[],c="rx-view-component-placeholder",d="Other Components",e="wall";return{registerComponent:function(b){_.isArray(b)?_.forEach(b,a):a(b)},$get:["rxGlobalCache",function(a){function c(){return b}function d(){return a.getBundleDescriptors().then(function(a){return _.filter(b,function(b){return _.find(a,{id:b.bundleId})})})}function e(){return _.pluck(b,"type")}function f(a){return _.find(b,{type:a})||{}}return{getRegisteredComponents:c,getRegisteredComponentTypes:e,findDescriptor:f,getLicencedComponents:d}}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").factory("rxActionButtonDesignManager",["$q","rxActionButton","rxGUID","rxAction","RX_ACTION_BUTTON",function(a,b,c,d,e){function f(a){return{id:a.id||c.generate(),type:a.type,rxData:g(a),rxInspector:h()}}function g(a){var b={},c=void 0===a.componentDefinitions;return c&&(a.componentDefinitions=[]),_.forEach(a.propertiesByName,function(a,c){b[c]=a}),b.label=b.label||(a.lastUpdateTime?"":"New Button"),b.style=b.style||(_.first(e.styles)||{}).value,b.disabled=b.disabled||"0",b.hidden=b.hidden||"0",b.actions=_.map(d.deserializeActions(a.componentDefinitions),function(b,c){return b.id=a.componentDefinitions[c].id,b}),b}function h(){return{inputs:{rxData:{label:{label:"Button Label",type:"text",group:"general",index:1,localizable:!0},style:{label:"Button Style",type:"select",group:"general",index:2,options:_.map(e.styles,function(a,b){return{value:a.value,content:a.name}}),attrs:{label:{"class":"required"}}},icon:{label:"Button Icon",type:"select",group:"general",index:3,localizable:!0,options:_(e.icons).map(function(a,b){return{value:a.name,content:a.label}}).unshift({}).value()},disabled:{label:"Disabled",type:"rx-inspector-optional-expression",group:"general",index:5},hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"general",index:6},actions:{type:"rx-action-list",group:"actions",index:5}}},groups:{general:{label:"General",index:1},actions:{label:"Actions",index:2}}}}return{getModel:function(a){return new b(f(a))}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").factory("rxActionButton",["$q","rxGUID","rxExpressionEngine","rxAction","rxString","rxUtils","rxViewComponentModel","rxActionDesignManager","RX_VIEW_DEFINITION",function(a,b,c,d,e,f,g,h,i){return g.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.requiredProperties=[]},persist:function(a){var b=this.getComponentDefinition(),c=_.find(a.componentDefinitions,{id:this.get("id")});c?(c.propertiesByName=b.propertiesByName,c.componentDefinitions=d.serializeActions(b.componentDefinitions)):a.componentDefinitions.push(b)},getActionsAsComponentDefinitions:function(){var a=_.cloneDeep(this.prop("rxData/actions"));return a.map(function(a){var b=a.id;return delete a.id,{resourceType:i.resourceTypes.viewComponent,id:b,type:"rx-action",propertiesByName:a}})},getComponentDefinition:function(){var a=_.omit(this.get("rxData"),["actions"]);return{resourceType:i.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:null,propertiesByName:a,componentDefinitions:this.getActionsAsComponentDefinitions()}},validate:function(b){var d=[],g=this.get("rxData"),i=this.get("id"),j=this.prop("rxData/label")||"Action Button";_.each(this.requiredProperties,function(a){_.isEmpty(_.trim(g[a.name]))&&d.push({elementId:i,elementName:j,componentProperty:!0,propertyName:a.name,type:"error",message:(a.label||e.prettify(a.name))+" cannot be blank."})}),c.isValid(g.disabled)||d.push({elementId:i,elementName:j,componentProperty:!0,propertyName:"disabled",type:"error",message:"Disabled must be a valid expression."}),c.isValid(g.hidden)||d.push({elementId:i,elementName:j,componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."});var k=_.find(f.flattenTree(b,"componentDefinitions"),{id:this.prop("id")});_.each(h.validateActionSequence(k.componentDefinitions),function(a){d.push({elementId:i,elementName:j,componentProperty:!0,propertyName:"actions",type:a.type,message:a.message})});var l=_.map(k.componentDefinitions,function(a){return h.validate(a)});return a.all(l).then(function(a){return _.each(a,function(a){_.each(a,function(a){d.push({elementId:i,elementName:j,componentProperty:!0,propertyName:"actions",type:a.type,message:a.message})})}),d})},getBreadcrumbName:function(){var a=this.get("rxData");return a.label||""},buildChildDataDictionary:function(b){var c=_.cloneDeep(this.getExpressionConfigurator().commonDataDictionary);if(b&&b.get("index")>0){var d={label:"Actions",children:[]},e=_.cloneDeep(this.prop("rxData/actions"));e=e.splice(0,b.get("index"));var f=_.map(e,function(a){return h.getActionDataDictionary(a)});return a.all(f).then(function(a){return _.each(a,function(a){a.children.length&&d.children.push(a)}),d.children.length&&c.push(d),c})}return a.when(c)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").factory("rxActionDesignManager",["$q","rxAction","rxUtils","rxString","$injector",function(a,b,c,d,e){return{getActionDataDictionary:function(c){var f=b.findDescriptor(c.name);rx.assert.assertObject(f);var g={label:f.label,children:[]},h=e.get(c.name);return _.isFunction(h.getOutputParams)?h.getOutputParams(c).then(function(b){return _.each(b,function(a){g.children.push({label:d.prettify(a.name),value:"${view.components."+c.id+".output."+a.name+"}"})}),a.when(g)}):a.when(g)},validate:function(c){var e=b.findDescriptor(c.propertiesByName.name),f=_(e.parameters).filter("isRequired").map(function(a){if(d.isEmptySafe(c.propertiesByName[a.name]))return{propertyName:a.name,type:"error",message:e.label+": "+a.label+" cannot be blank."}}).compact().value();return a.when(f)},validateActionSequence:function(a){var d=[],e=_.map(a,"id");return _.each(a,function(a,f){_.each(a.propertiesByName,function(g,h){if(c.isNonEmptyString(g)){var i=g.match(/\${view\.components\.([0-9a-z-]+)\..+}/);if(i&&i[1]){var j=e.indexOf(i[1]);if(j!==-1&&j>f){var k=b.findDescriptor(a.propertiesByName.name);d.push({type:"error",message:k.label+": invalid expression for "+h})}}}})}),d}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action").factory("rxActionExpressionConfigurator",["rxDefaultExpressionConfigurator","rxActionPropertyNavigator",function(a,b){return a.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.setDefaultDictionaryConfig({updateDataDictionary:function(a){return this._model.getActionDataDictionary(a)}})},setCurrentExpressionField:function(a){this._currentExpressionField=a,this._availableExpressionFields=b.getExpressionFields(this._model.id)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action").factory("rxActionManager",["rxAction",function(a){function b(b,c){var d=a.findDescriptor(c.propertiesByName.name),e=_.find(d.parameters,{name:b.split(".")[0]});return!!e&&e.enableExpressionEvaluation}return{isExpressionEvaluationEnabled:b}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action").factory("rxActionPropertyNavigator",function(){function a(a){d[a.id]=a.expressionFields}function b(a){return d[a]}function c(){d={}}var d={};return{getExpressionFields:b,addExpressionFields:a,clear:c}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container").factory("rxContainerDesignManager",["rxGUID","rxViewComponent","rxContainerModel","RX_VIEW_DEFINITION",function(a,b,c,d){function e(){return JSON.stringify({componentDefinitionId:a.generate(),columns:[{children:[]}]})}return{getModel:function(a){return new c(this.getRxConfig(a))},getRxConfig:function(b){return{id:b.id||a.generate(),type:b.type,rxData:this.getRxData(b),rxInspector:this.getRxInspector(),layout:b.layout||e(),componentDefinitions:b.componentDefinitions||[],allowedTypes:b.allowedTypes||null}},getRxData:function(a){var b=_.attempt(JSON.parse.bind(null,a.propertiesByName.autoFill));return{columnCount:a.propertiesByName.columnCount||d.columnCountOptions[0].value,autoFill:!_.isError(b)&&b,hidden:a.propertiesByName.hidden||"0",styles:(a.propertiesByName.styles||"").replace(/^"(.*)"$/,"$1")}},getRxInspector:function(){return{inputs:{rxData:{columnCount:{label:"Number of Columns",type:"select",group:"general",index:1,options:d.columnCountOptions,attrs:{label:{"class":"required"}}},columnSpan:{label:"Column Span",type:"rx-inspector-column-span",group:"general",index:2},hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"general",index:3},styles:{label:"Styles",options:d.styles,placeholderText:"Add style",type:"rx-inspector-tag-input",tooltip:"Defines the margins or borders for a container view component.",live:!1,group:"general",index:4},autoFill:{label:"Auto Fill",type:"rx-inspector-toggle-field",group:"layout",index:1}}},groups:{general:{label:"General",index:1},layout:{label:"Layout",index:2}}}},initContainerLayoutProperties:function(a){a.columns=a.columns||[{children:[]}]},getDefaultLayoutJSONString:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container").factory("rxContainerModel",["rxGUID","rxViewComponentModel","rxExpressionEngine","$q","RX_VIEW_DEFINITION",function(a,b,c,d,e){function f(a){var b=a.columns.length,c=Math.floor(g/b);_.each(a.columns,function(a){a.span=c}),_.last(a.columns).span=g%b+c}var g=12;return b.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,e.events.childAdd,this._onChildAdd),this.listenTo(this,e.events.childRemove,this._onChildRemove),this.listenTo(this,e.events.childUpdate,this._onChildUpdate)},describeViewComponent:function(){return{resourceType:e.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:this.get("layout"),componentDefinitions:this.get("componentDefinitions"),propertiesByName:_.omit(this.get("rxData"),"columnSpan")}},_onChildAdd:function(a){this.get("componentDefinitions").push(a)},_onChildRemove:function(a){var b=this.get("componentDefinitions");_.pull(b,_.find(b,{id:a}))},_onChildUpdate:function(a){var b=_.find(this.get("componentDefinitions"),{id:a.id});b&&_.assign(b.propertiesByName,a.propertiesByName)},_onChangeRxData:function(a,b,c){if(c&&"rxData/columnCount"===c.propertyPath||c.commandManager&&a._previousAttributes.rxData.columnCount!==a.get("rxData").columnCount){var d=+b.columnCount-a._previousAttributes.rxData.columnCount,e=a.layoutTree;d>0?_.times(d,function(){e.columns.push({children:[]})}):e.columns.splice(d,Math.abs(d)),f(e),this.trigger("layout:columnSpan")}},validate:function(){var a=[];return c.isValid(this.prop("rxData/hidden"))||a.push({elementId:this.get("id"),elementName:"Container",componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),d.when(a)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxCharacterFieldDefinitionDesignManager",["rxGUID","rxRecordFieldDefinitionDesignManager","rxRecordFieldDefinitionModel","rxCharacterFieldModel",function(a,b,c,d){return _.assign({},b,{getModel:function(a){var b=new d(this.getRxConfig(a));return b.on("change",function(){var a=b.fieldDefinition&&b.fieldDefinition.namedListDefinition;b.prop("rxData/showMultiSelection",Boolean(a),{silent:!0})}),b},getRxData:function(a){var c=b.getRxData(a);return _.isString(c.enableMultiSelection)&&(c.enableMultiSelection="true"===c.enableMultiSelection),c},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:!1,inputs:{rxData:{fieldId:{label:"Field Name",type:"rx-inspector-select-with-validation-messages",group:"general",index:1,attrs:b({label:{"class":"required"}})},label:{label:"Display Label",type:"text",group:"general",index:2},disabled:{label:"Disabled",type:"rx-inspector-optional-expression",group:"general",index:3,attrs:c},hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"general",index:4,attrs:c},enableMultiSelection:{label:"Enable Multi-Selection",type:"rx-inspector-toggle-field",group:"general",index:5,attrs:c,when:{eq:{"rxData/showMultiSelection":!0}}}}},groups:{general:{label:"General",index:1}}}}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxCharacterFieldModel",["rxRecordFieldDefinitionModel",function(a){return a.extend({describeViewComponent:function(){var a=this.constructor.__super__.describeViewComponent.call(this);return a.propertiesByName.enableMultiSelection=this.get("rxData").enableMultiSelection||!1,a}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxSelectGroupFieldDefinitionDesignManager",["$q","rxGUID","rxSelectGroupFieldModel","RX_DEFINITION_PICKER",function(a,b,c,d){return{getModel:function(a){return new c(this.getRxConfig(a))},getRxConfig:function(a){return{id:a.id||b.generate(),type:a.type,rxData:this.getRxData(a),rxInspector:this.getRxInspector()}},getRxData:function(a){var b=_.assign({},a.propertiesByName);return b.fieldList&&(b.fieldList=JSON.parse(b.fieldList)),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:!1,inputs:{rxData:{disabled:{label:"Disabled",type:"rx-inspector-optional-expression",group:"properties",index:1,attrs:c},hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"properties",index:2,attrs:c},fieldList:{type:"list",group:"fieldSet",index:1,item:{type:"object",properties:{displayLabel:{type:"rx-inspector-text",label:"Display Label",tooltip:"Label of the drop-drop list displayed.",attrs:b({label:{"class":"required"}})},namedList:{label:"Named List for Options",type:"rx-inspector-definition-picker",tooltip:"Displays the Named list created from the Named list designer for the record.",definitionType:d.definitionTypes.namedList.type,attrs:b({label:{"class":"required"}})},fieldId:{type:"rx-inspector-select",label:"Record Field for Storing Value",tooltip:"Field of the record definition for which you want to store the value for the selections.",attrs:b({label:{"class":"required"}})}}}}}},groups:{properties:{label:"Properties",index:1},fieldSet:{label:"Field Set",index:2}}}},getFieldInstance:function(a){return a.recordInstance.fieldInstances[a.fieldId]}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxSelectGroupFieldModel",["$q","definitionNameFilter","rxRecordEditorCache","rxExpressionEngine","rxRecordFieldDefinitionModel","RX_RECORD_DEFINITION",function(a,b,c,d,e,f){var g=6;return e.extend({describeViewComponent:function(){var a=this.constructor.__super__.describeViewComponent.call(this);return a.propertiesByName.fieldList=this.getFieldListJSONString(),a.propertiesByName.label=this.getFieldListLabelsJSONString(),delete a.propertiesByName.fieldId,a},updateInspectorConfig:function(){var b=this.get("rxInspector").inputs.rxData.fieldList.item.properties;return a.all([this.getFieldNameOptions(),this.getNamedListOptions()]).then(function(a){b.fieldId.options=a[0],b.namedList.options=a[1]})},getNamedListOptions:function(){return c.getNamedListDefinitionNameDataPage().then(function(a){return _(a).map(function(a){return{value:a,content:b(a)}}).unshift(f.EMPTY_LIST_OPTION).value()})},getFieldListJSONString:function(){var a=this.get("rxData").fieldList;return _.each(a,function(a){a&&a.fieldId&&(a.fieldId=Number(a.fieldId))}),JSON.stringify(a)},getFieldListLabelsJSONString:function(){var a=this.get("rxData").fieldList;return JSON.stringify(_.pluck(a,"displayLabel"))},validate:function(){var b=[],c=this.get("rxData").fieldList||[],e=this.get("id"),f="Select Group",h=[];return d.isValid(this.prop("rxData/disabled"))||b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"disabled",type:"error",message:"Disabled must be a valid expression."}),d.isValid(this.prop("rxData/hidden"))||b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),c.length?(_.each(c,function(a,c){_.isEmpty(_.trim(a.displayLabel))?b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"fieldList/"+c+"/displayLabel",type:"error",message:"Display Label cannot be blank."}):h.push(a.displayLabel),_.isEmpty(_.trim(a.namedList))&&b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"fieldList/"+c+"/namedList",type:"error",message:"Named List cannot be blank."}),_.isEmpty(_.trim(a.fieldId))&&b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"fieldList/"+c+"/fieldId",type:"error",message:"Field Name cannot be blank."})}),c.length>g&&b.push({elementId:e,elementName:f,componentProperty:!0,type:"error",message:"Field Set can have a maximum of "+g+" fields."}),h.length&&_.uniq(h).length!==c.length&&b.push({elementId:e,elementName:f,componentProperty:!0,type:"error",message:"Display Labels must be unique."})):b.push({elementId:e,elementName:f,componentProperty:!0,type:"error",message:"Field Set cannot be empty."}),a.when(b)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxRecordEditorCache",["$q","rxRecordDefinitionResource","rxNamedListDefinitionResource","rxNamedListDefinitionNameDataPageResource",function(a,b,c,d){function e(){k=_.cloneDeep(m)}function f(a){rx.assert.assertFunction(a.$on,"Should be scope instance"),a.$on("$destroy",function(){g(a)}),l.push(a)}function g(a){_.remove(l,a),_.isEmpty(l)&&e()}function h(c){return c&&!k.recordDefinitions[c]&&(k.recordDefinitions[c]=b.get(c).then(function(a){return k.recordDefinitions[c]=a,k.recordDefinitions[c]})),a.when(k.recordDefinitions[c])}function i(b){return b&&!k.namedListDefinitions[b]&&(k.namedListDefinitions[b]=c.get(b).then(function(a){return k.namedListDefinitions[b]=a,k.namedListDefinitions[b]})),a.when(k.namedListDefinitions[b])}function j(){return k.namedListDefinitionNameDataPage||(k.namedListDefinitionNameDataPage=d.get().then(function(a){return k.namedListDefinitionNameDataPage=a.data,k.namedListDefinitionNameDataPage})),a.when(k.namedListDefinitionNameDataPage)}var k,l=[],m={recordDefinitions:{},namedListDefinitions:{},namedListDefinitionNameDataPage:null};return e(),{clear:e,registerConsumer:f,getRecordDefinition:h,getNamedListDefinition:i,getNamedListDefinitionNameDataPage:j}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxRecordEditorDesignManager",["$q","dialogs","RX_RECORD_DEFINITION","RX_VIEW_DEFINITION","RX_RECORD_EDITOR","rxGUID","rxString","rxUtils","rxDesignerCache","rxViewComponent","rxContainerDesignManager","rxViewComponentModel","rxViewDesignerCacheManager","rxViewDesignerCommandManager","rxViewDesignerComponentManager","rxRecordEditorFieldMap","RX_DEFINITION_PICKER",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=l.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,d.events.childAdd,this._onChildAdd),this.listenTo(this,d.events.childRemove,this._onChildRemove),this.listenTo(this,d.events.childUpdate,this._onChildUpdate)},persist:function(a){var b=_.find(a.componentDefinitions,{id:this.get("id")});if(b){var c={recordDefinitionName:this.get("rxData").recordDefinitionName,recordInstanceId:this.get("rxData").mode==e.modes.create?null:this.get("rxData").recordInstanceId,mode:this.get("rxData").mode,autoFill:this.get("rxData").autoFill};c.mode==e.modes.edit&&this.prop("rxData/showReadOnlyState")&&(c.defaultState=this.prop("rxData/defaultState")),_.assign(b,{propertiesByName:c})}else a.componentDefinitions.push(this.describeViewComponent())},describeViewComponent:function(){return{resourceType:d.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:this.get("layout"),componentDefinitions:this.get("componentDefinitions"),propertiesByName:{recordDefinitionName:this.get("rxData").recordDefinitionName||"",recordInstanceId:this.get("rxData").recordInstanceId||"",mode:this.get("rxData").mode||e.modes.edit,autoFill:this.get("rxData").autoFill}}},getCurrentRecordDefinition:function(){return i.getRecordDefinition(this.get("rxData").recordDefinitionName)},getLayoutOrder:function(a){var b=this.layoutTree,c=0;if(b&&b.children){var d=_.find(b.children,{componentDefinitionId:a.id});d&&(c=_.indexOf(b.children,d))}return c},isFieldComponent:function(a){return c.FIELD_COMPONENT_REGEX.test(a.type)},getFieldComponentDefinitions:function(){var a=this.get("componentDefinitions");return h.flattenTree({componentDefinitions:a},"componentDefinitions").filter(this.isFieldComponent)},updateInspectorConfig:function(){return this.updateFieldDefinitions()},updateFieldDefinitions:function(){var b=this,c=b.get("rxData").recordDefinitionName;return c?b.getCurrentRecordDefinition().then(function(a){return b.set("fieldDefinitions",a.fieldDefinitions,{silent:!0}),!0}):(b.set("fieldDefinitions",[],{silent:!0}),a.when())},validate:function(){var b=[],c=a.defer(),d=this,f=this.get("rxData"),g=this.get("id"),h="Record Editor",i=this.getFieldComponentDefinitions();_.isEmpty(_.trim(f.recordDefinitionName))&&b.push({elementId:g,elementName:h,propertyName:"recordDefinitionName",componentProperty:!0,type:"error",message:"Record Definition Name cannot be blank."}),f.mode!=e.modes.edit||f.recordInstanceId||b.push({elementId:g,elementName:h,propertyName:"recordInstanceId",componentProperty:!0,type:"error",message:"Record Instance ID cannot be blank."});var j=[];if(f.mode==e.modes.create&&f.recordDefinitionName){var k=a.defer();j.push(k.promise),this.getCurrentRecordDefinition().then(function(a){var b=[],c=_(i).filter(function(a){return a.propertiesByName.fieldId}).map(function(b){var c=_.find(a.fieldDefinitions,{id:Number(b.propertiesByName.fieldId)});return d.isSystemLikeField(c)}).compact().value();c.length&&b.push({elementId:g,elementName:h,componentProperty:!0,type:"error",message:"System fields ("+c.join(", ")+") cannot be present when Record Editor is in Create Mode."});var e=_(a.fieldDefinitions).filter(function(a){return"REQUIRED"==a.fieldOption&&_.isNull(a.defaultValue)}).value(),f=_(i).map("propertiesByName.fieldId").value(),j=_(e).filter(function(a){return!_.contains(f,String(a.id))}).map("name").value();j.length&&b.push({elementId:g,elementName:h,componentProperty:!0,type:"error",message:"Required fields are missing: "+j.join(", ")+"."}),k.resolve(b)})["catch"](function(a){k.reject(a)})}return a.all(j).then(function(a){var d=_.flatten(a);_.each(d,function(a){b.push(a)}),c.resolve(b)}),c.promise},addField:function(a){var b=_.find(this.get("fieldDefinitions"),{id:a}),c=p.getFieldTypeByFieldDefinition(b),d=_.clone(j.findDescriptor(c)),e=this.layoutTree,f=0;d.propertiesByName={fieldId:String(a),recordDefinition:"${view.components."+this.get("id")+".recordDefinition}",recordInstance:"${view.components."+this.get("id")+".recordInstance}",hidden:"0",disabled:"0"},o.addComponent({item:d,container:e,columnIndex:f,index:e.columns[f].children.length}),m.getModelById(d.componentDefinitionId).set("parentModel",this,{ignoreCommandManager:!0}).set("internalChange",!0,{ignoreCommandManager:!0})},removeField:function(a){var b=m.getModelById(a);b.set("internalChange",!0,{ignoreCommandManger:!0}),b.remove()},canShowSystemFields:function(){return this.prop("rxData/mode")===e.modes.edit},isSystemLikeField:function(a){return"SYSTEM"==a.fieldOption||a.id==c.coreFieldIds.id||a.id==c.coreFieldIds.guid},_onChildAdd:function(a){this.get("componentDefinitions").push(a)},_onChildRemove:function(a){var b=this.get("componentDefinitions");_.pull(b,_.find(b,{id:a}))},_onChildUpdate:function(a){var b=_.find(this.get("componentDefinitions"),{id:a.id});b&&_.assign(b.propertiesByName,a.propertiesByName)},_onChangeRxData:function(a,c,d){var f=this;if("rxData/recordDefinitionName"===d.propertyPath){var g=f._previousAttributes.rxData.recordDefinitionName;g&&g!==d.propertyValue&&_.size(a.get("componentDefinitions"))?b.confirm("Warning!","Displayed Fields will be cleared. Do you want to continue?").result.then(function(){var b=n.undoStack.pop();n.initBatchCommand(),n.addCommand(b[0].action,f);var c=_(a.get("componentDefinitions")).pluck("id").map(m.getModelById).value();_.each(c,function(a){a.set("internalChange",!0),a.remove()}),n.storeBatchCommand(),f.updateFieldDefinitions()},function(){n.undo(),n.redoStack.pop()}):(this.updateFieldDefinitions(),this.prop(d.propertyPath)&&g||f.trigger("rx:change:inputs",f))}if("rxData/mode"===d.propertyPath&&(this.prop("rxData/mode")==e.modes.edit&&(this.prop("rxData/showReadOnlyState",!1,{silent:!0}),this.prop("rxData/defaultState",e.defaultState.read,{silent:!0}),this.prop("rxData/recordInstanceId","",{silent:!0}),f.trigger("rx:change:inputs",f)),this.prop("rxData/mode")==e.modes.create)){var h=_.filter(this.getFieldComponentDefinitions(),function(a){return a.propertiesByName.fieldId});h.length&&this.getCurrentRecordDefinition().then(function(a){if(a){var c=_.filter(h,function(b){var c=_.find(a.fieldDefinitions,{id:Number(b.propertiesByName.fieldId)});return f.isSystemLikeField(c)});c.length&&b.confirm("Warning!","System fields will be removed. Do you want continue ?").result.then(function(){_.each(c,function(a){f.removeField(a.id)})},function(){n.undo(),n.redoStack.pop()})}})}"rxData/showReadOnlyState"!==d.propertyPath||this.prop("rxData/showReadOnlyState")||this.prop("rxData/defaultState",e.defaultState.read,{
rxSilent:!0})},getAutoCompleteList:function(b){var d=[];if(b.fieldPath){var e=b.fieldPath.match(/recordInstance\.fieldInstances\.([\d]+)\.value$/);if(e){var f=_.find(this.prop("fieldDefinitions"),{id:Number(e[1])});f&&f.resourceType===c.dataTypes.selection.resourceType&&(d=_(f.optionNamesById).values().map(function(a){return{id:a,label:a}}).value())}}return a.when(d)}});return{getModel:function(a){return new r(this.getRxConfig(a))},getRxConfig:function(a){return{id:a.id||f.generate(),type:a.type,rxData:this.getRxData(a),rxInspector:this.getRxInspector(),layout:a.layout||k.getDefaultLayoutJSONString(),componentDefinitions:a.componentDefinitions||[]}},getRxData:function(a){return{recordDefinitionName:a.propertiesByName.recordDefinitionName,recordInstanceId:a.propertiesByName.recordInstanceId,mode:a.propertiesByName.mode||e.modes.edit,showReadOnlyState:!!a.propertiesByName.defaultState,defaultState:a.propertiesByName.defaultState||e.defaultState.read,autoFill:!!angular.isDefined(a.propertiesByName.autoFill)&&JSON.parse(a.propertiesByName.autoFill)}},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b({label:{"class":"required"}});return{readonly:!1,inputs:{rxData:{recordDefinitionName:{label:"Record Definition Name",type:"rx-inspector-definition-picker",definitionType:q.definitionTypes.record.type,group:"general",index:1,attrs:c},mode:{label:"Mode",type:"rx-inspector-group-button",group:"general",index:2,tooltip:"Allows you to choose how you want the record editor to work, you can either create or edit the record.",options:[{value:e.modes.create,content:"Create"},{value:e.modes.edit,content:"Edit"}],attrs:c},recordInstanceId:{label:"Record ID",type:"rx-inspector-expression-node-field",tooltip:"Enter the record ID of the record that you want to edit. It is applicable only in the Edit mode.",group:"general",index:3,attrs:c,when:{eq:{"rxData/mode":e.modes.edit}}},showReadOnlyState:{type:"rx-inspector-checkbox-field",description:"Show a read-only state for this component",group:"general",index:4,when:{eq:{"rxData/mode":e.modes.edit}}},defaultState:{label:"Default State",type:"rx-inspector-group-button",group:"general",index:5,options:[{value:e.defaultState.read,content:"Read"},{value:e.defaultState.edit,content:"Edit"}],when:{and:[{eq:{"rxData/showReadOnlyState":!0}},{eq:{"rxData/mode":e.modes.edit}}]}},displayedFields:{label:"Displayed Fields",type:"rx-inspector-record-definition-fields",group:"formContents",index:6,when:{and:[{ne:{"rxData/recordDefinitionName":void 0}},{ne:{"rxData/recordDefinitionName":""}}]}},autoFill:{label:"Auto Fill",type:"rx-inspector-toggle-field",group:"layout",index:1}}},groups:{general:{label:"General",index:1},layout:{label:"Layout",index:2},formContents:{label:"Form Contents",index:3}}}},getDataDictionaryBranch:function(b,d,e){var f={label:g.prettify(b.name),value:"${view.components."+d.id+".api}",children:[]};return f.children=_(b.propertiesByName).filter({isProperty:!0}).map(function(a){return{label:g.prettify(a.name),type:e.componentsProperties.type,icon:e.componentsProperties.icon,value:"${view.components."+d.id+"."+a.name+"}"}}).value(),d.propertiesByName.recordDefinitionName?i.getRecordDefinition(d.propertiesByName.recordDefinitionName).then(function(a){var b={label:"Record Instance"};return b.children=a?_(a.fieldDefinitions).map(function(a){if(a.resourceType!==c.dataTypes.attachment.resourceType)return{label:g.prettify(a.name),type:e.componentsProperties.type,icon:e.componentsProperties.icon,value:"${view.components."+d.id+".recordInstance.fieldInstances."+a.id+".value}"}}).compact().sortBy("label").value():[],f.children.push(b),f}):a.when(f)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxRecordEditorFieldMap",["RX_RECORD_EDITOR","RX_RECORD_DEFINITION",function(a,b){function c(a){return e[a]}function d(c){var d;switch(c.resourceType){case b.dataTypes.character.resourceType:d=0===c.maxLength?a.fields.textarea:a.fields.character;break;default:d=f[c.resourceType]}return d}var e={},f={};return e[a.fields.character]=b.dataTypes.character.resourceType,e[a.fields.textarea]=b.dataTypes.character.resourceType,e[a.fields.dateTime]=b.dataTypes.dateTime.resourceType,e[a.fields.selection]=b.dataTypes.selection.resourceType,e[a.fields.date]=b.dataTypes.dateOnly.resourceType,e[a.fields.time]=b.dataTypes.timeOnly.resourceType,e[a.fields.integer]=b.dataTypes.integer.resourceType,e[a.fields.floating]=b.dataTypes.real.resourceType,e[a.fields.decimal]=b.dataTypes.decimal.resourceType,e[a.fields["boolean"]]=b.dataTypes["boolean"].resourceType,e[a.fields.attachment]=b.dataTypes.attachment.resourceType,f=_.invert(e),{getResourceTypeByFieldType:c,getFieldTypeByFieldDefinition:d}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxRecordFieldDefinitionDesignManager",["rxGUID","rxRecordFieldDefinitionModel","RX_RECORD_EDITOR","RX_RECORD_DEFINITION",function(a,b,c,d){return{getModel:function(a){return new b(this.getRxConfig(a))},getRxConfig:function(b){return{id:b.id||a.generate(),type:b.type,rxData:this.getRxData(b),rxInspector:this.getRxInspector()}},getRxData:function(a){var b=_.assign({},a.propertiesByName);return b.fieldId&&(b.fieldId=Number(b.fieldId)),b},getRxInspector:function(a){var b=function(b){var c=a?{input:{readonly:!0,disabled:!0},select:{readonly:!0,disabled:!0}}:{};return _.assign({},c,b)},c=b();return{readonly:!1,inputs:{rxData:{fieldId:{label:"Field Name",type:"rx-inspector-select-with-validation-messages",group:"general",index:1,attrs:b({label:{"class":"required"}})},label:{label:"Display Label",type:"text",group:"general",index:2},disabled:{label:"Disabled",type:"rx-inspector-optional-expression",group:"general",index:3,attrs:c},hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"general",index:4,attrs:c}}},groups:{general:{label:"General",index:1}}}},fieldLinkFunction:function(a){function b(){if(a.fieldDefinition=e.model.fieldDefinition||_.clone(f),e.model){var b=e.model.prop("rxData/label");a.fieldDefinition.label=_.isUndefined(b)?a.fieldDefinition.name:b}}var e=a.rxConfiguration,f={name:d.EMPTY_FIELD_NAME_OPTION.content};a.fieldDefinition=_.clone(f);var g=a.$watch("rxConfiguration.model",function(a){a&&(b(),a.on(c.events.fieldInit,b),g())})},getFieldInstance:function(a){return a.recordInstance.fieldInstances[a.fieldId]},getFieldDefinition:function(a){var b=_.find(a.recordDefinition.fieldDefinitions,{id:Number(a.fieldId)});return _.isUndefined(a.label)&&(a.label=b.name),b}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").factory("rxRecordFieldDefinitionModel",["$q","definitionNameFilter","rxString","rxExpressionEngine","rxViewComponentModel","RX_RECORD_EDITOR","RX_RECORD_DEFINITION","RX_VIEW_DEFINITION","rxRecordEditorFieldMap",function(a,b,c,d,e,f,g,h,i){return e.extend({type:"",initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:parentModel",this._onChangeParentModel)},describeViewComponent:function(){return{resourceType:h.resourceTypes.viewComponent,id:this.get("id"),type:this.get("type"),propertiesByName:{fieldId:this.get("rxData").fieldId?String(this.get("rxData").fieldId):null,recordDefinition:"${view.components."+this.getRecordEditorModel().get("id")+".recordDefinition}",recordInstance:"${view.components."+this.getRecordEditorModel().get("id")+".recordInstance}",label:this.get("rxData").label||null,disabled:this.get("rxData").disabled||"0",hidden:this.get("rxData").hidden||"0"}}},getRecordEditorModel:function(a){for(var b=a||this;b&&_.isFunction(b.get)&&b.get("type")!==f.recordEditorComponent;)b=b.get("parentModel");return b},getCurrentRecordDefinition:function(){return this.getRecordEditorModel().getCurrentRecordDefinition()},getCurrentFieldDefinition:function(){var a=Number(this.get("rxData").fieldId);return this.getCurrentRecordDefinition().then(function(b){return _.find(b&&b.fieldDefinitions||[],{id:a})})},updateInspectorConfig:function(){var a=this,d=a.get("rxInspector");return this.getFieldNameOptions().then(function(e){var f=_.isEmpty(e),h=d.inputs.rxData.fieldId;1===e.length&&_.isEqual(e[0],g.EMPTY_FIELD_NAME_OPTION)&&e.splice(0,1),h.options=e,h.attrs={select:{readonly:f,disabled:f}};var j=[],k=a.getRecordEditorModel(),l=k.get("rxData").recordDefinitionName;if(l){if(_.isEmpty(e)){var m=i.getResourceTypeByFieldType(a.get("type")),n="";_.forEach(g.dataTypes,function(a){return a.resourceType!==m||(n=a.displayName,!1)}),j.push({elementId:k.get("id"),elementName:"",componentProperty:!0,propertyName:"",type:"error",message:c.format("%s does not have fields that can be bound to a %s field.",b(l),n)})}}else j.push({elementId:k.get("id"),elementName:"",componentProperty:!0,propertyName:"recordDefinitionName",type:"error",message:"You must select a Record Definition before selecting the Field Name."});a.validationIssues=j,a.unset("rxInspector",{ignoreCommandManager:!0}),a.set("rxInspector",d,{ignoreCommandManager:!0})})},getFieldNameOptions:function(){var a=this.get("type"),b=i.getResourceTypeByFieldType(a),c=this;return this.getCurrentRecordDefinition().then(function(d){var e=[];if(d){var f=c.getRecordEditorModel(),h=f.canShowSystemFields();e=_(d.fieldDefinitions).filter(function(c){return!b||a===i.getFieldTypeByFieldDefinition(c)}).filter(function(a){var b=f.isSystemLikeField(a);return!b||b&&h}).map(function(a){return{content:a.name,value:+a.id}}).compact().sortBy("content").unshift(g.EMPTY_FIELD_NAME_OPTION).value()}return e})},initFieldDefinition:function(){var a=this;a.previousFieldDefinition=a.fieldDefinition,this.getCurrentFieldDefinition().then(function(b){a.fieldDefinition=_.clone(b),a.initSetup(),a.trigger(f.events.fieldInit)})},initSetup:function(){if(this.fieldDefinition){var a=(this.prop("rxData/disabled"),this.get("rxInspector")),b=!1;this.getRecordEditorModel().isSystemLikeField(this.fieldDefinition)?(this.prop("rxData/disabled","1",{ignoreCommandManager:!0}),a.inputs.rxData.disabled&&(b=!0,delete a.inputs.rxData.disabled)):("1"===this.prop("rxData/disabled")&&this.prop("rxData/disabled","0",{ignoreCommandManager:!0}),a.inputs.rxData.disabled||(b=!0,a.inputs.rxData.disabled={label:"Disabled",type:"rx-inspector-optional-expression",group:"general",index:2}));var c=this.previousFieldDefinition,d=this.prop("rxData/label");(_.isUndefined(d)||_.get(c,"name")===d)&&(this.prop("rxData/label",this.fieldDefinition.name,{ignoreCommandManager:!0}),this.fieldDefinition.label=d,b=!0),b&&(this.unset("rxInspector",{ignoreCommandManager:!0}),this.set("rxInspector",a,{ignoreCommandManager:!0}),this.trigger("rx:change:inputs",this),this.trigger("change",this))}},_onChangeRxData:function(a,b,c){("rxData/fieldId"===c.propertyPath||c.commandManager&&a._previousAttributes.rxData.fieldId!==a.get("rxData").fieldId)&&this.initFieldDefinition(),"rxData/label"===c.propertyPath&&(a.fieldDefinition.label=c.propertyValue)},_onChangeParentModel:function(a,b){b&&this.initFieldDefinition()},validate:function(){var b=[];return _.isEmpty(_.trim(this.get("rxData").fieldId))&&b.push({elementId:this.get("id"),elementName:"Form Field",componentProperty:!0,propertyName:"fieldId",type:"error",message:"Field Name cannot be blank."}),d.isValid(this.prop("rxData/disabled"))||b.push({elementId:this.get("id"),elementName:"Form Field",componentProperty:!0,propertyName:"disabled",type:"error",message:"Disabled must be a valid expression."}),d.isValid(this.prop("rxData/hidden"))||b.push({elementId:this.get("id"),elementName:"Form Field",componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),a.when(b)},getBreadcrumbName:function(){return this.fieldDefinition&&this.fieldDefinition.name}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").factory("rxRecordGridDesignManager",["$q","dialogs","rxAction","RX_RECORD_DEFINITION","RX_VIEW_DEFINITION","RX_RECORD_GRID","rxGUID","rxString","rxViewComponentModel","rxDesignerCache","rxViewDesignerCommandManager","rxContainerDesignManager","RX_DEFINITION_PICKER",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData)},persist:function(a){var b=_.find(a.componentDefinitions,{id:this.get("id")});if(b){var c=b.propertiesByName.filters;_.assign(b.propertiesByName,this.getPropertiesByName()),this.updateColumns(b),c!==b.propertiesByName.filters&&this.updateFilters(b)}else a.componentDefinitions.push(this.describeViewComponent())},describeViewComponent:function(){return{resourceType:e.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:this.get("layout"),componentDefinitions:this.get("componentDefinitions"),propertiesByName:this.getPropertiesByName()}},getCurrentRecordDefinition:function(){return j.getRecordDefinition(this.get("rxData").recordDefinitionName)},updateInspectorConfig:function(){var b=this,c=b.get("rxInspector"),d=angular.copy(this.get("rxData"));return d.recordDefinitionName?this.getCurrentRecordDefinition().then(function(a){if(a){var e=_.map(a.fieldDefinitions,function(a){return{value:a.id,content:a.name}});c.inputs.rxData.columns.options=e,c.inputs.rxData.filters.options=a.fieldDefinitions}b.unset("rxData",{silent:!0,ignoreCommandManager:!0}),b.set("rxData",d,{ignoreCommandManager:!0}),b.unset("rxInspector",{ignoreCommandManager:!0}),b.set("rxInspector",c,{ignoreCommandManager:!0})}):a.when()},validate:function(){var b=[];return _.isEmpty(_.trim(this.get("rxData").recordDefinitionName))&&b.push({elementId:this.get("id"),elementName:"Record Grid",propertyName:"recordDefinitionName",componentProperty:!0,type:"error",message:"Record Definition Name cannot be blank."}),_.isObject(this.get("rxData").columns)||b.push({elementId:this.get("id"),elementName:"Record Grid",propertyName:"columns",componentProperty:!0,type:"error",message:"Record Grid must have at least one column."}),a.when(b)},_applyRecordDefinitionNameChange:function(){var a=this;a._prepareDefaultColumns().then(function(b){var c=k.undoStack.pop(),d=a.get("rxData");k.addCommand(c[0].action,a),k.initBatchCommand(),d.columns=b,d.filters=f.defaultFilter,a.set("rxData",d),k.storeBatchCommand(),a.updateInspectorConfig()})},_prepareDefaultColumns:function(){return this.getCurrentRecordDefinition().then(function(a){if(a){var b=_(f.columnProperties).map(function(a){return[a.name,a.defaultValue]}).zipObject().value();return _.map([{title:_.find(a.fieldDefinitions,{id:d.coreFieldIds.displayId}).name||"Display ID",fieldId:d.coreFieldIds.displayId.toString()},{title:_.find(a.fieldDefinitions,{id:d.coreFieldIds.modifiedDate}).name||"Modified Date",fieldId:d.coreFieldIds.modifiedDate.toString()},{title:_.find(a.fieldDefinitions,{id:d.coreFieldIds.description}).name||"Description",fieldId:d.coreFieldIds.description.toString()}],function(a){return _.assign(a,b)})}return""})},_onChangeRxData:function(a,b,c){var d=this;"rxData/recordDefinitionName"===c.propertyPath&&d._applyRecordDefinitionNameChange()},updateColumns:function(a){function b(a){return _.map(a,function(a){return{resourceType:e.resourceTypes.viewComponent,id:a.id,type:"rx-action",propertiesByName:_.omit(a,"id")}})}var d=_.cloneDeep(this.prop("rxData/columns"));_(a.componentDefinitions).filter({type:f.components.column}).each(function(e){var f=_.find(d,{fieldId:e.propertiesByName.fieldId});f?(e.propertiesByName=f,_.remove(d,f),f.actions&&(e.componentDefinitions=c.serializeActions(b(f.actions)))):_.remove(a.componentDefinitions,e)}).value(),a.componentDefinitions=a.componentDefinitions.concat(_.map(d,function(a){return{resourceType:e.resourceTypes.containerViewComponent,id:g.generate(),type:f.components.column,propertiesByName:a,componentDefinitions:c.serializeActions(b(a.actions))}})),_.each(a.componentDefinitions,function(a){a.propertiesByName=_.omit(a.propertiesByName,["actions"])}),_.each(a.componentDefinitions,function(a){_.each(a.propertiesByName,function(b,c){_.isString(b)||(a.propertiesByName[c]=JSON.stringify(b))})});var h=_.remove(a.componentDefinitions,{type:f.components.column});_.each(this.prop("rxData/columns"),function(b){var c=_.find(h,{propertiesByName:{fieldId:b.fieldId}});a.componentDefinitions.push(c)})},updateFilters:function(a){var b=function(a){var c=_.values(a)[0];return _.isArray(c)?_(c).map(b).compact().flatten().value():c},c=this.get("rxData"),d=b(c.filters?JSON.parse(c.filters):null);_(a.componentDefinitions).filter({type:f.components.filter}).each(function(b){var c=_.find(d,function(a){return b.propertiesByName.fieldId==_.keys(a)[0]&&b.propertiesByName.value==_.values(a)[0]});c?_.remove(d,c):_.remove(a.componentDefinitions,b)}).value(),a.componentDefinitions=a.componentDefinitions.concat(_.map(d,function(a){return{resourceType:e.resourceTypes.viewComponent,id:g.generate(),type:f.components.filter,propertiesByName:{fieldId:_.keys(a)[0],value:_.values(a)[0]}}})),_(a.componentDefinitions).filter({type:f.components.filter}).each(function(b){var c={};c[b.propertiesByName.fieldId]=b.propertiesByName.value,a.propertiesByName.filters=a.propertiesByName.filters.replace(JSON.stringify(c),'"'+b.id+'"')}).value()},getPropertiesByName:function(){var a=this.get("rxData");return{recordDefinitionName:a.recordDefinitionName||null,enableRowSelection:a.enableRowSelection||null,enableFiltering:a.enableFiltering||null,filters:a.filters||f.defaultFilter,autoFill:a.autoFill}},getAutoCompleteList:function(b){if(b.fieldPath&&this.prop("rxData/recordDefinitionName")){var c=b.fieldPath.match(/firstSelectedRow\.([\d\w-]+)/);if(c)return this.getCurrentRecordDefinition().then(function(a){var b=_.find(a.fieldDefinitions,{name:c[1]}),e=[];return b&&b.resourceType===d.dataTypes.selection.resourceType&&(e=_(b.optionNamesById).values().map(function(a){return{id:a,label:a}}).value()),e})}return a.when([])}});return{getModel:function(a){return new n(this.getRxConfig(a))},getRxConfig:function(a){return{id:a.id||g.generate(),type:a.type,rxData:this.getRxData(a),rxInspector:this.getRxInspector(),layout:a.layout||l.getDefaultLayoutJSONString(),componentDefinitions:a.componentDefinitions||[]}},getRxData:function(a){var b=_(_.cloneDeep(a.componentDefinitions)).filter({type:f.components.column}).map(function(a){var b=c.deserializeActions(a.componentDefinitions);return a.propertiesByName.actions=_.map(b,function(b,c){return b.id=a.componentDefinitions[c].id,b}),a}).pluck("propertiesByName").map(function(a){return _.each(a,function(b,c){try{a[c]=JSON.parse(b)}catch(d){}a.fieldId=a.fieldId.toString()}),a}).value(),d=a.propertiesByName.filters;return _(a.componentDefinitions).filter({type:f.components.filter}).each(function(a){var b={};b[a.propertiesByName.fieldId]=a.propertiesByName.value,d=d.replace('"'+a.id+'"',JSON.stringify(b))}).value(),{recordDefinitionName:a.propertiesByName.recordDefinitionName||"",columns:b||"",filters:d||f.defaultFilter,enableRowSelection:_.has(a.propertiesByName,"enableRowSelection")?a.propertiesByName.enableRowSelection:f.selectionTypes.multiple,enableFiltering:!_.has(a.propertiesByName,"enableFiltering")||a.propertiesByName.enableFiltering,autoFill:!!angular.isDefined(a.propertiesByName.autoFill)&&JSON.parse(a.propertiesByName.autoFill)}},getRxInspector:function(){return{readonly:!1,inputs:{rxData:{recordDefinitionName:{label:"Record Definition Name",type:"rx-inspector-definition-picker",definitionType:m.definitionTypes.record.type,group:"general",index:1,attrs:{label:{"class":"required"}}},enableRowSelection:{label:"Enable Row Selection",type:"rx-inspector-optional-select",group:"general",index:2,options:[{value:f.selectionTypes.multiple,content:"Multiple rows"},{value:f.selectionTypes.single,content:"Single row"}]},enableFiltering:{label:"Enable Filtering",type:"toggle",group:"general",index:3},initialSortColumn:{label:"Initial Sort Column",type:"rx-inspector-record-grid-sort-editor",group:"general",index:4,when:{and:[{ne:{"rxData/recordDefinitionName":void 0}},{ne:{"rxData/recordDefinitionName":""}}]}},filters:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.filter-select.heading.label",type:"rx-inspector-filter-select",group:"general",index:5,tooltip:"Specifies the records that you can see on the application UI. Application users can narrow it further by adding additional filters.",options:[],when:{and:[{ne:{"rxData/recordDefinitionName":void 0}},{ne:{"rxData/recordDefinitionName":""}}]}},columns:{type:"rx-inspector-record-grid-column-editor",group:"general",tooltip:"You can make a field visible by default  on the application UI. Useful for mapping the selected row and fields to a view navigation.",index:6,options:[],attrs:{label:{"class":"required"}},when:{and:[{ne:{"rxData/recordDefinitionName":void 0}},{ne:{"rxData/recordDefinitionName":""}}]}},autoFill:{label:"Auto Fill",type:"rx-inspector-toggle-field",group:"layout",index:1}}},groups:{general:{label:"General",index:1},layout:{label:"Layout",index:2},columns:{label:"Columns",index:3}}}},getDataDictionaryBranch:function(b,c,d){var e={label:h.prettify(b.name),value:"${view.components."+c.id+".api}",type:d.componentsProperties.type,componentType:b.type,componentId:c.id,icon:d.componentsProperties.icon,children:[]};return e.children=_(b.propertiesByName).filter({isProperty:!0}).map(function(a){var b,e={label:h.prettify(a.name),type:d.componentsProperties.type,icon:d.componentsProperties.icon,value:"${view.components."+c.id+"."+a.name+"}"};return"clickableRow"===a.name?(b=_(c.componentDefinitions).filter({type:f.components.column}).pluck("propertiesByName").value(),_.some(b,"clickable")||(b=[]),e.children=_.map(b,function(a){return{label:h.prettify(a.title),type:d.componentsProperties.type,icon:d.componentsProperties.icon,value:"${view.components."+c.id+".clickableRow."+a.fieldId+"}"}})):e.value="${view.components."+c.id+"."+a.name+"}","firstSelectedRow"===a.name&&(b=_(c.componentDefinitions).filter({type:f.components.column}).pluck("propertiesByName").value(),e.children=_.map(b,function(a){return{label:h.prettify(a.title),type:d.componentsProperties.type,icon:d.componentsProperties.icon,value:"${view.components."+c.id+".firstSelectedRow."+a.fieldId+"}"}})),e}).value(),a.when(e)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").factory("rxRecordGridFilter",["RX_DATA_TYPES",function(a){return{generateTextFilterQuery:function(b,c){if(b){var d=_(c).filter(function(b){return b.visible!==!1&&b.filterType===a.character}).map(function(a){return"'"+a.fieldId+"' LIKE \"%"+b+'%"'}).filter(Boolean).value().join(" OR ");return d?"("+d+")":""}},addQueries:function(){var a=_.filter(arguments,Boolean).join(" AND ");return a}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").factory("rxRecordGridPreferences",["$q","$log","rxUserPreferencesServer","RX_USER_PREFERENCES","RX_RECORD_GRID","debounce",function(a,b,c,d,e,f){function g(a,b){rx.assert.assertString(a,"View Component ID must be a string.");var g=this;this.gridId=a,this.initialSettings=b||{},this.uiComponentSettingData={},this.uiComponentSettingData[d.fields.version]=e.version,this.uiComponentSettingData[d.fields.preferences]={},this.uiComponentSettingData[d.fields.componentTypeName]=e.uiComponentName,this.savePreference=f(function(){c.setUiComponentPreferences(g.gridId,g.uiComponentSettingData)},300),i(this.initialSettings[e.userPreferences.columns])}function h(a,b){return new g(a,b)}function i(a){_.each(a,function(b,c){a[c]=_.pick(b,["fieldId","visible"]),_.isObject(b.sortable)&&(a[c].sort=b.sortable)})}function j(a){return a[d.fields.preferences][e.userPreferences.columns]}return g.prototype={getPreferences:function(){var a=this,b={};return b[e.userPreferences.columns]=[],b[e.userPreferences.filters]={},c.getUiComponentPreferences(a.gridId).then(function(c){return c=c||{},data&&(a.uiComponentSettingData[d.fields.preferences]=c,c[e.userPreferences.columns]=_(c[e.userPreferences.columns]).map(function(b){var c=_.find(a.initialSettings[e.userPreferences.columns],{fieldId:b.fieldId});if(c)return b}).compact().value()),_.defaults(c,b)})["catch"](function(){return b})},setVisibleColumns:function(a){var b=j(this.uiComponentSettingData),c=_.map(this.initialSettings[e.userPreferences.columns],function(c){var d=_.find(b,{fieldId:c.fieldId}),e=_.assign(_.pick(c,"fieldId"),_.omit(d,"visible"));return!c.visible&&_.contains(a,c.fieldId)&&(e.visible=!0),c.visible&&!_.contains(a,c.fieldId)&&(e.visible=!1,_.isObject(e.sortable)&&(e.sortable=!0)),e});this._setPreference(e.userPreferences.columns,c)},setSortColumns:function(a){var b=j(this.uiComponentSettingData),c=_.map(this.initialSettings[e.userPreferences.columns],function(c){var d=_.find(b,{fieldId:c.fieldId}),e=_.find(a,{fieldId:c.fieldId}),f=_.assign(_.pick(c,"fieldId"),_.omit(d,"sort"));return e&&!_.isEqual(c.sort,e.sort)&&(f.sort=_.clone(e.sort)),f});this._setPreference(e.userPreferences.columns,c)},setFilters:function(a){this._setPreference(e.userPreferences.filters,a)},mergeColumnPreferences:function(a){var b=j(this.uiComponentSettingData),c=_.find(b,function(a){return _.isObject(a.sort)});return _.map(a,function(a){var d=_.find(b,{fieldId:a.fieldId});return c&&(_.isObject(a.sortable)&&(a.sortable=!0),_.isObject(a.sort)&&(a.sort=null)),_.assign(a,d)})},_setPreference:function(a,b){a===e.userPreferences.columns&&(b=_.reject(b,function(a){return _.isEmpty(_.omit(a,"fieldId"))})),_.isEmpty(b)?delete this.uiComponentSettingData[d.fields.preferences][a]:this.uiComponentSettingData[d.fields.preferences][a]=b,this.savePreference()}},{getInstance:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").factory("rxRichTextDesignManager",["rxRichText","rxGUID",function(a,b){function c(a){return{id:a.id||b.generate(),type:a.type,rxData:d(a),rxInspector:e()}}function d(a){return{hidden:a.propertiesByName.hidden||"0",html:a.propertiesByName.html||"",autoFill:!!angular.isDefined(a.propertiesByName.autoFill)&&JSON.parse(a.propertiesByName.autoFill)}}function e(){return{readonly:!1,inputs:{rxData:{hidden:{label:"Hidden",type:"rx-inspector-optional-expression",group:"displayStates",index:0},autoFill:{label:"Auto Fill",type:"rx-inspector-toggle-field",group:"layout",index:1}}},groups:{displayStates:{label:"Display states",index:1},layout:{label:"Layout",index:2}}}}return{getModel:function(b){return new a(c(b))}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").factory("rxRichText",["$q","rxExpressionEngine","rxViewComponentModel",function(a,b,c){return c.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments)},validate:function(){var c=[];return b.isValid(this.prop("rxData/hidden"))||c.push({elementId:this.get("id"),elementName:"Rich Text",componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),a.when(c)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").factory("rxShellMenuGroupManager",["$q","rxGUID","rxViewComponentModel","RX_SHELL","RX_VIEW_DEFINITION","rxExpressionEngine",function(a,b,c,d,e,f){function g(){return JSON.stringify({componentDefinitionId:b.generate(),columns:[{children:[]}]})}var h={},i=c.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:parentModel",this._onChangeParentModel),this.listenTo(this,e.events.childRemove,this._onChildRemove)},describeViewComponent:function(){return{resourceType:e.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:this.get("layout"),componentDefinitions:this.get("componentDefinitions"),propertiesByName:this.get("rxData")}},_onChangeRxData:function(a,b,c){this.onMenuGroupUpdated()},_onChangeParentModel:function(){this.onMenuGroupUpdated()},onMenuGroupUpdated:function(){this.trigger(d.events.menuGroupUpdate)},_onChildRemove:function(a){var b=this.get("componentDefinitions");_.remove(b,{id:a})},validate:function(){var b=[],c=this.get("rxData"),d=this.get("id"),e=c.menuGroupName||"Menu Group";return _.isEmpty(_.trim(c.menuGroupName))&&b.push({elementId:d,elementName:e,componentProperty:!0,propertyName:"menuGroupName",type:"error",message:e+" cannot be blank."}),f.isValid(c.hidden)||b.push({elementId:d,elementName:e,componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),a.when(b)},renderInspector:function(){},getBreadcrumbName:function(){return this.get("rxData").menuGroupName}});return h={selectedMenuGroupId:0,getModel:function(a){var b=new i(this.getRxConfig(a));return b.renderInspector(),b},getRxConfig:function(a){return{id:a.id||b.generate(),type:a.type,rxData:this.getRxData(a),rxInspector:this.getRxInspector(),layout:a.layout||g(),componentDefinitions:a.componentDefinitions||[],allowedTypes:a.allowedTypes||null}},getRxData:function(a){return _.assign({menuGroupName:d.strings.newMenuGroupName},a.propertiesByName)},getRxInspector:function(){return{inputs:{rxData:{menuGroupName:{label:"Label",type:"text",group:"properties",index:1,attrs:{label:{"class":"required"}}},hidden:{label:"Hidden",type:"toggle",group:"properties",index:2}}},groups:{properties:{label:"Properties",index:1}}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").provider("rxShellMenuItemAction",function(){function a(a){rx.assert.assertStringWithLength(a.name),rx.assert.assertStringWithLength(a.label),b.push(a)}var b=[];return{registerAction:function(b){_.isArray(b)?_.forEach(b,a):a(b)},$get:function(){return{getRegisteredActions:function(){return b},findDescriptor:function(a){rx.assert.assertStringWithLength(a);var c=_.find(b,{name:a});return c}}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").factory("rxShellMenuItemManager",["$q","rxGUID","rxString","rxViewComponentModel","RX_SHELL","RX_ACTION_BUTTON","RX_VIEW_DEFINITION","rxAction","rxShellMenuItemAction","rxExpressionEngine",function(a,b,c,d,e,f,g,h,i,j){var k={},l=d.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,"change:parentModel",this._onChangeParentModel)},persist:function(a){var b,c=this.describeViewComponent(),d=_.find(a.componentDefinitions,{id:this.get("id")}),e=this.getParentShell(),f=this.prop("rxInspector").inputs.rxData;d?(_.assign(d.propertiesByName,k.getRxData(c)),_.forEach(d.propertiesByName,function(a,b){f[b]||delete d.propertiesByName[b]}),h.serializeAction(d.propertiesByName),b=g.events.childUpdate):(a.componentDefinitions.push(this.describeViewComponent()),b=g.events.childAdd),e&&e.trigger(b,c,this.get("parentModel"))},_onChangeRxData:function(a,b,c){"rxData/actionName"===c.propertyPath?this.renderInspector():this.onMenuItemUpdated()},_onChangeParentModel:function(){this.onMenuItemUpdated()},onMenuItemUpdated:function(){this.trigger(e.events.menuItemUpdate)},validate:function(){var b=[],d=this.get("rxData"),e=this.get("id"),f=this.prop("rxData/menuItemName")||"Menu Item";return _.each(this.requiredProperties,function(a){_.isEmpty(_.trim(d[a.name]))&&b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:a.name,type:"error",message:(a.label||c.prettify(a.name))+" cannot be blank."
})}),j.isValid(d.hidden)||b.push({elementId:e,elementName:f,componentProperty:!0,propertyName:"hidden",type:"error",message:"Hidden must be a valid expression."}),a.when(b)},renderInspector:function(){var a=this.get("rxData"),b=k.getRxInspector(),c=i.findDescriptor(a.actionName),d=this;this.requiredProperties=[];var e={inputs:{rxData:_(c.parameters).map(function(a,b){return a.group="inputParameters",a.index=b,a.type=a.type||"rx-inspector-expression-field",a.isRequired&&d.requiredProperties.push({label:a.label,name:a.name}),a}).mapKeys(function(a,b){return a.name}).value()}};this.unset("rxInspector",{silent:!0}),this.prop("rxInspector",_.merge(b,e),{silent:!0}),h.deserializeAction(a),_.forEach(a,function(c,d){b.inputs.rxData[d]||delete a[d]}),this.prop("rxData",a,{silent:!0}),this.trigger("rx:change:inputs",this),this.onMenuItemUpdated()},getBreadcrumbName:function(){return this.get("rxData").menuItemName},getParentShell:function(){for(var a=this.get("parentModel");a&&"rx-shell"!==a.get("type");)a=a.get("parentModel");return a}}),m=_(i.getRegisteredActions()).map(function(a){return{value:a.name,content:a.label}}).value();return k={getModel:function(a){var b=new l(this.getRxConfig(a));return b.renderInspector(),b},getRxConfig:function(a){return{id:a.id||b.generate(),type:a.type,rxData:this.getRxData(a),rxInspector:this.getRxInspector()}},getRxData:function(a){return _.assign({menuItemName:e.strings.newMenuItemName,actionName:m[0].value},a.propertiesByName)},getRxInspector:function(){return{inputs:{rxData:{menuItemName:{label:"Label",type:"text",group:"properties",index:1},menuItemIcon:{label:"Icon",type:"select",group:"properties",index:2,options:_(f.icons).map(function(a){return{value:a.name,content:a.label}}).unshift({content:e.strings.noneIconLabel}).value()},actionName:{label:"Action to Trigger",type:"select",group:"properties",index:3,options:m,attrs:{label:{"class":"required"}}},hidden:{label:"Hidden",type:"toggle",group:"properties",index:4}}},groups:{properties:{label:"Properties",index:1},inputParameters:{label:"Input Parameters",index:2}}}},menuItemLinkFunction:function(a){function b(){_.assign(a.menuItemDefinition,c.model.get("rxData")||_.clone(d)),a.menuItemDefinition.iconCls=(_.find(f.icons,{name:a.menuItemDefinition.menuItemIcon})||{}).cls}var c=a.rxConfiguration,d={};a.menuItemDefinition=_.clone(d);var g=a.$watch("rxConfiguration.model",function(a){a&&(b(),a.on(e.events.menuItemUpdate,b),g())})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").service("rxShellDefinition",["rxViewDefinitionResource","rxShellManager","RX_VIEW_DEFINITION","RX_SHELL","rxBundleCache",function(a,b,c,d,e){this.getNew=function(){return{plain:function(){var f=a.getNew().plain();f.name=e.getBundleId()+":"+c.shellDefinitionName,f.type=c.viewType.shell;var g=b.getModel({type:d.shellRuntimeComponent}).describeViewComponent();f.componentDefinitions.push(g);var h=_.cloneDeep(_.find(c.viewLayoutTemplates,{id:c.defaultLayoutTemplateId}).layout);return h.componentDefinitionId=f.id,h.columns[0]&&h.columns[0].children&&h.columns[0].children.push({"static":!0,componentDefinitionId:g.id}),f.layout=JSON.stringify(h),f}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").factory("rxShellManager",["rxGUID","rxShellModel",function(a,b){function c(){return JSON.stringify({componentDefinitionId:a.generate(),columns:[{children:[]}]})}return{getModel:function(a){return new b(this.getRxConfig(a))},getRxConfig:function(b){return{id:b.id||a.generate(),type:b.type,rxData:this.getRxData(b),rxInspector:this.getRxInspector(),layout:b.layout||c(),componentDefinitions:b.componentDefinitions||[],allowedTypes:b.allowedTypes||null}},getRxData:function(a){return{allowAppSwitching:!_.has(a.propertiesByName,"allowAppSwitching")||JSON.parse(a.propertiesByName.allowAppSwitching),globalSearchUseDefault:!_.has(a.propertiesByName,"globalSearchUseDefault")||JSON.parse(a.propertiesByName.globalSearchUseDefault),globalSearchCustomSearchState:_.has(a.propertiesByName,"globalSearchCustomSearchState")?a.propertiesByName.globalSearchCustomSearchState:"",globalSearchDisabled:!!_.has(a.propertiesByName,"globalSearchDisabled")&&JSON.parse(a.propertiesByName.globalSearchDisabled),globalSearchRecords:a.propertiesByName&&a.propertiesByName.globalSearchRecords||"[]"}},getRxInspector:function(){return{inputs:{rxData:{allowAppSwitching:{label:"Allow switching between apps",type:"toggle",group:"general",index:2},globalSearchDisabled:{label:"Disable Global Search",type:"toggle",group:"globalSearch",index:3},globalSearchUseDefault:{type:"rx-inspector-checkbox-field",description:"Use default search results view",group:"globalSearch",index:4,when:{eq:{"rxData/globalSearchDisabled":!1}}},globalSearchCustomSearchState:{label:"Custom Search State",type:"text",group:"globalSearch",index:5,attrs:{label:{"class":"required"}},when:{and:[{eq:{"rxData/globalSearchUseDefault":!1}},{eq:{"rxData/globalSearchDisabled":!1}}]}},globalSearchRecords:{type:"rx-inspector-global-search-editor",group:"globalSearch",index:6,options:[],when:{and:[{eq:{"rxData/globalSearchUseDefault":!0}},{eq:{"rxData/globalSearchDisabled":!1}}]}},navBarItems:{type:"rx-inspector-menu-item-editor",group:"menuitems",index:7}}},groups:{general:{label:"General",index:1},globalSearch:{label:"Global Search",index:2},menuitems:{label:"Menu Items",index:3}}}},initContainerLayoutProperties:function(a){a.columns=a.columns||[{children:[]}]},getDefaultLayoutJSONString:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").factory("rxShellModel",["$q","rxGUID","rxUtils","rxViewComponentModel","RX_VIEW_DEFINITION","RX_SHELL",function(a,b,c,d,e,f){return d.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:rxData",this._onChangeRxData),this.listenTo(this,e.events.childAdd,this._onChildAdd),this.listenTo(this,e.events.childRemove,this._onChildRemove),this.listenTo(this,e.events.childUpdate,this._onChildUpdate)},describeViewComponent:function(){return{resourceType:e.resourceTypes.containerViewComponent,id:this.get("id"),type:this.get("type"),layout:this.get("layout"),componentDefinitions:this.get("componentDefinitions"),propertiesByName:this.get("rxData")}},validate:function(){var b=[];return!_.isEmpty(_.trim(this.get("rxData").globalSearchCustomSearchState))||this.get("rxData").globalSearchUseDefault||this.get("rxData").globalSearchDisabled||b.push({elementId:this.get("id"),elementName:"Navigation Bar",propertyName:"globalSearchCustomSearchState",componentProperty:!0,type:"error",message:"Custom Search State cannot be blank."}),_.isEmpty(JSON.parse(this.get("rxData").globalSearchRecords))&&this.get("rxData").globalSearchUseDefault&&!this.get("rxData").globalSearchDisabled&&b.push({elementId:this.get("id"),elementName:"Navigation Bar",propertyName:"globalSearchRecords",componentProperty:!0,type:"error",message:"Please include at lease one Record in Global Search Results View."}),_.find(c.flattenTree(this.attributes,"componentDefinitions"),{type:f.navBar.menuItem})||b.push({elementId:this.get("id"),elementName:"Navigation Bar",type:"error",message:"Please include at least one Menu Item"}),a.when(b)},_onChildAdd:function(a,b){if(a.type===f.navBar.menuItem&&b.get("type")===f.navBar.menuGroup){var c=_.find(this.get("componentDefinitions"),{id:b.id});c&&c.componentDefinitions.push(a)}else this.get("componentDefinitions").push(a)},_onChildRemove:function(a){var b=this.get("componentDefinitions");_.remove(b,{id:a})},_onChildUpdate:function(a,b){if(a.type===f.navBar.menuItem&&b.get("type")===f.navBar.menuGroup){var c=_.find(this.get("componentDefinitions"),{id:b.id});c&&c.componentDefinitions&&_.forEach(c.componentDefinitions,function(b){b.id===a.id&&_.assign(b,a)})}else{var d=_.find(this.get("componentDefinitions"),{id:a.id});d&&_.assign(d.propertiesByName,a.propertiesByName)}},_onChangeRxData:function(a,b,c){this.onNavBarUpdated()},onNavBarUpdated:function(){this.trigger(f.events.navBarUpdate)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").factory("shellNotificationModel",["$interval","rxCurrentUser","rxCommandResource","rxDataPageResource","RX_SHELL","RX_RECORD_DEFINITION",function(a,b,c,d,e,f){function g(a){var b=_.remove(j.notifications.active.list,function(b){return b[f.coreFieldIds.id]===a[j.userMessageDef.fields.instanceId]});b.length>0&&(j.notifications.active.count-=b.length,j.notifications.dismissed.count+=b.length,j.notifications.dismissed.list=b.concat(j.notifications.dismissed.list)),0===j.notifications.active.list.length&&(h(),j.getNotifications())}function h(){l&&a.cancel(l),l=a(j.getNotifications,6e4)}function i(){h(),j.getNotifications()}var j={userMessageDef:e.definitions.userMessage,chuckSize:30,notifications:{active:{type:"active",count:0,list:[],queryExpr:"'7'!=2",loadingInProgress:!1},dismissed:{type:"dismissed",count:0,list:[],queryExpr:"'7'=2",loadingInProgress:!1}}},k={20002:b.getName(),sortBy:"-6",queryExpression:"",propertySelection:[j.userMessageDef.fields.modifiedDate,j.userMessageDef.fields.instanceId,j.userMessageDef.fields.body].join(",")},l=null;return j.dismissNotifications=function(a){var b={};b[a[j.userMessageDef.fields.instanceId]]=j.userMessageDef.status.dismissed,a.dismissInProgress=!0,c.withType(j.userMessageDef.updateCommand).execute({userMessageStateById:b}).then(function(){g(a)})["finally"](function(){a.dismissInProgress=!1})},j.getNotifications=function(a,b){a="dismissed"===a?a:"active",b=!!b,j.notifications[a].loadingInProgress=b||0===j.notifications[a].list.length,k.queryExpression=j.notifications[a].queryExpr+(b?" AND '6'<\""+_.last(j.notifications[a].list)[j.userMessageDef.fields.modifiedDate]+'"':""),d.withType(j.userMessageDef.dataPageType).get(j.chuckSize,0,k).then(function(c){if(c&&c.totalSize&&c.data)if(b)j.notifications[a].list=j.notifications[a].list.concat(c.data);else{var d=j.userMessageDef.fields.body;j.notifications[a].count=c.totalSize,j.notifications[a].list=c.data,_.each(j.notifications[a].list,function(a){a[d]=a[d]?_.unescape(a[d]):""})}})["finally"](function(){j.notifications[a].loadingInProgress=!1})},i(),j}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewAutoComplete",["RxAutoComplete","rxViewDesignerCacheManager",function(a,b){function c(){return new d}var d=a.extend({extractData:function(a){var c={component:null,fieldPath:null},d=a.match(/\${view\.components\.([\d\w-]+)\.(.*)}$/);return d&&(c.component=b.getModelById(d[1]),c.fieldPath=d[2]),c}});return{getInstance:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewComponentDefinitionManager",["rxViewComponent","$injector","rxViewComponentManager",function(a,b,c){return{getModel:function(d){var e=a.findDescriptor(d.type),f=c;if(e.designManagerService){var g=b.get(e.designManagerService);g.getModel&&(f=g)}return f.getModel(d,e)},validate:function(a){}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDataDictionary",["rxViewComponent","$q","$injector","rxString","rxUtils",function(a,b,c,d,e){function f(){j={plainViewDefinition:{},currentDataDictionary:{}}}function g(a){return angular.equals(a,j.plainViewDefinition)?b.when(j.currentDataDictionary):(j.plainViewDefinition=angular.copy(a),k(a).then(function(a){return j.currentDataDictionary=a,j.currentDataDictionary}))}var h={viewParams:{type:"View Parameter",icon:"d-icon-arrow_right_square_input"},inputParams:{label:"View Input Parameter",type:"View Input Parameter",icon:"d-icon-arrow_right_square_o"},componentsProperties:{label:"Component Property",type:"Component Property",icon:"d-icon-arrow_right_square_input"}},i=function(){return _.values(h)},j={plainViewDefinition:{},currentDataDictionary:{}},k=function(f){var g=[],i=_(f.inputParams).map(function(a){return{label:a.name,type:h.inputParams.type,icon:h.viewParams.icon,value:"${view.inputParams."+a.name+"}"}}).value();i.push({label:"Is valid",type:h.viewParams.type,icon:h.inputParams.icon,value:"${view.isValid}"});var j=_(e.flattenTree(f,"componentDefinitions")).splice(1).map(function(b){var c=a.findDescriptor(b.type);if(c)return{descriptor:c,definition:b}}).reject(function(a){return!_.some(a.descriptor.propertiesByName,{isProperty:!0})}).compact().map(function(a){var e,f=a.descriptor.designManagerService?c.get(a.descriptor.designManagerService):null;return e=f&&_.isFunction(f.getDataDictionaryBranch)?f.getDataDictionaryBranch(a.descriptor,a.definition,h):b.when({label:d.prettify(a.descriptor.name),value:"${view.components."+a.definition.id+".api}",type:h.componentsProperties.type,icon:h.componentsProperties.icon,children:_(a.descriptor.propertiesByName).filter({isProperty:!0}).map(function(b){return{label:d.prettify(b.name),type:h.componentsProperties.type,icon:h.componentsProperties.icon,value:"${view.components."+a.definition.id+"."+b.name+"}"}}).value()})}).value();return b.all(j).then(function(a){return g.push({value:"${view.api}",type:h.componentsProperties.type,icon:h.componentsProperties.icon,label:"View",children:a||[]}),g.push({label:"View Parameters",children:i}),g})};return{clear:f,getCommonDataDictionary:g,getLegend:i}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDefinitionDesignManager",["RX_VIEW_DEFINITION","RX_DESIGNER","rxOverlay","rxViewDefinitionModel","rxViewDefinitionResource","rxUtils","definitionNameFilter","$filter","rxGUID",function(a,b,c,d,e,f,g,h,i){function j(a){return c.isCustomizationEnabled("allowOverlay",a)}return _.each(a.viewLayoutTemplates,function(a){f.flattenTree(a.layout,"children","columns").forEach(function(a){a.columns&&(a.componentDefinitionId=i.generate())})}),{getModel:function(a){return new d(this.getRxConfig(a))},getRxConfig:function(a){return{id:a.id,type:"viewDefinition",rxData:this.getRxData(a),rxInspector:this.getRxInspector(a)}},getRxData:function(b){var c=_.pick(b,["inputParams","outputParams","description","permissions","overlayDescriptor","overlayGroupId","allowOverlay"]);c.name=g(b.name);var d=JSON.parse(b.layout);return c.layoutTemplate=_.find(a.viewLayoutTemplates,{id:+d.layoutTemplate||a.defaultLayoutTemplateId}).label,_.cloneDeep(c)},getRxInspector:function(c){var d=_.isUndefined(c.lastUpdateTime),f=g(c.name)===a.shellDefinitionName,h={label:{"class":"required"}},i=!0;d||(i=j(c));var k={name:{label:"Name",type:"text",group:"general",index:1,attrs:_.assign({input:{disabled:!d||f,maxlength:254}},h)},overlayDescriptor:{label:"",index:3,type:"rx-customization-perspective",group:"general",customizationOptionsDirective:"rx-view-customization-options",definitionName:c.name,revertPrompt:"Are you sure you want to revert customization for selected view definition?",revertCommand:e.revertCustomization,revertCompleteEventName:b.events.refreshDesigner}};return f||(angular.merge(k,{description:{label:"Description",type:"textarea",group:"general",index:2,attrs:{textarea:{disabled:!i}}},layoutTemplate:{label:"Layout Template",type:"text",group:"general",index:3,attrs:_.assign({input:{disabled:!0}},h)},permissions:{label:"com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.permission.label",type:"rx-permission-editor",group:"general",isReadOnly:!i}}),i&&angular.merge(k,{inputParams:{type:"list",group:"inputParameters",item:{type:"object",properties:{name:{type:"text",label:"Name"}}}},outputParams:{type:"list",group:"outputParameters",item:{type:"object",properties:{name:{type:"text",label:"Name"},source:{type:"rx-inspector-expression-node-field",label:"Source"}}}}})),{inputs:{rxData:k},groups:{general:{label:"General",index:1},inputParameters:{label:"Input Parameters",index:2},outputParameters:{label:"Output Parameters",index:3}}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDefinitionModel",["$filter","rxBundleCache","$q","rxViewComponentModel","RX_DESIGNER",function(a,b,c,d,e){return d.extend({initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,e.events.permissionsChanged,this._onPermissionsChanged)},_onPermissionsChanged:function(a){var b=_.cloneDeep(this.get("rxData"));b.permissions=a,this.set("rxData",b)},persist:function(c){var d=_.cloneDeep(this.get("rxData")),e=b.getBundleId(),f=e?e+":":"";d.name=f+a("definitionName")(d.name,"encode"),delete d.layoutTemplate,_.assign(c,d)},validate:function(b){var d=[],e=b.inputParams||[],f=a("definitionName")(b.name,"decode");_.isEmpty(_.trim(f))&&(f="View Definition",d.push({elementId:b.id,elementName:f,propertyName:"name",type:"error",message:"View Name cannot be blank."})),_.each(e,function(a,c){_.isEmpty(_.trim(a))&&d.push({elementId:b.id,elementName:f,propertyName:"inputParams/"+c,type:"error",message:"Parameter Name cannot be blank."})});var g=_(e).map("name").uniq().value();return g.length!==e.length&&d.push({elementId:b.id,elementName:f,type:"error",message:"Parameter names must be unique."}),c.when(d)}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDesignerCacheManager",["$cacheFactory","RX_VIEW_DESIGNER",function(a,b){function c(){d.removeAll(),e.removeAll()}var d=a.get(b.layoutNodeCacheId)||a(b.layoutNodeCacheId),e=a.get(b.modelCacheId)||a(b.modelCacheId);return{putLayoutNode:d.put,getLayoutNodeById:d.get,getModelById:e.get,putModel:e.put,clear:c}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDesignerCommandManager",["rxViewDesignerCacheManager",function(a){var b=joint.dia.CommandManager.extend({resetGraph:function(){var a=this.get("graph");a.off("add"),a.off("remove"),a.off("change"),a.resetCells([])},revertCommand:function(b){this.stopListening();var c,d={commandManager:this.id||this.cid};c=_.isArray(b)?b:[b];for(var e=c.length-1;e>=0;e--){var f=c[e],g=this.graph.getCell(f.data.id);switch(f.action){case"add":g.remove();break;case"remove":this.graph.addCell(a.getModelById(f.data.id),d);break;default:var h=f.action.substr(this.PREFIX_LENGTH);g.set(h,f.data.previous[h],d)}}this.listen()},applyCommand:function(b){this.stopListening();var c,d={commandManager:this.id||this.cid};c=_.isArray(b)?b:[b];for(var e=0;e<c.length;e++){var f=c[e],g=this.graph.getCell(f.data.id);switch(f.action){case"add":this.graph.addCell(a.getModelById(f.data.id),d);break;case"remove":g.remove();break;default:var h=f.action.substr(this.PREFIX_LENGTH);g.set(h,f.data.next[h],d)}}this.listen()}});return new b({graph:new joint.dia.Graph,cmdBeforeAdd:function(a,b,c,d){return!(d||{}).ignoreCommandManager}})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").factory("rxViewDesignerComponentManager",["rxViewComponent","rxContainerDesignManager","rxViewComponentDefinitionManager","rxViewDesignerCommandManager","RX_RECORD_EDITOR","RX_VIEW_DEFINITION","rxViewDesignerCacheManager",function(a,b,c,d,e,f,g){function h(){return _.difference(a.getRegisteredComponentTypes(),_.values(e.fields))}function i(a){var d=a.item,e=c.getModel(d),i=a.container,k=a.columnIndex;if(e.set("layoutParentId",i.componentDefinitionId,{ignoreCommandManager:!0}),i.parentModelId){var l=g.getModelById(i.parentModelId);e.set("parentModel",l,{ignoreCommandManager:!0})}j.addCell(e),d.componentDefinitionId=e.get("id"),d.type===f.containerComponent&&(b.initContainerLayoutProperties(d),e.set("allowedTypes",d.allowedTypes||h(),{ignoreCommandManager:!0})),d.index=a.index,d.columnIndex=a.columnIndex,g.putLayoutNode(d.componentDefinitionId,d),i.columns[k].children.splice(a.index,0,d)}var j=d.get("graph");return{addComponent:i,getDefaultAllowedComponentTypes:h}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").provider("rxRuntimeViewState",function(){function a(a){return rx.assert.assertStringWithLength(a),b=a}var b=null;return{runtimeViewState:a,$get:function(){return{get:function(){return rx.assert.assertDefinedAndNotNull(b),b}}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.actions.set-property").directive("rxActionSetPropertyApi",function(){return{restrict:"E",template:"",link:function(a){function b(){var b=a.cell.prop("rxData/propertyPath");if(b&&b.length){var c=b.match(/\${view\.components\.([0-9a-z-]+)\..+}/);c&&c[1]&&a.cell.prop("rxData/componentApi","${view.components."+c[1]+".api}",{rxSilent:!0})}}a.cell.listenTo(a.cell,"change:rxData",b)}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.designer").directive("rxAssociationDesigner",["$q","$timeout","$filter","rxNotificationMessage","dialogs","Restangular","rxDesignerCache","rxBundleCache","rxRecordDefinitionResource","rxGUID","RX_DESIGNER","RX_ASSOCIATION_DEFINITION","RX_RECORD_DEFINITION","RX_ASSOCIATION_DESIGNER","rxAssociationDefinitionResource",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{templateUrl:"scripts/association/designer/association-designer.directive.html",require:["rxAssociationDesigner","ngModel"],scope:{rxConfiguration:"="},controller:["$scope",function(b){var c=this,e=b.fireEvent=function(a){if(b.rxConfiguration){var c=b.rxConfiguration.listeners;c&&_.filter(c,{name:a}).forEach(function(a){angular.isFunction(a.listener)&&a.listener.apply(this)})}};this.closeDesigner=function(){e(n.events.close)},this.getFieldDefinitionIdByRole=function(a,b){return(_.find(a.fieldDefinitions,{name:b.toUpperCase()+"_ID"})||{}).id},this.addFieldDefinitionByRole=function(b,d){return c.getFieldDefinitionIdByRole(b,d)?a.when(b):(b.fieldDefinitions.push({resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition",name:d.toUpperCase()+"_ID",description:null,fieldOption:"OPTIONAL",maxLength:254,defaultValue:null}),b.put().then(function(){return g.getRecordDefinition(b.name,!0).then(function(b){return a.when(b)})}))},this.updateNodeBKeys=function(b,d){return b&&!b.lastUpdateTime&&(b.nodeBKeys=[m.coreFieldIds.id],b.nodeBId&&b.shouldCascadeDelete&&b.nodeAName)?g.getRecordDefinition(b.nodeBId,d).then(function(d){var e=c.getFieldDefinitionIdByRole(d,b.nodeAName);return b.nodeBKeys=e?[e]:[],a.when(d)}):a.when()},this.saveChanges=function(){if(b.rxAssociationDesignerForm.$valid){var f=angular.copy(b.json);c.updateNodeBKeys(f,!0).then(function(b){if(f.nodeBKeys.length||!b)return a.when();var d=f.nodeAName;return c.addFieldDefinitionByRole(b,d).then(function(a){return c.updateNodeBKeys(f)})}).then(function(){if(b.exists){var a=b.ngModel.$viewValue.name,c=angular.extend(b.ngModel.$viewValue,f);return c.name=a,c.put()}return o.post(f)}).then(function(){d.success("Association Definition saved successfully."),b.rxAssociationDesignerForm.$setPristine(),b.ngModel.$setViewValue(f),e(n.events.afterSave)})}}}],link:function(d,f,i,j){var n=j[1],o=j[0],p=h.getBundleId();h.getBundleFriendlyName().then(function(a){d.bundleFriendlyName=a}),d.ngModel=n,d.cardinalities=l.cardinality,d.associationDefinition={},d.$on("$destroy",g.clear),d.closeDesigner=o.closeDesigner,d.saveChanges=o.saveChanges,d.isDesignMode=!0,d.toggleDesignMode=function(){d.isDesignMode=!d.isDesignMode},d.getCardinalityByValue=function(a){return _.find(d.cardinalities,{value:a})||{}};var q=a.defer();n.$render=function(){n.$viewValue&&(d.associationDefinition=n.$viewValue.plain(),d.exists=!!d.associationDefinition.lastUpdateTime,d.associationDefinition.name=c("definitionName")(d.associationDefinition.name),d.exists||(d.associationDefinition.cardinality=d.cardinalities[0].value,d.associationDefinition.isEnabled=!0),q.resolve(d.associationDefinition))},d.rxBusyIndicator={},d.rxBusyIndicator.promise=a.all({model:q.promise,records:g.getRecordDefinitionDescriptors()}).then(function(a){d.isLoaded=!0,d.records=_.map(a.records,"name"),b(function(){f.find('input[name="name"]:enabled, textarea[name="description"]').first().focus()})}),d.$watch("rxAssociationDesignerForm.$error",function(a){d.validationIssues=[],_.forEach(a,function(a,b){a.forEach(function(a){var c=l.validation[b][a.$name];d.validationIssues.push({elementName:d.exists?"Association":"New Association",elementId:null,model:a,type:"error",message:c})})})},!0),d.$watch("associationDefinition",function(a){a&&(d.json=angular.copy(a),p&&p.length&&(d.json.name=[p,c("definitionName")(d.json.name)].join(":")),d.exists||(d.json.nodeAKeys=[m.coreFieldIds.id]))},!0),d.$watch("associationDefinition.cardinality",function(a){d.getCardinalityByValue(a).noConstraint?(d.associationDefinition.shouldCascadeDelete=!1,d.canCascadeDelete=!1):d.canCascadeDelete=!0}),d.$watchGroup(["associationDefinition.nodeBId","associationDefinition.nodeAName","associationDefinition.shouldCascadeDelete"],function(a){o.updateNodeBKeys(d.associationDefinition)}),d.$on(k.events.correctValidationIssue,function(a,b){var c=document.querySelector("[name=rxAssociationDesignerForm] [name="+b.validationIssue.model.$name+"]");c.focus()}),d.rightBladeConfiguration={title:"Properties",tabs:{validationIssues:{group:"test",name:"rx-blade-validation-issues-property-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},d.$on("beforeUnload",function(b,c){c.push(d.rxAssociationDesignerForm.$dirty?e.confirm("Warning!","You have unsaved data. Do you want to continue?").result:a.when())})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade").directive("rxBladeTabContent",function(){return{restrict:"A",require:"^rxBlade",link:function(a,b,c){var d=a.$eval(c.rxBladeTabContent);d.$transcludeFn(d.$parent,function(a){angular.forEach(a,function(a){b.append(a)})})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade").directive("rxBladeTab",["$animate",function(a){return{require:"^rxBlade",restrict:"E",replace:!0,templateUrl:"scripts/components/blade/blade-tab.directive.html",transclude:!0,scope:{active:"=?",iconClass:"=",tabName:"=",onActivate:"=?"},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.activate(b)}),a.enabled(c,!1),b.activate=function(){f.handleTabClick(b)},f.addTab(b),b.$transcludeFn=d}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade").directive("rxBlade",function(){return{templateUrl:"scripts/components/blade/blade.directive.html",controller:"BladeController",transclude:!0,scope:{rxConfiguration:"="}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker").directive("rxDefinitionPicker",["$timeout","$window",function(a,b){return{restrict:"E",templateUrl:"scripts/components/definition-picker/definition-picker.directive.html",scope:{rxSelectedDefinitionName:"=",rxAllowClear:"@",rxType:"@",rxAlign:"@",rxDisabled:"=",rxDefinitionsOnly:"@",rxOnDefinitionSelected:"="},controller:"rxDefinitionPickerController",link:function(c,d){function e(a){c.states.opened&&!$(a.target).closest(d).length&&c.closePopup()}function f(){c.popupTransform="translate("+c.popupOffsetLeft+"px, "+c.popupOffsetTop+"px)"}var g=d.find(".rx-definition-picker__fake-input"),h=d.find(".rx-definition-picker__popup"),i=d.find('[type="search"]'),j=d.scrollParent(),k=angular.element(b);c.popupOffsetTop=c.popupOffsetLeft=0,c.rxAllowClear=c.rxAllowClear!==!1,c.$watch("states.opened",function(b){b?a(function(){c.popupWidth||(c.popupWidth=h.outerWidth()+1),c.popupOffsetTop=-j.scrollTop(),"left"!==c.rxAlign&&(c.popupOffsetLeft=g.outerWidth()-c.popupWidth),h.height()+g.offset().top>k.height()&&(c.popupOffsetTop=c.popupOffsetTop-g.outerHeight()-h.outerHeight()),f(),c.popupVisible=!0}):c.popupVisible=!1}),c.$watch("states.searchOpened",function(b){b&&a(function(){i.focus()})}),k.on("click.blurDefinitionPopup",e),j.on("scroll.definitionPopup",c.closePopup),c.$on("$destroy",function(){k.off("click.blurDefinitionPopup"),j.on("scroll.definitionPopup")})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerBreadcrumbBar",function(){return{restrict:"E",scope:{definitionName:"=",definitionIcon:"@",items:"=",onClick:"&"},templateUrl:"scripts/components/designer/breadcrumb-bar/breadcrumb-bar.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerCanvasPreview",["$timeout",function(a){return{templateUrl:"scripts/components/designer/canvas-preview/designer-canvas-preview.directive.html",scope:{rxModel:"="},link:function(b,c){var d=new joint.dia.Graph,e=new joint.dia.Paper({width:c.width(),height:c.height(),model:d,interactive:!1}),f=new joint.ui.PaperScroller({autoResizePaper:!1,padding:32,paper:e});c.append(f.render().el),f.center(),f.el.scrollTop=0,e.on("blank:pointerdown",f.startPanning),b.rxModel&&(a(function(){f.zoomToFit({padding:30})}),e.model.fromJSON(b.rxModel)),b.onZoomIn=function(){f.zoom(.2,{max:4})},b.onZoomOut=function(){f.zoom(-.2,{min:.2})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerCanvas",["$rootScope","RX_DESIGNER","$timeout","debounce","dialogs",function(a,b,c,d,e){var f=joint.ui.Snaplines.extend({snap:function(a,b,c,d){var e=_.isFunction(this.options.paper.options.interactive)?this.options.paper.options.interactive(a):this.options.paper.options.interactive;e&&joint.ui.Snaplines.prototype.snap.apply(this,arguments)}});return{templateUrl:"scripts/components/designer/canvas/designer-canvas.directive.html",scope:{rxConfiguration:"="},link:function(g,h){function i(a,b){function c(b){e?e==b?f=arguments:(g.cancel(),e=b,a.apply(h,f),f=arguments):(e=b,f=arguments),g.apply(h,arguments)}var e,f,g=d(a,b),h=this;return c}function j(a){for(var b=";base64,",c=a.split(b),d=c[0].split(":")[1],e=window.atob(c[1]),f=e.length,g=new Uint8Array(f),h=0;h<f;++h)g[h]=e.charCodeAt(h);return new Blob([g],{type:d})}var k=g.rxConfiguration||{},l=new joint.dia.Graph,m=joint.ui.Halo.extend({initialize:function(){joint.ui.Halo.prototype.initialize.apply(this,arguments),this.removeHandle("rotate")},removeElement:function(){var d=this;c(function(){a.$broadcast(b.events.beforeCellRemoved,{cell:d.options.cellView.model,graph:l})}),joint.ui.Halo.prototype.removeElement.apply(this,arguments)},update:function(){joint.ui.Halo.prototype.update.apply(this,arguments),this.options.cellView.model.get("inCallActivity")?this.$el.attr("data-parent-type","rx.CallActivity"):this.$el.removeAttr("data-parent-type"),this.options.cellView.model.get("expanded")?this.$el.addClass("rx-cell-expanded"):this.$el.removeClass("rx-cell-expanded")},options:function(){var a=_.cloneDeep(joint.ui.Halo.prototype.options);return a.clone=function(a,b){var c=joint.ui.Halo.prototype.options.clone.apply(this,arguments),d=a.prop("position");return c.prop("position/x",d.x+10),c.prop("position/y",d.y+10),c},k.haloConfig&&_.forEach(k.haloConfig.customHandles,function(b){a.handles.push(b)}),a}()});g.interactive=k.interactive;var n=new joint.dia.CommandManager({graph:l,cmdNameRegex:/^(?:add|remove|change:(?!rxInspector)\w+)$/,cmdBeforeAdd:function(a,b,c,d){return d=d||{},this.enabled&&!d.ignoreCommandManager}}),o={width:1e3,height:800,model:l,gridSize:5,defaultLink:k.defaultLink||new joint.shapes.bpmn.Flow,embeddingMode:!0,validateEmbedding:function(a,b){return a.model.canBeEmbedded(b,p)&&b.model.canEmbedElement(a,p)}};_.isUndefined(k.interactive)?o.interactive=!0:o.interactive=k.interactive;var p=new joint.dia.Paper(o),q=new joint.ui.PaperScroller({autoResizePaper:!0,padding:32,paper:p});if(g.interactive&&(n.enabled=!0,n.enable=function(){this.enabled=!0},n.disable=function(){this.enabled=!1},l.on("add",function(d,e,f){c(function(){a.$broadcast(b.events.cellAdded,{cell:d,
graph:l,options:f})})}),l.on("remove",function(d,e,f){c(function(){a.$broadcast(b.events.cellRemoved,{cell:d,graph:l,options:f})})}),l.on("change",function(d){(d.changed.rxData||d.isLink()&&(d.changed.source&&d.changed.source.id||d.changed.target&&d.changed.target.id))&&c(function(){a.$broadcast(b.events.cellChanged,{cell:d,graph:l})}),d.changed.hasOwnProperty("parent")&&c(function(){a.$broadcast(b.events.cellReparented,{cell:d,graph:l})})}),l.on("add remove change",i(function(d,e,f){c(function(){a.$broadcast(b.events.graphChanged,{graph:l,cell:d,options:f||{}})})},100)),new joint.ui.rx.MoveElements({paper:p})),h.append(q.render().el),q.center(),q.el.scrollTop=0,c(function(){q.center(),q.el.scrollTop=0}),p.on("blank:pointerdown",q.startPanning),p.on("cell:pointerup",function(d){if(d){if(d.model instanceof joint.dia.Link)m.clear(p);else{var e=new m({graph:l,paper:p,cellView:d});k.haloConfig&&k.haloConfig.handleValidation&&k.haloConfig.handleValidation(e),e.render()}c(function(){a.$broadcast(b.events.cellPointerUp,{cellView:d})})}}),!k.multiSelectionDisabled){var r=new Backbone.Collection,s=new joint.ui.SelectionView({paper:p,graph:l,model:r,useModelGeometry:!0});s.removeHandle("rotate"),s.on("selection-box:pointerdown",function(a){if(a.ctrlKey||a.metaKey){var b=r.get($(a.target).data("model"));r.reset(r.without(b)),s.destroySelectionBox(p.findViewByModel(b))}})}if(g.interactive&&(p.on("cell:expand:begin cell:collapse:begin",function(){n.disable()}),p.on("cell:expand:done cell:collapse:done",function(a){a.model.get("inCallActivity")||n.enable()}),g.undo=function(){var a=_.first(_.last(n.undoStack));if(a&&_.isArray(a.options.propertyValue)){var b=joint.util.getByPath(a.data.previous,a.options.propertyPath,"/"),c=joint.util.getByPath(a.data.next,a.options.propertyPath,"/");if(c.length>b.length)return void e.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){n.undo()})}n.undo()},g.redo=function(){var a=_.first(_.last(n.redoStack));if(a&&_.isArray(a.options.propertyValue)){var b=joint.util.getByPath(a.data.previous,a.options.propertyPath,"/"),c=joint.util.getByPath(a.data.next,a.options.propertyPath,"/");if(b.length>c.length)return void e.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){n.redo()})}n.redo()},g.hasUndo=function(){return n.hasUndo()},g.hasRedo=function(){return n.hasRedo()},g.onIncreaseGridSize=function(){g.options.gridSize<20&&g.options.gridSize++},g.onDecreaseGridSize=function(){g.options.gridSize>1&&g.options.gridSize--},g.onClear=function(){e.confirm("Warning!","Are you sure you want to clear the canvas?").result.then(function(){var a=l.get("cells").models;l.trigger("batch:start");var b=_.filter(a,function(a){return a instanceof joint.dia.Cell&&a.isRemovable!==!1});_.forEach(b,function(a){a.remove()}),l.trigger("batch:stop")})},g.$watch("options.gridSize",function(){p.options.gridSize=g.options.gridSize;var a=$("<canvas/>",{width:g.options.gridSize,height:g.options.gridSize});a[0].width=g.options.gridSize,a[0].height=g.options.gridSize;var b=a[0].getContext("2d");b.beginPath(),b.rect(1,1,1,1),b.fillStyle="#AAAAAA",b.fill();var c=a[0].toDataURL("image/png");p.$el.css("background-image",'url("'+c+'")')}),g.options={gridSize:5,snaplinesEnabled:!0},!k.snapLinesDisabled)){var t=new f({paper:p});g.onSnaplinesChange=function(){g.options.snaplinesEnabled?t.startListening():t.stopListening()}}g.onZoomIn=function(){q.zoom(.2,{max:4})},g.onZoomOut=function(){q.zoom(-.2,{min:.2})},g.onPrint=function(){p.print()},g.dispatchActionEvent=function(b){a.$broadcast(b)},p.on("blank:pointerdown",function(a){k.multiSelectionDisabled||(a.shiftKey?s.startSelecting(a):s.cancelSelection())}),p.on("cell:pointerup",function(a,b){b&&!k.multiSelectionDisabled&&(!b.ctrlKey&&!b.metaKey||a.model instanceof joint.dia.Link||(r.add(a.model),s.createSelectionBox(a)))}),p.on("blank:pointerdown",function(){c(function(){a.$broadcast(b.events.blankPointerDown)})}),g.exportToPng=function(){p.toPNG(function(a){saveAs(j(a),_.isFunction(k.getModelName)?k.getModelName():"download.jpg")},{padding:10,width:p.el.clientWidth,height:p.el.clientHeight,quality:1})},a.$broadcast(b.events.canvasReady,{paper:p,commandManager:n})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerInspector",["$rootScope","$compile","RX_DESIGNER","dialogs","rxPropertyNavigator","$timeout",function(a,b,c,d,e,f){var g=joint.ui.Inspector.extend({initialize:function(){joint.ui.Inspector.prototype.initialize.apply(this,arguments),this._hasCustomEditors=!1,this._scope=this.options.$scope.$new()},renderFieldContent:function(a,c,d){if(0===a.type.indexOf("rx-")){var e=this._scope.$new(!0);return e.path=c,e.value=d,e.options=a,e.cell=this.options.cell,this._hasCustomEditors=!0,b(document.createElement(a.type))(e)}return joint.ui.Inspector.prototype.renderFieldContent.apply(this,[a,c,d])},onRemove:function(){joint.ui.Inspector.prototype.onRemove.apply(this,arguments),this._scope.$destroy()},renderTemplate:function(a,b,c,d){if("list"===b.type&&"properties"!==b.group&&a.addClass("rx-group-list"),"object"===b.type&&b.properties&&(b.flatAttributes=joint.util.flattenObject(b.properties,"/",function(a){return a.type})),joint.ui.Inspector.prototype.renderTemplate.apply(this,[a,b,c,d]),a.find("button").attr("type","button"),this._hasCustomEditors){var e=this;this._hasCustomEditors=!1,f(function(){e.trigger("render")})}},deleteListItem:function(a){var b=this;d.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){f(function(){joint.ui.Inspector.prototype.deleteListItem.apply(b,[a])})})},addListItem:function(a){var b=this;this.options.live=!1,joint.ui.Inspector.prototype.addListItem.apply(this,arguments),this.options.live=!0,f(function(){b.updateCell()})},renderOwnFieldContent:function(a){if(a.label&&(a.label+=":"),"select"===a.type){var b=$("<label/>").text(a.label),c=$("<select/>",{size:a.options.length}).prop("multiple",!!a.multiple);_.each(a.options.items,function(b){var d=$("<option/>",{value:b.value}).text(b.content);b.value===a.value&&d.attr("selected","selected"),c.append(d)});var d=[b,c];return c&&c.addClass(a.type).attr({"data-type":a.type,"data-attribute":a.attribute}),$.fn.append.apply($("<div>"),d).children()}return joint.ui.Inspector.prototype.renderOwnFieldContent.apply(this,arguments)},onCellChange:function(a,b,c,d){d=d||{},d.rxSilent||joint.ui.Inspector.prototype.onCellChange.apply(this,arguments)}});return{templateUrl:"scripts/components/designer/inspector/designer-inspector.directive.html",scope:{target:"=",rxConfiguration:"="},link:function(b,d){function f(){b.inspector&&(b.inspector.options.cell.off("rx:change:inputs",i),b.inspector.remove(),b.inspector=null)}function h(a){var c=a.get("rxInspector"),d=c.groups||{},e=c.inputs||{};return{$scope:b,inputs:e,groups:d,cell:a}}function i(a,c){c=c||{},b.inspector&&a.get("id")===b.inspector.options.cell.get("id")&&(c.scrollPosition=b.inspector.$el.scrollTop()),f(),j(a,c)}function j(f,j){var k=h(f);b.inspector=new g(k),b.inspector.on("render",function(){var b=_.map(this.$el.find(".rx-expression-node-renderer"),function(a){return{label:a.getAttribute("for-expression-editor-label"),path:a.getAttribute("for-expression-editor-path")}});e.setExpressionFields(b),a.$broadcast(c.events.inspectorReady)});var l=b.inspector.render().el;$(l).find("button").attr("type","button"),d.find("> div").append(l),j.scrollPosition&&(l.scrollTop=j.scrollPosition),b.inspector.options.cell.on("rx:change:inputs",i)}b.inspector=null,b.$watch("target",function(a){a&&a.get("rxInspector")?i(a):f()})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorApprovalFlowSelectorField",["$uibModal",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/approval-flow-selector/inspector-approval-flow-selector-field.directive.html",link:function(b){b.openDialog=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/approval-flow-selector/approval-flow-selector-dialog.html",controller:"ApprovalFlowSelectorDialogController",backdrop:"static",resolve:{context:{cell:b.cell,path:b.path}},windowClass:"rx-approval-flow-selector-dialog"})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorColumnSpan",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/column-span/inspector-column-span.directive.html",link:function(b,c){function d(){_.each(i.find("td"),function(a,c){b.columns[c].span=Math.round($(a).width()/j)}),h.trigger("layout:columnSpan")}function e(){b.columns=h.layoutTree.columns,b.$watchCollection("columns",f)}function f(){g(),b.columns=h.layoutTree.columns,a(function(){i.colResizable({liveDrag:!0,draggingClass:"",onResize:function(){a(d)},minWidth:j})})}function g(){i.colResizable({disable:!0})}var h=b.cell,i=c.find("table"),j=20,k=b.$watch("cell.layoutTree",function(a){a&&(e(),k())});b.$on("$destroy",function(){g()})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxCustomizationPerspective",["$q","$rootScope","$compile","dialogs","RX_OVERLAY","rxOverlay",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/customization-perspective/customization-perspective.directive.html",link:function(a,b){function g(){var b=a.cell.get("isReverted");return b?e.operationTypes.NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP:f.getOverlayOperation(j.overlayGroupId,j.overlayDescriptor?j.overlayDescriptor.parentOverlayGroupId:null)}function h(){return a.overlayOperation!==e.operationTypes.CUSTOMIZED_IN_THIS_OVERLAY_GROUP||(_.has(j,"allowFieldsOverlay")?!(j.allowFieldsOverlay&&j.allowPermissionsOverlay&&j.allowOtherPropertiesOverlay&&j.allowIndexesOverlay):_.has(j,"allowOtherPropertiesOverlay")?!(j.allowPermissionsOverlay&&j.allowOtherPropertiesOverlay):!!_.has(j,"allowOverlay")&&!j.allowOverlay)}function i(){j.overlayGroupId?(a.overlayOperation=g(),a.isOverlayOperationHidden=e.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP==a.overlayOperation,a.cell.set("overlayOperation",a.overlayOperation,{silent:!0,ignoreCommandManager:!0}),a.isRevertActionHidden=h()):(a.overlayOperation=e.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP,a.isOverlayOperationHidden=!0,a.isRevertActionHidden=!0)}var j=a.cell.get("rxData");if(i(),a.options.customizationOptionsDirective){var k=a.$new(!0),l=angular.element(document.createElement(a.options.customizationOptionsDirective));l.attr("rx-configuration","config"),_.assign(k,{config:{cell:a.cell,definitionName:a.options.definitionName}}),b.append(c(l)(k))}a.revertCustomization=function(){d.confirm("Warning!",a.options.revertPrompt).result.then(function(){return _.isFunction(a.options.revertCommand)?a.options.revertCommand(a.options.definitionName).then(function(){a.$emit(a.options.revertCompleteEventName,a.cell)}):void a.$emit(a.options.revertCompleteEventName,a.cell)})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorDefinitionPicker",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/definition-picker/inspector-definition-picker.directive.html",link:function(b,c){var d=c.find("[data-attribute]").eq(0);b.data={value:b.value},_.has(b.options.attrs,"label.class")&&(b.required=_.includes(b.options.attrs.label["class"],"required")),b.$watch("data.value",function(b,c){b!=c&&a(function(){d.change()})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionFieldLabel",["$rootScope","RX_EXPRESSION_EDITOR",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/expression-field-label/inspector-expression-field-label.directive.html",scope:{path:"=",cell:"=",value:"=",label:"=",required:"="},link:function(c){c.openEditor=function(){a.$broadcast(b.events.openExpressionEditor,{cell:c.cell,path:c.path})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxExpressionNodeRenderer",["$compile","$rootScope","rxExpressionHelper","RX_EXPRESSION_EDITOR",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/expression-node-renderer/expression-node-renderer.directive.html",scope:{path:"=",cell:"=",value:"=",label:"="},link:function(e,f){function g(a,b,c,d,e){var f,g=e||"";if(_.isFunction(c))f=d.replace(b,function(b){return'<span class="rx-inspector-'+a+'-tag" ${tooltip}>'+c(b)+"</span>"});else{var h='<span class="rx-inspector-'+a+'-tag" ${tooltip}>'+c+"</span>";f=d.replace(b,h)}var i=g.replace("&","&amp;").replace('"',"&quot;");return f.replace("${tooltip}",i?'tooltip-trigger="outsideClick mouseenter" uib-tooltip="'+i+'" tooltip-append-to-body="true"':"")}function h(){if(e.displayedValueHTML="",e.value){e.displayedValueHTML=e.value.toString();var a=c.extractTokens(j,"RX_EXPRESSION",e.displayedValueHTML),b=c.extractTokens(k,"RX_STRING",a.expression);a.matches=_.map(a.matches,function(a){var b=_.find(e.flattenDictionary,function(b){return _.isArray(b.value)?_.includes(b.value,a.replace(/\\/g,"")):b.value==a.replace(/\\/g,"")});return g(b?"expression":"invalid",a,b?b.label:"Error",a,b?b.tooltip:"Error")});var f=a.expression,h=_.flatten(e.cell.getExpressionConfigurator().getOperators(e.path)||d.operators.math),l=new RegExp("("+_(h).pluck("contentValue").compact().sortBy(function(a){return-a.length}).map(function(a){return"\\"+a.split("").join("\\")}).join("|")+")","g"),m=function(a){return _.find(h,{contentValue:a}).displayValue};f=g("operator",l,m,f),f=c.insertTokens(a.matches,"RX_EXPRESSION",f),e.displayedValueHTML=c.insertTokens(b.matches,"RX_STRING",f)}e.displayedValueHTML&&i(e.displayedValueHTML)}function i(b){var c=f.find(".full-expression"),d=angular.element('<div class="rx-compiled-expression">'+b+"</div>"),g=a(d)(e);c.empty(),c.append(g)}e.displayedValueHTML="";var j=/(\$[^{} ]+\$)|(\${[^{]+})/g,k=/"[^"]+"/g;e.$watch(function(){return e.cell.prop(e.path)},function(a){_.isUndefined(a)||(e.value=a,e.flattenDictionary=e.cell.getExpressionConfigurator().getDataDictionary(e.path),h())}),e.$on(d.events.refreshExpression,function(){e.flattenDictionary=e.cell.getExpressionConfigurator().getDataDictionary(e.path),h()}),e.openEditor=function(){b.$broadcast(d.events.openExpressionEditor,{cell:e.cell,path:e.path})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorGetRecordsInputMapFields",["$uibModal","RX_RECORD_DEFINITION",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/get-records-input-map-fields/inspector-get-records-input-map-fields-dialog.directive.html",link:function(c){var d=c.cell.getRecordDefinitionName(),e=_.get(c,"options.attributes.enforceRequiredFields",!1);c.inputMap=c.cell.prop("rxData/inputMap"),c.showRecordDefinitionPicker&&(c.onRecordDefinitionSelected=function(a){c.cell.prop("rxData/inputMap/recordDefinitionName","",{silent:!0}),c.cell.prop("rxData/inputMap/recordDefinitionName",a)}),d&&(c.inputMapFields=_.map(_.get(c.cell,'inputMapFields["'+d+'"]'),function(a){return a.value=c.inputMap[a.name]||"",c.inputMap[a.name]=a.value||"",a}),c.cell.getCurrentRecordDefinition().then(function(a){if(a){c.recordDefinition=_.cloneDeep(a),c.fieldDefinitions=_.filter(c.recordDefinition.fieldDefinitions,function(a){return"SYSTEM"!=a.fieldOption&&a.id!==b.coreFieldIds.id&&a.id!==b.coreFieldIds.guid});var f=function(a){a._required=e&&"REQUIRED"===a.fieldOption&&(null===a.defaultValue||""===a.defaultValue),a._path="rxData/inputMap/"+a.name,a.value=c.inputMap[a.name]||void 0};if(c.inputMapFields.length)_.forEach(c.inputMapFields,function(a){a._required=e&&"REQUIRED"===a.fieldOption&&(null===a.defaultValue||""===a.defaultValue)}),_.forEach(c.fieldDefinitions,function(a){f(a),e&&a._required&&!_.find(c.inputMapFields,{name:a.name})&&c.inputMapFields.unshift(a)});else{var g=c.inputMap.fieldIDs?c.inputMap.fieldIDs.replace(/^\"|\"$/g,"").split(","):[];c.inputMapFields=_.remove(c.fieldDefinitions,function(a){return f(a),_.includes(g,String(a.id))})}}if(!c.cell.inputMapFields){var h={};h[d]=c.inputMapFields,c.cell.inputMapFields=h}})),c.removeField=function(a){c.inputMapFields=_.omit(c.inputMapFields,function(b,c){return b.id===a});var b={};b[d]=c.inputMapFields,c.inputMap.fieldIDs=_(c.inputMapFields).map("id").join(),c.cell.prop("rxData/inputMap/fieldIDs",null,{silent:!0}),c.cell.prop("rxData/inputMap/fieldIDs",c.inputMap.fieldIDs),c.cell.inputMapFields=b},c.openInputMapFieldsEditor=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/input-map-fields/input-map-fields-dialog.html",controller:"InputMapFieldsDialogController",backdrop:"static",resolve:{inputMapFieldsContext:{recordDefinition:c.recordDefinition,fieldDefinitions:c.fieldDefinitions,fields:c.inputMapFields}},windowClass:"rx-input-map-fields-dialog"}).result.then(function(a){c.inputMapFields=a;var b={};b[d]=c.inputMapFields,c.inputMap.fieldIDs=_(c.inputMapFields).map("id").join(),c.cell.prop("rxData/inputMap/fieldIDs",null,{silent:!0}),c.cell.prop("rxData/inputMap/fieldIDs",c.inputMap.fieldIDs),c.cell.inputMapFields=b})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorInputMapFields",["$uibModal","RX_RECORD_DEFINITION",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/input-map-fields/inspector-input-map-fields.directive.html",link:function(c){var d=c.cell.getRecordDefinitionName(),e=_.get(c,"options.attributes.enforceRequiredFields",!0),f=function(a){return e&&"REQUIRED"===a.fieldOption&&(null===a.defaultValue||""===a.defaultValue||a.resourceType===b.dataTypes.integer.resourceType&&0===a.defaultValue)};c.inputMap=c.cell.prop("rxData/inputMap"),c.showRecordDefinitionPicker=c.inputMap.hasOwnProperty("recordDefinitionName"),c.inputMapRecordDefinitionName=c.inputMap.recordDefinitionName,c.showRecordId=c.inputMap.hasOwnProperty("recordID"),c.recordIdPath="rxData/inputMap/recordID",c.showRecordDefinitionPicker&&(c.onRecordDefinitionSelected=function(a){c.cell.prop("rxData/inputMap/recordDefinitionName","",{silent:!0}),c.cell.prop("rxData/inputMap/recordDefinitionName",a)}),d&&(c.inputMapFields=_.map(_.get(c.cell,'inputMapFields["'+d+'"]'),function(a){return a.value=c.inputMap[a.name]||"",c.inputMap[a.name]=a.value,a}),c.cell.getCurrentRecordDefinition().then(function(a){if(a){c.recordDefinition=_.cloneDeep(a),c.fieldDefinitions=_.filter(c.recordDefinition.fieldDefinitions,function(a){return"SYSTEM"!=a.fieldOption&&a.id!==b.coreFieldIds.id&&a.id!==b.coreFieldIds.guid});var g=function(a){a._required=f(a),a._path="rxData/inputMap/"+a.name,a.value=c.inputMap[a.name]||void 0};c.inputMapFields.length?(_.forEach(c.inputMapFields,function(a){a._required=f(a)}),_.forEach(c.fieldDefinitions,function(a){g(a),e&&a._required&&!_.find(c.inputMapFields,{name:a.name})&&c.inputMapFields.unshift(a)})):c.inputMapFields=_.remove(c.fieldDefinitions,function(a){return g(a),c.inputMap[a.name]=c.inputMap[a.name]||"",a._required||c.inputMap[a.name]})}if(!c.cell.inputMapFields){var h={};h[d]=c.inputMapFields,c.cell.inputMapFields=h}})),c.openInputMapFieldsEditor=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/input-map-fields/input-map-fields-dialog.html",controller:"InputMapFieldsDialogController",backdrop:"static",resolve:{inputMapFieldsContext:{recordDefinition:c.recordDefinition,fieldDefinitions:c.fieldDefinitions,fields:c.inputMapFields}},windowClass:"rx-input-map-fields-dialog"}).result.then(function(a){c.inputMapFields=a;var b={};b[d]=a,_.forEach(c.inputMap,function(b,d){!b||_.includes(["recordDefinitionName","recordID"],d)||_.find(a,{name:d})||(c.inputMap[d]="")}),c.cell.prop("rxData/inputMap","",{silent:!0}),c.cell.prop("rxData/inputMap",c.inputMap),c.cell.inputMapFields=b})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorCheckboxMultiselectField",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-checkbox-multiselect.directive.html",link:function(a,b){function c(){a.cell.prop(a.path,"",{silent:!0}),a.cell.prop(a.path,a.selectedOptions)}if(a.selectedOptions=a.cell.prop(a.path),a.groups=[],_.isArray(a.options.options)&&!_.isEmpty(a.options.options)){var d=_.isArray(a.options.options[0])?a.options.options:[a.options.options];a.groups=_.map(d,function(a){return _.map(a,function(a){return{value:a.value||a,isChecked:a.isChecked,content:a.content||a}})}),_.isEmpty(a.selectedOptions)||_.forEach(a.selectedOptions,function(b){_.forEach(a.groups,function(a){var c=_.find(a,{value:b});c&&(c.isChecked=!0)})})}a.updateSelection=function(b){_.includes(a.selectedOptions,b)?_.pull(a.selectedOptions,b):a.selectedOptions.push(b),c()}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorCheckboxField",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-checkbox.directive.html"}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorDatepicker",["$timeout","uibDateParser",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-datepicker.directive.html",controller:["$scope",function(a){var c=b.parse(a.value,"yyyy-MM-dd");_.isDate(c)&&(a.value=c),a.datepickerOptions={showWeeks:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0}}],link:function(b,c){var d=c.find("[data-attribute]").eq(0);b.$watch("value",function(b,c){b!==c&&a(function(){d.change()})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorDatetimepicker",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-datetimepicker.directive.html",controller:["$scope",function(a){a.datepickerOptions={showWeeks:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0}}],link:function(b,c){var d=c.find("[data-attribute]").eq(0);if(b.value){var e=new Date;e.setTime(Date.parse(b.value)),b.datetime=e}b.$watch("datetime",function(c,e){c!==e&&(b.value=_.isDate(c)?c.toISOString():c,a(function(){d.change()}))})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionField",["RX_EXPRESSION_EDITOR","rxExpressionEditor","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-expression-field.directive.html",link:function(b){b.openEditor=function(){c.$broadcast(a.events.openExpressionEditor,b.path)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionInputSelect",["$timeout","rxExpressionEditor","$rootScope","RX_EXPRESSION_EDITOR",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-expression-input-select.directive.html",link:function(b,e){var f=e.find("[data-attribute]").eq(0),g=_.map(b.options&&b.options.options||[],function(a){return _.isString(a)?{content:a,value:a}:a});if(b.selectOptions=_.pluck(g,"content"),b.value=b.value||"",b.model={value:b.value},b.value){var h=_.find(g,{value:b.value});h&&(b.model.value=h.content)}_.contains(b.selectOptions,"")||b.selectOptions.unshift(""),b.onSelect=function(c){_.isUndefined(c)?(b.model.value="",b.value=""):(h=_.find(g,{content:c}),h?(b.model.value=h.content,b.value=h.value):(b.model.value=c,b.value=c)),a(function(){f.change()})},b.openEditor=function(){c.$broadcast(d.events.openExpressionEditor,b.path)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionNodeField",["$sce","$rootScope","rxExpressionHelper","RX_EXPRESSION_EDITOR",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-expression-node-field.directive.html",link:function(a){a.openEditor=function(){b.$broadcast(d.events.openExpressionEditor,{path:a.path,cell:a.cell})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionSelect",["RX_EXPRESSION_EDITOR","$rootScope",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-expression-select.directive.html",link:function(c){var d=_.find(c.options.options,{content:"[Dynamic]"});c.$watch("value",function(b){b&&(b.match(/\$\{.*\}/)||" "===b)?(d.value=b," "===c.value&&producer.broadcast(a.events.openExpressionEditor,c.path)):d.value=" "}),c.openEditor=function(){b.$broadcast(a.events.openExpressionEditor,c.path)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorExpressionTextareaField",["RX_EXPRESSION_EDITOR","rxExpressionEditor","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-expression-textarea-field.directive.html",link:function(b){b.openEditor=function(){c.$broadcast(a.events.openExpressionEditor,b.path)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorFilterSelect",["rxDesignerCache","$timeout","translateFilter",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-filter-select.directive.html",link:function(d,e){var f=e.find("[data-attribute]");d.filterData=d.value?JSON.parse(d.value):[],a.getRecordDefinition(d.cell.get("rxData").recordDefinitionName).then(function(a){if(a){var e=_.map(a.fieldDefinitions,function(a){var b=a.resourceType.split(".").pop().replace(/fieldDefinition/i,""),c={field:a.id.toString(),displayName:a.name,type:b,options:a.optionNamesById};return a.minValue&&(c.minValue=a.minValue),a.maxValue&&(c.maxValue=a.maxValue),c});d.filterConfiguration={fields:e,label:c("com.bmc.arsys.rx.standardlib.components.search-filter.button.filterTrigger.label"),showPills:!0},d.$watchCollection("filterData",function(){var a=JSON.stringify(d.filterData);d.value!==a&&(d.value=a,b(function(){f.trigger("change")}))})}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorGroupButton",["uibButtonConfig","$timeout",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-group-button.directive.html",link:function(c,d){function e(a,b,d){d.propertyPath==c.path&&(c.data.value=c.cell.prop(c.path))}c.data={value:c.value},a.activeClass="is-checked";var f=d.find("[data-attribute]");c.cell.listenTo(c.cell,"change:rxData",e),c.$on("$destroy",function(){c.cell.off("change:rxData",e)}),c.$watch("data.value",function(a,c){a!==c&&b(function(){f.change()})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorInputSelect",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-input-select.directive.html",link:function(b,c){var d=c.find("[data-attribute]").eq(0);b.value=b.value||"",b.model={value:b.value},b.selectOptions=b.options&&b.options.options||[],b.onSelect=function(a){b.value=a},b.$watch("model.value",function(b,c){b!==c&&a(function(){d.change()})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorMultiselectDropdown",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-multiselect-dropdown.directive.html",controller:["$scope",function(a){a.selectOptions=[],a.search=""}],link:function(a,b){function c(){angular.element(event.target).closest(".d-dropdown-menu").length||angular.element(event.target).closest(".d-dropdown-trigger").length||(f.removeClass("open"),g.removeClass("__pressed"),d())}function d(){var b={};_(angular.copy(a.selectOptions)).filter({checked:!0}).each(function(a){b[a.value]={}}).value(),b.setValueBeforeDestroy=a.cell.prop(a.path+"/setValueBeforeDestroy"),!_.isEqual(b,a.cell.prop(a.path))&&_.keys(b).length>1&&(a.cell.prop(a.path,"",{silent:!0}),a.cell.prop(a.path,b))}function e(b){return b.length?_.map(b,function(b){var c=_.cloneDeep(b);return c.checked=_.isObject(a.cell.prop(a.path)[b.value]),c}):[]}var f=b.find(".d-dropdown"),g=b.find(".d-dropdown__trigger");a.dropdownToggle=function(){f.toggleClass("open"),g.toggleClass("__pressed")},a.$watch("options.options",function(){a.selectOptions=e(a.options.options||[])}),angular.element(document).on("click",c),a.$on("$destroy",function(){a.cell.prop(a.path+"/setValueBeforeDestroy")&&(d(),a.cell.prop(a.path+"/setValueBeforeDestroy",!0,{silent:!0})),angular.element(document).off("click",c)})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorNumberInput",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-number-input.directive.html",link:function(a,b){function c(b){_.isUndefined(b)||(a.lastValidValue=b)}function d(b){_.isUndefined(b)&&(f.$setViewValue(a.lastValidValue),e.val(a.lastValidValue),e.trigger("change"),f.$render())}var e=b.find("input"),f=e.controller("ngModel");a.attrs={},a.lastValidValue=a.value||null,a.onChange=c,a.onBlur=d,_.isObject(a.options&&a.options.attrs)&&_.each(a.options.attrs,function(c,d){var e=b.find(d);e.length&&_.isObject(c)&&_.each(c,function(b,c){e.attr(c,b),a.attrs[c]=b})})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorOptionalExpression",["$rootScope","$timeout","RX_EXPRESSION_EDITOR",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-optional-expression.directive.html",link:function(d,e){function f(){d.value=_.isUndefined(d.value)?0:d.value,_.isNaN(Number(d.value))||(d.value=Number(d.value)),_.isString(d.value)?(d.state.checkbox=!0,d.state.select=d.SELECT_STATE.CONDITIONAL):1==d.value&&(d.state.checkbox=!0)}var g=e.find("[data-attribute]");d.SELECT_STATE={ALWAYS:"0",CONDITIONAL:"1"},d.selectConfig={options:[{value:d.SELECT_STATE.ALWAYS,content:"At all times"},{value:d.SELECT_STATE.CONDITIONAL,content:"When condition is true"}]},d.state={checkbox:!1,select:d.SELECT_STATE.ALWAYS},d.$watch("state.checkbox",function(a,b){a!==b&&(d.value=d.state.checkbox?1:0,d.state.select=d.SELECT_STATE.ALWAYS)}),d.$watch("state.select",function(a,b){a!==b&&d.state.checkbox&&(d.state.select==d.SELECT_STATE.ALWAYS?d.value=1:d.value="")}),d.$watch("value",function(a,c){a!=c&&b(function(){g.trigger("change")})}),d.openEditor=function(){a.$broadcast(c.events.openExpressionEditor,d.path)},f()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorOptionalSelect",["$timeout","rxUtils",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-optional-select.directive.html",link:function(c,d){function e(){c.value=_.isUndefined(c.value)?"":c.value,b.isNonEmptyString(c.value)&&(c.state.checkbox=!0,c.state.select=c.value)}var f=d.find("[data-attribute]");c.state={checkbox:!1,select:""},e(),c.$watch("state.checkbox",function(a,b){a!==b&&(c.state.checkbox?c.state.select=c.options.options[0].value:(c.value="",
c.state.select=null))}),c.$watch("state.select",function(a,b){a!==b&&c.state.checkbox&&(c.value=c.state.select)}),c.$watch("value",function(){a(function(){f.trigger("change")})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxPermissionEditor",["$uibModal","$timeout","$q","$stateParams","rxDesignerCache","rxOverlay","rxRecordDefinitionResource","RX_OVERLAY","RX_PERMISSION","RX_DESIGNER","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-permission-editor.directive.html",link:function(b){function g(){var a,c=b.cell.get("type");return _.each(i.instancesWithPermissions,function(b){var d=new RegExp(b,"i");c.match(d)&&(a=b)}),a}function l(a,b){return a.inheritanceDescriptor&&a.inheritanceDescriptor.isInheritingFieldPermissions&&b.isInherited}function m(){var a=b.cell.get("isReverted");return a?h.operationTypes.NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP:f.getOverlayOperation(s.overlayGroupId,t.parentOverlayGroupId)}function n(a){a.permissions=_.map(_.cloneDeep(a.permissions),function(a){return _.omit(a,"ownerName")}),b.value=a.permissions,r?b.cell.trigger(j.events.permissionsChanged,a):b.cell.trigger(j.events.permissionsChanged,a.permissions)}var o,p=g(),q=i.permissionDialogMetadata[p],r=!1,s=b.cell.get("rxData"),t=s.overlayDescriptor||{parentOverlayGroupId:null},u=[],v=[];if(p===i.editorContexts.field&&b.cell.collection._byId.recordDefinition){var w=b.cell.collection._byId.recordDefinition.get("rxData");b.isPermissionEditDisabled=l(w,s),v=w.securityLabels||[]}if(_.includes(i.haveOverlayLogic,p)&&s.lastUpdateTime){var x=m();x!==h.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP&&(r=!0)}c.all({groups:e.getGroupDataPage(),roles:e.getRoleDataPage(),baseData:r?e.getRecordDefinitionFromOverlay(d.name,t.parentOverlayGroupId):c.when([])}).then(function(a){var c=a.groups,d=a.roles,e=_.union(c,d);if(o=_.cloneDeep(b.value),!q.defaultPermission||s.lastUpdateTime||s.permissions||(o=[{ownerId:q.defaultPermission,type:q.defaultPermittedAction}]),s.id){var f=_.find(a.baseData.fieldDefinitions,{id:s.id});u=f?_.cloneDeep(f.permissions):[]}else u=_.cloneDeep(a.baseData.permissions)||[];_.each(u,function(a){var b=_.find(e,function(b){return _.includes([b.roleID,b.groupId],a.ownerId.value)});a.ownerName=b.groupName||b.roleName}),b.effectivePermissions=[],r&&(t.permissionsOverlayType&&!_.includes([h.overlayTypes.additive,h.overlayTypes.unmodified],t.permissionsOverlayType)||(b.effectivePermissions=u)),_.each(o,function(a){var b=_.find(e,function(b){return _.includes([b.roleID,b.groupId],a.ownerId.value)});(!b&&v||a.ownerId.value>=k.SECURITY_LABEL_IDS.MIN&&a.ownerId.value<=k.SECURITY_LABEL_IDS.MAX)&&(b=_.find(v,{id:a.ownerId.value})),a.ownerName=b.groupName||b.roleName||b.name}),b.effectivePermissions=_.unique(_.union(b.effectivePermissions,o),function(a){return a.ownerName+a.type})}),b.openPermissionEditor=function(){var c=a.open({templateUrl:"scripts/components/designer/editors/permission-editor-dialog.html",controller:"PermissionEditorDialogController",backdrop:"static",resolve:{assignedPermissions:function(){return angular.copy(o)},basePermissions:function(){return angular.copy(u)},securityLabels:function(){return angular.copy(v)},editorContext:function(){return{type:p,cell:b.cell}}},windowClass:"rx-permission-editor-dialog"});c.result.then(n)["catch"](function(a){console.log(a)})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorReadOnlyText",["$parse",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-read-only-text.directive.html",link:function(b){var c=b.options.filter?"|"+b.options.filter:"";b.displayValue=a("value"+c)(b)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorRecordInstanceSampleData",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-record-instance-sample-data.directive.html",link:function(b,c){function d(){f.find("label").eq(0).text((b.value?"Sample ":"")+"Record Definition:")}var e=c.find("[data-attribute]").eq(0),f=c.closest(".object-properties").find("rx-inspector-definition-picker").eq(0);b.toggle=function(){b.value=!b.value,d(),a(function(){e.change()})},a(d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorTagInput",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-tag-input.directive.html",controller:["$scope",function(a){a.tags=[]}],link:function(b,c){b.options.options=_.isUndefined(b.options.options)?[]:b.options.options;var d=_(b.value||"").split(" ").compact().value();_.forEach(d,function(a){var c=_.find(b.options.options,function(b){return b.id===a});b.tags.push(c?c:{name:a})});var e=c.find("[data-attribute]");b.loadOptions=function(a){return b.options.options.filter(function(b){return b.name.toLowerCase().indexOf(a.toLowerCase())!=-1})},b.$watchCollection("tags",function(b,c){if(b!==c){var d=[];_.each(b,function(a){a.id?d.push(a.id):d.push(a.name)}),e.val('"'+d.join(" ")+'"'),a(function(){e.trigger("change")})}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorTextMessage",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-text-message.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorTimepicker",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-timepicker.directive.html",link:function(b,c){var d=c.find("[data-attribute]").eq(0);if(b.value){var e=b.value.split(":");b.date=moment().hours(e[0]).minutes(e[1]).toDate()}b.clearTime=function(){b.date=null},b.$watch("date",function(c,e){if(c!==e){if(_.isDate(c)){var f=moment(c);b.value=[f.hours(),f.minutes(),"00"].join(":")}else b.value=c;a(function(){d.change()})}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorTimerField",["RX_EXPRESSION_EDITOR","RX_DESIGNER","$rootScope","dialogs",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/inspector-timer-field.directive.html",link:function(e){function f(a,b){var c,d=/^\"(R([0-9]*\.?[0-9]*)\/)?P((([0-9]*\.?[0-9]*)Y)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)W)?(([0-9]*\.?[0-9]*)D)?)?(T(([0-9]*\.?[0-9]*)H)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)S)?)?\"$/;return c=d.test(a)?"IntervalTimer":"TimeExpression",c!==b}e.options.filter="intervalTimer",e.options.inputType="textarea",e.openIntervalTimerEditor=function(){e.value&&f(e.value,"IntervalTimer")?d.confirm("Warning!","A Timer has previously been set. If you change it the timer settings will be deleted. Do you want to continue?").result.then(function(){e.cell.prop(e.path,""),c.$broadcast(b.events.openIntervalTimerEditor,e.path)}):c.$broadcast(b.events.openIntervalTimerEditor,e.path)},e.openTimeExpressionEditor=function(){e.value&&f(e.value,"TimeExpression")?d.confirm("Warning!","A Timer has previously been set. If you change it the timer settings will be deleted. Do you want to continue?").result.then(function(){e.cell.prop(e.path,""),c.$broadcast(a.events.openExpressionEditor,e.path)}):c.$broadcast(a.events.openExpressionEditor,e.path)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorProcessParameterEditor",["$uibModal","$timeout","RX_DESIGNER","RX_RECORD_DEFINITION","$rootScope","dialogs",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/process-parameters/inspector-process-parameter-editor.directive.html",link:function(b){b.inputParams=b.cell.prop("rxData/inputParams"),b.outputParams=b.cell.prop("rxData/outputParams"),b.contextKeyOptions=_.filter(b.inputParams,function(a){return a.required&&_.includes([d.dataTypes.character.resourceType,d.dataTypes.recordInstance.resourceType],a.resourceType)}),b.contextKeyOptions.length?b.contextKeyParam=b.cell.prop("rxData/contextKeyParam"):b.cell.prop("rxData/contextKeyParam",null,{silent:!0}),b.onContextKeyChange=function(a){b.cell.prop("rxData/contextKeyParam",a)},b.openParameterEditor=function(c){var d=b.cell.prop("rxData/inputParams"),e=b.cell.prop("rxData/outputParams");a.open({templateUrl:"scripts/components/designer/inspector/editors/process-parameters/process-parameter-editor.html",controller:"ProcessParameterEditorController",backdrop:"static",resolve:{processParameterContext:{inputParams:d,outputParams:e,inputDataTypes:b.options.inputDataTypes,outputDataTypes:b.options.outputDataTypes,editParameter:c}},windowClass:"rx-process-parameter-editor-dialog"}).result.then(function(a){b.cell.prop("rxData/inputParams","",{silent:!0}),b.cell.prop("rxData/outputParams","",{silent:!0}),b.cell.prop("rxData/inputParams",a.inputParams),b.cell.prop("rxData/outputParams",a.outputParams)})},b.removeParameter=function(a,d){f.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){var f=b[d],g=_.findIndex(f,{name:a.name});g!==-1&&(f.splice(g,1),b.contextKeyParam===a.name&&b.cell.prop("rxData/contextKeyParam",null,{silent:!0}),b.cell.prop("rxData/"+d,"",{silent:!0}),b.cell.prop("rxData/"+d,b[d]),e.$broadcast(c.events.refreshInspector,b.cell))})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorScheduleTimerField",["$uibModal",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/schedule-timer/inspector-schedule-timer-field.directive.html",link:function(b){b.inspectorTextareaText="",b.openDialog=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/schedule-timer/schedule-timer-dialog.html",controller:"ScheduleTimerDialogController",backdrop:"static",resolve:{context:{cell:b.cell,path:b.path}},windowClass:"rx-schedule-timer-dialog"})},b.$watch("value",function(a,c){a!==c&&(b.inspectorTextareaText=a)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorSelectExpressionDropdown",["$sce","$timeout","rxExpressionEditor","$rootScope","RX_EXPRESSION_EDITOR","RX_INSPECTOR_SELECT_EXPRESSION_DROPDOWN","dialogs",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/select-expression-dropdown/inspector-select-expression-dropdown.html",link:function(a,c){var g=a.path,h=a.cell.prop(g),i=/\$\{.*\}/,j=c.find("[data-attribute]").eq(0);a.cell.selectExpressionDropdownValue=a.cell.selectExpressionDropdownValue||f.dropDownOptionsValue.select,a.menuOptions=f.selectExpressionDropdownOptions;var k=function(){return h&&h.match(i)};a.$watch("value",function(a,c){a!==c&&b(function(){j.trigger("change")})}),a.openEditor=function(){d.$broadcast(e.events.openExpressionEditor,a.path)},a.getDisplayValue=function(a){return k(h)&&a==f.dropDownDisplayValue.buildExpression?f.dropDownDisplayValue.editExpression:a},a.validateSelection=function(b){k(h)&&b==f.dropDownOptionsValue.expression&&a.openEditor(),a.cell.selectExpressionDropdownValue!=b&&h?(a.cell.prop(g,""),a.cell.selectExpressionDropdownValue=b):a.cell.selectExpressionDropdownValue=b}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorSelect",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/select-field/inspector-select.directive.html",link:function(a){a.defaultValue=_.find(a.options.options,{value:a.value||""}),a.$watch("defaultValue",function(b,c){b!==c&&(a.value=b.value)})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorSelectWithValidationMessages",["$rootScope","RX_DESIGNER","rxString",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/select-with-validation-messages/inspector-select-with-validation-messages.template.html",link:function(d){function e(){if(d.value){var a=_.find(d.selectOptions,{value:+d.value});rx.assert.assert(void 0!==a,c.format("Model value %s is not found in options list: %s.",+d.value,JSON.stringify(d.selectOptions))),d.model=a}else d.model=d.selectOptions[0]||{}}d.selectOptions=[],d.$watch("options.options",function(a){a&&(d.selectOptions=_.map(a,function(a){return _.isString(a)?{content:a,value:a}:a}),e())}),d.isDisabled=function(){return _.size(d.cell.validationIssues)>0||0===_.size(d.selectOptions)},d.onSelect=function(){d.cell.prop("rxData/fieldId",d.model.value,{rxSilent:!0})},d.correctValidationIssue=function(c){a.$broadcast(b.events.correctValidationIssue,{validationIssue:c})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorSelectionFieldEditor",["$uibModal",function(a){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/selection-field/inspector-selection-field-editor.directive.html",link:function(b){b.defaultValuePath=b.path.replace(/optionNamesById/,"defaultValue"),b.defaultValue=b.cell.prop(b.defaultValuePath),b.selectionOptions=_(b.cell.prop(b.path)).map(function(a,b){return{content:a,value:b}}).unshift({content:"",value:null}).value(),b.optionsLabels=_(b.selectionOptions).pluck("content").rest().join(", "),b.openEditor=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/selection-field/selection-field-editor.html",controller:"SelectionFieldEditorController",backdrop:"static",resolve:{selectionFieldContext:{selectionFields:b.cell.prop(b.path)}},windowClass:"rx-selection-field-editor-dialog"}).result.then(function(a){b.path&&(b.cell.prop(b.path,"",{silent:!0}),b.cell.prop(b.path,a))})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorText",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/text-field/inspector-text.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorToggleField",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/toggle-field/inspector-toggle-field.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorTooltipField",function(){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/tooltip-field/inspector-tooltip-field.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorWaitForApprovalField",["$uibModal","rxResource",function(a,b){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/wait-for-approval/inspector-wait-for-approval-field.directive.html",link:function(c){c.openDialog=function(){a.open({templateUrl:"scripts/components/designer/inspector/editors/wait-for-approval/wait-for-approval-dialog.html",controller:"WaitForApprovalDialogController",backdrop:"static",resolve:{context:{cell:c.cell,path:c.path,isCreateNew:!0}},windowClass:"rx-wait-for-approval-dialog"})},c.openWaitForApprovalEditor=function(){b.withSubUrlConfiguration("approval/configuration/approvalflowconfigurator/approvalprocess").get(c.cell.prop("rxData/inputMap/Approval Process Name")).then(function(b){var d=_.find(b.approvalFlowConfigurationInstanceList,{processName:c.cell.prop("rxData/inputMap/Approval Process Name")});a.open({templateUrl:"scripts/components/designer/inspector/editors/wait-for-approval/wait-for-approval-definition-dialog.html",controller:"WaitForApprovalDefinitionDialogController",backdrop:"static",resolve:{context:{cell:c.cell,path:c.path,isCreateNew:!1,selectedWFADName:d}},windowClass:"rx-wait-for-approval-definition-dialog"})})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerStencilSettings",["RX_DESIGNER",function(a){return{templateUrl:"scripts/components/designer/stencil/designer-stencil-settings.directive.html",scope:{stencilConfigurationService:"="},controller:["$scope",function(a){a.treeOptions={dirSelectable:!1},a.defaultCustomView={"default":"custom-checkbox",checked:"icon d-icon-check_square_o",unchecked:"icon d-icon-square_o",half:"icon d-icon-check_square_o custom-checkbox-half-state"},a.favoriteCustomView={"default":"custom-checkbox",checked:"icon d-icon-star",unchecked:"icon d-icon-star_o",half:"icon d-icon-star_half"}}],link:function(b){b.checkboxes={},b.favorites={},b.stencilConfigurationService.getSettings().then(function(a){b.stencilConfiguration=a,b.expandedNodes=_.flatten(b.stencilConfiguration)}),b.changeState=function(c,d){b.stencilConfigurationService.setField(c,d),b.$emit(a.events.stencilSettingsChanged,d)},b.changeGroupState=function(c,d){b.stencilConfigurationService.setGroup(c,d),b.$emit(a.events.stencilSettingsChanged,d)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerStencil",function(){var a=joint.ui.Stencil.extend({events:function(){return _.extend({},joint.ui.Stencil.prototype.events,{"input .custom-search":"onSearch"})},onDragStart:function(a,b){joint.ui.Stencil.prototype.onDragStart.apply(this,arguments),this._clone.clearLabel&&this._clone.prop(this._clone.labelPath,""),this._clone.elementCanvasSize&&(this._clone.prop("size/width",this._clone.elementCanvasSize.width),this._clone.prop("size/height",this._clone.elementCanvasSize.height))},renderSearch:function(){var a=this,b=$(['<div class="d-textfield d-textfield_label_hidden">','<label class="custom-search-label d-textfield__label d-icon-left-search">','<input class="d-textfield__input custom-search" type="search" placeholder="',a.searchPlaceholder,'">',"</label>","<div>"].join(""));return b}});return{templateUrl:"scripts/components/designer/stencil/designer-stencil.directive.html",scope:{paper:"=",stencilConfiguration:"="},link:function(b,c){function d(){g&&(g.remove(),g=null)}function e(a){if(b.paper)d(),f(a);else var c=b.$watch("paper",function(b){b&&(f(a),c())})}function f(d){var e=b.paper,f=d.shapes;g=new a({graph:e.model,paper:e,groups:d.groups,searchPlaceholder:d.searchPlaceholder||"Search",search:{"*":["attrs/.label/text","content"]}}),c.append(g.render().el);var h=_.assign({columnWidth:g.options.width/3+13,columns:3,rowHeight:70,dy:15,dx:15},d.layoutOptions);_.each(d.groups,function(a,b){g.load(f[b],b),joint.layout.GridLayout.layout(g.getGraph(b),h),g.getPaper(b).fitToContent(1,1,10)}),g.on("filter",function(a){joint.layout.GridLayout.layout(a,h)})}b.$watch("stencilConfiguration",function(a,b){a!==b&&e(a)}),e(b.stencilConfiguration);var g}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxDesignerValidationIssues",["RX_DESIGNER","$rootScope",function(a,b){return{templateUrl:"scripts/components/designer/validation-issues/designer-validation-issues.directive.html",scope:{validationIssues:"=",rxConfiguration:"="},link:function(c){c.toggleGroup=function(a){a.closed=!a.closed},c.correctValidationIssue=function(c){b.$broadcast(a.events.correctValidationIssue,{validationIssue:c})},c.$watch("validationIssues",function(a){if(a&&a.length){var b=_.uniq(_.map(a,"elementId"));c.groups=_.map(b,function(b){var c=_.filter(a,{elementId:b});return{groupName:c[0].elementName,groupIssues:c}})}},!0)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").directive("rxDataDictionary",function(){return{templateUrl:"scripts/components/expression-editor/data-dictionary.directive.html",scope:{tree:"=",nodeSelected:"=",expandedNodes:"="},controller:["$scope",function(a){a.getDragValue=function(a){return(_.isArray(a)?a[0]:a)||""},a.treeOptions={dirSelectable:!1,equality:function(a,b){return angular.equals(a,b)}}}],link:function(a,b){function c(b){function c(a,b){_.each(a.children,function(a){_.contains(a.label.toLowerCase(),b)?d=!0:c(a,b)})}var d=!1;return c(b,a.valueFilter.toLowerCase()),d}a.addValueToExpression=function(b,c){c&&c.stopPropagation(),a.nodeSelected(_.isArray(b.value)?b.value[0]:b.value)},a.valueFilter="",a.searchMatches=function(b){var d=!0;return b&&b.label&&!_.contains(b.label.toLowerCase(),a.valueFilter.toLowerCase())&&(d=c(b)),d},new CKEDITOR.dom.element(b[0]).on("dragstart",function(a){var b=a.data.getTarget().getAscendant(function(a){return angular.element(a.$).hasClass("rx-tree-node-label")},!0);CKEDITOR.plugins.clipboard.initDragDataTransfer(a);var c=a.data.dataTransfer;c.setData("value",b.data("drag-value")),c.setData("text/html",b.getText()),c.$.setDragImage&&c.$.setDragImage(b.find(".rx-data-dictionary-item").$[0],-10,-10)})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").directive("rxExpressionField",function(){return{restrict:"E",templateUrl:"scripts/components/expression-editor/fields/expression-field.directive.html",scope:{cell:"=",label:"=",value:"=",options:"=",path:"="}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").directive("rxRichExpressionEditor",["rxRichExpressionEditorPlugin","rxRichExpressionEditorAutoCompletePlugin",function(a,b){return{templateUrl:"scripts/components/expression-editor/rich-expression-editor.directive.html",require:"ngModel",scope:{dictionaryList:"=",rxConfiguration:"="},link:function(a,b,c,d){var e=CKEDITOR.inline(b.find("div")[0],{extraPlugins:"rx-data-dictionary-item,rx-autocomplete",skin:"expression-editor,/standardlib/resources/css/ckeditor/skins/expression-editor/",toolbar:[],title:!1,allowedContent:!0,removePlugins:"elementspath,toolbar,tabletools,basicstyles",resize_enabled:!1,dictionaryList:a.dictionaryList||[],on:{instanceReady:function(){e.on("key",function(b){a.rxConfiguration.isAutoCompleteEnabled&&b.data.keyCode==CKEDITOR.CTRL+32&&e.launchAutoComplete()}),e.launchAutoComplete=function(){var b={cursor:e.getCursor(),text:this.getData()};a.rxConfiguration.isAutoCompleteAvailable(b)&&e.execCommand("autoComplete",b)}},change:function(){var b=_.trim(this.getData());b!=d.$modelValue&&d.$setViewValue(b),a.rxConfiguration.isAutoCompleteEnabled&&!e.gettingCursorPosition&&e.launchAutoComplete()}}});e.on("updateAutoCompleteSuggestions",function(b){a.rxConfiguration.updateAutoCompleteSuggestions(b.data).then(function(a){b.data.deferred.resolve(a)})}),d.$render=function(){e.setData(CKEDITOR.tools.htmlEncode(d.$viewValue))},a.$watch("dictionaryList",function(){e.dictionaryList=a.dictionaryList}),a.$on("$destroy",function(){try{e.destroy(!0)}catch(a){delete CKEDITOR.instances[e.name]}}),a.rxConfiguration.api={insertHtml:function(a){e.insertHtml(_.trim(a))}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").directive("rxTreeNodeRenderer",function(){return{restrict:"E",replace:!0,templateUrl:"scripts/components/expression-editor/tree-node-renderer.directive.html",link:function(a,b){a.node.value&&angular.element(b).attr("draggable","true")}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.multi-checkbox").directive("rxMultiCheckbox",function(){return{restrict:"E",replace:!0,scope:{model:"=",children:"=",customView:"=",watchProp:"@",callback:"&"},templateUrl:"scripts/components/multi-checkbox/multi-checkbox.directive.html",controller:["$scope","$element",function(a,b){a.isSelected=!1,a.customStates={};var c=a.watchProp,d=a.children,e=a.customView;void 0===a.model&&(a.model=a);var f=function(a,b,c){_.forEach(a,function(a){a[b]=c})},g=function(c,d,f){e?(a.customStates[e.checked]=c,a.customStates[e.unchecked]=d,a.customStates[e.half]=f):angular.element(b.context.children).prop("indeterminate",f)},h=function(b,c){var d=_.filter(b,c),e=d.length==b.length,f=0===d.length,h=!e&&!f;a.isSelected=e,g(e,f,h)};a.onClick=function(){d?f(d,c,a.isSelected):(_.forEach(a.model,function(b){_.isObject(b)&&(b.isSelected=a.isSelected,b.children&&f(b.children,c,b.isSelected))}),g(a.isSelected,!a.isSelected,!1));var b=a.callback();if(b){var e=d||_.flatten(_.map(a.model,"children"));b(e,c)}},a.onLabelClick=function(b){a.isSelected=!a.isSelected,a.onClick(),b.stopPropagation()},d?a.$watch("children",function(){h(d,c)},!0):a.$watch("model",function(){h(a.model,"isSelected")})}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.navigation-bar").directive("rxNavigationBar",["$state",function(a){return{restrict:"E",scope:{items:"="},templateUrl:"scripts/components/navigation-bar/navigation-bar.directive.html",link:function(b){function c(){b.items.forEach(function(b){b.selected=a.is(b.state.name||b.state,b.state.params)})}c(),b.$on("$stateChangeSuccess",c)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxDateFieldEditor",function(){return{templateUrl:"scripts/components/property-panel/editors/date-field-editor.directive.html",scope:{ngModel:"=",rxConfiguration:"="},controller:["$scope",function(a){a.datepickerOptions={showWeeks:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0}}],link:function(a){a.date=a.ngModel?moment(a.ngModel).toDate():null,a.$watch("date",function(b){b?a.ngModel=moment(b).format("YYYY-MM-DD"):a.ngModel=null}),a.$watch("ngModel",function(b){b&&(a.date=moment(a.ngModel).toDate())})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxDateTimeFieldEditor",["$timeout",function(a){return{templateUrl:"scripts/components/property-panel/editors/date-time-field-editor.directive.html",scope:{ngModel:"=",rxConfiguration:"="},controller:["$scope",function(a){a.datepickerOptions={showWeeks:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0}}],link:function(a){var b=Date.parse(a.ngModel);a.datetime=b?new Date(b):null,a.$watch("datetime",function(b){b?a.ngModel=b.toISOString():a.ngModel=null}),a.$watch("ngModel",function(b){b&&(a.datetime=new Date(b))})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxNumberFieldEditor",["$timeout",function(a){return{templateUrl:"scripts/components/property-panel/editors/number-field-editor.directive.html",scope:{rxConfiguration:"=",ngModel:"="},link:function(a,b,c,d){var e=a.rxConfiguration,f=e.precision||0,g=b.find("input");a.ngModel=Number(a.ngModel).toFixed(f),a.$watch("ngModel",function(b){a.numberValue=Number(b)}),a.$watch("numberValue",function(b){g.controller("ngModel").$valid&&(a.ngModel=Number(b).toFixed(f))}),g.on("blur",function(){this.value=a.ngModel})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxSelectionFieldEditor",function(){return{templateUrl:"scripts/components/property-panel/editors/selection-field-editor.directive.html",scope:{rxConfiguration:"=",ngModel:"="},link:function(a){var b=a.rxConfiguration;a.options=b.options}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxTimeFieldEditor",["$timeout",function(a){return{templateUrl:"scripts/components/property-panel/editors/time-field-editor.directive.html",scope:{ngModel:"=",rxConfiguration:"="},link:function(a){a.$watch("date",function(b){b&&(a.ngModel=b.toTimeString().split(" ")[0].substring(0,6)+"00")}),a.$watch("ngModel",function(b){if(b){var c=b.split(":");a.date=new Date(0,0,0,c[0],c[1],c[2])}else{var d=new Date;a.date=new Date(0,0,0,d.getHours(),d.getMinutes(),d.getSeconds())}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-panel").directive("rxPropertyPanel",["rxPropertyEditor",function(a){return{templateUrl:"scripts/components/property-panel/property-panel.directive.html",scope:{rxConfiguration:"=",ngModel:"="},link:function(b){b.$watch("rxConfiguration",function(a){a&&(b.propertyDefinitions=a.propertyDefinitions,b.entityPropertyKeyName=a.entityPropertyKeyName||"id")},!0),b.getPropertyEditorTemplateUrl=function(b){return a.getPropertyEditorTemplateUrl(b.dataType)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.property-view-panel").directive("rxPropertyViewPanel",function(){return{templateUrl:"scripts/components/property-view-panel/property-view-panel.directive.html",scope:{rxModel:"=",rxConfiguration:"="},link:function(a){function b(){var b=a.rxModel;b?b.groups?a.groups=_(b.groups).map(function(a,c){return{label:a.label,index:a.index,fields:b.fields[c]}}).sortBy("index").value():a.fields=b:(a.fields=null,a.groups=null)}a.toggleGroup=function(a){a.closed=!a.closed},a.$watch("rxModel",function(a,c){a!==c&&b()}),b()}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-field").directive("rxSearchField",function(){return{restrict:"E",templateUrl:"scripts/components/search-field/search-field.directive.html",controller:"SearchFieldController"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-filter").directive("rxSearchFilter",["$timeout","$document","$filter","rxSearchFilterModel","RX_DATA_TYPES",function(a,b,c,d,e){return{restrict:"E",templateUrl:"scripts/components/search-filter/search-filter.directive.html",scope:{rxFilterConfiguration:"=",rxFilterData:"="},link:function(a,f){function g(a){a.stopPropagation()}function h(){a.pendingFilterChanges=!1,a.rxFilterConfiguration.selectedFilters=a.rxFilterData,a.filterModel=d.getSearchFilterModel(a.rxFilterConfiguration),i=_.cloneDeep(a.filterModel.filters)}var i,j=[],k=function(a,b){_.find(a.options,{name:b.name})||(a.options.push(b),l(_.last(a.options)))},l=function(b){if(a.pendingFilterChanges=!0,b.active){var c=_.isArray(b.criteria.value);c||_.remove(j,function(a){if(a.criteria.name==b.criteria.name&&a.name!=b.name)return a.active=!1,!0}),j.push(b)}else _.remove(j,{name:b.name})};a.expandFilterItem=function(b){b.expanded||(_.forEach(a.filterModel.filters,function(a){a.expanded=!1}),b.expanded=!0)},a.handleKeydown=function(b,c){32==b.keyCode&&a.addFilter(b,c)},a.addFilter=function(a,b){a&&a.stopPropagation(),b.active=!b.active,"timeStampRange"!=b.type&&l(b)},a.applyKeywordFilter=function(a,b,c){if(13==a.keyCode&&c.searchText){var d={name:c.searchText,active:!0,type:"dynamic",criteria:{name:b.name,id:b.id,type:b.type,value:[c.searchText]}};k(b,d),c.searchText=""}},a.searchFilterOption=function(b,c){b.isSearching=!0;var d=a.$eval(b.method,{parentScope:a.$parent}),e=function(b,c){return _.map(b,function(b){return{key:b[c.fields.key],value:a.$eval(c.valueFormat,_.merge({value:b[c.fields.value]},b.attributeMap))}})};return d(c).then(function(a){return b.isSearching=!1,e(a,b)})},a.onFilterOptionSelect=function(a,b,c){var d={name:c.key,active:!0,type:"dynamic",criteria:{id:a.id,type:a.type,name:a.name,value:[c.value]}};b.searchText="",k(a,d)},a.datePickerOptions={formatYear:"yy",startingDay:1,"show-weeks":!1,"format-day":"d"},a.openDatePicker=function(a,b){a&&(a.preventDefault(),a.stopPropagation()),b.isOpen=!0},a.closeDatePickers=function(a){a.startDatePicker.isOpen=!1,a.endDatePicker.isOpen=!1},a.onDateRangeSubmit=function(a,b){b.active=!1;var d=b.startDatePicker.date.getTime(),e=b.endDatePicker.date.getTime(),f={name:c("date")(d,"medium")+" - "+c("date")(e,"medium"),active:!0,type:"dynamic",criteria:{id:a.id,name:b.criteria.name,type:a.type,value:{startDate:d,endDate:e
}}},g=_.find(a.options,{name:f.name});g?(g.active=!0,l(g)):(a.options.push(f),l(f))},a.onRangeChange=function(a,b){a[b]<a.minValue&&(a[b]=a.minValue),a[b]>a.maxValue&&(a[b]=a.maxValue)},a.onRangeSubmit=function(a,b){var c={name:b.from+" - "+b.to,active:!0,type:"dynamic",criteria:{id:a.id,name:b.criteria.name,type:a.type,value:{from:b.from,to:b.to}}},d=_.find(a.options,{name:c.name});d||(a.options.push(c),l(c))},a.applySelectedFilters=function(){if(a.pendingFilterChanges=!1,j){var b=_.cloneDeep(a.filterModel.selectedFilters);_.each(j,function(a){var c;_.includes([e.character,e.selection],a.criteria.type)?(c=_.find(b,function(b){return b.criteria.name===a.criteria.name&&b.criteria.value[0]===a.criteria.value[0]}),c||b.push(a)):(c=_.find(b,function(b){return b.criteria.id===a.criteria.id}),c?b[_.indexOf(b,c)]=a:b.push(a))}),a.filterModel.selectedFilters=b}j=[],a.filterModel.filters=_.cloneDeep(i),f.trigger("click")},a.$watch("filterModel.selectedFilters",function(b,c){b!=c&&(a.rxFilterData=a.filterModel.getSelectedFiltersExpression())}),a.$watch("rxFilterConfiguration",function(a){a&&h()}),b.on("click",".dropdown-menu div[uib-datepicker] button",g),a.$on("$destroy",function(){b.off("click",".dropdown-menu div[uib-datepicker] button",g)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.simple-json-editor").directive("rxSimpleJsonEditor",function(){return{restrict:"E",replace:!0,require:"ngModel",scope:{rxObject:"="},templateUrl:"scripts/components/simple-json-editor/simple-json-editor.directive.html",link:function(a,b,c,d){a.$watch("rxObject",function(b){a.json=angular.toJson(b,!0)},!0),a.$watch("json",function(b,c){if(b!=c)try{a.rxObject=angular.fromJson(b),d.$setValidity("json",!0)}catch(e){d.$setValidity("json",!1)}})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.tag-pills").directive("rxTagPills",function(){return{restrict:"E",templateUrl:"scripts/components/tag-pills/tag-pills.directive.html",scope:{tags:"=",displayLimit:"=",allowRemove:"@"},link:function(a){a.getTagsGroupedById=function(){var b=_(a.tags).groupBy(function(a){return a.criteria.id}).map(function(a){var b={criteria:{name:a[0].criteria.name}};return a.length>2?b.label=a[0].name+", "+(a.length-1)+" others":b.label=_(a).map(function(a){return a.label||a.name}).value().join(", "),b.values=a,b}).value();return b},a.removeTag=function(b){var c=_.cloneDeep(a.tags);b.active=!1,_.each(b.values,function(a){c=_.reject(c,{name:a.name})}),a.tags=c},a.$watch("tags",function(){a.groupedTags=a.getTagsGroupedById()})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.tooltip").directive("rxTooltip",function(){return{templateUrl:"scripts/components/tooltip/tooltip.directive.html",scope:{tooltip:"="},link:function(a){var b={appendToBody:!0,placement:"left"};a.tooltip&&(_.isString(a.tooltip)?a.params=_.assign({text:a.tooltip},b):(a.params=_.clone(a.tooltip),_.defaults(a.params,b)))}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.uib-modal").directive("uibModalWindow",["$uibModalStack",function(a){return{priority:1,link:function(b,c,d){function e(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&a.dismiss(c.key,"backdrop click")}var f;c.off("click"),c.on("mousedown",function(a){f=a.target}),c.on("mouseup",function(a){var b=a.target;b===f&&e(a)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.dpl").directive("rxDplCheckbox",["rxGUID",function(a){return{restrict:"E",require:"ngModel",transclude:!0,priority:210,templateUrl:"scripts/dpl/checkbox/checkbox.directive.html",compile:function(b,c){return c.type="checkbox",c.tabindex=c.tabindex||"0",b.attr("role",c.type),function(b,c,d,e){var f=c.find("input").first(),g=c.find("label").first(),h=a.generate("rx-dpl-checkbox-");f.attr("id",h),g.attr("for",h),d.ngChecked&&b.$watch(function(){return b.$eval(d.ngChecked)},function(a){e.$setViewValue(a),e.$render()}),d.ngDisabled&&b.$watch(function(){return b.$eval(d.ngDisabled)},function(a){f[0].disabled=a}),f.on("change",function(a){e.$setViewValue(f[0].checked)}),e.$render=function(){f[0].checked=e.$viewValue}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.designer").directive("rxNamedListDesigner",["$rootScope","$timeout","rxNotificationMessage","dialogs","rxExpressionEditor","rxNamedListDataDictionary","rxBundleCache","RX_DESIGNER","RX_EXPRESSION_EDITOR","RX_NAMED_LIST_DESIGNER","rxNamedListDefinitionResource","rxNamedListDefinitionModel",function(a,b,c,d,e,f,g,h,i,j,k,l){return{templateUrl:"scripts/named-list/designer/named-list-designer.directive.html",scope:{rxModel:"="},link:function(m,n){function o(){c.success("Named List Definition saved successfully."),a.$broadcast(j.events.afterSave),t.reset()}function p(){a.$broadcast(j.events.close)}function q(a){a.persist(v)}function r(){l.validate(v).then(function(a){m.selected.validationIssues=a})}function s(a,c){var d=c.validationIssue,e=d.propertyName||"";e&&b(function(){var a=n.find('[data-attribute="rxData/'+e+'"]');a.focus().select()},2)}var t,u=m.rxModel,v=m.plainNamedListDefinition=u.plain(),w=l.getModel(v),x=new joint.dia.Graph;m.isDesignMode=!0,g.getBundleFriendlyName().then(function(a){m.bundleFriendlyName=a}),m.selected={namedListDefinitionModel:w,validationIssues:[]},v.lastUpdateTime||b(function(){n.find('.rx-named-list-inspector input[data-attribute="rxData/name"]').focus().select()}),x.on({change:q}),x.on("add change",r),x.addCell(w),t=new joint.dia.CommandManager({graph:x,cmdBeforeAdd:function(a,b,c,d){return!(d||{}).ignoreCommandManager}}),m.toggleDesignMode=function(){m.isDesignMode=!m.isDesignMode},m.saveNamedListDefinition=function(){l.validate(v).then(function(a){a.length?(m.selected.validationIssues=a,c.error("The Named List Definition is not valid")):(_.assign(u,v),v.lastUpdateTime?u.put().then(o):k.post(v).then(o))})},m.canSave=function(){return m.rxNamedListDesignerForm&&m.rxNamedListDesignerForm.$valid&&t.hasUndo()},m.closeDesigner=function(){t.hasUndo()?d.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(p):p()},m.hasUndo=function(){return t.hasUndo()},m.hasRedo=function(){return t.hasRedo()},m.undo=function(){t.undo()},m.redo=function(){t.redo()},m.rightBladeConfiguration={title:"Properties",tabs:{validationIssues:{name:"rx-blade-validation-issues-property-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},m.validationIssuesConfiguration={emptyText:"The Named List Definition is valid."};var y=a.$on(i.events.openExpressionEditor,function(a,b){f.getCommonDataDictionary(v).then(function(a){var c=b.cell||m.selected.namedListDefinitionModel,d=b.path||b;e.open({expressionContext:{cell:c,path:d,expressionConfigurator:m.selected.namedListDefinitionModel.getExpressionConfigurator(),dataDictionary:a,legend:f.getLegend()}})})});m.$on(h.events.correctValidationIssue,s),m.$on("$destroy",function(){y(),f.clear(),x.off("change",q),x.off("add change",r)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").directive("rxProcessDesigner",["$q","$timeout","$stateParams","rxId","rxNotificationMessage","dialogs","$rootScope","RX_DESIGNER","rxExpressionEditor","rxTimerEditor","rxBundleCache","RX_PROCESS_DESIGNER","RX_EXPRESSION_EDITOR","rxActionTypeDataPageResource","rxProcessDesignerConfiguration","rxProcessElementSearch","rxProcessDataDictionary","rxProcessDesignerCache","rxProcessAutoComplete","rxDesignerCache","rxProcessDefinitionResource","rxProcessDesignerElementManager",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return{templateUrl:"scripts/process/designer/process-designer.directive.html",scope:{rxModel:"=",rxConfiguration:"="},link:function(c,w){function x(a,b){var c=p.findById(b,a.sourceNode),d=p.findById(b,a.targetNode);c&&v.validateElement(c,b).then(function(a){z(a,c)}),d&&v.validateElement(d,b).then(function(a){z(a,d)})}function y(a,b){v.validateElement(a,b).then(function(b){z(b,a)})}function z(a,b){A(b),W(c.selected.validationIssues.concat(a))}function A(a){_.remove(c.selected.validationIssues,{elementId:a.id}),a.flowElements&&p.each(a,function(a){_.remove(c.selected.validationIssues,{elementId:a.id})})}function B(){var a=new joint.dia.Validator({commandManager:$});v.registerValidators(a),a.on("invalid",function(a){e.error(a)})}function C(){var a=v.getGraph(c.plainProcessDefinition),b=c.paper;if(b.model.fromJSON(a),v.fillLabels(c.plainProcessDefinition,c.paper.model),ha&&0===b.model.getElements().length){var d=v.getShape(l.processElementResourceTypes.startEvent),e=d.attributes.size.width;d.prop("position",{x:e,y:(c.paper.options.height-e)/2}),d.prop(d.labelPath,""),d.prop("size",{width:30,height:30}),d.get("rxData").label="";var f=v.getShape(l.processElementResourceTypes.endEvent);f.prop("position",{x:b.options.width-2*e,y:d.attributes.position.y}),f.prop(f.labelPath,""),f.prop("size",{width:30,height:30}),f.get("rxData").label="",b.model.addCells([d,f])}b.on("cell:expand:done",function(a){var c=a.model,d=c.get("id");if(!da[d]&&"rx.SubProcess"==c.get("type")&&!c.get("inCallActivity")&&c.get("expanded")&&!c.prop("rxData/lastUpdateTime")){da[d]=!0;var e=v.getShape(l.processElementResourceTypes.startEvent),f=v.getShape(l.processElementResourceTypes.endEvent);e.prop(e.labelPath,""),e.get("rxData").label="",f.prop(f.labelPath,""),f.get("rxData").label="",e.prop("position",{x:c.prop("position/x")+15,y:c.prop("position/y")+35}),e.prop("size",{width:30,height:30}),f.prop("position",{x:c.prop("position/x")+165,y:c.prop("position/y")+35}),f.prop("size",{width:30,height:30}),$.initBatchCommand(),b.model.addCell(e),b.model.addCell(f),c.embed(e),c.embed(f),$.storeBatchCommand()}}),b.model.addCell(c.selected.process)}function D(){c.inspectorConfiguration={emptyText:"Select an element on the diagram to view its properties here."}}function E(){c.validationIssuesConfiguration={emptyText:"The Process Definition is valid."}}function F(){o.updateStencilConfiguration(ca).then(function(){c.stencilConfiguration={configurationService:o},_.each(["default","favorite","recent"],function(a){o.get(a,ca).then(function(b){c.stencilConfiguration[a]=b})})})}function G(){c.selected={cellModel:null,process:v.getProcessModel().fromProcessDefinition(c.plainProcessDefinition)},W([])}function H(){da={},ea={}}function I(){H(),c.rxProcessDesignerForm.json.$setPristine()}function J(a){ca=a,v.setActionTypes(ca)}function K(){var a=_(p.filter(c.plainProcessDefinition,"calledProcessDefinitionName")).pluck("calledProcessDefinitionName").flatten().unique().value();return t.getProcessDefinitions(a)}function L(){c.selected.cellModel=null,c.rightBladeConfiguration.expanded&&(c.rightBladeConfiguration.tabs.processProperties.active=!0)}function M(){var d=a.all({paper:fa.promise,fieldTypes:t.getFieldTypes(),userGroups:t.getGroupDataPage(),processDefinitionNames:t.getProcessDefinitionNames(),calledProcesses:K(),bundleActionTypes:n.get(-1,0,{requireDependent:!0}),rootActionTypes:n.get(-1,0,null,{"default-bundle-scope":void 0}),sourceProcessDefinition:ga?u.get(ga):null}).then(function(a){c.paper=a.paper,v.setFieldTypes(a.fieldTypes),v.setUserGroups(a.userGroups),a.sourceProcessDefinition&&O(a.sourceProcessDefinition);var d=a.bundleActionTypes.data.concat(a.rootActionTypes.data);J(d),F(),G(),B(),C(),$.reset(),c.transitionsDisabled=!1,aa=s.getInstance(c.paper.model),ha&&b(function(){w.find('.rx-process-inspector input[data-attribute="rxData/name"]').focus().select()})});c.rxBusyIndicator={promise:d}}function N(a){return a&&(a.layout||0===a.flowElements.length&&0===a.artifacts.length)}function O(a){var b=v.cloneProcessDefinition(a.plain());b?(_.assign(c.plainProcessDefinition,_.pick(b,["artifacts","flowElements","description","inputParams","layout","outputParams","permissions","runAsUser","isEnabled","tags"])),c.plainProcessDefinition.name=""):e.error("This process definition cannot be copied.")}function P(a){var b=_(c.leftBladeConfiguration.tabs).values().find({name:a});b.refreshNeeded&&(o.get(a,ca).then(function(b){c.stencilConfiguration[a]=b}),delete b.refreshNeeded)}function Q(){ba.isEnabled===!1?e.warning("Process Definition saved successfully in disabled state."):e.success("Process Definition saved successfully."),$.reset(),c.selected.process.trigger("rx:change:inputs",c.selected.process),g.$broadcast(l.events.afterSave),ha||u.get(ba.name).then(function(a){ba=a,c.plainProcessDefinition=ba.plain(),v.fillLabels(c.plainProcessDefinition,c.paper.model);var d=c.selected.cellModel?c.selected.cellModel.get("id"):null;d&&b(function(){if(c.rightBladeConfiguration.tabs.elementProperties.active){var a=c.paper.findViewByModel(d);c.paper.trigger("cell:pointerup",a)}else c.selected.cellModel=c.paper.model.getCell(d)}),t.setProcessDefinition(c.plainProcessDefinition),c.selected.process.updateParameters(c.plainProcessDefinition)})}function R(a){if(c.plainProcessDefinition.layout||0===c.plainProcessDefinition.flowElements.length&&0===c.plainProcessDefinition.artifacts.length)!c.isDesignMode&&c.isDesignModeAvailable()&&c.toggleDesignMode(),c.rightBladeConfiguration.tabs.validationIssues.active=!0,e.error("The Process Definition is not valid");else{var b=_(a).take(3).pluck("message").join("<br><br>");e.error(b,{enableHtml:!0})}}function S(){var a=_.cloneDeep(c.plainProcessDefinition),b=function(a){return _.assign(ba,a),ha?u.post(a):ba.put()};return p.each(a,function(a){delete a.label}),"warning"===c.validationIssueLevel&&a.isEnabled?f.confirm("Warning!","This process definition is not valid. You may save the process definition in an invalid state but it will be disabled. Do you want to continue?").result.then(function(){a.isEnabled=!1;var d=c.selected.process.get("rxData");return d.isEnabled=!1,c.selected.process.set("rxData",d),b(a)}):b(a)}function T(){c.isFormBlocked=!0}function U(){c.isFormBlocked=!1}function V(){return c.rxProcessDesignerForm.json.$dirty||$&&$.hasUndo()}function W(a){c.selected.validationIssues=a,_.isEmpty(c.selected.validationIssues)?c.validationIssueLevel="":_.any(c.selected.validationIssues,{type:"error"})?c.validationIssueLevel="error":c.validationIssueLevel="warning"}function X(b){return q.getCommonDataDictionary(c.plainProcessDefinition,ca).then(function(c){var d=b.getExpressionConfigurator?b.getExpressionConfigurator():b;return _.isFunction(d.buildDataDictionary)?d.buildDataDictionary(c).then(function(){return c}):void a.when(c)})}function Y(a){var b=_(a.get("cells").models).filter(function(a){return!(a.get("inCallActivity")||a.get("parent")&&"rx.TimerEvent"!==a.get("type")||"rx.ProcessModel"==a.get("type"))}).map(function(a){if(_.isFunction(a.getLayout))return a.getLayout()}).value();return b.length?JSON.stringify({cells:b}):null}function Z(){var a=c.selected.cellModel;for(c.breadcrumbs=[];a;){var b=a.get("rxData"),d=a.get("parent");c.breadcrumbs.unshift({name:b.label||b.name,id:a.get("id")}),a=c.paper.model.getCell(d)}}var $,aa,ba=c.rxModel,ca=[],da={},ea={},fa=a.defer(),ga=c.rxConfiguration.sourceProcessDefinitionName;c.transitionsDisabled=!0,c.plainProcessDefinition=ba.plain();var ha=!c.plainProcessDefinition.lastUpdateTime;c.selected={},c.isDesignMode=ha||!!c.plainProcessDefinition.layout,c.isDesignModeAvailable=function(){return c.rxProcessDesignerForm&&c.rxProcessDesignerForm.json&&c.rxProcessDesignerForm.json.$pristine&&N(c.plainProcessDefinition)},c.$watch("plainProcessDefinition",function(){t.setProcessDefinition(c.plainProcessDefinition)}),r.clear(),t.clear(),t.setProcessDefinition(c.plainProcessDefinition),D(),E(),M(),c.$on("$destroy",function(){r.clear(),q.clear(),t.clear()}),k.getBundleFriendlyName().then(function(a){c.bundleFriendlyName=a}),c.validateProcess=function(){return v.validateProcess(c.plainProcessDefinition).then(function(a){return W(a),a})},c.leftBladeConfiguration={title:"Palette",tabs:{stencilTabDefault:{iconClass:"d-icon-uml",active:!0,name:"default",onActivate:P},stencilTabFavorite:{iconClass:"d-icon-star",active:!1,name:"favorite",refreshNeeded:!0,onActivate:P},stencilTabRecent:{iconClass:"d-icon-clock_o",active:!1,name:"recent",refreshNeeded:!0,onActivate:P},stencilTabSettings:{active:!1,name:"rx-blade-stencil-tab-settings",iconClass:"d-icon-wrench"}},dock:"left",expanded:!0},c.rightBladeConfiguration={title:"Properties",tabs:{processProperties:{active:!0,name:"rx-blade-process-property-tab",iconClass:"d-icon-pencil"},elementProperties:{name:"rx-blade-element-property-tab",iconClass:"d-icon-gear"},validationIssues:{name:"rx-blade-validation-issues-property-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},c.isRecentsEmpty=function(){return _.isEmpty(_.get(c,"stencilConfiguration.recent.shapes"))},c.clearRecents=function(){o.removeRecents(),o.get("recent",ca).then(function(a){c.stencilConfiguration.recent=a})},c.toggleDesignMode=function(){c.isDesignMode=!c.isDesignMode,c.isDesignMode&&b(function(){c.paper.model.trigger("update:halo")})},c.saveChanges=function(){c.isFormBlocked||(T(),c.validateProcess().then(function(a){"error"===c.validationIssueLevel?(R(a),U()):S().then(Q).then(I)["finally"](U)}))},c.$on("beforeUnload",function(b,c){var d=a.defer();c.push(d.promise),V()?f.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(function(){d.resolve()}):d.resolve()}),c.closeDesigner=function(){g.$broadcast(l.events.close)},c.canSave=function(){return!c.isFormBlocked&&c.rxProcessDesignerForm&&c.rxProcessDesignerForm.$valid&&V()},c.rxConfiguration.api={canSave:c.canSave,save:c.saveChanges},c.canvasConfiguration={defaultLink:function(a){return"rx.TextAnnotation"==a.model.get("type")?v.getShape(l.processElementResourceTypes.textAnnotationAssociation):v.getShape(l.processElementResourceTypes.sequenceFlow)},interactive:function(a){return!a.model.get("inCallActivity")},getModelName:function(){return c.plainProcessDefinition.name}},c.$on(h.events.correctValidationIssue,function(a,e){var f=e.validationIssue,g=c.paper.model.getCell(d.getBase(f.elementId));if(g){var h=c.paper.findViewByModel(g.get("id"));c.paper.trigger("cell:pointerup",h)}else c.selected.cellModel=null,c.rightBladeConfiguration.expanded&&(c.rightBladeConfiguration.tabs.processProperties.active=!0);var i=f.propertyName||"";i&&b(function(){var a=w.find('[data-attribute="rxData/'+i+'"]');a.focus().select()},2)}),c.$on(m.events.refreshInspector,function(a,b){X(b).then(function(){b.trigger("rx:change:inputs",b)})}),c.$on(m.events.openExpressionEditor,function(a,b){var d=b.cell||c.selected.cellModel,e=b.path||b;X(d).then(function(a){var b=c.selected.cellModel.getExpressionConfigurator?c.selected.cellModel.getExpressionConfigurator():c.selected.cellModel;i.open({expressionContext:{cell:d,path:e,expressionConfigurator:b,dataDictionary:a,autoComplete:aa,legend:q.getLegend(),useDynamicQualification:!0}})})}),c.$on(h.events.openIntervalTimerEditor,function(a,b){j.open({expressionContext:{cell:c.selected.cellModel,path:b,actionTypes:ca,plainProcessDefinition:c.plainProcessDefinition}})}),c.$on(h.events.canvasReady,function(a,b){fa.resolve(b.paper),$=b.commandManager}),c.$on(h.events.cellPointerUp,function(a,b){var d=b.cellView.model,e=b.cellView.$el.closest("html").length>0;c.selected.cellModel=null,e&&X(d).then(function(){_.isFunction(d.updateInspectorConfig)?d.updateInspectorConfig(c.plainProcessDefinition).then(function(){c.selected.cellModel=d}):c.selected.cellModel=d,c.rightBladeConfiguration.expanded&&(c.rightBladeConfiguration.tabs.elementProperties.active=!0)})}),c.$on(h.events.blankPointerDown,function(a,b){L()}),c.$on(h.events.cellAdded,function(a,b){var e,f=b.cell;if(!f.get("inCallActivity")){var g=f.getParentId(),h=c.plainProcessDefinition,i=f.get("id"),j=f.get("type"),k=f.get("source"),m=k&&k.id&&p.findById(c.plainProcessDefinition,d.get(k.id)).resourceType===l.processElementResourceTypes.timerEvent;g&&"rx.TimerEvent"!==j&&!m&&(h=p.findById(c.plainProcessDefinition,d.get(g)));var n=c.plainProcessDefinition.lastUpdateTime?c.plainProcessDefinition.name:c.plainProcessDefinition.id;f.set("ownerProcessDefinitionName",n,{silent:!0}),e=f.persist(h),"rx.SubProcess"===j&&ea[i]&&(_.assign(e,ea[i]),delete ea[i]),c.plainProcessDefinition.flowElements.length>=2?c.validateProcess():e&&y(e,h)}if(b.options.stencil&&(o.addToRecent(e),c.leftBladeConfiguration.tabs.stencilTabRecent.refreshNeeded=!0,c.canSave())){var q=c.paper.findViewByModel(f.get("id"));c.paper.trigger("cell:pointerup",q)}}),c.$on(h.events.beforeCellRemoved,function(a,b){var e=b.cell,f=e.get("id");"rx.SubProcess"==e.get("type")&&(ea[f]=p.findById(c.plainProcessDefinition,d.get(f)))}),c.$on(h.events.cellRemoved,function(a,b){var e=b.cell;e.rxUnembed||(v.removeElementById(c.plainProcessDefinition,d.get(e.get("id"))),c.validateProcess(),c.selected.cellModel=null,c.rightBladeConfiguration.expanded&&(c.rightBladeConfiguration.tabs.processProperties.active=!0))}),c.$on(h.events.cellChanged,function(a,b){var e,f=b.cell,g=c.plainProcessDefinition,h=angular.copy(p.findById(g,d.get(f.get("id"))));"rx.ProcessModel"==f.get("type")?e=f.persist(g):f.get("inCallActivity")||(g=p.findOwner(g,d.get(f.get("id"))),e=f.persist(g)),e?(h&&h.label!=e.label?c.validateProcess():y(e,g),e.resourceType===l.processElementResourceTypes.sequenceFlow&&x(e,g)):"rx.ProcessModel"==f.get("type")&&c.validateProcess()}),c.$on(h.events.cellReparented,function(a,b){var e=b.cell;if(!e.get("inCallActivity")){var f=e.getParentId(),g=(e.get("parentType"),c.plainProcessDefinition),h=e.get("type");f&&"rx.TimerEvent"!==h&&(g=p.findById(c.plainProcessDefinition,d.get(f)));var i=v.removeElementById(c.plainProcessDefinition,d.get(e.get("id")));i.resourceType==l.processElementResourceTypes.textAnnotationAssociation||i.resourceType==l.processElementResourceTypes.textAnnotation?g.artifacts.push(i):g.flowElements.push(i),e.persist(g)}}),c.$on(h.events.graphChanged,function(a,b){var d=b.graph,e=b.cell;if(e.changed.hasOwnProperty("embeds")&&!e.rxUnembed&&"rx.SubProcess"==e.get("type")&&e.updateLayout(c.plainProcessDefinition),e.get("parent")){var f=c.paper.model.getCell(e.get("parent"));"rx.SubProcess"!=f.get("type")||e.get("inCallActivity")?c.plainProcessDefinition.layout=Y(d):f.updateLayout(c.plainProcessDefinition)}else c.plainProcessDefinition.layout=Y(d)}),c.$on(h.events.stencilSettingsChanged,function(a,b){var d=_(c.leftBladeConfiguration.tabs).values().find({name:b});d.refreshNeeded=!0}),c.$watchGroup(["selected.cellModel.id",'selected.cellModel.get("rxData").label'],Z),c.handleBreadcrumbBarClick=function(a){if(a){var b=c.paper.findViewByModel(a);c.paper.trigger("cell:pointerup",b)}else joint.ui.Halo.clear(c.paper),L()}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.designer").directive("rxProcessPreview",["RX_PROCESS_DESIGNER","rxProcessElementSearch","rxDesignerCache","rxProcessDesignerElementManager",function(a,b,c,d){return{templateUrl:"scripts/process/designer/process-preview.directive.html",scope:{rxModel:"=",rxConfiguration:"="},link:function(e){function f(c){function d(a){return _.isArray(a)||_.isObject(a)&&a.length?a.length:0}var e=a.processElementResourceTypes,f=b.filter(c,function(a){return a.resourceType==e.processAction||a.resourceType==e.userTask||a.resourceType==e.receiveTask||a.resourceType==e.callActivity}).length,g=new joint.shapes.bpmn.Event({size:{width:50,height:50},attrs:{".label":{fill:"gray",text:"Start"}},eventType:"start",position:{x:50,y:50}}),h=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:d(c.inputParams)},g:{"stroke-opacity":0}},position:{x:60,y:60}}),i=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:"Actions",fill:"gray"},g:{"stroke-opacity":0}},position:{x:235,y:110}}),j=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:"1"},g:{"stroke-opacity":0}},position:{x:410,y:60}}),k=new joint.shapes.bpmn.Event({size:{width:50,height:50},attrs:{".label":{fill:"gray",text:"End"}},eventType:"end",position:{x:400,y:50}}),l=new joint.shapes.basic.Rect({size:{width:200,height:50},attrs:{text:{text:f}},position:{x:150,y:50},eventType:"start"}),m=new joint.shapes.bpmn.Flow({source:{x:100,y:75},target:{id:l.id}}),n=new joint.shapes.bpmn.Flow({source:{id:l.id},target:{x:400,y:75}}),o=new joint.dia.Graph;return o.addCells([g,k,l,m,n,h,j,i]),o.toJSON()}var g=e.rxConfiguration.actionTypes||[];e.plainProcessDefinition=null,d.setActionTypes(g),e.rxModel&&(e.plainProcessDefinition=e.rxModel,e.rxModel.layout?(c.setProcessDefinition(e.plainProcessDefinition),e.graph=d.getGraph(e.plainProcessDefinition)):e.graph=f(e.plainProcessDefinition))}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance-viewer").directive("rxProcessInstanceViewer",["$filter","$q","$rootScope","$stateParams","definitionNameFilter","RX_DESIGNER","RX_PROCESS_DESIGNER","rxDesignerCache","rxBundleCache","rxDesignerCellHighlighter","rxGUID","rxId","rxActionTypeDataPageResource","rxProcessInstanceCommands","rxProcessDefinitionResource","rxProcessDesignerElementManager","rxProcessElementSearch","rxProcessInstanceResource","RX_PROCESS_INSTANCE","RX_PROCESS_INSTANCE_VIEWER",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return{templateUrl:"scripts/process/instance-viewer/process-instance-viewer.directive.html",scope:{rxConfiguration:"=",onClose:"&"},link:function(d){function g(){var c=b.all({bundleActionTypes:m.get(-1,0,{requireDependent:!0}),rootActionTypes:m.get(-1,0,null,{"default-bundle-scope":void 0}),processInstance:r.forProcessDefinition(d.rxConfiguration.processDefinitionName).get(d.rxConfiguration.processInstanceId)}).then(function(b){var c=b.bundleActionTypes.data.concat(b.rootActionTypes.data);p.setActionTypes(c),d.processInstance=b.processInstance,angular.isFunction(d.processInstance.plain)&&(d.processInstance=d.processInstance.plain()),d.title="Process Instance "+a("definitionName")(d.processInstance.processDefinitionName),d.processVariables={},u(),z(),d.$on("$destroy",h.clear)});d.rxBusyIndicator={promise:c}}function u(){I=C(d.processInstance),d.processInstance.processVariables["Process Instance Activity Results"]&&(J=JSON.parse(d.processInstance.processVariables["Process Instance Activity Results"])),d.processInfo=[{label:"Process ID",value:d.processInstance.instanceId},{label:"Context ID",value:d.processInstance.contextId},{label:"Context Key",value:d.processInstance.contextKey},{label:"Process Owner",value:d.processInstance.owner},{label:"Status",value:d.processInstance.status},{label:"Start Time",value:a("date")(d.processInstance.startTime,"medium")},{label:"Complete Time",value:a("date")(d.processInstance.endTime,"medium")}],d.processInstance.exceptionMessage&&(d.instanceErrors=[{elementId:"dummy-id",elementName:d.processInstance.instanceId,type:"error",message:d.processInstance.exceptionMessage}])}function v(){r.forProcessDefinition(d.processInstance.processDefinitionName).get(d.processInstance.instanceId).then(function(a){d.processInstance=a,u(),z()})}function w(){function a(a){return _.map(a,function(a){var b=_.keys(a)[0];return{label:b,value:a[b]}})}var b=angular.copy(d.processInstance.processVariables);delete b["Process Instance Activity Results"];var c,e,f={},g={},h=[],i=[],j=[];_.forEach(b,function(a,b){c=_.find(d.plainProcessDefinition.inputParams,{name:b}),e=_.find(d.plainProcessDefinition.outputParams,{name:b});var f={};c&&(f[b]=a,h.push(f)),e&&(f[b]=a,i.push(f)),c||e||(f[b]=a,j.push(f))}),h.length&&(f.inputParams={label:"Process Inputs",index:0},g.inputParams=a(h)),i.length&&(f.outputParams={label:"Process Outputs",index:1},g.outputParams=a(i)),j.length&&(f.otherVariables={label:"Process Local Variables",index:2},g.otherVariables=a(j)),d.processVariables={groups:f,fields:g}}function x(){var a=p.getGraph(d.plainProcessDefinition,{readonly:!0}),b=d.paper;b.model.fromJSON(a),_.forEach(d.processInstance.activities,function(a){var c=l.getBase(a.activityId),d=b.findViewByModel(c);if(d)if(a.activities.length&&d.model.get("expanded")){var e=b.findViewByModel(c),f=C(a);e.on("cell:expand:done",function(){var a=_.pluck(b.model.getElements(),"id");e.model._expanding||_.forEach(f,function(c){_.includes(a,l.getBase(c.activityId))&&B(c,b)})})}else B(a,b)})}function y(){var a=_(q.filter(d.plainProcessDefinition,"calledProcessDefinitionName")).pluck("calledProcessDefinitionName").flatten().unique().value();return h.getProcessDefinitions(a)}function z(){o.get(d.processInstance.processDefinitionName,null,null).then(function(a){d.plainProcessDefinition=a.plain(),d.isDesignMode=!!d.plainProcessDefinition.layout,d.isDesignMode&&F.promise.then(function(a){return d.paper=a,w(),y()}).then(function(){x()}),E()},function(){d.isDesignMode=!1})}function A(a,b,c){var d=b.findViewByModel(a);if(!d.model.get("expanded")){var e=j.get(d);e.render({strokeWidth:d instanceof joint.shapes.rx.TextAnnotationAssociationView?1:10,color:c})}}function B(a,b){var c=l.getBase(a.activityId),d=a.endTime?H:G;A(c,b,d)}function C(a){return _(a.activities).transform(function(a,b){a.push(b),b.activities.length&&a.push(C(b))}).flatten().value()}function D(b){var c,e={},f={},g=_.find(I,{activityId:b.get("rxData").id});g&&J&&J[g.executionId]&&(c=J[g.executionId][g.activityId]),g&&(e.activityInfo={label:"Activity Information",index:1},f.activityInfo=[{label:"Start Time",value:a("date")(g.startTime,"medium")},{label:"End Time",value:a("date")(g.endTime,"medium")},{label:"Execution ID",value:g.executionId}]),c&&(e.activityResults={label:"Activity Results",index:2},f.activityResults=[{label:"Output",value:c.output}]),d.activityResults={groups:e,fields:f}}function E(){d.breadcrumbs=[{name:e(d.plainProcessDefinition.name),id:d.plainProcessDefinition.name},{name:d.processInstance.instanceId,id:d.processInstance.instanceId}]}i.getBundleFriendlyName().then(function(a){d.bundleFriendlyName=a}),d.selected={},d.instanceErrors=[],d.isDesignMode=!0;var F=b.defer(),G="#89c341",H="#999999";d.processVariablesConfiguration={emptyText:"This process has no variables."},d.activityResultsConfiguration={emptyText:"Select an active or completed activity to view its results here."};var I,J;g(),d.toggleDesignMode=function(){d.isDesignMode=!d.isDesignMode},d.closeViewer=function(){c.$broadcast(t.events.close)},d.transitionsDisabled=!0,d.rightBladeConfiguration={title:"Details",tabs:{processInfo:{active:!0,name:"rx-blade-process-info-tab",iconClass:"d-icon-uml"},processVariable:{active:!1,name:"rx-blade-process-property-tab",iconClass:"d-icon-gear"},activityResults:{active:!1,name:"rx-blade-process-element-tab",iconClass:"d-icon-arrow_chart"},errorsMessages:{active:!1,name:"rx-blade-process-errors-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},d.canvasInstanceId=k.generate();var K=["rx.CallActivity","rx.ProcessAction","rx.ReceiveTask","rx.SubProcess","rx.TextAnnotation","rx.UserTask"];d.canvasConfiguration={interactive:!1,customActionsLeft:[{label:"Suspend",iconCls:"d-icon-pause",eventName:f.events.canvasSuspend,isDisabled:function(){return _.includes([s.status.suspended,s.status.errored,s.status.completed],d.processInstance.status)}},{label:"Resume",iconCls:"d-icon-play_o",eventName:f.events.canvasResume,isDisabled:function(){return _.includes([s.status.active,s.status.completed],d.processInstance.status)}},{label:"Cancel",iconCls:"d-icon-cross_circle_o",eventName:f.events.canvasCancel,isDisabled:function(){return d.processInstance.status==s.status.completed}}],customActionsRight:[{iconCls:"d-icon-refresh",buttonCls:"refresh",eventName:f.events.canvasRefresh}]},d.$on(f.events.canvasRefresh,function(){v()}),d.$on(f.events.canvasResume,function(){n.resume(d.processInstance.processDefinitionName,d.processInstance.instanceId).then(v)}),d.$on(f.events.canvasCancel,function(){n.cancel(d.processInstance.processDefinitionName,d.processInstance.instanceId).then(v)}),d.$on(f.events.canvasSuspend,function(){n.suspend(d.processInstance.processDefinitionName,d.processInstance.instanceId).then(v);
}),d.$on(f.events.canvasReady,function(a,b){F.resolve(b.paper)}),d.$on(f.events.cellPointerUp,function(a,b){var c=b.cellView.model,e=b.cellView.$el.closest("html").length>0;d.activityResults=null,e&&_.includes(K,c.get("type"))&&(D(c),d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.activityResults.active=!0))}),d.$on(f.events.blankPointerDown,function(a,b){d.activityResults=null,d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.processInfo.active=!0)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").directive("rxProcessInstancesChart",function(){return{templateUrl:"scripts/process/management/process-instances-chart.directive.html",scope:{rxData:"="},link:function(a){function b(){var b=_.max(_.pluck(a.rxData[0].values,"value")),c=Math.floor(Math.log(b)/Math.LN10);return c>6?20-c:20}var c=null;nv.addGraph(function(){return c=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:30,right:20,bottom:50,left:150}).showValues(!0).valueFormat(d3.format(",d")).barColor(["#89C341","#F1B521","#F83200","#3CB6CE"]).showLegend(!1).fillOpacity(1).showControls(!1),c.yAxis.tickFormat(d3.format(",d")),c.yAxis.ticks(b()),c.yAxis.tickPadding(10),c.xAxis.tickPadding(10),c.groupSpacing(.25),c.tooltip.enabled(!1),d3.select("svg").datum(a.rxData).transition().duration(500).call(c),d3.selectAll("svg .nv-x line").remove(),nv.utils.windowResize(c.update),c}),a.$watch("rxData",function(){c&&(c.update(),d3.selectAll("svg .nv-y .domain").remove())},!0)}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").directive("rxProcessManagementConsole",["$q","$rootScope","$timeout","$stateParams","$uibModal","rxProcessManagementUtils","rxBundleCache","definitionNameFilter","rxProcessInstanceGridFilter","rxProcessDefinitionDataPageResource","rxProcessInstanceDataPageResource","rxProcessInstanceCountsByStatusDataPageResource","rxProcessInstanceCommands","rxFieldTypeDefinitionDataPageResource","RX_PROCESS_INSTANCE","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{templateUrl:"scripts/process/management/process-management.directive.html",scope:{onClose:"&",onViewProcessInstance:"&",rxConfiguration:"="},link:function(b){function c(){var a=b.selectedProcess.name||void 0;l.get(a,-1,0,s()).then(function(a){var c=a.plain().data[0];_.each(_.keys(o.status),function(a,d){b.chartData[0].values[d].value=c[o.status[a]]})})}function d(b,c){rx.assert.assertFunction(b,"Instance action should be a function");var d=_.pluck(y,"instanceId"),e=_.pluck(y,"processDefinitionName")[0],f=_.map(d,function(a){return b(e,a,c)});return a.all(f).then(function(){t()})}function q(){y=x.selection.getSelectedRows(),r(y)}function r(a){_.forOwn(C,function(a,b){a.propertiesByName.disabled=!1});var b=function(a){var b=_.filter(C,function(b){return _.includes(b.disabledStatuses,a)});_.each(b,function(a){a.propertiesByName.disabled=!0})};_.isEmpty(a)||(a.length>1&&_(a).pluck("status").uniq().size()>1?_.forOwn(C,function(a,b){a.propertiesByName.disabled=!0}):b(a[0].status))}function s(a){var c=a||{};return b.timeFrame&&b.timeFrame.startedAfter&&(c.startedAfter=b.timeFrame.startedAfter.toISOString(),b.timeFrame.finishedBefore&&(c.finishedBefore=b.timeFrame.finishedBefore.toISOString())),c}function t(){b.processInstanceGridConfiguration.api.refresh(),c()}function u(){b.$watch("timeFrame",function(a,b){a!==b&&t()}),b.$watchGroup(["selectedProcess","selectedStatusFilter","timeFrame"],function(a,c){b.rxConfiguration=v(a)})}function v(a){var b={},c=a[2];return b.process=a[0].name,b.status=a[1].value,c.keyword?(b.startedAfter=c.keyword,b.finishedBefore=null):(b.startedAfter=c.startedAfter.toISOString(),b.finishedBefore=c.finishedBefore.toISOString()),b}function w(){b.breadcrumbs=[],b.selectedProcess.name&&b.breadcrumbs.push({name:h(b.selectedProcess.name),id:b.selectedProcess})}var x,y=[],z="All Processes",A=null;g.getBundleFriendlyName().then(function(a){b.bundleFriendlyName=a}),b.processDefinitions=[],b.selectedProcess=null,b.timeFrame={startedAfter:f.isCustomTimeFrame(b.rxConfiguration.startedAfter)?new Date(b.rxConfiguration.startedAfter):b.rxConfiguration.startedAfter,finishedBefore:b.rxConfiguration.finishedBefore?new Date(b.rxConfiguration.finishedBefore):b.rxConfiguration.finishedBefore},b.chartData=[{key:"Process Instances",values:[{label:"Active Processes",value:0},{label:"Suspended Processes",value:0},{label:"Errored Processes",value:0},{label:"Completed Processes",value:0}]}],b.processInstancesStatus=[{content:"Active",value:o.status.active},{content:"Suspended",value:o.status.suspended},{content:"Errored",value:o.status.errored},{content:"Completed",value:o.status.completed},{content:"All",value:"All"}],b.selectedStatusFilter=_.find(b.processInstancesStatus,{value:b.rxConfiguration.status});var B={fieldDefinitions:[{id:"instanceId",title:"ID",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"},{id:"owner",title:"Owner",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"},{id:"contextKey",title:"Context Key",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"},{id:"processDefinitionName",title:"Process Definition",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"},{id:"startTime",title:"Start Date",resourceType:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition",cellFilter:"date:'medium'"},{id:"endTime",title:"Complete Date",resourceType:"com.bmc.arsys.rx.standardlib.record.DateTimeFieldDefinition",cellFilter:"date:'medium'"},{id:"status",title:"Status",resourceType:"com.bmc.arsys.rx.standardlib.record.CharacterFieldDefinition"}]},C={suspend:{propertiesByName:{label:"Suspend",iconCls:"pause",style:"clear"},actions:[{name:function(){return d(m.suspend)}}],disabledStatuses:[o.status.suspended,o.status.errored,o.status.completed]},resume:{propertiesByName:{label:"Resume",iconCls:"play_o",style:"clear"},actions:[{name:function(){return d(m.resume)}}],disabledStatuses:[o.status.active,o.status.completed]},cancel:{propertiesByName:{label:"Cancel",iconCls:"cross_circle_o",style:"clear"},actions:[{name:function(){return d(m.cancel)}}],disabledStatuses:[o.status.completed]}};b.processInstanceGridConfiguration={enableFiltering:!0,recordIdField:!1,columns:[{fieldId:"instanceId",title:"ID",filterable:!1,cellTemplate:['<div class="ui-grid-cell-contents">','<a class="ui-grid__link" ng-click="grid.appScope.openInstanceViewer(row)">',"{{COL_FIELD CUSTOM_FILTERS}}","</a>","</div>"].join("")},{fieldId:"owner",title:"Owner"},{fieldId:"contextKey",title:"Context Key"},{fieldId:"processDefinitionName",title:"Process Definition",filterable:!1,cellFilter:"definitionName"},{fieldId:"startTime",filterable:!1,title:"Start Date",cellFilter:"date:'medium'"},{fieldId:"endTime",filterable:!1,title:"Complete Date",cellFilter:"date:'medium'"},{fieldId:"status",title:"Status",filterable:!1,cellClass:"red",cellTemplate:['<div class="ui-grid-cell-contents">',"{{grid.appScope.pretifyStatusName(COL_FIELD)}}","</div>"].join("")}],uiGridOptions:{onRegisterApi:function(a){x=a,a.grid.appScope.openInstanceViewer=function(a){b.onViewProcessInstance()(a.entity.processDefinitionName,a.entity.instanceId)},a.grid.appScope.pretifyStatusName=function(a){return _.capitalize(a.toLowerCase())},a.selection.on.rowSelectionChanged(b,q),a.selection.on.rowSelectionChangedBatch(b,q)}},actionButtons:[C.suspend,C.resume,C.cancel],getData:function(a,c,d,e){return"All"!==b.selectedStatusFilter.value&&(d.status=b.selectedStatusFilter.value),delete d.queryExpression,_.assign(d,i.generateQueryParams(e)),s(d),k.get(b.selectedProcess.name,a,c,d)},getRecordDefinition:function(){return a.when(B)}};var D=j.get(-1,0,{propertySelection:["name","id","isEnabled"]}).then(function(a){b.processDefinitions=_(a.data).map(function(a){return a.content=h(a.name),a}).sortBy(function(a){return a.content.toLowerCase()}).unshift({content:z,name:null}).value(),b.selectedProcess=_.find(b.processDefinitions,{name:b.rxConfiguration.process})||b.processDefinitions[0],c(),w(),u()});b.rxBusyIndicator={promise:D},n.get().then(function(a){var b=a.data;b.push({fieldDefinitionType:p.dataTypes.recordInstance.resourceType,fieldInstanceType:"com.bmc.arsys.rx.services.process.domain.record.RecordInstanceFieldInstance",fieldTypeName:"standardlib:RecordInstanceFieldType",fieldValueType:"com.bmc.arsys.rx.services.record.domain.RecordInstance",fieldValueTypeDetail:[{name:"id",dataType:"String",dataTypeDetail:null},{name:"recordDefinitionName",dataType:"String",dataTypeDetail:null}]}),A=b}),b.selectProcessItem=function(a){b.selectedProcess=a,t(),w()},b.changeStatusFilter=function(a){b.selectedStatusFilter=a,b.processInstanceGridConfiguration.api.refresh()},b.startProcess=function(){if(!b.isRunDisabled()){var a=e.open({templateUrl:"scripts/process/management/start-process-dialog.html",controller:"StartProcessDialogController",windowClass:"d-action-blade rx-start-process-modal",resolve:{context:{selectedProcess:b.selectedProcess,fieldTypes:A}}});a.result.then(function(){t()})}},b.previewProcess=function(){if(!b.isPreviewDisabled()){var a=e.open({templateUrl:"scripts/process/management/preview-process-dialog.html",controller:"PreviewProcessDialogController",windowClass:"rx-preview-process-modal",resolve:{context:{selectedProcess:b.selectedProcess}}});a.result.then(function(a){b.startProcess()})}},b.isRunDisabled=function(){return!(!b.selectedProcess||_.isNull(A))&&!(b.selectedProcess.isEnabled&&b.selectedProcess.name)},b.isPreviewDisabled=function(){return!(b.selectedProcess&&b.selectedProcess.name)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").directive("rxTimeFrameDropdown",["$filter","rxProcessManagementUtils",function(a,b){return{templateUrl:"scripts/process/management/time-frame-dropdown.directive.html",scope:{rxTimeFrame:"="},controller:["$scope",function(a){a.datepickerOptions={showWeeks:!1}}],link:function(c){function d(){c.rxTimeFrame&&!b.isCustomTimeFrame(c.rxTimeFrame.startedAfter)?c.selectTimeFrame(_.find(c.dropdownItems,{keyword:c.rxTimeFrame.startedAfter})):c.rxTimeFrame&&c.rxTimeFrame.startedAfter&&c.rxTimeFrame.finishedBefore?(c.selectTimeFrame(_.last(c.dropdownItems)),c.applyCustomRange()):c.selectTimeFrame(_.first(c.dropdownItems))}c.datePickersModels={},c.datePickersModels.finishedBeforeOpened=!1,c.datePickersModels.startedAfterOpened=!1,c.datePickersModels.startedAfter=b.isCustomTimeFrame(c.rxTimeFrame.startedAfter)?c.rxTimeFrame.startedAfter:moment().subtract(1,"months").toDate(),c.datePickersModels.finishedBefore=c.rxTimeFrame.finishedBefore||moment().toDate(),c.dropdownItems=[{label:"Last Hour",keyword:"$LASTHOUR$",duration:moment.duration(1,"hour")},{label:"Last Day",keyword:"$LASTDAY$",duration:moment.duration(1,"day")},{label:"Last Week",keyword:"$LASTWEEK$",duration:moment.duration(1,"week")},{label:"Last Month",keyword:"$LASTMONTH$",duration:moment.duration(1,"month")},{label:"Last Three Months",keyword:"$LASTTHREEMONTHS$",duration:moment.duration(3,"month")},{label:"Custom Range...",customRangeValue:null}],c.dropdownStatus={isOpen:!1},c.openDatePicker=function(a,b){a.preventDefault(),a.stopPropagation(),c.datePickersModels[b]=!0},c.selectTimeFrame=function(a){c.selectedItem=a,_.has(c.selectedItem,"customRangeValue")?c.showCustomRange=!0:(c.rxTimeFrame={startedAfter:moment().subtract(c.selectedItem.duration),keyword:c.selectedItem.keyword},c.showCustomRange=!1,c.dropdownStatus.isOpen=!1)},c.applyCustomRange=function(){c.rxTimeFrame={startedAfter:moment(c.datePickersModels.startedAfter),finishedBefore:moment(c.datePickersModels.finishedBefore)},c.dropdownStatus.isOpen=!1,c.selectedItem.customRangeValue=a("date")(c.datePickersModels.startedAfter,"medium")+" - "+a("date")(c.datePickersModels.finishedBefore,"medium")},d()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").directive("rxRecordCustomizationOptions",["$uibModal","$q","RX_DESIGNER","RX_OVERLAY",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/customization-options/customization-options.directive.html",scope:{rxConfiguration:"="},link:function(b){b.openCustomizationOptionsEditor=function(){var e=a.open({templateUrl:"scripts/record/designer/inspector-editors/customization-options/record-customization-options-editor.html",controller:"RecordCustomizationOptionsEditorController",backdrop:"static",resolve:{recordDefinition:function(){return b.rxConfiguration.cell.get("rxData")},overlayOperation:function(){var a=b.rxConfiguration.cell.get("rxData");return a.overlayGroupId?b.rxConfiguration.cell.get("overlayOperation"):d.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP}},windowClass:"rx-customization-options-modal"});e.result.then(function(a){b.$emit(c.events.customizationOptionsUpdated,a)})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorRecordIndexEditor",["$uibModal","RX_RECORD_DEFINITION",function(a,b){return{restrict:"E",templateUrl:"scripts/record/designer/inspector-editors/record-index-editor/inspector-record-index-editor.directive.html",link:function(c){function d(a,b){f({index:a,arrayIndex:b})}function e(a,b){i(a)||(c.indexDefinitions.splice(b,1),h())}function f(b){return b=b||{},a.open({templateUrl:"scripts/record/designer/inspector-editors/record-index-editor/record-index-editor-dialog.view.html",controller:"RecordIndexEditorDialogController",windowClass:"rx-record-index-editor-dialog",resolve:{options:function(){return{definitionName:j.name,index:b.index,fields:_.map(j.fieldDefinitions,function(a){return{label:a.name,value:a.id}}),isFieldSelectionDisabled:Boolean(b.index&&i(b.index))}}}}).result.then(function(a){g(a,b)})}function g(a,b){b.index?c.indexDefinitions.splice(b.arrayIndex,1,a):c.indexDefinitions.push(a),h()}function h(){c.cell.prop("rxData/indexDefinitions","",{silent:!0}),c.cell.prop("rxData/indexDefinitions",c.indexDefinitions)}function i(a){var c=[b.coreFieldIds.id,b.coreFieldIds.guid];return a.unique&&_.isArray(a.indexFieldIds)&&1===_.size(a.indexFieldIds)&&_.contains(c,a.indexFieldIds[0])}var j=_.cloneDeep(c.cell.prop("rxData"));c.indexDefinitions=j.indexDefinitions||[],c.editIndex=d,c.deleteIndex=e,c.createNewIndex=f,c.isSystemIndex=i}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxRecordIndexFieldSelector",function(){return{restrict:"E",templateUrl:"scripts/record/designer/inspector-editors/record-index-editor/record-index-field-selector.directive.html",scope:{list:"=",dndEnabled:"@",fieldSelectionDisabled:"="},link:function(a){a.select=function(b){a.fieldSelectionDisabled||(a.dndEnabled?_.forEach(a.list,function(a){a.selected=a===b}):b.selected=!b.selected)}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").directive("rxInheritanceSelector",["$q","rxRecordDefinitionResource","rxFieldDefinition","RX_RECORD_DESIGNER","RX_RECORD_DEFINITION",function(a,b,c,d,e){return{restrict:"E",templateUrl:"scripts/record/designer/inspector-editors/record-inheritance-selector/record-inheritance-selector.directive.html",link:function(a){function f(b){var d=_.union(_.keys(c.getNewFieldDefinition()),["isInherited","anyUserAllowedToSubmit","displayType","explicitPermissions","fieldMapping","fieldTypeName","maxLength","maxSize","maxValue","minValue","namedListDefinition","optionNamesById","precision","resourceType","searchable","shouldPersistEncrypted","tags","version"]);a.inheritanceDescriptor.isInheritingFieldPermissions&&d.push("permissions");var f=_.map(b.fieldDefinitions,function(a){return a.isInherited=!0,_.pick(a,d)});return a.inheritingCoreFields||_.remove(f,function(a){return _.contains(e.AR_CORE_FIELD_IDS,a.id)}),f}var g,h=_.cloneDeep(a.cell.get("rxData")),i=_.cloneDeep(h),j=!h.lastUpdateTime,k={inheritingFrom:"",isInheritingRules:!1,isInheritingFieldPermissions:!1};h.inheritanceDescriptor&&h.inheritanceDescriptor.inheritingFrom&&b.get(h.inheritanceDescriptor.inheritingFrom).then(function(b){if(g=b.plain(),g.isSharedInstanceStorage)a.state.inheritCoreFieldsAutomatically=!0,a.inheritingCoreFields=!0;else{var c=h.fieldDefinitions;a.inheritingCoreFields=_.some(c,function(a){return a.isInherited&&_.contains(e.AR_CORE_FIELD_IDS,a.id)})}}),a.state={editMode:!j,inheritCoreFieldsAutomatically:!1,lockShareDataOption:!j&&h.isSharedInstanceStorage,lockCoreFieldInheritanceOption:!!h.lastUpdateTime},a.inheritingCoreFields=!1,a.definitionType="record",a.inheritanceOptions=_.pick(h,["isSharedInstanceStorage","isFinal","isAbstract"]),a.inheritanceDescriptor=h.inheritanceDescriptor,a.showRecordInheritanceOptions=function(){a.inheritanceDescriptor=_.cloneDeep(k),a.state.inheritCoreFieldsAutomatically=!1},a.removeInheritance=function(){a.inheritanceDescriptor=null,a.state.lockShareDataOption&&j?(a.state.lockShareDataOption=!1,a.inheritanceOptions.isSharedInstanceStorage=!1):a.state.lockShareDataOption&&!j&&(a.state.lockShareDataOption=i.isSharedInstanceStorage,a.inheritanceOptions.isSharedInstanceStorage=i.isSharedInstanceStorage,a.inheritingCoreFields=!1),a.$emit(d.events.inheritanceChange,{inheritanceDescriptor:null,inheritingCoreFields:!1}),a.cell.set("rxData",_.assign(h,{inheritanceDescriptor:null}),{silent:!0})},a.inheritCoreFieldsChange=function(){a.inheritingCoreFields||a.$emit(d.events.inheritanceChange,{inheritingCoreFields:a.inheritingCoreFields}),b.get(h.inheritanceDescriptor.inheritingFrom).then(function(b){g=b.plain();var c=f(g);a.$emit(d.events.inheritanceChange,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor),inheritedFieldDefinitions:c,inheritingCoreFields:a.inheritingCoreFields}),a.cell.set("rxData",_.assign(h,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor)}),{silent:!0})})},a.inheritanceOptionsChange=function(b,c){a.inheritanceOptions[b]=c,a.$emit(d.events.inheritanceChange,_.clone(a.inheritanceOptions)),a.cell.set("rxData",_.assign(h,a.inheritanceOptions),{silent:!0})},a.onInheritanceDescriptorChange=function(b,c){if(a.inheritanceDescriptor[b]=c,a.cell.set("rxData",_.assign(h,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor)}),{silent:!0}),"isInheritingFieldPermissions"===b){var e=f(g);a.$emit(d.events.inheritanceChange,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor),inheritedFieldDefinitions:e,inheritingCoreFields:a.inheritingCoreFields})}else a.$emit(d.events.inheritanceChange,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor)})},a.$watch("inheritanceDescriptor.inheritingFrom",function(c,e){c&&c!==e&&(a.$emit(d.events.toggleColumnVisibility,{field:"isInherited",visible:!0}),b.get(c).then(function(b){g=b.plain(),g.isSharedInstanceStorage?(a.inheritanceOptionsChange("isSharedInstanceStorage",!0),a.state.lockShareDataOption=!0,a.state.inheritCoreFieldsAutomatically=!0,a.inheritingCoreFields=!0,a.inheritanceDescriptor.isInheritingRules=!0):(j&&a.state.lockShareDataOption&&(a.state.lockShareDataOption=!1,a.inheritanceOptions.isSharedInstanceStorage=!1),a.state.inheritCoreFieldsAutomatically=!1,a.inheritingCoreFields=!1,a.inheritanceDescriptor.isInheritingRules=!0);var c=f(g);a.$emit(d.events.inheritanceChange,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor),inheritedFieldDefinitions:c,inheritingCoreFields:a.inheritingCoreFields}),a.cell.set("rxData",_.assign(h,{inheritanceDescriptor:_.clone(a.inheritanceDescriptor)}),{silent:!0})}))})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").directive("rxInspectorSecurityLabelEditor",["$uibModal","dialogs",function(a,b){return{restrict:"E",templateUrl:"scripts/record/designer/inspector-editors/security-labels/inspector-security-label-editor.directive.html",link:function(c){c.securityLabels=c.cell.prop("rxData/securityLabels")||[];var d=function(a){var b={};return _.filter(_.cloneDeep(a),function(a){var c=a.name,d=a.parent;return b[c]=_.defaults(a,b[c],{children:[]}),d&&(b[d]=b[d]||{children:[]}).children.push(a),!d})};c.securityLabelsTree=d(c.securityLabels),c.openSecurityLabelsEditor=function(b){a.open({templateUrl:"scripts/record/designer/inspector-editors/security-labels/security-label-editor.html",controller:"SecurityLabelEditorController",backdrop:"static",resolve:{securityLabelsContext:{securityLabels:c.securityLabels,editSecurityLabel:b}},windowClass:"rx-security-label-editor-dialog"}).result.then(function(a){c.cell.prop("rxData/securityLabels","",{silent:!0}),c.cell.prop("rxData/securityLabels",a)})},c.removeSecurityLabel=function(a){b.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){var b=_.findIndex(c.securityLabels,{name:a.name});b!==-1&&(_.forEach(c.securityLabels,function(b){b.parent===a.name&&(b.parent=a.parent)}),c.securityLabels.splice(b,1),c.cell.prop("rxData/securityLabels","",{silent:!0}),c.cell.prop("rxData/securityLabels",c.securityLabels))})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").directive("rxRecordDesigner",["$q","$timeout","$filter","$rootScope","$stateParams","rxNotificationMessage","dialogs","rxExpressionEditor","rxDesignerCache","rxBundleCache","rxUtils","RX_DESIGNER","RX_EXPRESSION_EDITOR","RX_RECORD_DESIGNER","RX_RECORD_DEFINITION","rxRecordDefinitionResource","rxRecordDefinitionModel","rxJoinRecordDefinitionModel","rxJoinRecordDefinitionDataDictionary","rxFieldDefinitionManager","uiGridConstants",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return{templateUrl:"scripts/record/designer/record-designer.directive.html",scope:{rxModel:"="},link:function(e,v){function w(a,b){return a<b?-1:a>b?1:0}function x(a,b){var d=c("resourceType")(a).toLowerCase(),e=c("resourceType")(b).toLowerCase();return w(d,e)}function y(a,b){return _.isNull(a)&&(a=""),_.isNull(b)&&(b=""),w(a,b)}function z(a,b){return a=_.isString(a)?Number.MAX_VALUE:a,b=_.isString(b)?Number.MAX_VALUE:b,w(a,b)}function A(a){return a.resourceType===o.recordDefinitionTypes.join.recordDefinitionType}function B(a){var b="";_.isEmpty(a)||(b=_.any(a,{type:"error"})?"error":_.any(a,{type:"warning"})?"warning":"info"),e.selected.validationIssues=a,e.validationIssueLevel=b}function C(a){var b=t.getModel(a);return b.set({id:b.get("rxData").id})}function D(a){e.graph=e.graph||new joint.dia.Graph,e.graph.clear({silent:!0}),I=N?new r(a):new q(a),I.set({id:"recordDefinition"}),N?s.getCommonDataDictionary(L,I).then(function(a){I.getExpressionConfigurator().cellDataDictionary=k.flattenTree({children:a}),e.selected.recordDefinitionModel=I}):e.selected.recordDefinitionModel=I;var b=_(a.fieldDefinitions).map(C).concat(I).value();e.graph.addCells(b,{silent:!0})}function E(){I.validate(e.plainRecordDefinition).then(B)}function F(a){_.forEach(a.fieldDefinitions,function(a){a.customId?a.id=a.customId:_.isString(a.id)&&a.id.match(/^rx-/)&&delete a.id,delete a.customId})}function G(){var a=e.selected.fieldDefinitionModel;a?e.breadcrumbs=[{name:a.get("rxData").name,icon:a.get("icon")}]:e.breadcrumbs=[]}function H(a,b){var c=e.gridOptions.columnDefs,d=_.find(c,{field:b.field});d&&(d.visible=b.visible||!(d.visible||void 0===d.visible),e.gridApi.core.notifyDataChange(u.dataChange.COLUMN))}var I,J,K=e.rxModel,L=K.plain(),M=!L.lastUpdateTime,N=A(L),O=_.some(L.fieldDefinitions,{isInherited:!0});e.isJoinRecordDefinition=N,e.plainRecordDefinition=L;var P=function(){e.rxRecordDesignerForm&&e.rxRecordDesignerForm.json.$setPristine()};e.isDesignMode=!0,e.selected={recordDefinitionModel:null,fieldDefinitionModel:null,validationIssues:[]},e.gridOptions={data:"plainRecordDefinition.fieldDefinitions",enableColumnMenus:!1,rowHeight:35,enableFullRowSelection:!0,modifierKeysToMultiSelect:!0,enableSelectAll:!0,primaryKey:"id",onRegisterApi:function(a){function b(){var b=a.selection.getSelectedRows();if(e.gridState=a.saveState.save(),1===b.length){var c=e.graph.getCell(b[0].id);_.isFunction(c.updateInspectorConfig)?c.updateInspectorConfig().then(function(){e.selected.fieldDefinitionModel=c}):e.selected.fieldDefinitionModel=c,e.rightBladeConfiguration.expanded&&(e.rightBladeConfiguration.tabs.fieldProperties.active=!0)}else e.selected.fieldDefinitionModel=null}e.gridApi=a,a.selection.on.rowSelectionChanged(e,b),a.selection.on.rowSelectionChangedBatch(e,b)},columnDefs:[{field:"name",displayName:"Field Name",headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize"},{field:"fieldMapping",displayName:"Source Record",cellFilter:"recordDefinitionFieldMapping:this.row.entity:grid.appScope.plainRecordDefinition",headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize",visible:N},{field:"id",displayName:"",width:40,sortFn:z,headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize",cellTemplate:'<div class = "rx-icon-cell text-center"><i ng-if="['+(N?o.joinRecordDefinitionCoreFieldIds:o.AR_CORE_FIELD_IDS)+'].indexOf(row.entity.id) > -1" tooltip-placement="right" tooltip-append-to-body="true" uib-tooltip="Core Field A core field cannot be deleted and only certain core field properties can be changed." class = "icon d-icon-lock"></i></div>'},{field:"isInherited",displayName:"Inherited",width:100,visible:O,headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize",cellTemplate:'<div class = "rx-icon-cell text-center"><i ng-if="row.entity.isInherited" class="icon d-icon-check"></i></div>'},{field:"resourceType",displayName:"Data Type",cellFilter:"resourceType",sortFn:x,headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize"},{field:"fieldOption",displayName:"Required",cellFilter:"fieldOption",headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize"},{field:"defaultValue",displayName:"Default Value",sortFn:y,cellFilter:"fieldDefaultValue",headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell_customize"}],saveRowIdentity:function(a){return a.id}},e.$watch("plainRecordDefinition.fieldDefinitions",function(a){e.gridState&&e.gridApi.saveState.restore(e,e.gridState),e.graph.getCell("recordDefinition").updateInspectorConfig(a)}),e.isDeleteDisabled=function(){var a=_.result(e,"gridApi.selection.getSelectedRows",[]),b=_.any(a,function(a){return _.includes(o.AR_CORE_FIELD_IDS,a.id)||a.isInherited});return!a.length||b&&!N},e.openAddFieldDialog=function(){g.create("scripts/record/designer/add-fields-dialog/add-fields-dialog.view.html","AddFieldsDialogController",{model:I,definition:_.pick(e.plainRecordDefinition,["primaryRecordDefinitionName","secondaryRecordDefinitionName"]),fieldMappings:_(e.plainRecordDefinition.fieldDefinitions).map("fieldMapping")},{copy:!1,backdrop:"static",windowClass:"rx-add-fields-dialog"},"ctrl").result.then(function(a){_.size(a)&&(J.initBatchCommand(),e.graph.addCells(a.map(C)),J.storeBatchCommand())})},e.addNewField=function(a){e.graph.addCell(C(t.getNewFieldDefinition(a)))},e.deleteFields=function(){g.confirm("Warning!","If you delete a field, any data stored in the field also will be deleted. Do you want to continue?").result.then(function(){var a=e.gridApi.selection.getSelectedRows();_.forEach(a,function(a){e.graph.getCell({id:a.id}).remove()}),_.remove(a)})},e.resourceTypeOptions=_(o.dataTypes).values().without(o.dataTypes.dataPartition,o.dataTypes.recordInstance).sort(function(a,b){return a.displayName.localeCompare(b.displayName)}).map(function(a){return{value:a.resourceType,content:a.displayName}}).value(),e.toggleDesignMode=function(){e.isDesignMode=!e.isDesignMode},e.saveRecordDefinition=function(){var a=function(){J.reset(),f.success("Record Definition saved successfully."),P(),d.$broadcast(n.events.afterSave),M||p.get(K.name).then(function(a){K=a,e.plainRecordDefinition=K.plain(),D(e.plainRecordDefinition),e.gridApi.selection.clearSelectedRows(),e.selected.fieldDefinitionModel=null})};M||_.each(e.plainRecordDefinition.fieldDefinitions,function(a){a.overlayDescriptor&&(a.permissions=a.explicitPermissions)}),I.validate(e.plainRecordDefinition).then(function(b){if(b.length&&_.find(b,function(a){return"error"===a.type||"warning"===a.type}))e.isDesignMode||e.toggleDesignMode(),B(b),e.rightBladeConfiguration.tabs.validationIssues.active=!0,f.error("The Record Definition is not valid");else{var c=_.cloneDeep(e.plainRecordDefinition);F(c),_.assign(K,c),M?p.post(c).then(a):K.put().then(a)}})},e.$on("beforeUnload",function(b,c){var d=a.defer();c.push(d.promise),J.hasUndo()?g.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(function(){d.resolve()}):d.resolve()}),e.closeDesigner=function(){d.$broadcast(n.events.close)},e.handleBreadcrumbBarClick=function(){e.gridApi.selection.clearSelectedRows(),e.selected.fieldDefinitionModel=null,e.rightBladeConfiguration.expanded&&(e.rightBladeConfiguration.tabs.recordProperties.active=!0)},e.hasUndo=function(){return J.hasUndo()},e.hasRedo=function(){return J.hasRedo()},e.undo=function(){var a=_.last(J.undoStack);"add"==a.action?g.confirm("Warning!","If you delete a field, any data stored in the field also will be deleted. Do you want to continue?").result.then(function(){J.undo(),e.gridApi.selection.clearSelectedRows()}):J.undo()},e.redo=function(){var a=_.last(J.redoStack);"remove"==a.action?g.confirm("Warning!","If you delete a field, any data stored in the field also will be deleted. Do you want to continue?").result.then(function(){J.redo(),e.gridApi.selection.clearSelectedRows()}):J.redo()},e.canSave=function(){return e.rxRecordDesignerForm&&e.rxRecordDesignerForm.$valid&&(e.rxRecordDesignerForm.json.$dirty||J.hasUndo())},e.rightBladeConfiguration={title:"Details",tabs:{recordProperties:{active:!0,name:"rx-blade-record-property-tab",iconClass:"d-icon-pencil"},fieldProperties:{name:"rx-blade-field-property-tab",iconClass:"d-icon-gear"},validationIssues:{name:"rx-blade-validation-issues-property-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},e.transitionsDisabled=!0,b(function(){e.transitionsDisabled=!1,M&&v.find('.rx-record-inspector input[data-attribute="rxData/name"]').focus().select(),$(window).resize()},100),e.$watch("rightBladeConfiguration.expanded",function(){b(function(){$(window).resize()},100)}),e.$watchGroup(["selected.fieldDefinitionModel.id",'selected.fieldDefinitionModel.get("rxData").name'],G),e.inspectorConfiguration={emptyText:"Select a single field from the grid to view its properties here."},e.validationIssuesConfiguration={emptyText:"The Record Definition is valid."},e.$on(n.events.fieldOverlayReverted,function(a,b){var c=b.get("rxData");i.getRecordDefinitionFromOverlay(e.plainRecordDefinition.name,c.overlayDescriptor.parentOverlayGroupId).then(function(a){var d=_.find(a.fieldDefinitions,{id:c.id});d.overlayGroupId=c.overlayGroupId,d.overlayDescriptor=null,J.initBatchCommand(),b.set("isReverted",!0),b.set("rxData",d),J.storeBatchCommand()})}),e.$on(n.events.inheritanceChange,function(a,b){if(_.has(b,"inheritedFieldDefinitions")){var c=b.inheritedFieldDefinitions,d=b.inheritingCoreFields;e.gridApi.selection.clearSelectedRows(),e.selected.fieldDefinitionModel=null,_.each(c,function(a){e.graph.getCell({id:a.id})&&e.graph.getCell({id:a.id}).remove()}),_.remove(e.plainRecordDefinition.fieldDefinitions,function(a){return d?!(!d||!_.contains(o.AR_CORE_FIELD_IDS,a.id)):(a.isInherited=!1,!1)}),e.plainRecordDefinition.fieldDefinitions=_.union(e.plainRecordDefinition.fieldDefinitions,c),_.assign(e.plainRecordDefinition,{inheritanceDescriptor:b.inheritanceDescriptor});var f=_(e.plainRecordDefinition.fieldDefinitions).map(C).value();e.graph.addCells(f,{silent:!0})}else _.has(b,"inheritingCoreFields")&&_.each(e.plainRecordDefinition.fieldDefinitions,function(a){a.isInherited=!1}),_.assign(e.plainRecordDefinition,_.omit(b,"inheritingCoreFields"));
e.rxRecordDesignerForm.json.$setDirty()}),e.$on(l.events.customizationOptionsUpdated,function(a,b){var c=e.graph.getCell("recordDefinition");_.assign(e.plainRecordDefinition,b.customizationOptions),J.initBatchCommand(),_.each(b.customizationOptions,function(a,b){c.prop("rxData/"+b,a)}),_.each(b.updatedFieldDefinitions,function(a){var b=e.graph.getCell(a.id);_.each(a.changedProperties,function(a,c){b.prop("rxData/"+c,a)})}),J.storeBatchCommand()}),e.$on(l.events.correctValidationIssue,function(a,c){var d=c.validationIssue,f=_.findIndex(e.plainRecordDefinition.fieldDefinitions,{id:d.elementId});f===-1?e.rightBladeConfiguration.tabs.recordProperties.active=!0:(e.gridApi.selection.clearSelectedRows(),e.gridApi.selection.selectRow(e.plainRecordDefinition.fieldDefinitions[f]));var g=d.propertyName||"";g&&b(function(){var a=v.find('[data-attribute="rxData/'+g+'"]');a.focus().select()},2)}),e.$on(n.events.toggleColumnVisibility,H),e.$on(l.events.refreshDesigner,function(){J.reset(),M||p.get(K.name).then(function(a){K=a,e.plainRecordDefinition=K.plain(),D(e.plainRecordDefinition),e.gridApi.selection.clearSelectedRows(),e.selected.fieldDefinitionModel=null})}),j.getBundleFriendlyName().then(function(a){e.bundleFriendlyName=a}),D(e.plainRecordDefinition),J=new joint.dia.CommandManager({graph:e.graph,cmdBeforeAdd:function(a,b,c,d){return!(d||{}).ignoreCommandManager}}),e.graph.on({add:function(a){a.persist(e.plainRecordDefinition);var c=e.plainRecordDefinition.fieldDefinitions.length-1;b(function(){e.gridApi.selection.clearSelectedRows(),e.gridApi.selection.selectRow(e.plainRecordDefinition.fieldDefinitions[c]),v.find('.inspector input[data-attribute="rxData/name"]').last().focus().select()})},remove:function(a){_.remove(e.plainRecordDefinition.fieldDefinitions,{id:a.get("id")}),e.selected.fieldDefinitionModel=null},change:function(a){e.gridState=e.gridApi.saveState.save(),a.persist(e.plainRecordDefinition)}});var Q=d.$on(m.events.openExpressionEditor,function(a,b){var c=b.cell.getExpressionConfigurator();h.open({expressionContext:{cell:b.cell,path:b.path,dataDictionary:c.getDataDictionary(),expressionConfigurator:c,legend:s.getLegend()}})});e.graph.on("add remove change",E),i.clear(),e.$on("$destroy",function(){e.graph.off("add remove change"),Q(),i.clear()})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").directive("rxInspectorIntervalTimerField",["$uibModal",function(a){return{restrict:"E",templateUrl:"scripts/rule/designer/inspector-editors/interval-timer/inspector-interval-timer-field.directive.html",link:function(b){b.options.filter="ruleIntervalTimer",b.value=b.value||"",b.openDialog=function(){a.open({templateUrl:"scripts/rule/designer/inspector-editors/interval-timer/rule-interval-timer-dialog.html",controller:"RuleIntervalTimerDialogController",backdrop:"static",resolve:{expressionContext:{cell:b.cell,path:b.path,previewFilter:"ruleIntervalTimer"}},windowClass:"rx-timer-editor-dialog"})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").directive("rxInspectorRuleRecordDefinitionsField",["resourceTypeFilter","$uibModal","definitionNameFilter",function(a,b,c){return{restrict:"E",templateUrl:"scripts/rule/designer/inspector-editors/rule-record-definitions/inspector-rule-record-definitions-field.directive.html",link:function(a){a.recordDefinitions=_.map(a.cell.prop(a.path),function(a){return{content:c(a),value:a}}),a.openEditor=function(){b.open({templateUrl:"scripts/rule/designer/inspector-editors/rule-record-definitions/rule-record-definitions-dialog.html",controller:"RuleRecordDefinitionsDialogController",backdrop:"static",resolve:{context:{cell:a.cell,path:a.path,selectedDefinitions:a.recordDefinitions}},windowClass:"rx-rule-record-definitions-dialog"})},a.removeColumn=function(b){a.recordDefinitions.splice(a.recordDefinitions.indexOf(b),1),a.cell.prop(a.path,"",{silent:!0}),a.cell.prop(a.path,_.pluck(a.recordDefinitions,"value"))}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").directive("rxRuleDesigner",["$q","$rootScope","$timeout","$stateParams","rxNotificationMessage","rxId","dialogs","rxRuleDesignerElementManager","rxExpressionEditor","rxRuleAutoComplete","rxRuleDataDictionary","rxRuleDefinitionResource","rxRuleDesignerCache","rxRuleMovementManager","rxDesignerCache","rxBundleCache","definitionNameFilter","ruleIntervalTimerFilter","RX_BLADE","RX_DESIGNER","RX_RULE_DESIGNER","RX_EXPRESSION_EDITOR","RX_SCHEDULER_TIMER","rxRuleDesignerConfiguration",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return{templateUrl:"scripts/rule/designer/rule-designer.directive.html",scope:{rxConfiguration:"=",rxModel:"="},link:function(d,f){function s(){x.updateStencilConfiguration(ea).then(function(){d.stencilConfiguration={configurationService:x},_.each(["default","favorite","recent"],function(a){x.get(a,ea).then(function(b){d.stencilConfiguration[a]=b})})})}function y(){a.all({paper:da.promise}).then(function(a){d.paper=a.paper,s(),G(),C(),D(),ba.reset(),ga=j.getInstance(d.paper.model),c(function(){d.transitionsDisabled=!1})})}function z(a,b){h.validateElement(a,b).then(function(b){A(b,a)})}function A(a,b){B(b),K(d.selected.validationIssues.concat(a))}function B(a){_.remove(d.selected.validationIssues,{elementId:a.id})}function C(){var a=new joint.dia.Validator({commandManager:ba});h.registerValidators(a),a.on("invalid",function(a){e.error(a)})}function D(){var a=d.plainRuleDefinition,b=d.paper,c=h.getShape(u.ruleElementResourceTypes.triggerElement,a.triggerEvent),e=c.attributes.size.width;c.prop("position",{x:(d.paper.options.width-e)/2,y:e}),c.set("elementIndex",0,{silent:!0}),b.model.addCell(c,{initCanvas:!0});var f=new joint.shapes.basic.Text;if(f.isRemovable=!1,f.prop("position",{x:d.paper.options.width/2,y:e/2}),d.paper.model.addCell(f,{initCanvas:!0}),d.paper.findViewByModel(f).vel.addClass("ruleDefinitionLabel"),n.setLastElement(c),b.model.addCell(d.selected.rule),!aa){if((!_.isEmpty(a.triggerEvent.eventTypes)&&!_.isEmpty(a.recordDefinitionNames)||a.triggerEvent.timeCriteria)&&U(c,a),a.qualification){var g=h.getShape(u.ruleElementResourceTypes.qualification,a.qualification);g.set("position",{x:d.paper.options.width/2,y:0}),b.model.addCell(g,{initCanvas:!0}),n.addElement(g,d.paper)}_.forEach(a.actions,function(a){var c=h.getShape(a.resourceType,a);a.id=c.get("id"),b.model.addCell(c,{initCanvas:!0}),n.addElement(c,d.paper)}),X(a.recordDefinitionNames[0])}}function E(){d.inspectorConfiguration={emptyText:"Select an element on the diagram to view its properties here."}}function F(){d.validationIssuesConfiguration={emptyText:"The Rule Definition is valid."}}function G(){d.selected={cellModel:null,rule:h.getRuleModel().fromRuleDefinition(d.plainRuleDefinition)},K([])}function H(){d.rxRuleDesignerForm&&d.rxRuleDesignerForm.json.$setPristine()}function I(a){var b=_(d.leftBladeConfiguration.tabs).values().find({name:a});b.refreshNeeded&&(x.get(a,ea).then(function(b){d.stencilConfiguration[a]=b}),delete b.refreshNeeded)}function J(){return d.rxRuleDesignerForm&&d.rxRuleDesignerForm.json.$dirty||ba&&ba.hasUndo()}function K(a){d.selected.validationIssues=a,_.isEmpty(d.selected.validationIssues)?d.validationIssueLevel="":d.validationIssueLevel="error"}function L(a){d.rightBladeConfiguration.tabs.validationIssues.active=!0,e.error("The Rule Definition is not valid")}function M(a){fa.actionsId=[],fa.triggerId=a.triggerEvent.id,delete a.triggerEvent.id,fa.ruleDefinitionId=a.id,delete a.id,_.each(a.actions,function(a){fa.actionsId.push(a.id),delete a.id}),a.qualification&&(fa.qualificationId=a.qualification.id,delete d.plainRuleDefinition.qualification.id)}function N(a){a.id=fa.ruleDefinitionId,a.triggerEvent.id=fa.triggerId,a.qualification&&(a.qualification.id=fa.qualificationId),_.forEach(a.actions,function(a){a.id=fa.actionsId.shift()})}function O(){N(d.plainRuleDefinition)}function P(){e.success("Rule Definition saved successfully."),ba.reset(),d.selected.rule.trigger("rx:change:inputs",d.selected.rule),b.$broadcast(u.events.afterSave),aa||(l.get($.name).then(function(a){$=a,d.plainRuleDefinition=$.plain(),N(d.plainRuleDefinition);var b=d.selected.cellModel?d.selected.cellModel.get("id"):null;b&&c(function(){if(d.rightBladeConfiguration.tabs.elementProperties.active){var a=d.paper.findViewByModel(b);d.paper.trigger("cell:pointerup",a)}else d.selected.cellModel=d.paper.model.getCell(b)})}),m.setRuleDefinition(d.plainRuleDefinition))}function Q(){M(d.plainRuleDefinition);var a=_.cloneDeep(d.plainRuleDefinition),b=function(a){return _.assign($,a),aa?l.post(a):$.put()};return b(a)}function R(){d.isFormBlocked=!0}function S(){d.isFormBlocked=!1}function T(a){var b=_.findIndex(d.plainRuleDefinition.actions,{id:a[0]}),c=_.findIndex(d.plainRuleDefinition.actions,{id:a[1]});d.plainRuleDefinition.actions.splice(c,0,d.plainRuleDefinition.actions.splice(b,1)[0])}function U(a,b){var c,e=_.trunc(_.transform(b.recordDefinitionNames,function(a,b){return b&&a.push(q(b)),a}).join(", "),{length:120,separator:" "});b.triggerEvent.eventTypes?c=_.map(b.triggerEvent.eventTypes,function(a){return _.find(u.eventTypes,{value:a}).content}).join(", "):b.triggerEvent.timeCriteria&&b.triggerEvent.timeCriteria.resourceType===w.resourceType?(c=a.prop("rxData/scheduleDefinition"),c=_.trunc(c,{length:120,separator:" "}),c+=" for "):b.triggerEvent.timeCriteria&&"com.bmc.arsys.rx.services.rule.domain.IntervalTime"===b.triggerEvent.timeCriteria.resourceType&&(c=r(a.prop("rxData/intervalDefinition")),c+=" for ");var f=_.find(d.paper.model.getCells(),function(a){return"basic.Text"===a.get("type")}),g=d.paper.findViewByModel(f),h=g.vel.find("text")[0];h.text(c+"\n"+e);var i=h.bbox();f.prop("position",{x:(d.paper.options.width-i.width)/2,y:20})}function V(){var a=_.find(d.paper.model.getCells(),function(a){return"basic.Text"===a.get("type")}),b=d.paper.findViewByModel(a);b.vel.find("text")[0].text("")}function W(){d.selected.cellModel=null,d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.ruleProperties.active=!0)}function X(a){ca=a,_.each(d.paper.model.getElements(),function(a){"basic.Text"!==a.get("type")&&a.setPrimaryRecordDefinition(ca)}),d.selected.cellModel&&Y(d.selected.cellModel).then(function(){d.selected.cellModel.trigger("rx:change:inputs",d.selected.cellModel)})}function Y(a){return k.getCommonDataDictionary(d.plainRuleDefinition).then(function(b){var c=a.getExpressionConfigurator?a.getExpressionConfigurator():a;return _.isFunction(c.buildDataDictionary)?c.buildDataDictionary(b).then(function(){return b}):b})}function Z(){var a=d.selected.cellModel;a?d.breadcrumbs=[{name:a.get("rxData").label||a.get("content")||a.get("breadcrumbLabel")}]:d.breadcrumbs=[]}var $,aa,ba,ca,da=a.defer(),ea=d.rxConfiguration.actionTypes||[],fa={};d.transitionsDisabled=!0;var ga;d.plainRuleDefinition=null,d.selected={},p.getBundleFriendlyName().then(function(a){d.bundleFriendlyName=a}),m.clear(),o.clear(),m.setActionTypes(ea),d.$on("$destroy",function(){m.clear(),o.clear()}),d.validateRule=function(){return h.validateRule(d.plainRuleDefinition).then(function(a){return K(a),a})},$=d.rxModel,d.plainRuleDefinition=$.plain(),aa=!d.plainRuleDefinition.lastUpdateTime,d.isDesignMode=!0,d.isDesignModeAvailable=function(){return d.rxRuleDesignerForm&&d.rxRuleDesignerForm.json&&d.rxRuleDesignerForm.json.$pristine},E(),F(),y(),d.isRecentsEmpty=function(){return _.isEmpty(d.stencilConfiguration)||_.isEmpty(d.stencilConfiguration.recent.shapes)},d.clearRecents=function(){x.removeRecents(),x.get("recent",ea).then(function(a){d.stencilConfiguration.recent=a})},d.leftBladeConfiguration={title:"Palette",tabs:{stencilTabDefault:{iconClass:"d-icon-arrow_squares",active:!0,name:"default",onActivate:I},stencilTabFavorite:{iconClass:"d-icon-star",active:!1,name:"favorite",refreshNeeded:!0,onActivate:I},stencilTabRecent:{iconClass:"d-icon-clock_o",active:!1,name:"recent",refreshNeeded:!0,onActivate:I},stencilTabSettings:{active:!1,name:"rx-blade-stencil-tab-settings",iconClass:"d-icon-wrench"}},dock:"left",expanded:!0},d.rightBladeConfiguration={title:"Properties",tabs:{ruleProperties:{active:!0,name:"rx-blade-rule-property-tab",iconClass:"d-icon-pencil"},elementProperties:{name:"rx-blade-element-property-tab",iconClass:"d-icon-gear"},validationIssues:{name:"rx-blade-validation-issues-property-tab",iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},d.toggleDesignMode=function(){d.isDesignMode=!d.isDesignMode,d.isDesignMode&&c(function(){d.paper.model.trigger("update:halo")})},d.saveChanges=function(){d.isFormBlocked||(R(),d.validateRule().then(function(a){"error"===d.validationIssueLevel?(L(a),S()):Q().then(P,O).then(H)["finally"](S)}))},d.$on("beforeUnload",function(b,c){var d=a.defer();c.push(d.promise),J()?g.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(function(){d.resolve()}):d.resolve()}),d.closeDesigner=function(){b.$broadcast(u.events.close)},d.canSave=function(){return!d.isFormBlocked&&d.rxRuleDesignerForm&&d.rxRuleDesignerForm.$valid&&J()},d.canvasConfiguration={interactive:_.constant(!1),multiSelectionDisabled:!0,snapLinesDisabled:!0,getModelName:function(){return d.plainRuleDefinition.name},haloConfig:{customHandles:[{name:"moveup",position:"ne",events:{pointerdown:function(){var a=n.moveElementUp(this.options.cellView.model,d.paper);T(a),d.paper.trigger("cell:pointerup",this.options.cellView)}},icon:"data:image/svg+xml;base64,PHN2ZyBpZD0iYjdhMzkzNWYtNTkyOS00ZjVkLTg2OGEtMTc1NGJlMWJiMjc2IiBkYXRhLW5hbWU9IkxheWVyIDIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LlwzMyAwZjFmNDg0LWM2ZTQtNDMyZS05ZmZmLTFhMTE5NWM1MTY0MntmaWxsOiM2NjY7fS5cMzYgYjkxZjhkMy01MWUzLTRiMGItYThlMy0yNDEzNTU0MTBhOTB7ZmlsbDojZmZmO308L3N0eWxlPjwvZGVmcz48dGl0bGU+VW50aXRsZWQtMTwvdGl0bGU+PHBhdGggY2xhc3M9IjMwZjFmNDg0LWM2ZTQtNDMyZS05ZmZmLTFhMTE5NWM1MTY0MiIgZD0iTTE2LDhhOCw4LDAsMSwwLTgsOEE4LDgsMCwwLDAsMTYsOFoiLz48cG9seWdvbiBjbGFzcz0iNmI5MWY4ZDMtNTFlMy00YjBiLWE4ZTMtMjQxMzU1NDEwYTkwIiBwb2ludHM9IjExLjY0IDggOC43MyA4IDguNzMgMTIuMzYgNy4yNyAxMi4zNiA3LjI3IDggNC4zNiA4IDggMy42NCAxMS42NCA4Ii8+PC9zdmc+"},{name:"movedown",position:"se",events:{pointerdown:function(){var a=n.moveElementDown(this.options.cellView.model,d.paper);T(a),d.paper.trigger("cell:pointerup",this.options.cellView)}},icon:"data:image/svg+xml;base64,PHN2ZyBpZD0iM2EzODYxYTQtY2QzNy00NzQwLTkyNjAtZGZkZTc5MTVjYTU2IiBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LlwzNCA5MGZkYTQwLTkyMjUtNDczZS04MmUxLTc4ZWM3YmFiZWYxM3tmaWxsOiM2NjY7fS5mZmU3YWEzMC04NjliLTQzMzAtYmNjYy05MjA3YjhjMDMzYjR7ZmlsbDojZmZmO308L3N0eWxlPjwvZGVmcz48dGl0bGU+VW50aXRsZWQtMTwvdGl0bGU+PHBhdGggY2xhc3M9IjQ5MGZkYTQwLTkyMjUtNDczZS04MmUxLTc4ZWM3YmFiZWYxMyIgZD0iTTgsMGE4LDgsMCwxLDAsOCw4QTgsOCwwLDAsMCw4LDBaIi8+PHBvbHlnb24gY2xhc3M9ImZmZTdhYTMwLTg2OWItNDMzMC1iY2NjLTkyMDdiOGMwMzNiNCIgcG9pbnRzPSI4IDEyLjM2IDQuMzYgOCA3LjI3IDggNy4yNyAzLjY0IDguNzMgMy42NCA4LjczIDggMTEuNjQgOCA4IDEyLjM2Ii8+PC9zdmc+"}],handleValidation:function(a){var b=a.options.cellView.model;n.isLastElement(b,d.paper)&&a.removeHandle("movedown"),n.isFirstActionElement(b,d.paper)&&a.removeHandle("moveup")}}},d.$on(t.events.correctValidationIssue,function(a,b){var e=b.validationIssue,g=d.paper.model.getCell(e.elementId);if(g){var h=d.paper.findViewByModel(g.get("id"));d.paper.trigger("cell:pointerup",h)}else d.selected.cellModel=null,d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.ruleProperties.active=!0);var i=e.propertyName||"";i&&c(function(){var a=f.find('[data-attribute="rxData/'+i+'"]');a.focus().select()},2)}),d.$on(v.events.refreshInspector,function(a,b){Y(b).then(function(){b.trigger("rx:change:inputs",b)})}),d.$on(v.events.openExpressionEditor,function(a,b){var c=b.cell||d.selected.cellModel,e=b.path||b;Y(c).then(function(a){var b=d.selected.cellModel.getExpressionConfigurator?d.selected.cellModel.getExpressionConfigurator():null;i.open({expressionContext:{cell:c,path:e,expressionConfigurator:b,dataDictionary:a,autoComplete:ga,legend:k.getLegend(),useDynamicQualification:!0}})})}),d.$on(t.events.inspectorReady,function(){f.find('rx-designer-inspector [data-field="rxData/recordDefinitionNames/0"] > label').text("Record Definition [Primary]")}),d.$on(t.events.canvasReady,function(a,b){da.resolve(b.paper),ba=b.commandManager}),d.$on(t.events.graphChanged,function(a,b){b.graph,b.cell}),d.$on(t.events.cellPointerUp,function(a,b){var c=b.cellView.model,e=b.cellView.$el.closest("html").length>0;d.selected.cellModel=null,e&&!c.isLink()&&"basic.Text"!==c.get("type")&&Y(c).then(function(){_.isFunction(c.updateInspectorConfig)?c.updateInspectorConfig(d.plainRuleDefinition).then(function(){d.selected.cellModel=c}):d.selected.cellModel=c,d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.elementProperties.active=!0)})}),d.$on(t.events.blankPointerDown,function(a,b){W()}),d.$on(t.events.stencilSettingsChanged,function(a,b){var c=_(d.leftBladeConfiguration.tabs).values().find({name:b});c.refreshNeeded=!0}),d.$on(t.events.cellAdded,function(a,b){var c,e=b.cell;if(d.paper.model.getCell(e.get("id"))&&!e.isLink()&&!b.options.initCanvas){var f=d.plainRuleDefinition;if(f.recordDefinitionNames[0]&&e.setPrimaryRecordDefinition(f.recordDefinitionNames[0]),c=e.persist(f),d.plainRuleDefinition.actions.length<=1?d.validateRule():c&&z(c,f),e.get("id")!=n.getLastElement().get("id")&&"rx.RuleModel"!=e.get("type")&&(ba.disable(),n.addElement(e,d.paper),ba.enable()),b.options.stencil&&(c.resourceType?x.addToRecent(c):x.addToRecent(e),d.leftBladeConfiguration.tabs.stencilTabRecent.refreshNeeded=!0,d.canSave())){var g=d.paper.findViewByModel(e.get("id"));d.paper.trigger("cell:pointerup",g)}}}),d.$on(t.events.cellChanged,function(a,b){var c,e=b.cell,f=d.plainRuleDefinition;if(!e.isLink()&&"basic.Text"!==e.get("type")){c=e.persist(f),f.recordDefinitionNames[0]&&f.recordDefinitionNames[0]!==ca?X(f.recordDefinitionNames[0]):!f.recordDefinitionNames[0]&&ca&&X(null);var g=_.find(d.paper.model.getElements(),function(a){return"rx.RuleTrigger"===a.get("type")});_.isEmpty(f.recordDefinitionNames)||_.isEmpty(f.recordDefinitionNames[0])||_.isEmpty(f.triggerEvent.eventTypes)&&(_.isEmpty(f.triggerEvent.timeCriteria)||"com.bmc.arsys.rx.services.rule.domain.IntervalTime"!==f.triggerEvent.timeCriteria.resourceType&&f.triggerEvent.timeCriteria.resourceType!==w.resourceType)?V():U(g,f),d.plainRuleDefinition.actions.length||"rx.RuleModel"===e.get("type")?d.validateRule():c&&z(c,f)}}),d.$on(t.events.cellRemoved,function(a,b){var c=b.cell;c.isLink()||"basic.Text"===c.get("type")||("rx.RuleQualification"===c.get("type")?(delete d.plainRuleDefinition.qualification,delete $.qualification):_.remove(d.plainRuleDefinition.actions,{id:c.get("id")}),c.get("elementIndex")&&(ba.disable(),n.reorderElementsAfterDeletion(c,d.paper),ba.enable()),d.validateRule(),d.selected.cellModel=null,d.rightBladeConfiguration.expanded&&(d.rightBladeConfiguration.tabs.ruleProperties.active=!0))}),d.$watchGroup(["selected.cellModel.id",'selected.cellModel.get("rxData").label'],Z),d.handleBreadcrumbBarClick=function(){joint.ui.Halo.clear(d.paper),W()}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").directive("rxIsoDate",function(){return{restrict:"A",require:"^ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){if(_.isDate(a))return a.toISOString().substr(0,10)})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").directive("rxNoDirtyCheck",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e={get:_.constant(!1),set:_.noop};Object.defineProperty(d,"$pristine",e),Object.defineProperty(d,"$dirty",e)}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.utils").directive("rxStringToNumber",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return""+a}),d.$formatters.push(function(a){return parseFloat(a,10)})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-component").directive("rxViewComponentPlaceholder",function(){return{restrict:"E",templateUrl:"scripts/view-component/view-component-placeholder.directive.html",scope:{rxConfiguration:"="}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxActionButtonDesign",["RX_ACTION_BUTTON",function(a){return{restrict:"E",templateUrl:"scripts/view-components/action-button/action-button-design.directive.html",scope:{rxConfiguration:"="},link:function(b){function c(c){b.rxData=c,b.buttonCls=(_.find(a.styles,{value:b.rxData.style})||{}).cls,b.iconCls=(_.find(a.icons,{name:b.rxData.icon})||{}).cls}b.$watch("rxConfiguration.model.attributes.rxData",function(a){c(a)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxActionButton",["$log","$compile","$timeout","RX_ACTION_BUTTON","RX_VIEW_COMPONENT","rxViewComponentEventManager","rxViewComponentActionManager",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"scripts/view-components/action-button/action-button.directive.html",scope:{rxConfiguration:"="},link:function(b,c){function h(){var a;return a=b.rxConfiguration.componentDefinitions?_.map(b.rxConfiguration.componentDefinitions,function(a){return{id:a.id,propertiesByName:a.propertiesByName}}):_.map(b.rxConfiguration.actions,function(a){return{propertiesByName:a}}),a=_.sortBy(a,function(a){return Number(a.propertiesByName.index)})}var i=f.getInstance(c);b.config=b.rxConfiguration.propertiesByName?b.rxConfiguration.propertiesByName:b.rxConfiguration,b.actions=h(),b.cls=b.config.cls||(_.find(d.styles,{value:b.config.style})||{}).cls;var j=b.config.iconCls||(_.find(d.icons,{name:b.config.icon})||{}).cls;b.icon="d-icon-"+(b.config.label?"left-":"")+j,b.config.cls&&b.config.style&&a.warn("cls option is specified, style will be ignored."),b.config.iconCls&&b.config.icon&&a.warn("iconCls option is specified, icon will be ignored."),b.onClick=function(){g.executeActions(_.map(b.actions,"api"))},i.action(e.actions.newComponentAdded)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxActionEditor",["RX_VIEW_DESIGNER","resourceTypeFilter","rxActionPropertyNavigator","$timeout","rxAction","$compile",function(a,b,c,d,e,f){return{restrict:"E",scope:{action:"="},link:function(a,b){function g(){var b=null;return a.selectOptions.forEach(function(a){var c=j.get("rxData").name;a.name===c&&(b=a)}),b}function h(){var b={name:a.actionDescriptor.name};a.actionDescriptor.parameters.forEach(function(a){b[a.name]=a.defaultValue||""}),j.prop("rxData",null,{rxSilent:!0,silent:!0}),j.prop("rxData",b)}function i(){var e=b.find(".fields-list");e.length>0?e.empty():e=angular.element("<div class='fields-list'></div>");var g=_.filter(a.actionDescriptor.parameters,"editor");g.length?(_.each(g,function(b){var c=document.createElement(b.editor);c.setAttribute("path","path"),c.setAttribute("cell","cell"),c.setAttribute("value","value"),c.setAttribute("label","label"),c.setAttribute("options","options");var d=a.$new(!0);d.path="rxData/"+b.name,d.cell=j,d.value=j.prop(d.path),d.label=b.label,d.options=b,e.append(f(c)(d))}),d(function(){var a=_.map(e.find(".rx-expression-node-renderer"),function(a){return{label:a.getAttribute("for-expression-editor-label"),path:a.getAttribute("for-expression-editor-path")}});c.addExpressionFields({id:j.id,expressionFields:a})})):e.append("<p class='empty-list'>This action has no parameters</p>"),b.append(e)}a.selectOptions=e.getRegisteredActions();var j=a.action,k=g();a.actionDescriptor=k||a.selectOptions[0],k||h(),a.onSelect=function(){h(),i()},i()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxActionList",function(){return{restrict:"E",controller:"ActionListController",templateUrl:"scripts/view-components/action-button/editors/action-list.directive.html"}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxActionDefinitionPicker",["$timeout",function(a){return{restrict:"E",templateUrl:"scripts/view-components/action-button/editors/action-record-definition-picker.html",link:function(a,b){a.definition={name:a.value},a.$watch("definition.name",function(b,c){var d=b===c;d||a.cell.prop(a.path,b,{rxSilent:!0})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxViewDefinitionParams",["$rootScope","RX_EXPRESSION_EDITOR","rxViewDefinitionResource","rxActionPropertyNavigator",function(a,b,c,d){return{templateUrl:"scripts/view-components/action-button/editors/view-definition-params.directive.html",link:function(e){function f(a){a?c.get(a).then(function(a){var b=a.plain().inputParams.map(function(a){return{label:a.name,cell:e.cell,path:g+"/"+a.name,value:""}});e.params=b||[];var c=b.map(function(a){return{path:a.path,label:a.label}});d.addExpressionFields({id:e.cell.id,expressionFields:c}),e.cell.prop(g,null,{rxSilent:!0,silent:!0})}):(e.params=[],e.cell.prop(g,null,{rxSilent:!0,silent:!0}))}var g=e.path,h="rxData/viewDefinitionName";e.params=[];var i=e.cell.prop(g);i&&angular.forEach(i,function(a,b){e.params.push({label:b,cell:e.cell,path:g+"/"+b,value:a})}),e.openEditor=function(c){a.$broadcast(b.events.openExpressionEditor,{cell:e.cell,path:g+"/"+c.name})};var j=e.params.length>0;j||f(e.cell.prop(h)),e.cell.on("change",function(a,b){var c=b.propertyPath,d=b.propertyValue;c===h&&f(d)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxViewDefinitionSelector",["$timeout","rxViewDefinitionDataPageResource","$rootScope","RX_EXPRESSION_EDITOR","rxViewDefinitionResource",function(a,b,c,d,e){return{templateUrl:"scripts/view-components/action-button/editors/view-definition-selector.directive.html",link:function(a){var b=a.path;a.selectedView={name:a.cell.prop(b)},a.$watch("selectedView.name",function(c,d){a.cell.prop(b,c,{rxSilent:!0})})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").directive("rxViewPresentationParams",["RX_OPEN_VIEW",function(a){return{templateUrl:"scripts/view-components/action-button/editors/view-presentation-params.directive.html",link:function(b){b.options={type:{fullWidth:{label:"Full Width",value:a.type.fullWidth},centered:{label:"Centered Modal",value:a.type.centeredModal},dockedLeft:{label:"Docked Left Modal",value:a.type.dockedLeftModal},dockedRight:{label:"Docked Right Modal",value:a.type.dockedRightModal}},modalSize:{small:{label:"Small",value:a.modalSize.small},medium:{label:"Medium",value:a.modalSize.medium},large:{label:"Large",value:a.modalSize.large}},launchBehavior:{sameWindow:{label:"Open in same window",value:a.launchBehavior.sameWindow},newWindow:{label:"Open in new window",value:a.launchBehavior.newWindow}}};var c={type:a.type.fullWidth,launchBehavior:a.launchBehavior.newWindow},d=b.cell.prop(b.path)||c;d&&(b.value=d),b.cell.prop(b.path,b.value,{rxSilent:!0}),b.$watchCollection("value",function(c,e){if(c!=e){c.type===a.type.fullWidth&&(d.modalSize&&delete d.modalSize,d.title&&delete d.title,b.value.launchBehavior=b.value.launchBehavior||a.launchBehavior.newWindow),c.type!==a.type.dockedLeftModal&&c.type!==a.type.dockedRightModal&&c.type!==a.type.centeredModal||(d.launchBehavior&&delete d.launchBehavior,b.value.modalSize=b.value.modalSize||a.modalSize.medium);var f=b.cell.get("rxData");f.presentation=b.value,b.cell.unset("rxData",{silent:!0}),b.cell.prop("rxData",f,{rxSilent:!0})}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action").directive("rxAction",["rxAction","$q","rxLog","rxViewComponentEventManager",function(a,b,c,d){return{restrict:"E",template:"",scope:{rxConfiguration:"="},link:function(b,e){function f(a){g.propertyChanged({property:"output",oldValue:void 0,newValue:a})}var g=d.getInstance(e);b.rxConfiguration.api={execute:function(){c.debug("ACTION STARTED: "+b.rxConfiguration.propertiesByName.name);var d=a.executeAction(b.rxConfiguration.propertiesByName.name)({propertiesByName:b.rxConfiguration.propertiesByName});return d&&d.then?d.then(function(a){b.rxConfiguration.propertiesByName.output=a,f(a),c.debug("ACTION COMPLETED: "+b.rxConfiguration.propertiesByName.name)}):(d&&(f(d),c.debug("ACTION COMPLETED: "+b.rxConfiguration.propertiesByName.name)),d)}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container").directive("rxContainerDesign",["rxViewComponent","rxUtils","rxContainerDesignManager","rxViewDesignerCacheManager","rxViewDesignerCommandManager","rxViewComponentDefinitionManager","RX_VIEW_DEFINITION","RX_VIEW_DESIGNER",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"scripts/view-components/container/container-design.directive.html",scope:{rxConfiguration:"="},link:function(i){function j(e){var h,j=_.attempt(JSON.parse.bind(null,e.get("layout"))),k=e.get("componentDefinitions"),l=e.get("id"),n=_(k).map(f.getModel).invoke("set","parentModel",e).value();j=_.isError(j)?{}:j;var o=j.allowedTypes=e.get("allowedTypes");b.flattenTree(j,"columns","children").forEach(function(b){b.componentDefinitionId&&(h=_.find(k,{id:b.componentDefinitionId}),h?_.assign(b,_.pick(a.findDescriptor(h.type),g.componentDescriptorProperties)):(c.initContainerLayoutProperties(b),b.type=g.baseContainer,b.parentModelId=l,b.allowedTypes=o,_.each(b.columns,function(a){a.span=a.span||12,_.each(a.children,function(a){var c=_.find(n,{id:a.componentDefinitionId});c&&c.set("layoutParentId",b.componentDefinitionId)})})),d.putLayoutNode(b.componentDefinitionId,b))}),n.length&&m.addCells(n),i.containerLayout=e.layoutTree=j}function k(){i.$emit(h.events.layoutChanged)}var l,m=e.get("graph"),n=i.$watch("rxConfiguration.model",function(a){l=a,l&&(l.layoutTree?i.containerLayout=l.layoutTree:(e.stopListening(),j(l),e.listen()),l.on("layout:columnSpan",k),n())});i.$on("$destroy",function(){l&&l.off("layout:columnSpan")})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.container").directive("rxContainer",["rxUtils",function(a){return{restrict:"E",templateUrl:"scripts/view-components/container/container.directive.html",scope:{rxConfiguration:"="},link:function(b){var c,d=b.rxConfiguration,e=d.componentDefinitions||[],f=_.attempt(JSON.parse.bind(null,d.layout));f=_.isError(f)?{}:f,a.flattenTree(f,"columns","children").forEach(function(a){if(a.componentDefinitionId&&(c=_.find(e,{id:a.componentDefinitionId}),c&&(a.type=c.type,a.componentDefinition=c.configuration||c,_.has(a,"componentDefinition.autoFill")))){var b=_.attempt(JSON.parse.bind(null,a.componentDefinition.autoFill));a.autoFill=!_.isError(b)&&b}}),f.hidden=d.propertiesByName.hidden||!1,f.styles=(d.propertiesByName.styles||"").replace(/^"(.*)"$/,"$1"),b.node=f}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxInspectorRecordDefinitionFields",["$q","$uibModal","RX_RECORD_EDITOR","RX_RECORD_DEFINITION",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/editors/inspector-record-definition-fields.directive.html",link:function(e){function f(){e.fields=_(e.cell.getFieldComponentDefinitions()).map(g).sortBy("order").value()}function g(a){return{id:a.id,name:h(a),type:a.type,order:e.cell.getLayoutOrder(a)}}function h(a){var b=i(a.propertiesByName.fieldId),c=a.propertiesByName.fieldList;if(c)try{var d=JSON.parse(c);d&&(b=_(d).pluck("displayLabel").compact().join(", ")||b)}catch(e){}return b}function i(a){var b=_.find(e.cell.get("fieldDefinitions"),{id:+a});return b?b.name:d.EMPTY_FIELD_NAME_OPTION.content;
}function j(){var b=e.cell.prop("rxData/mode"),d=_(e.cell.get("fieldDefinitions")).filter(function(a){return b==c.modes.edit||b==c.modes.create&&!e.cell.isSystemLikeField(a)}).map(function(a){return{fieldId:a.id,name:a.name,fieldOption:a.fieldOption,selected:!1}}).value(),f=e.cell.getFieldComponentDefinitions();return f.length&&_.each(d,function(a){a.selected=!!_.find(f,function(b){return Number(b.propertiesByName.fieldId)==a.fieldId})}),a.when(d)}function k(a){var b=e.cell.getFieldComponentDefinitions(),c=[],d=[];_.each(a,function(a){var e=_.find(b,function(b){return Number(b.propertiesByName.fieldId)==a.fieldId});e&&!a.selected?d.push(e.id):!e&&a.selected&&c.push(a.fieldId)}),_.each(d,function(a){e.removeField(a)}),_.each(c,function(a){e.cell.addField(a)})}e.fields=[],e.$watchCollection("cell.attributes.componentDefinitions",f),e.removeField=e.cell.removeField,e.openEditor=function(){b.open({templateUrl:"scripts/view-components/record-editor/editors/inspector-record-editor-field-selector.html",controller:"RecordEditorFieldSelectorController",windowClass:"rx-inspector-dialog rx-inspector-record-definition-fields-dialog",animation:!1,backdropClass:"backdrop-transparent",resolve:{fields:j}}).result.then(k)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxAttachmentFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/attachment-field/attachment-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxAttachmentField",["rxRecordFieldDefinitionDesignManager","$timeout","rxRecordInstanceAttachmentResource",function(a,b,c){var d=function(a){var b=a,c=a.name;return{getFile:function(){return b},getName:function(){return c}}};return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/attachment-field/attachment-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(e,f,g,h){function i(){j=a.getFieldInstance(e.rxConfiguration),e.attachment=j.value,e.isBound||f.find('input[type="file"]').bind("change",function(a){a.target.files.length>0&&(e.form.$setDirty(),j.file=new d(a.target.files[0]),e.attachment=j.file.getName(),b(function(){j.value=j.file.getName()})),e.isBound=!0})}e.form=h;var j,k=e.fieldDefinition=a.getFieldDefinition(e.rxConfiguration),l=c.withName(e.rxConfiguration.recordDefinition.name);e.$watch("rxConfiguration.recordInstance",i),e.isBound=!1,e.saveAttachment=function(){j.value&&l.get(e.rxConfiguration.recordInstance.id,k.id.toString()).then(function(a){if(a){var b=new Blob([a],{type:"application/octet-stream"});saveAs(b,e.attachment)}})},e.addAttachment=function(){f.find(".rx-attachment-input").click()},e["delete"]=function(){j.value=null,j.file=null,e.form.$setDirty(),e.attachment=null},i()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxBooleanFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/boolean-field/boolean-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxBooleanField",["rxGUID","rxRecordFieldDefinitionDesignManager",function(a,b){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/boolean-field/boolean-field.directive.html",scope:{rxConfiguration:"="},link:function(c){c.id=a.generate(),c.fieldInstance=b.getFieldInstance(c.rxConfiguration),c.$watch("rxConfiguration.recordInstance",function(){c.fieldInstance=b.getFieldInstance(c.rxConfiguration)}),c.fieldDefinition=b.getFieldDefinition(c.rxConfiguration),c.getFormattedValue=function(){return"1"===c.fieldInstance.value?"True":"False"}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxCharacterFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/character-field/character-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxCharacterField",["rxRecordFieldDefinitionDesignManager","rxNamedListDataPageResource","RX_RECORD_DEFINITION",function(a,b,c){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/character-field/character-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(d,e,f,g){function h(){d.fieldInstance=a.getFieldInstance(d.rxConfiguration)}var i=";";d.form=g,d.multiSelectModel={},d.$watch("rxConfiguration.recordInstance",h),d.onSelect=function(a){d.selectedOption=a,d.fieldInstance.value=a&&a.value||null},d.selectOptions=[];var j=d.fieldDefinition=a.getFieldDefinition(d.rxConfiguration);_.isString(d.rxConfiguration.enableMultiSelection)&&(d.rxConfiguration.enableMultiSelection="true"===d.rxConfiguration.enableMultiSelection),d.rxConfiguration.enableMultiSelection&&(d.checkbox=!0,d.search=!0),j.namedListDefinition&&(b.get(j.namedListDefinition).then(function(a){d.selectOptions=_(a.data).map(function(a){var b=_.keys(a)[0];return{label:b,value:a[b]}}).value(),d.selectedOption=_.find(d.selectOptions,{value:d.fieldInstance.value}),d.formattedLabels=d.getLabelsForMultiSelect(),_.isString(d.fieldInstance.value)&&_.isUndefined(d.multiSelectModel.value)&&(d.multiSelectModel.value=d.fieldInstance.value.split(i))}),d.$watch("fieldInstance.value",function(a,b){d.selectedOption&&d.selectedOption.value!==a&&(d.selectedOption=_.find(d.selectOptions,{value:d.fieldInstance.value}))})),d.isPasswordField=_.includes(c.AR_PASSWORD_FIELD_IDS,d.fieldDefinition.id),d.getFormattedValue=function(){var a=d.fieldInstance.value;return j.namedListDefinition&&!d.rxConfiguration.enableMultiSelection&&(a=d.selectedOption?d.selectedOption.label:""),d.isPasswordField&&(a="********"),a},d.getLabelsForMultiSelect=function(){var a=6,b=d.fieldInstance.value,c=_.isString(b)?b.split(i):b,e=_(c).map(function(a){var b=_.find(d.selectOptions,{value:a});return b?b.label:null}).compact().value();return{shown:_.slice(e,0,a),rest:_.slice(e,a)}},d.onMultiSelectChange=function(a){d.fieldInstance.value=_.isArray(a)?a.join(i):null,d.formattedLabels=d.getLabelsForMultiSelect()},h()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxDateFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/date-field/date-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxDateField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/date-field/date-field.directive.html",scope:{rxConfiguration:"="},require:"^form",controller:["$scope",function(a){a.datepickerOptions={showWeeks:!1},a.data={opened:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.data.opened=!a.data.opened},a.dateChanged=function(){a.fieldInstance.value=moment(a.data.date).format("YYYY-MM-DD")}}],link:function(b,c,d,e){function f(a){a&&(b.data.date=moment(a,"YYYY-MM-DD").toDate())}b.form=e,b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration),f(b.fieldInstance.value)}),b.$watch("fieldInstance.value",function(a,c){a&&moment(b.data.date).format("YYYY-MM-DD")!=a&&f(a)}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.getFormattedValue=function(){return b.fieldInstance.value},f(b.fieldInstance.value)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxDateTimeFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/date-time-field/date-time-field-design.directive.html",scope:{rxConfiguration:"="},controller:["$scope",function(a){a.ismeridian=!0}],link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxDateTimeField",["$filter","rxRecordFieldDefinitionDesignManager",function(a,b){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/date-time-field/date-time-field.directive.html",scope:{rxConfiguration:"="},require:"^form",controller:["$scope",function(a){a.data={opened:!1,date:null},a.datepickerOptions={showWeeks:!1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.data.opened=!a.data.opened},a.hstep=1,a.mstep=15,a.ismeridian=!0,a.timeChanged=function(){a.fieldInstance.value=moment(a.data.date).toISOString()},a.dateChanged=function(){a.fieldInstance.value=moment(a.data.date).toISOString()}}],link:function(c,d,e,f){function g(a){_.isDate(a)||(c.data.date=Date.parse(a)?new Date(a):null)}c.form=f,c.fieldInstance=b.getFieldInstance(c.rxConfiguration),c.$watch("rxConfiguration.recordInstance",function(){c.fieldInstance=b.getFieldInstance(c.rxConfiguration),g(c.fieldInstance.value)}),c.$watch("fieldInstance.value",function(a){a&&moment(c.data.date).toISOString()!=a&&g(a)}),c.fieldDefinition=b.getFieldDefinition(c.rxConfiguration),c.getFormattedValue=function(){return a("date")(c.fieldInstance.value,"medium")},g(c.fieldInstance.value)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxDecimalField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/decimal-field/decimal-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(b,c,d,e){b.form=e,b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration)}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.getFormattedValue=function(){return b.fieldInstance.value}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxFloatingField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/floating-field/floating-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(b,c,d,e){b.form=e,b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration)}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.getFormattedValue=function(){return b.fieldInstance.value}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxIntegerField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/integer-field/integer-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(b,c,d,e){b.form=e,b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration)}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.getFormattedValue=function(){return b.fieldInstance.value}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxSelectGroupFieldDesign",function(){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/select-group/select-group-field-design.directive.html",scope:{rxConfiguration:"="},link:function(a){function b(){_.assign(d,_.cloneDeep(c.model.get("rxData")))}var c=a.rxConfiguration,d=a.fieldDefinition={fieldList:[]},e=a.$watch("rxConfiguration.model",function(a){a&&(b(),a.on("change:rxData",b),e())})}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxSelectGroupField",["$q","rxRecordEditorCache","rxNamedListDataPageResource","rxRecordFieldDefinitionDesignManager",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/select-group/select-group-field.directive.html",scope:{rxConfiguration:"="},link:function(e){function f(a){j(a.namedList,a.query).then(function(b){a.selectOptions=k(b),a.selectedOption=_.find(a.selectOptions,{value:a.instance.value})||""})}function g(a){var b,c;a.reduce(function(a,d){return c=a.instance.value,b=c&&"('"+a.name+"' = \""+c+'")'||"",d.query=_([a.query,b]).compact().value().join(" AND "),d})}function h(){var c=m.fieldList?JSON.parse(m.fieldList):[],h=m.label?JSON.parse(m.label):[];_.forEach(c,function(a,b){h[b]&&(a.displayLabel=h[b])});var j=c.map(function(c){c.instance=d.getFieldInstance(_.assign({fieldId:c.fieldId},m));var e=a.defer();return i(c.namedList).then(function(a){b.getRecordDefinition(a.recordDefinitionName).then(function(b){var d=_.find(b.fieldDefinitions,{id:a.valueFieldId});d&&(c.name=d.name,c.fieldOption=d.fieldOption)}).then(e.resolve)}),e.promise});a.all(j).then(function(){g(c),c.forEach(f)}),l=e.fieldList=c}function i(a){return b.getNamedListDefinition(a)}function j(a,b){return b?c.getWithCriteria(a,b):c.get(a)}function k(a){return _(a.data).map(function(a){var b=_.keys(a)[0];return{label:b,value:a[b]}}).value()}var l,m=e.rxConfiguration;e.$watch("rxConfiguration.recordInstance",function(a){a&&h()}),e.onListItemSelect=function(a,b){var c,d=_.indexOf(l,b),e=a&&a.value||null;if(b.instance.value!==e&&(b.instance.value=e,d!==l.length-1)){for(;d<l.length-1;)c=l[++d],c.instance.value=null,c.query="",c.reloadValues=!0;g(l),_.forEach(l,function(a){a.reloadValues&&(f(a),a.reloadValues=!1)})}}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxSelectionFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/selection-field/selection-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxSelectionField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/selection-field/selection-field.directive.html",scope:{rxConfiguration:"="},link:function(b){b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.selectedOption={model:_.find(b.selectOptions,{value:b.fieldInstance.value})||""}}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.selectOptions=_.map(b.fieldDefinition.optionNamesById,function(a,b){return{content:a,value:b}}),b.selectedOption={model:_.find(b.selectOptions,{value:b.fieldInstance.value})||""},b.$watch("fieldInstance.value",function(a,c){a&&b.selectedOption.model.value!==a&&(b.selectedOption.model={value:a,content:b.fieldDefinition.optionNamesById[a]})}),b.$watch("selectedOption.model",function(a){a&&a.value&&(b.fieldInstance.value=a.value)}),b.getFormattedValue=function(){return b.selectedOption.model.content}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxTextareaFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/textarea-field/textarea-field-design.directive.html",scope:{rxConfiguration:"="},link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxTextareaField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/textarea-field/textarea-field.directive.html",scope:{rxConfiguration:"="},require:"^form",link:function(b,c,d,e){var f=b.rxConfiguration;b.form=e,b.fieldInstance=a.getFieldInstance(f),b.fieldDefinition=a.getFieldDefinition(f),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(f)}),b.getFormattedValue=function(){return b.fieldInstance.value}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxTimeFieldDesign",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/time-field/time-field-design.directive.html",scope:{rxConfiguration:"="},controller:["$scope",function(a){a.ismeridian=!0}],link:a.fieldLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxTimeField",["rxRecordFieldDefinitionDesignManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/field-components/time-field/time-field.directive.html",scope:{rxConfiguration:"="},controller:["$scope",function(a){a.hstep=1,a.mstep=15,a.ismeridian=!0,a.data={time:""},a.timeChanged=function(){a.fieldInstance.value=moment(a.data.time).format("HH:mm:ss")}}],link:function(b){function c(a){a&&(b.data.time=moment(a,"HH-mm-ss").format())}b.fieldInstance=a.getFieldInstance(b.rxConfiguration),b.$watch("rxConfiguration.recordInstance",function(){b.fieldInstance=a.getFieldInstance(b.rxConfiguration),c(b.fieldInstance.value)}),b.$watch("fieldInstance.value",function(a,d){a&&moment(b.data.time).format("HH:mm:ss")!=a&&c(a)}),b.fieldDefinition=a.getFieldDefinition(b.rxConfiguration),b.getFormattedValue=function(){return moment(b.data.time).format("HH:mm:ss")},c(b.fieldInstance.value)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxRecordEditorComponentRenderer",["RX_VIEW_DEFINITION","RX_RECORD_EDITOR","$compile",function(a,b,c){return{restrict:"E",scope:{rxComponentDefinition:"=",rxState:"="},link:function(b,d){var e,f=b.$new(!0),g='<{type} rx-configuration="configuration"></{type}>';b.rxComponentDefinition.type===a.containerComponent?(e=a.runtimeContainerElementTemplate,f.node=b.rxComponentDefinition,_.each(b.rxComponentDefinition.componentDefinitions,function(a){a.configuration=_.assign({state:b.rxState},a.propertiesByName)})):(e=g.replace(/\{type}/g,b.rxComponentDefinition.type),f.configuration=b.rxComponentDefinition.propertiesByName,f.configuration.state=b.rxState),d.html(c(e)(f)),b.$watch("rxState",function(c){b.rxComponentDefinition.type===a.containerComponent?_.each(b.rxComponentDefinition.componentDefinitions,function(a){a.configuration.state=c}):f.configuration.state=c})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxRecordEditorDesign",["$timeout","rxViewComponent","rxUtils","rxContainerDesignManager","rxViewComponentDefinitionManager","rxViewDesignerCommandManager","rxViewDesignerCacheManager","RX_RECORD_EDITOR","RX_VIEW_DESIGNER","RX_VIEW_DEFINITION",function(a,b,c,d,e,f,g,h,i,j){var k=[j.containerComponent].concat(_.values(h.fields));return{restrict:"E",templateUrl:"scripts/view-components/record-editor/record-editor-design.directive.html",scope:{rxConfiguration:"="},link:function(l){function m(){a(function(){l.$emit(i.events.layoutChanged)})}function n(a){var f,h=JSON.parse(a.get("layout")),i=a.get("componentDefinitions"),m=a.get("id"),n=_(i).map(e.getModel).invoke("set","parentModel",a).value();h.allowedTypes=k,h.parentModelId=m,c.flattenTree(h,"columns","children").forEach(function(a){if(a.componentDefinitionId){if(f=_.find(i,{id:a.componentDefinitionId})){if(_.assign(a,_.pick(b.findDescriptor(f.type),j.componentDescriptorProperties)),a.type===j.containerComponent){var c=_.find(n,{id:a.componentDefinitionId});c&&c.set("allowedTypes",k)}}else d.initContainerLayoutProperties(a),a.type=j.baseContainer,a.allowedTypes=k,a.parentModelId=m,_.each(a.columns,function(b){_.each(b.children,function(b){var c=_.find(n,{id:b.componentDefinitionId});c&&c.set("layoutParentId",a.componentDefinitionId)})});g.putLayoutNode(a.componentDefinitionId,a)}}),n.length&&p.addCells(n),l.recordEditorLayout=a.layoutTree=h}var o,p=f.get("graph"),q=l.$watch("rxConfiguration.model",function(a){a&&(a.layoutTree?l.recordEditorLayout=a.layoutTree:(f.stopListening(),n(a),f.listen()),a.on(j.events.childAdd,m),a.on(j.events.childRemove,m),q()),o=a});l.isFormEmpty=function(){return o&&_.isEmpty(o.get("componentDefinitions"))},l.onBeforeDrop=function(a,b){var c,d=g.getModelById(b.componentDefinitionId);d?(c=o.isFieldComponent(b)?d.getRecordEditorModel():d.get("parentModel"),c.get("id")!==o.get("id")&&(a.dropPrevented=!0)):b.type===j.containerComponent&&(b.allowedTypes=_.values(h.fields))}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").directive("rxRecordEditor",["$compile","$rootScope","$timeout","$q","RX_RECORD_EDITOR","RX_VIEW_COMPONENT","RX_VIEW_DEFINITION","RX_RECORD_DEFINITION","rxRecordEditorCache","dialogs","definitionNameFilter","rxNotificationMessage","rxViewComponentEventManager","rxRecordInstanceResource",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"E",templateUrl:"scripts/view-components/record-editor/record-editor.directive.html",scope:{rxConfiguration:"="},link:function(a,b){function o(a,b,c,d){var f,g=_.map(p(c),"propertiesByName.fieldId"),h=_.filter(a,{fieldOption:"REQUIRED"});return d===e.modes.create?f=_.filter(h,function(a){return!a.defaultValue&&!_.contains(g,a.id)}):(f=_.filter(h,function(a){return!_.contains(g,a.id)}),_.remove(f,function(a){return _.find(b,{id:a.id}).value})),_.map(f,"name")}function p(a){return _(a).transform(function(a,b){b.type!==g.containerComponent?a.push(b):a.push(p(b.componentDefinitions))}).flatten().value()}function q(){a.componentDefinitions=[],a.isConfigValid()&&d.all({recordDefinition:i.getRecordDefinition(z.recordDefinitionName),recordInstance:r()}).then(function(b){if(!a.$$destroyed){z.recordDefinition=b.recordDefinition,z.recordInstance=b.recordInstance,a.missingRequiredFields=o(b.recordDefinition.fieldDefinitions,b.recordInstance.fieldInstances,y.componentDefinitions,z.mode),w=_.cloneDeep(b.recordInstance.fieldInstances);var d,e,f;try{d=JSON.parse(y.layout)}catch(g){}f=_.get(d,"columns[0].children",[]),_.each(f,function(a,b){e=_.find(y.componentDefinitions,{id:a.componentDefinitionId}),e&&(e.order=b)}),_.each(y.componentDefinitions,function(a){var b=_.find(z.recordDefinition.fieldDefinitions,{id:a.propertiesByName.fieldId});b&&(a.fieldOption=b.fieldOption)}),a.componentDefinitions=y.componentDefinitions,c(t)}})}function r(){return z.mode===e.modes.edit?B.get(z.recordInstanceId):B.getNew()}function s(){return a.rxRecordEditorForm&&z.recordInstance&&_.isEmpty(a.missingRequiredFields)&&a.rxRecordEditorForm.$valid}function t(){var a=y.api.isValid();a!==x&&(C.propertyChanged({property:"isValid",oldValue:x,newValue:a}),x=a)}function u(a){l.success(k(a)+" saved successfully.")}function v(){a.rxRecordEditorForm.$setPristine(),a.state&&a.switchToState(e.defaultState.read)}var w,x=!1,y=a.rxConfiguration,z=y.propertiesByName,A=Boolean(z.defaultState),B=n.withName(z.recordDefinitionName),C=m.getInstance(b);a.template=z.template||e.templates["default"],a.state=z.defaultState||e.defaultState.edit,a.styles=z.styles,a.columns=z.columns||1,a.missingRequiredFields=[],a.fieldGroupFilters=[function(a){return a.fieldOption===h.fieldOptions.required},function(a){return a.fieldOption===h.fieldOptions.optional&&!_.includes(h.systemLikeFields,a.propertiesByName.fieldId)}],z.mode===e.modes.edit&&a.fieldGroupFilters.push(function(a){return a.fieldOption===h.fieldOptions.system||_.includes(h.systemLikeFields,a.propertiesByName.fieldId)}),i.registerConsumer(a),a.isConfigValid=function(){return z.mode===e.modes.create||Boolean(z.recordInstanceId)},q(),y.api=y.api||{},_.assign(y.api,{isDirty:function(){return a.rxRecordEditorForm&&a.rxRecordEditorForm.$dirty},isValid:s,setProperty:function(b,e){return _.isString(b)&&b.length&&("recordInstance"!==b||"recordDefinition"!==b)?d(function(d){_.set(a.rxConfiguration.propertiesByName,b,e),c(d)}):d.reject()},save:function(){return a.canSave()?a.save():d.reject()}}),C.propertyChanged({property:"api",newValue:a.rxConfiguration.api}),z.mode===e.modes.edit&&a.$watch("rxConfiguration.propertiesByName.recordInstanceId",function(a,b){a!==b&&q()}),a.$watch("rxConfiguration.propertiesByName.recordDefinition",function(a,b){a!==b&&C.propertyChanged({property:"recordDefinition",oldValue:b,newValue:a})}),a.$watch("rxConfiguration.propertiesByName.recordInstance",function(a,b){a!==b&&(C.propertyChanged({property:"recordInstance",oldValue:b,newValue:a}),_.isUndefined(b)||t())},!0),a.canSave=function(){return s()&&(z.mode===e.modes.create||a.rxRecordEditorForm.$dirty)},a.save=function(){var b,c=z.recordInstance.recordDefinitionName;return b=z.mode===e.modes.edit?z.recordInstance.save().then(function(){a.rxRecordEditorForm.$setPristine(),B.get(z.recordInstanceId).then(function(b){z.recordInstance=b,w=_.cloneDeep(b.fieldInstances),C.action(f.actions.save,{recordInstanceId:z.recordInstance.id}),A&&a.state===e.defaultState.edit&&a.switchToState(e.defaultState.read)})}):B.post(z.recordInstance).then(function(b){a.rxRecordEditorForm.$setPristine(),C.action(f.actions.save,{recordInstanceId:b.id})}),b.then(function(){u(c)})},a.isSaveButtonAvailable=function(){return A&&a.state!==e.defaultState.read},a.isEditStateAvailable=function(){return A&&a.state===e.defaultState.read},a.isCancelButtonAvailable=function(){return A&&a.state!==e.defaultState.read&&a.rxConfiguration.propertiesByName.mode===e.modes.edit},a.cancel=function(){A?a.rxRecordEditorForm.$dirty?j.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(function(){_.each(w,function(b){a.rxConfiguration.propertiesByName.recordInstance.fieldInstances[b.id].value=b.value}),v()}):v():C.action(f.actions.close)},a.switchToState=function(b){a.state=b},a.switchToEditState=function(){a.switchToState(e.defaultState.edit)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").directive("rxInspectorRecordGridColumnEditor",["RX_VIEW_DESIGNER","resourceTypeFilter","$uibModal",function(a,b,c){return{restrict:"E",templateUrl:"scripts/view-components/record-grid/editors/record-grid-column-editor/inspector-record-grid-column-editor.directive.html",link:function(a){a.columns=[],a.cell.getCurrentRecordDefinition().then(function(c){c&&(a.columns=_.map(_.cloneDeep(a.value),function(a){return a.type=b(_.find(c.fieldDefinitions,{id:Number(a.fieldId)}).resourceType),a}))}),a.openEditor=function(b){c.open({templateUrl:"scripts/view-components/record-grid/editors/record-grid-column-editor/record-grid-column-editor.html",controller:"RecordGridColumnEditorController",backdrop:"static",resolve:{columnContext:{cell:a.cell,columnEditId:b,path:a.path}},windowClass:"rx-record-grid-column-editor-dialog"})},a.removeColumn=function(b){a.columns.splice(a.columns.indexOf(b),1);var c=_.map(a.columns,function(a){return _.omit(angular.copy(a),"type")});a.cell.prop(a.path,"",{silent:!0}),a.cell.prop(a.path,c)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").directive("rxInspectorRecordGridSortEditor",function(){return{restrict:"E",templateUrl:"scripts/view-components/record-grid/editors/record-grid-sort-editor/inspector-record-grid-sort-editor.directive.html",controller:["$scope","uiGridConstants",function(a,b){function c(){a.cell.prop(g,a.columns,{rxSilent:!0,rxRecordGridSuppressInitialSortUpdate:!0})}function d(){a.columns=_.cloneDeep(a.cell.prop(g)),a.selectedColumn=_.find(a.columns,function(a){return _.isObject(a.sortable)}),a.selectedDirection=_.get(a,"selectedColumn.sortable.direction")}function e(a,b,c){c.propertyPath!==g||c.rxRecordGridSuppressInitialSortUpdate||d()}function f(b){_.isUndefined(b)||(_.each(a.columns,function(c){b&&b.fieldId===c.fieldId?(c.sortable=_.isObject(c.sortable)?c.sortable:{},a.selectedColumn.sortable=c.sortable=_.defaults(c.sortable,{direction:a.directions[0].value})):_.isObject(c.sortable)&&(c.sortable=!0)}),a.selectedDirection=_.get(a,"selectedColumn.sortable.direction")),c()}var g="rxData/columns";a.directions=[{value:b.ASC,icon:"up"},{value:b.DESC,icon:"down"}],a.initialSortColumnsFilter=function(){return function(a){return a.sortable&&a.visible}},a.changeDirection=function(b){a.selectedColumn.sortable.direction=b},a.isCheckedDirection=function(b){return _.get(a.selectedColumn,"sortable.direction")&&b===a.selectedColumn.sortable.direction},a.cell.listenTo(a.cell,"change:rxData",e),a.$on("$destroy",function(){a.cell.off("change:rxData",e)}),a.$watch("selectedColumn",f),a.$watch("selectedColumn.sortable.direction",c),d()}]}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").directive("rxRecordGridDesign",["rxDesignerCache","rxRecordInstanceDataPageResource","uiGridConstants","rxUtils","rxViewComponent","rxViewComponentDefinitionManager","rxContainerDesignManager","RX_VIEW_DEFINITION","rxViewDesignerCacheManager","rxViewDesignerCommandManager","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",templateUrl:"scripts/view-components/record-grid/record-grid-design.directive.html",scope:{rxConfiguration:"="},link:function(b){function l(a){var c,j=JSON.parse(a.get("layout")),k=a.get("componentDefinitions"),l=a.get("id"),m=_(k).map(f.getModel).invoke("set","parentModel",a).value();d.flattenTree(j,"columns","children").forEach(function(a){a.componentDefinitionId&&(c=_.find(k,{id:a.componentDefinitionId}),c?_.assign(a,_.pick(e.findDescriptor(c.type),h.componentDescriptorProperties)):(g.initContainerLayoutProperties(a),a.type=h.baseContainer,a.allowedTypes=[h.actionButtonComponent],a.horizontalList=!0,a.parentModelId=l,_.each(a.columns,function(b){_.each(b.children,function(b){var c=_.find(m,{id:b.componentDefinitionId});c&&c.set("layoutParentId",a.componentDefinitionId)})})),i.putLayoutNode(a.componentDefinitionId,a))}),m.length&&n.addCells(m),j.parentModelId=l,b.recordGridLayout=a.layoutTree=j}function m(a,c){var d=_.cloneDeep(b.rxConfiguration.model.prop("rxData/columns"));_.each(d,function(a){var b=_.find(c,{field:a.fieldId});b?a.sortable=_.pick(b.sort,"direction"):_.isObject(a.sortable)&&(a.sortable=!0)}),b.rxConfiguration.model.prop("rxData/columns",d,{rxSilent:!0,rxRecordGridSuppressRebuild:!0})}var n=j.get("graph"),o=b.$watch("rxConfiguration.model",function(a){a&&(a.layoutTree?b.recordGridLayout=a.layoutTree:(j.stopListening(),l(a),j.listen()),o())});b.gridOptions={enableCellEditOnFocus:!1,enableColumnMenus:!1,enableHorizontalScrollbar:c.scrollbars.NEVER,enableVertivalScrollbar:c.scrollbars.NEVER,columnDefs:[],onRegisterApi:function(a){a.core.on.sortChanged(b,m)}},b._rebuildGrid=function(){k(function(){b.rxConfiguration.model.get("rxData").recordDefinitionName&&a.getRecordDefinition(b.rxConfiguration.model.get("rxData").recordDefinitionName).then(function(a){b.gridOptions.columnDefs=[];
var c=b.rxConfiguration.model.get("rxData").columns;_.each(c,function(c){var d=_.find(a.fieldDefinitions,function(a){return a.id==c.fieldId});_.isObject(d)&&b.gridOptions.columnDefs.push({field:c.fieldId,visible:c.visible,displayName:c.title,headerCellClass:"ui-grid-header-cell_customize",cellClass:"ui-grid-cell_customize",enableSorting:!!c.sortable,sort:_.isObject(c.sortable)?c.sortable:{}})})})})},b.hasRecordDefinitionName=function(){var a=b.rxConfiguration.model;return a&&!_.isEmpty(a.get("rxData").recordDefinitionName)},b.rxConfiguration.model.listenTo(b.rxConfiguration.model,"change:rxData",function(a,c,d){d.rxRecordGridSuppressRebuild||b._rebuildGrid()}),b._rebuildGrid()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").directive("rxRecordGridToolbar",["RX_ACTION_BUTTON",function(a){return{restrict:"E",templateUrl:"scripts/view-components/record-grid/record-grid-toolbar.directive.html",controller:["$scope",function(a){a.applySearchText=function(){a.submittedSearchText=a.searchText},a.clearSearch=function(){a.searchText="",a.applySearchText()},_.each(a.config.actionButtons,function(a){a.style="clear"})}]}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").directive("rxRecordGrid",["$filter","$compile","$q","uiGridConstants","rxRecordInstanceDataPageResource","rxRecordDefinitionResource","rxSearchFilterModel","rxViewComponentActionManager","RX_RECORD_GRID","rxViewComponentEventManager","RX_RECORD_DEFINITION","rxRecordGridFilter","rxRecordGridPreferences",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"E",templateUrl:"scripts/view-components/record-grid/record-grid.directive.html",scope:{rxConfiguration:"="},link:function(a,c){var d='<div ui-grid="uiGridOptions "'+a.config.uiGridPlugins.join(" ")+"></div>";c.append(b(d)(a))},controller:["$scope","$element",function(b,n){function o(){return _.map(b.config.columns,function(a){var c=_.find(D.fieldDefinitions,{id:a.fieldId}),d=_.defaults({headerCellClass:function(){var b="ui-grid-header-cell_customize ";return _.isFunction(a.headerCellClass)?b+=a.headerCellClass(arguments):a.headerCellClass&&(b+=a.headerCellClass),b},cellClass:function(){var b="ui-grid-cell_customize ";return _.isFunction(a.cellClass)?b+=a.cellClass(arguments):a.cellClass&&(b+=a.cellClass),b}},a,{field:a.fieldId,name:a.title,displayName:_.isUndefined(a.title)?a.name:a.title,enableSorting:a.sortable!==!1,sort:a.sortable,visible:a.visible!==!1});if(!_.has(d,"cellFilter"))switch(c.resourceType){case k.dataTypes.dateTime.resourceType:d.cellFilter="date:'medium'";break;case k.dataTypes.dateOnly.resourceType:d.cellFilter="date";break;case k.dataTypes.timeOnly.resourceType:d.cellFilter="date:'shortTime'"}if(d.clickable&&(d.cellTemplate=['<div class="ui-grid-cell-contents">','<a class="ui-grid__link" ng-click="grid.appScope.gridEvents.cellClick(row, '+d.field+')">',"{{COL_FIELD CUSTOM_FILTERS}}","</a>","</div>"].join("")),d.visible){var e=+d.field.toString()+""===d.field.toString();b.visibleColumns.push(e?+d.field:d.field)}return _.omit(d,["filterType","fieldDefinition","title","fieldId"])})}function p(a){var c={};return b.config.recordIdField&&(c.$ID$=a[b.config.recordIdField],c[b.config.recordIdField]=a[b.config.recordIdField]),_.reduce(a,function(a,c,d){var e=_.find(b.config.columns,{fieldId:d});return e&&(a[e.title]=c,a[d]=c),a},c)}function q(a,b){return _.filter(a,function(a){return!_.find(b,function(b){return JSON.stringify(a)==JSON.stringify(b)})})}function r(){var a=_.map(G.selection.getSelectedRows(),p),c=q(a,b.selectionData.selectedRows),d=q(b.selectionData.selectedRows,a);_.each(d,function(a){_.remove(b.selectionData.selectionSequence,a)}),b.selectionData.selectionSequence=c.concat(b.selectionData.selectionSequence),b.selectionData.selectedRows=a,b.selectionData.selectedRowCount=a.length,b.selectionData.firstSelectedRow=_.last(b.selectionData.selectionSequence),b.isActionBarVisible=!!b.config.actionButtons.length&&!!a.length,_.each(b.config.actionButtons,function(b){var c=b.isDisabled;_.isFunction(c)&&(b.disabled=c(a))})}function s(a,c,d){return d.namedListFieldFormat="label",e.withName(b.config.recordDefinitionName).get(a,c,d)}function t(){var a={initialFilters:E,searchText:b.submittedSearchText,columns:b.config.columns,userFilters:b.filter.data},c={propertySelection:_(b.config.columns).pluck("fieldId").union([b.config.recordIdField]).compact().join()},d=g.generateSearchQuery(_([a.userFilters,a.initialFilters]).reject(_.isEmpty).value()),e=l.generateTextFilterQuery(a.searchText,a.columns),f=l.addQueries(d,e);return f&&(c.queryExpression=f),b.config.getData(b.config.pageSize,I*b.config.pageSize,c,a).then(function(a){var c=_.map(a.data,function(a){var c={};return _.each(b.config.columns,function(b){c[b.fieldId]=w(b.fieldId,a)}),b.config.recordIdField&&(c[b.config.recordIdField]=a[b.config.recordIdField]),c});return b.config.postProcessData(c)})}function u(){return t().then(function(a){G.infiniteScroll.saveScrollPercentage(),b.data=b.data.concat(a),G.infiniteScroll.dataLoaded(!1,a.length==b.config.pageSize),I++})}function v(a){return _.has(b.rxConfiguration,a)?b.rxConfiguration[a]:_.get(b.rxConfiguration,"propertiesByName."+a)}function w(a,b){var c=_.find(D.fieldDefinitions,{id:a});switch(c.resourceType){case k.dataTypes.selection.resourceType:var d=b[c.id];return _.isObject(c.optionNamesById)?c.optionNamesById[d]:d}return b[c.id]}function x(){var a=_.defaults({data:"data",columnDefs:[],rowHeight:35,enableCellEditOnFocus:!1,enableColumnMenus:!1,infiniteScrollDown:!0,infiniteScrollUp:!1,enableHorizontalScrollbar:d.scrollbars.NEVER,onRegisterApi:function(a){G=a,a.infiniteScroll.on.needLoadMoreData(b,u),b.config.enableRowSelection&&(a.selection.on.rowSelectionChanged(b,r),a.selection.on.rowSelectionChangedBatch(b,r)),C&&a.core.on.sortChanged(b,B),b.config.uiGridOptions.onRegisterApi(a),b.refreshGridData()}},_.cloneDeep(b.config.uiGridOptions));if(b.config.enableRowSelection){var c=b.config.enableRowSelection==i.selectionTypes.multiple;c?_.defaults(a,{enableSelectAll:c,enableRowHeaderSelection:c}):_.defaults(a,{multiSelect:!1})}else _.defaults(a,{enableRowSelection:!1,enableRowHeaderSelection:!1});return a}function y(){function a(a){return _.findIndex(c,{componentDefinitionId:a.id})}b.config.layout=z(b.rxConfiguration.layout);var c=_.get(b.config.layout,"columns[0].children");_.isArray(c)&&b.rxConfiguration.componentDefinitions.sort(function(b,c){var d=a(b),e=a(c);return d===-1||e===-1?0:d>e?1:-1})}function z(a){var b;try{b=JSON.parse(a)}catch(c){}return b}function A(a){var c=_.find(b.columnsWithActions,{fieldId:a});c&&h.executeActions(_.map(c.actions,"api"))}function B(a,b){var c=_.map(b,function(a){return{fieldId:a.field,sort:{direction:a.sort.direction}}});C.setSortColumns(c)}var C,D,E,F,G,H=j.getInstance(n),I=0;if(b.config=_.defaults({recordDefinitionName:v("recordDefinitionName"),enableRowSelection:v("enableRowSelection"),enableFiltering:v("enableFiltering"),columns:b.rxConfiguration.columns,filters:v("filters"),recordIdField:b.rxConfiguration.recordIdField,postProcessData:b.rxConfiguration.postProcessData,uiGridPlugins:_.union(i.defaultUiGridPlugins,b.rxConfiguration.uiGridPlugins),componentDefinitions:b.rxConfiguration.componentDefinitions,uiGridOptions:_.defaults({},b.rxConfiguration.uiGridOptions,{onRegisterApi:_.noop})},{enableRowSelection:i.selectionTypes.multiple,recordIdField:k.coreFieldIds.id,enableFiltering:!0,postProcessData:c.when,pageSize:50,filters:i.defaultFilter}),b.config.enableFiltering=Boolean(b.config.enableFiltering),_.isArray(b.config.columns)||(b.config.columns=_(b.config.componentDefinitions).filter({type:"rx-record-grid-column"}).pluck("propertiesByName").value()),y(),_.each(b.config.columns,function(a){a.fieldId=a.fieldId.toString(),_.isString(a.sortable)&&(a.sortable=z(a.sortable))}),b.config.recordDefinitionName||(rx.assert.assertFunction(b.rxConfiguration.getRecordDefinition,"getRecordDefinition should exist if recordDefinitionName is didn`t set"),rx.assert.assertFunction(b.rxConfiguration.getData,"getData should exist if recordDefinitionName is didn`t set")),b.rxConfiguration.id){var J={};J[i.userPreferences.columns]=_.cloneDeep(b.config.columns),C=m.getInstance(b.rxConfiguration.id,J),F=C.getPreferences()}b.config.getData=b.rxConfiguration.getData||s,b.config.getRecordDefinition=b.rxConfiguration.getRecordDefinition||f.get,b.config.actionButtons=b.rxConfiguration.actionButtons||_.filter(b.rxConfiguration.componentDefinitions,{type:"rx-action-button"}),b.data=[],b.visibleColumns=[],b.searchText="",b.submittedSearchText="",b.uiGridOptions=x(),b.filter={data:{}},b.selectionData={selectionSequence:[],selectedRows:[],firstSelectedRow:null,selectedRowCount:0},b.refreshGridData=function(){I=0,G.selection.clearSelectedRows(),b.searchText=b.submittedSearchText,t().then(function(a){b.data=a,G.infiniteScroll.dataLoaded(!1,a.length==b.config.pageSize),I++})},b.rxConfiguration.api={refresh:b.refreshGridData,setFilter:function(a){b.filter.data=a},getRecordDefinitionName:function(){return b.config.recordDefinitionName},getSelectedRows:function(){return b.selectionData.selectedRows},getFirstSelectedRow:function(){return b.selectionData.firstSelectedRow},getSelectedRowCount:function(){return b.selectionData.selectedRowCount},getUiGridApi:function(){return G}},H.propertyChanged({property:"api",newValue:b.rxConfiguration.api}),b.columnsWithActions=_(b.config.componentDefinitions).filter({type:"rx-record-grid-column"}).map(function(a){var b=_.map(a.componentDefinitions,function(a){return{id:a.id,propertiesByName:a.propertiesByName}});return b=_.sortBy(b,function(a){return Number(a.propertiesByName.index)}),{fieldId:Number(a.propertiesByName.fieldId),actions:b}}).value(),b.gridEvents={cellClick:function(a,b){H.propertyChanged({property:"clickableRow",oldValue:void 0,newValue:a.entity}),A(b),H.action("cellClick",{gridRow:a,columnId:b})}},c.all({preferences:F,recordDefinition:b.config.getRecordDefinition(b.config.recordDefinitionName)}).then(function(c){if(D=_.cloneDeep(c.recordDefinition),C&&(b.config.columns=C.mergeColumnPreferences(b.config.columns)),_.each(D.fieldDefinitions,function(a){a.id=a.id.toString()}),_.each(b.config.columns,function(a){var b=_.find(D.fieldDefinitions,{id:a.fieldId});a.filterType=b.resourceType.split(".").pop().replace(/fieldDefinition/i,""),a.fieldDefinition=b}),b.config.enableFiltering){var d=b.config.filters,e=_.filter(b.config.componentDefinitions,{type:"rx-record-grid-filter"}),f=_.get(c.preferences,i.userPreferences.filters)||{};!_.isEmpty(e)&&d&&_.each(e,function(a){var b={};b[a.propertiesByName.fieldId]=a.propertiesByName.value,d=d.replace('"'+a.id+'"',JSON.stringify(b))}),E=d?JSON.parse(d):null;var g=_(b.config.columns).reject(function(a){return a.filterable===!1}).map(function(a){var b=a.fieldDefinition,c={field:a.fieldId,displayName:a.title,type:a.filterType,options:b.optionNamesById,visible:a.visible};return b.minValue&&(c.minValue=b.minValue),b.maxValue&&(c.maxValue=b.maxValue),c}).value();b.filter.data=f,b.filter.config={fields:g,label:a("translate")("com.bmc.arsys.rx.standardlib.components.search-filter.button.filterTrigger.label"),initialFilters:E,showPills:!0}}b.uiGridOptions.columnDefs=o()}),b.$watch("filter.data",function(a,c){a!==c&&(C&&C.setFilters(a),b.refreshGridData())},!0),b.$watch("submittedSearchText",function(a,c){a!==c&&b.refreshGridData()}),b.$watch("visibleColumns",function(a,c){a!==c&&(a=_.map(a,function(a){return a.toString()}),_.each(b.uiGridOptions.columnDefs,function(c){c.visible=_.contains(a,c.field),_.find(b.config.columns,{fieldId:c.field}).visible=c.visible}),C&&C.setVisibleColumns(a),G.core.refresh())}),b.$watch("selectionData.selectedRowCount",function(a,b){H.propertyChanged({property:"selectedRowCount",oldValue:b,newValue:a})}),b.$watch("selectionData.selectedRows",function(a,b){H.propertyChanged({property:"selectedRows",oldValue:b,newValue:a})}),b.$watch("selectionData.firstSelectedRow",function(a,b){H.propertyChanged({property:"firstSelectedRow",oldValue:b,newValue:a})})}]}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").directive("rxRichTextDesign",["RX_RICH_TEXT",function(a){return{restrict:"E",templateUrl:"scripts/view-components/rich-text/rich-text-design.directive.html",scope:{rxConfiguration:"="},link:function(b,c){function d(a){f.prop("rxData/html",a,{initiator:"rich-text",rxSilent:!0})}function e(a,b,c){var d=c||{};"rich-text"!==d.initiator&&g.setData(b.html)}var f=b.rxConfiguration.model,g=CKEDITOR.inline(c.find("div[contenteditable]")[0],{resize_enabled:!1,skin:"rich-text,"+a.ckeditor.skinPath,on:{change:function(){d(this.getData())},blur:function(){h.show()}},extraPlugins:"expressioneditor",format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"link:advanced",toolbar:[["Bold","Italic","Strike","Underline","-","Link","Unlink","-","NumberedList","BulletedList","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight"],"/",["Format","Styles","Font","FontSize","TextColor"]]}),h=c.find("div.backdrop");h.on("click",function(a){h.hide(),g.focus()});var i=f.get("rxData").html;i&&g.setData(i),f.on("change:rxData",e),b.$on("$destroy",function(){try{g.destroy(!0)}catch(a){delete CKEDITOR.instances[g.name]}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.rich-text").directive("rxRichText",["$sce",function(a){return{restrict:"E",scope:{rxConfiguration:"="},templateUrl:"scripts/view-components/rich-text/rich-text.directive.html",link:function(b,c){function d(c){if(""!==c&&null!==c){var d=CKEDITOR.htmlParser.fragment.fromHtml(c),f=new CKEDITOR.htmlParser.basicWriter;e.applyTo(d),d.writeHtml(f);var g=f.getHtml();b.html=a.trustAsHtml(g)}else b.html=""}var e=new CKEDITOR.filter;e.allow({$1:{elements:CKEDITOR.dtd,attributes:!0,styles:!0,classes:!0}}),e.disallow("script; *[on*]"),b.$watch("rxConfiguration.propertiesByName.html",d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxInspectorGlobalSearchEditor",["$uibModal",function(a){return{restrict:"E",templateUrl:"scripts/view-components/shell/editors/inspector-global-search-editor.directive.html",link:function(b){b.records=JSON.parse(b.cell.prop(b.path)),b.openEditor=function(c){a.open({templateUrl:"scripts/view-components/shell/editors/global-search-editor.html",controller:"GlobalSearchEditorController",backdrop:"static",resolve:{recordContext:{cell:b.cell,recordEdit:c,path:b.path}},windowClass:"rx-global-search-editor-dialog"})},b.removeRecord=function(a){b.records.splice(b.records.indexOf(a),1),b.cell.prop(b.path,JSON.stringify(b.records))}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxInspectorMenuItemEditor",["RX_VIEW_DESIGNER","rxViewDesignerCacheManager","RX_SHELL","rxShellMenuItemAction",function(a,b,c,d){return{restrict:"E",templateUrl:"scripts/view-components/shell/editors/inspector-menu-item-editor.directive.html",link:function(e){e.data=_.cloneDeep(e.cell.get("rxData")),e.data.navBarItems=e.cell.get("componentDefinitions"),e.data.navBarItems&&_.forEach(e.data.navBarItems,function(a){return a.componentDefinitionId=a.id,a.menuItemName=a.propertiesByName.menuGroupName||a.propertiesByName.menuItemName||"",a.type===c.navBar.menuItem?a.menuItemType="Menu Item":a.type===c.navBar.menuGroup&&(a.menuItemType="Menu Group"),a.propertiesByName&&(a.propertiesByName.actionName===c.actions.launchURL?a.actionName="Launch URL":a.propertiesByName.actionName===c.actions.navigateToView?a.actionName="Navigate to View":a.propertiesByName.actionName===c.actions.navigateToState&&(a.actionName="Navigate to State")),a.componentDefinitions&&_.forEach(a.componentDefinitions,function(a){if(a.componentDefinitionId=a.id,a.menuItemName=a.propertiesByName.menuItemName,a.type===c.navBar.menuItem?a.menuItemType="Menu Item":a.type===c.navBar.menuGroup&&(a.menuItemType="Menu Group"),a.propertiesByName){var b=d.findDescriptor(a.propertiesByName.actionName);b&&(a.actionName=b.label)}}),a}),e.openEditor=function(c){e.$emit(a.events.viewComponentPointerUp,{item:b.getLayoutNodeById(c.id)})},e.removeItem=function(b){e.$emit(a.events.viewComponentRemoveRequest,b)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellMenuGroupDesign",["rxShellMenuGroupManager","rxViewDesignerCommandManager","rxViewComponentDefinitionManager","RX_SHELL","RX_VIEW_DEFINITION","RX_VIEW_DESIGNER","rxViewDesignerCacheManager","rxViewComponent","rxUtils",function(a,b,c,d,e,f,g,h,i){function j(a){a.columns=a.columns||[{children:[]}]}return{restrict:"E",templateUrl:"scripts/view-components/shell/menu-components/menu-group/shell-menu-group-design.directive.html",scope:{rxConfiguration:"="},link:function(k){function l(){_.assign(k.menuGroupDefinition,n.model.get("rxData")||_.clone(o))}function m(a){var b,f=JSON.parse(a.get("layout")),l=a.get("componentDefinitions"),m=a.get("id"),n=_(l).map(c.getModel).invoke("set","parentModel",a).value(),o=f.allowedTypes=d.menuGroup;i.flattenTree(f,"columns","children").forEach(function(a){a.componentDefinitionId&&(b=_.find(l,{id:a.componentDefinitionId}),b?_.assign(a,_.pick(h.findDescriptor(b.type),e.componentDescriptorProperties)):(j(a),a.type=e.baseContainer,a.parentModelId=m,a.allowedTypes=o,_.each(a.columns,function(b){_.each(b.children,function(b){var c=_.find(n,{id:b.componentDefinitionId});c&&c.set("layoutParentId",a.componentDefinitionId)})})),g.putLayoutNode(a.componentDefinitionId,a))}),n.length&&p.addCells(n),k.menuGroupItemsLayout=a.layoutTree=f}var n=k.rxConfiguration,o={};k.menuGroupDefinition=_.clone(o),k.id=n.componentDefinitionId,k.manager=a;var p=b.get("graph"),q=k.$watch("rxConfiguration.model",function(a){a&&(a.layoutTree?k.menuGroupItemsLayout=a.layoutTree:(b.stopListening(),m(a),b.listen()),l(),a.on(d.events.menuGroupUpdate,l),q())});k.toggleDropdown=function(){k.manager.selectedMenuGroupId=k.manager.selectedMenuGroupId===k.id?0:k.id},k.handleDragover=function(a){return a===d.navBar.menuItem&&(k.manager.selectedMenuGroupId=k.id,k.$emit(f.events.viewComponentPointerUp,{item:g.getLayoutNodeById(k.id)}),!0)},k.handleDrop=function(a){return a.stopPropagation(),!1}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellMenuGroup",function(){return{restrict:"E",templateUrl:"scripts/view-components/shell/menu-components/menu-group/shell-menu-group.directive.html",scope:{rxConfiguration:"="},link:function(a,b,c){}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellMenuItemDesign",["rxShellMenuItemManager",function(a){return{restrict:"E",templateUrl:"scripts/view-components/shell/menu-components/menu-item/shell-menu-item-design.directive.html",scope:{rxConfiguration:"="},link:a.menuItemLinkFunction}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellMenuItem",function(){return{restrict:"E",templateUrl:"scripts/view-components/shell/menu-components/menu-item/shell-menu-item.directive.html",scope:{rxConfiguration:"="},link:function(a,b,c){}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellDesign",["rxViewComponent","rxShellManager","rxViewDesignerCacheManager","rxViewDesignerCommandManager","rxViewComponentDefinitionManager","rxUtils","RX_VIEW_DEFINITION","$stateParams","rxBundleCache","RX_SHELL",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"scripts/view-components/shell/shell-design.directive.html",scope:{rxConfiguration:"="},link:function(h){function k(){var a=h.rxConfiguration.model.get("rxData");_.assign(h.navBarDefinition,a)}function l(d){var i,k=JSON.parse(d.get("layout")),l=d.get("componentDefinitions"),n=d.get("id"),o=_(l).map(e.getModel).invoke("set","parentModel",d).value(),p=k.allowedTypes=_.values(j.navBar);f.flattenTree(k,"columns","children").forEach(function(d){d.componentDefinitionId&&(i=_.find(l,{id:d.componentDefinitionId}),i?_.assign(d,_.pick(a.findDescriptor(i.type),g.componentDescriptorProperties)):(b.initContainerLayoutProperties(d),d.type=g.baseContainer,d.parentModelId=n,d.allowedTypes=p,d.horizontalList=!0,_.each(d.columns,function(a){_.each(a.children,function(a){var b=_.find(o,{id:a.componentDefinitionId});b&&b.set("layoutParentId",d.componentDefinitionId)})})),c.putLayoutNode(d.componentDefinitionId,d))}),o.length&&m.addCells(o),h.shellLayout=d.layoutTree=k}var m=d.get("graph");i.getBundleFriendlyName().then(function(a){h.bundleFriendlyName=a});var n=h.$watch("rxConfiguration.model",function(a){a&&(a.layoutTree?h.shellLayout=a.layoutTree:(d.stopListening(),l(a),d.listen()),h.navBarDefinition={},k(),a.on(j.events.navBarUpdate,k),n())})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShellNotification",["$uibModal","shellNotificationModel",function(a,b){return{restrict:"E",templateUrl:"scripts/view-components/shell/shell-notification.directive.html",link:function(c){c.notificationTemplate="scripts/view-components/shell/shell-notification-template.html",c.model=b,c.popoverIsOpen=!1,c.togglePopover=function(){c.popoverIsOpen=!c.popoverIsOpen},c.viewAll=function(){c.togglePopover(),a.open({templateUrl:"scripts/view-components/shell/shell-notification-show-all-template.html",windowClass:"rx-shell-notification-dialog",controller:"ShellNotificationController"})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").directive("rxShell",["$state","$window","$timeout","$uibModal","$rootScope","$translate","$q","dialogs","rxBundleCache","rxCurrentUser","rxAuthentication","rxShellConfigResource","RX_AUTH_EVENTS","rxDataPageResource",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"E",transclude:!0,templateUrl:"scripts/view-components/shell/shell.directive.html",link:function(e,f){function h(){e.menu.items.forEach(function(b){b.navigationBarItems?b.navigationBarItems.forEach(function(b){b.selected=b.url?a.href(a.current.name)===b.url:a.is(b.state.name||b.state,b.state.params)}):b.selected=b.url?a.href(a.current.name)===b.url:a.is(b.state.name||b.state,b.state.params)})}function m(a){var b=angular.element(".d-n-search__item");b.focus();var c="click"===a.type&&!($(a.target).hasClass("d-n-search__item")||"d-n-action__search"===$(a.target).attr("id"))||27===a.keyCode||13===a.keyCode&&$(a.target).hasClass("d-n-search__close");c&&(e.globalSearch=!1,e.$apply(),$(document.body).off("keydown click",m))}function o(){e.compactNavigation=v[0].clientWidth<r}function p(){h(),e.shellContent.$setPristine()}function q(){var a=n.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleDescriptorDataPageQuery").get(-1,0),d=l.get(!0);g.all([a,d]).then(function(a){var b=a[0],c=a[1],d=i.getBundleId();e.appList=b&&b.data?_.filter(b.data,{isApplication:!0}):[],e.currentApp=_.find(e.appList,{id:d})||{name:d,id:d},e.appList=_.reject(e.appList,{id:d}),e.menu.items=c.navigationBarItems,e.allowAppSwitching=c.allowAppSwitching&&e.appList.length>0,e.isGlobalSearchDisabled=c.globalSearchDisabled,s=c.globalSearchRecords,t=c.globalSearchCustomSearchState,u=c.globalSearchState,h()})["finally"](function(){c(function(){r=w[0].clientWidth+x[0].clientWidth+80,o()})}),b.onresize=function(){o(),e.$apply()},e.$on("$stateChangeSuccess",p),p()}var r,s,t,u,v=f.find(".d-n-header"),w=f.find(".d-n-menu"),x=f.find(".d-n-actions");e.currentUser=j.get().fullName,e.currentApp={},e.appList=[],e.compactNavigation=!1,e.menu={items:[]},e.globalSearchText="",e.$state=a,e.toggleSearchBar=function(){e.globalSearch=!0,$(document.body).on("keydown click",m)},e.moveToSearchState=function(a){e.globalSearchText=a,t?e.globalSearchText&&(e.$state.go(t,{searchText:e.globalSearchText}),e.globalSearch=!1,e.globalSearchText=""):s&&e.globalSearchText&&(l.searchContext={recordDefinitions:s,searchText:e.globalSearchText},e.$state.go(u,{},{reload:!0}),e.globalSearch=!1,e.globalSearchText="")},e.openMenu=function(){d.open({templateUrl:"scripts/view-components/shell/shell-menu.html",windowClass:"rx-shell-blade",controller:"ShellMenuController",resolve:{context:{menu:e.menu,currentApp:e.currentApp,allowAppSwitching:e.allowAppSwitching,appList:e.appList}}})},e.logout=function(){k.logout()},e.$watchCollection("items",function(){p()}),q()}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").directive("rxViewCustomizationOptions",["$uibModal","RX_DESIGNER","RX_OVERLAY",function(a,b,c){return{restrict:"E",templateUrl:"scripts/components/designer/inspector/editors/customization-options/customization-options.directive.html",scope:{rxConfiguration:"="},link:function(d){d.openCustomizationOptionsEditor=function(){var e=a.open({templateUrl:"scripts/view/designer/inspector-editors/customization-options/view-customization-options-editor.html",controller:"ViewCustomizationOptionsEditorController",backdrop:"static",resolve:{viewDefinition:function(){return _.cloneDeep(d.rxConfiguration.cell.get("rxData"))},overlayOperation:function(){var a=d.rxConfiguration.cell.get("rxData");return a.overlayGroupId?d.rxConfiguration.cell.get("overlayOperation"):c.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP}},windowClass:"rx-customization-options-modal"});e.result.then(function(a){d.$emit(b.events.customizationOptionsUpdated,a)})}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer.layout").directive("rxViewDesignerContainer",["rxGUID","RX_VIEW_DESIGNER",function(a,b){return{restrict:"E",replace:!0,templateUrl:"scripts/view/designer/layout/renderers/view-designer-container.directive.html",scope:{node:"=",beforeDrop:"&"},link:function(a){a.onDndDrop=function(c,d,e,f,g){if(a.beforeDrop({event:c,item:d}),!c.dropPrevented){var h=d.componentDefinitionId?b.events.viewComponentMoved:b.events.viewComponentAdded;d.columnIndex=f,d.index=g,a.$emit(h,{item:d,container:e,columnIndex:f,index:g})}c.stopImmediatePropagation()},a.onDndSelected=function(c,d){a.$emit(b.events.viewComponentPointerUp,{item:d}),c.stopImmediatePropagation()}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer.layout").directive("rxViewDesignerItem",["$compile","rxViewComponent","rxViewComponentDefinitionManager","rxViewDesignerCacheManager","RX_VIEW_DESIGNER","RX_VIEW_DEFINITION",function(a,b,c,d,e,f){var g='<rx-view-designer-container node="node" class="component-container"></rx-view-designer-container>';return{restrict:"E",replace:!0,templateUrl:"scripts/view/designer/layout/renderers/view-designer-item.directive.html",scope:{node:"="},link:function(b,c){function h(a){b.$emit(e.events.viewComponentRemoveRequest,j),a.stopImmediatePropagation()}function i(a){k.configuration.model=d.getModelById(a),k.configuration.componentDefinitionId=a;var c=k.configuration.model.get("parentModel");if(c){var e=c.get("disableCustomization");angular.isDefined(e)&&(k.configuration.model.set("disableCustomization",e),b.node.disableCustomization=e)}}var j=b.node,k=b.$new(!0);if(j.designType===f.baseContainer)c.replaceWith(a(g)(_.assign(k,{node:j})));else{if(k.configuration={model:null,componentDefinitionId:null},c.find(".rx-view-designer-item-content").append(a(f.elementTemplate.replace(/{type}/g,j.designType))(k)),j.componentDefinitionId)i(j.componentDefinitionId);else var l=b.$watch("node.componentDefinitionId",function(a){a&&(i(a),l())});b.onDeleteItemClick=h}b.isDeleteDisabled=function(){return _.get(j,"disableCustomization",!1)}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").directive("rxViewDesignerCanvas",["$timeout","dialogs","rxViewComponent","rxContainerDesignManager","rxViewDefinitionDesignManager","rxViewDesignerComponentManager","rxViewComponentDefinitionManager","rxViewDesignerCacheManager","rxViewDesignerCommandManager","rxUtils","rxOverlay","RX_VIEW_DESIGNER","RX_OVERLAY","RX_VIEW_DEFINITION","RX_SHELL",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{restrict:"E",templateUrl:"scripts/view/designer/view-designer-canvas.directive.html",link:function(p,q){function r(a){var b=a.overlayDescriptor||{parentOverlayGroupId:null},c=!a.lastUpdateTime;return c?m.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP:k.getOverlayOperation(a.overlayGroupId,b.parentOverlayGroupId)}function s(a){var b=h.getModelById(a.id);if(b){var c=h.getLayoutNodeById(a.id),d=h.getLayoutNodeById(b.get("layoutParentId"));if(c&&d){var e=d.columns[c.columnIndex];e.children.splice(c.index,0,c),b.get("internalChange")||p.$emit(l.events.viewComponentPointerUp,{item:c}),w()}}else h.putModel(a.id,a)}function t(a,b){if((!b||!b.ignoreCommandManager)&&a.changed.layoutParentId&&b.commandManager){var c=a.get("id"),d=h.getLayoutNodeById(c),e=h.getLayoutNodeById(a.get("layoutParentId")),f=h.getModelById(c);f.set("layoutParentId",a._previousAttributes.layoutParentId,{ignoreCommandManager:!0}),p.$emit(l.events.viewComponentMoved,{item:d,container:e,index:f.get("index"),columnIndex:f.get("columnIndex")})}}function u(a,b,c){var d=h.getLayoutNodeById(a.id),e=h.getModelById(a.id),f=h.getLayoutNodeById(e.get("layoutParentId"));if(d&&f){_.each(f.columns,function(a,b){_.find(a.children,d)&&(d.columnIndex=b,d.index=a.children.indexOf(d))}),d.columnIndex>=0&&_.pull(f.columns[d.columnIndex].children,d);var g=_.remove(p.plainViewDefinition.componentDefinitions,{id:d.componentDefinitionId});g<=0&&_.forEach(p.plainViewDefinition.componentDefinitions,function(a){if(a.componentDefinitions){var b=_.remove(a.componentDefinitions,{id:d.componentDefinitionId});b<=0&&_.forEach(a.componentDefinitions,function(a){a.componentDefinitions&&_.remove(a.componentDefinitions,{id:d.componentDefinitionId})})}}),e.get("internalChange")||p.$emit(l.events.blankPointerDown),w()}}function v(){a(x)}function w(a){p.$emit(l.events.layoutChanged,a)}function x(){G&&(G.selected=!1,G=null)}function y(a){x(),a&&(a.selected=!0,G=a)}function z(a){_.forEach(a,function(a,b){a.index=b})}function A(a,b){return _.find(a,function(a){return _.contains(a.children,b)})}function B(a,b){f.addComponent(b),y(b.item)}function C(a,b){var c=b.item,d=b.container,e=b.columnIndex,f=d.columns[e],g=h.getLayoutNodeById(c.componentDefinitionId),i=h.getModelById(c.componentDefinitionId),j=h.getLayoutNodeById(i.get("layoutParentId")),k=d.componentDefinitionId===j.componentDefinitionId,l=k?d.columns:j.columns,m=A(l,g);i.set("index",_.indexOf(m.children,g),{ignoreCommandManager:!0}),i.set("columnIndex",_.indexOf(l,m),{ignoreCommandManager:!0}),_.pull(m.children,g),z(m.children),g.columnIndex=e,f.children.splice(b.index,0,g),z(f.children),k||(i.set("layoutParentId",d.componentDefinitionId),b.layoutParentIdChanged=!0)}function D(b,c){var d=G&&G.componentDefinitionId,e=c.item;d!==e.componentDefinitionId&&a(function(){y(e)})}function E(a){return _.pick(c.findDescriptor(a),n.componentDescriptorProperties)}function F(b){var c,i=JSON.parse(b.layout),k=b.componentDefinitions,m=e.getModel(b),q=_.difference(f.getDefaultAllowedComponentTypes(),_.values(o.navBar)),r=I.isReadOnly;_.assign(i,{componentDefinitionId:b.id,allowedTypes:q});var s=_(k).map(g.getModel).invoke("set","parentModel",m).unshift(m).value();r&&_.each(s,function(a){a.set("allowedTypes",[]),a.set("disableCustomization",r)}),j.flattenTree(i,"columns","children").forEach(function(a){a.componentDefinitionId&&(c=_.find(k,{id:a.componentDefinitionId}),c?_.assign(a,E(c.type)):(d.initContainerLayoutProperties(a),a.designType=n.baseContainer,a.allowedTypes=r?[]:q.slice(),a.parentModelId=b.id,_.each(a.columns,function(b){_.each(b.children,function(b){var c=_.find(s,{id:b.componentDefinitionId});c&&(c.set("layoutParentId",a.componentDefinitionId),c.set("disableCustomization",r))})})),a.disableCustomization=r,
h.putLayoutNode(a.componentDefinitionId,a))}),H.addCells(s),I.layout=m.layoutTree=i,a(function(){p.$emit(l.events.canvasReady)})}var G,H=i.get("graph"),I=p.canvasConfiguration;p.$on(l.events.canvasReady,function(){var a=h.getModelById(I.viewDefinition.id);r(I.viewDefinition);a.set("overlayOperation",p.overlayOperation,{silent:!0,ignoreCommandManager:!0})});var J=p.$watch("canvasConfiguration.viewDefinition",function(a){a&&a.id&&(F(a),J())});H.on("add",s),H.on("change",t),H.on("remove",u),q.on("mousedown",function(a){"dropzone-scroller"===a.target.className&&p.$emit(l.events.blankPointerDown)}),p.$on(l.events.viewComponentAdded,B),p.$on(l.events.viewComponentMoved,C),p.$on(l.events.viewComponentPointerUp,D),p.$on(l.events.blankPointerDown,v),p.$on(l.events.viewComponentRemoveRequest,function(a,c){var d="Container"===c.name?"Are you sure you want to delete this container and its contents?":"Are you sure you want to delete this view component?";b.confirm("Warning!",d).result.then(function(){var a=h.getModelById(c.componentDefinitionId),b=h.getLayoutNodeById(a.get("layoutParentId"));_.each(b.columns,function(a,b){_.find(a.children,c)&&(c.columnIndex=b,c.index=a.children.indexOf(c))}),void 0===c.columnIndex&&(c.columnIndex=_.findIndex(b.columns,function(a){return _.find(a.children,{componentDefinitionId:c.componentDefinitionId})})),x(),c.index>=0?_.pull(b.columns[c.columnIndex].children,c):_.remove(b.columns[c.columnIndex].children,function(a){return a.componentDefinitionId===c.componentDefinitionId}),p.$emit(l.events.viewComponentRemoved,c)})}),p.undo=function(){i.undo()},p.redo=function(){i.redo()},p.hasUndo=function(){return i.hasUndo()},p.hasRedo=function(){return i.hasRedo()}}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").directive("rxViewDesignerStencil",function(){return{restrict:"E",scope:{rxConfiguration:"="},templateUrl:"scripts/view/designer/view-designer-stencil.directive.html",link:function(a){var b=a.$watch("rxConfiguration.components",function(c){c&&(a.componentGroups=_(a.rxConfiguration.components).groupBy("group").forEach(function(a,b,c){c[b]=_.chunk(_.sortBy(a,"name"),3)}).value(),b())});a.toggleComponentGroup=function(a){a.isCollapsed=!a.isCollapsed}}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").directive("rxViewDesigner",["$q","$rootScope","$timeout","debounce","$stateParams","RX_VIEW_DESIGNER","RX_VIEW_DEFINITION","RX_EXPRESSION_EDITOR","rxNotificationMessage","dialogs","rxViewComponent","rxViewDesignerCacheManager","rxViewDesignerCommandManager","rxViewDefinitionResource","rxViewAutoComplete","rxUtils","rxOverlay","RX_OVERLAY","RX_DESIGNER","rxDesignerCache","rxBundleCache","rxExpressionEditor","rxViewDataDictionary","rxShellDefinition","rxGUID",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return{restrict:"E",scope:{rxConfiguration:"="},templateUrl:"scripts/view/designer/view-designer.directive.html",link:function(r,z){function A(){var b=_(p.flattenTree(r.plainViewDefinition,"componentDefinitions")).pluck("id").map(l.getModelById).invoke("validate",r.plainViewDefinition).compact().value();return a.all(b).then(function(a){var b=_.flatten(a);return r.selected.validationIssues=b,b})}function B(){var a=l.getModelById(r.plainViewDefinition.id);H(a).then(function(){r.selected.viewDefinitionModel=a,c(function(){r.isNewView&&z.find('.rx-view-inspector input[data-attribute="rxData/name"]').focus().select()})}),m.reset(),I()}function C(){m.resetGraph(),l.clear(),t.clear()}function D(a){var b=a.get("parentModel"),c=b&&b.get("id")||r.plainViewDefinition.id;return E(c)}function E(a){return _.find(p.flattenTree(r.plainViewDefinition,"componentDefinitions"),{id:a})}function F(a){var b=D(a);_.pull(b.componentDefinitions,_.find(b.componentDefinitions,{id:a.get("id")})),c(function(){A(),b.type&&b.id!==_.get(r,"selected.viewComponentDefinitionModel.id")&&r.$emit(f.events.viewComponentPointerUp,{item:l.getLayoutNodeById(b.id)})})}function G(a,b){b&&b.ignoreCommandManager||(a.persist(D(a)),c(A))}function H(b){return w.getCommonDataDictionary(r.plainViewDefinition).then(function(c){var d=b.getExpressionConfigurator?b.getExpressionConfigurator():b;return _.isFunction(d.buildDataDictionary)?d.buildDataDictionary(c).then(function(){return c}):void a.when(c)})}function I(){r.$on(h.events.refreshInspector,function(a,b){H(b).then(function(){b.trigger("rx:change:inputs",b)})}),W.on("remove",F),W.on("add change",G),r.$on(f.events.viewComponentPointerUp,Q),r.$on(f.events.viewComponentAdded,function(a,b){Q(a,b),N()}),r.$on(f.events.viewComponentMoved,R),r.$on(f.events.blankPointerDown,K),r.$on(f.events.viewComponentRemoved,S),r.$on(h.events.openExpressionEditor,function(a,b){var c=b.cell||r.selected.viewComponentDefinitionModel,d=b.path||b;H(c).then(function(a){v.open({expressionContext:{cell:c,path:d,expressionConfigurator:c.getExpressionConfigurator(),dataDictionary:a,autoComplete:Z,legend:w.getLegend()}})})}),r.$on(f.events.viewComponentMoved,N),r.$on(f.events.layoutChanged,d(N,200)),r.$on(s.events.correctValidationIssue,function(a,b){var d=b.validationIssue.propertyName||"";b.validationIssue.componentProperty?r.$emit(f.events.viewComponentPointerUp,{item:{componentDefinitionId:b.validationIssue.elementId}}):r.rightBladeConfiguration.tabs.viewInformation.active=!0,d&&c(function(){var a=z.find('[data-attribute="rxData/'+d+'"]');a.focus().select()},2)}),r.$on(s.events.customizationOptionsUpdated,function(a,b){var c=W.getCell(r.plainViewDefinition.id);_.assign(r.plainViewDefinition,b.customizationOptions),c.prop("rxData/allowOverlay",b.customizationOptions.allowOverlay),r.rxViewDesignerForm.json.$setDirty()}),r.$on("beforeUnload",J)}function J(b,c){var d=a.defer(),e=function(){C(),d.resolve()};c.push(d.promise),ba()?j.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(e,d.reject):e()}function K(){L(),r.breadcrumbs=[]}function L(){r.selected.viewComponentDefinitionModel=null,r.rightBladeConfiguration.expanded&&(r.rightBladeConfiguration.tabs.viewInformation.active=!0)}function M(a,b){if(!("propertiesByName"===a||(_.isArray(b)||_.isString(b)||_.isBoolean(b)||_.isNumber(b))&&g.layoutProperties.indexOf(a)==-1))return b}function N(){p.flattenTree(r.plainViewDefinition,"componentDefinitions").forEach(O),c(function(){r.rxViewDesignerForm&&r.rxViewDesignerForm.json.$setDirty()})}function O(a){if(a.layout){var b=l.getModelById(a.id),c=b&&b.layoutTree;c&&(a.layout=JSON.stringify(c,M))}}function P(){var a,b=r.selected.viewComponentDefinitionModel&&r.selected.viewComponentDefinitionModel.id;for(r.breadcrumbs=[];b;){var c=W.getCell(b);if(!c)break;var d=_.find(Y,{type:c.get("type")}),e=_.isFunction(c.getBreadcrumbName)&&c.getBreadcrumbName()||d&&d.name;d&&r.breadcrumbs.unshift({id:b,name:e,icon:d.icon}),a=c.get("parentModel"),b=a&&a.get("id")||null}}function Q(a,b){var c=r.selected.viewComponentDefinitionModel,d=W.getCell(b.item.componentDefinitionId);d&&(c!==d&&H(d).then(function(){_.isFunction(d.updateInspectorConfig)?d.updateInspectorConfig(r.plainViewDefinition).then(function(){r.selected.viewComponentDefinitionModel=d,r.selected.viewComponentDefinitionModel.customizationIsDisabled=r.canvasConfiguration.isReadOnly}):r.selected.viewComponentDefinitionModel=d}),r.rightBladeConfiguration.expanded&&(r.rightBladeConfiguration.tabs.componentInformation.active=!0))}function R(a,b){var c=b.item,d=b.container,e=d.parentModelId,h=l.getModelById(c.componentDefinitionId),i=h.get("parentModel"),j=l.getModelById(e);if(b.layoutParentIdChanged&&i.id!==j.id){var k=D(h),m=_.find(k.componentDefinitions,{id:h.get("id")});_.pull(k.componentDefinitions,m),_.remove(i.get("componentDefinitions"),{id:h.get("id")}),E(e).componentDefinitions.push(m),h.set("parentModel",j,{ignoreCommandManager:!0}),j.get("resourceType")===g.resourceTypes.containerViewComponent&&j.get("componentDefinitions").push(m),r.$emit(f.events.updateBreadcrumbs)}}function S(a,b){W.getCell(b.componentDefinitionId).remove(),L()}function T(){return r.rxConfiguration.shellDefinitionName?n.get(r.rxConfiguration.shellDefinitionName,{locale:"default"},null,{handleResponseError:function(a){return 404===a.status}})["catch"](function(){return x.getNew()}):r.rxConfiguration.viewDefinitionName?n.get(r.rxConfiguration.viewDefinitionName,{locale:"default"}):n.getNew()}function U(){var a={},b=r.plainViewDefinition.localizableStringsByComponentId||{};return _.each(p.flattenTree(r.plainViewDefinition,"componentDefinitions"),function(c){if(!_.isUndefined(c.type)){var d=k.findDescriptor(c.type),e=b[c.id]||{},f={};_(d.propertiesByName).filter("localizable").each(function(a){if(c.propertiesByName[a.name]){var b=_(e).pick(function(b,d){return b===c.propertiesByName[a.name]}).keys().first();b||(b=y.generate()),f[b]=c.propertiesByName[a.name],c.propertiesByName[a.name]=b}}).value(),_.isEmpty(f)||(a[c.id]=f)}}),a}rx.assert.assertFunction(r.rxConfiguration.componentFilterFn,"rxConfiguration must have componentFilterFn function.");var V,W=m.get("graph"),X=r.rxConfiguration.componentFilterFn,Y=X(k.getRegisteredComponents()),Z=o.getInstance();r.plainViewDefinition=null,r.customizationIsDisabled=!1,r.canvasConfiguration={viewDefinition:{},isReadOnly:!1},k.getLicencedComponents().then(function(a){r.stencilConfiguration={components:_(X(a)).reject("hideInDesignerPalette").map(function(a){return _.omit(a,["propertiesByName"])}).forEach(function(a){a.propertiesByName={}}).value()}}),r.isDesignMode=!0,r.selected={validationIssues:[],viewDefinitionModel:null,viewComponentDefinitionModel:null},r.validationIssuesConfiguration={emptyText:"The View Definition is valid."},r.leftBladeConfiguration={title:"Palette",tabs:{stencilTabDefault:{active:!0,name:"default",iconClass:"d-icon-uml"}},dock:"left",expanded:!0},r.rightBladeConfiguration={title:"Properties",tabs:{viewInformation:{active:!0,iconClass:"d-icon-pencil"},componentInformation:{iconClass:"d-icon-gear"},validationIssues:{iconClass:"d-icon-exclamation_triangle"}},dock:"right",expanded:!0},r.viewComponentInspectorConfiguration={emptyText:"Select a component to view its properties here."},r.isDesignModeAvailable=function(){return!0},r.toggleDesignMode=function(){r.isDesignMode=!r.isDesignMode},u.getBundleFriendlyName().then(function(a){r.bundleFriendlyName=a}),r.canSave=function(){return!r.isFormBlocked&&r.rxViewDesignerForm&&r.rxViewDesignerForm.$valid&&ba()&&!r.canvasConfiguration.isReadOnly},r.saveChanges=function(){r.isFormBlocked||($(),A().then(function(a){a.length?(ca(a),aa()):(r.plainViewDefinition.localizableStringsByComponentId=U(),da().then(ea,fa)["finally"](aa))}))},r.closeDesigner=function(){b.$broadcast(f.events.close)},r.showRuntimeMode=function(){_.isEmpty(r.plainViewDefinition.inputParams)?window.open("#/app/view/"+encodeURIComponent(V.name)):j.create("scripts/view/designer/runtime-view-parameters.html","rxRuntimeViewParametersController",r.plainViewDefinition.inputParams).result.then(function(a){window.open("#/app/view/"+encodeURIComponent(V.name)+"?param="+a.join("&param="))})},r.handleBreadcrumbBarClick=function(a){a?r.$emit(f.events.viewComponentPointerUp,{item:l.getLayoutNodeById(a)}):r.$emit(f.events.blankPointerDown)},r.$on(s.events.refreshDesigner,function(){m.reset(),r.isNewView||n.get(V.name).then(function(a){V=a,r.plainViewDefinition=V.plain(),r.viewComponentInspectorConfiguration.disabled=r.canvasConfiguration.isReadOnly=!q.isCustomizationEnabled("allowOverlay",r.plainViewDefinition)})}),r.$on(f.events.canvasReady,B),r.$on(f.events.updateBreadcrumbs,P),r.$watchGroup(["selected.viewComponentDefinitionModel.id","selected.viewComponentDefinitionModel.getBreadcrumbName()"],P);var $=function(){r.isFormBlocked=!0},aa=function(){r.isFormBlocked=!1},ba=function(){return r.rxViewDesignerForm&&r.rxViewDesignerForm.json&&r.rxViewDesignerForm.json.$dirty||m.hasUndo()},ca=function(a){if(r.plainViewDefinition.layout||0===r.plainViewDefinition.componentDefinitions.length)!r.isDesignMode&&r.isDesignModeAvailable()&&r.toggleDesignMode(),r.rightBladeConfiguration.tabs.validationIssues.active=!0,i.error("The View Definition is not valid");else{var b=_(a).take(3).pluck("message").join("<br><br>");i.error(b,{enableHtml:!0})}},da=function(){if(r.isNewView)return n.post(r.plainViewDefinition);var a=_.cloneDeep(r.plainViewDefinition);return _.assign(V,a),V.put()},ea=function(){i.success(r.rxConfiguration.saveSuccessMessage),m.reset(),ga(),b.$broadcast(f.events.afterSave,r.plainViewDefinition),r.isNewView?C():n.get(V.name).then(function(a){V=a,r.plainViewDefinition=V.plain()})},fa=function(){n.applyLocalization(r.plainViewDefinition)},ga=function(){r.rxViewDesignerForm&&r.rxViewDesignerForm.json.$setPristine()};a.when(T()).then(function(a){V=a;var b=V.plain();if(!b.layout){var c=_.find(g.viewLayoutTemplates,{id:+e.layoutTemplate||g.defaultLayoutTemplateId});b.layout=JSON.stringify(c.layout)}r.plainViewDefinition=b,r.isNewView=_.isUndefined(V.lastUpdateTime),r.canvasConfiguration.viewDefinition=r.plainViewDefinition,r.isNewView||(r.viewComponentInspectorConfiguration.disabled=r.canvasConfiguration.isReadOnly=!q.isCustomizationEnabled("allowOverlay",b),r.leftBladeConfiguration.expanded=!r.canvasConfiguration.isReadOnly)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").directive("rxRuntimeViewContainer",function(){return{restrict:"E",replace:!0,templateUrl:"scripts/view/runtime/runtime-view-container.directive.html",scope:{node:"="}}})}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").directive("rxRuntimeViewItem",["$compile","RX_VIEW_DEFINITION",function(a,b){var c='<rx-runtime-view-container node="node"></rx-runtime-view-container>';return{restrict:"E",scope:{node:"="},link:function(d,e){var f,g=d.node,h=d.$new(!0);g.type===b.baseContainer?f=a(c)(_.assign(h,{node:g})):(h.configuration=g.componentDefinition,f=a(b.elementTemplate.replace(/{type}/g,g.type))(h)),e.replaceWith(f)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").directive("rxRuntimeView",["$rootScope","$q","$injector","rxViewDefinitionResource","rxViewComponent","rxDesignerCache","rxUtils","rxNotificationMessage","dialogs","rxContainerDesignManager","rxViewComponentEventManager","rxExpressionEngine","rxGUID","RX_RUNTIME_VIEW","RX_VIEW_COMPONENT","RX_VIEW_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{restrict:"E",scope:{rxConfiguration:"="},templateUrl:"scripts/view/runtime/runtime-view.directive.html",link:function(q,r){function s(){return u("isValid").then(function(){return!0},function(){return!1})}function t(a,c,d){rx.assert.assertStringWithLength(c);var e;return a.api&&_.isFunction(a.api[c])&&(e=a.api[c](d),e.then||(e=Boolean(e)?b.when():b.reject())),e}function u(a,c){var d=_.map(C,function(b){return t(b,a)});return b.all(_.compact(d))}function v(){return _.transform(q.plainViewDefinition.outputParams,function(a,b){try{a[b.name]=l.evaluate(b.source,E)}catch(c){h.error(c.messsage)}return a},{})}function w(a,b,c){var d=e.findDescriptor(a.type);c=c||"",_.each(a.propertiesByName,function(a,e){var f=A(e,d,b);if(f&&b&&_.contains(a,c))try{b.propertiesByName[e]=l.evaluate(a,E)}catch(g){h.error(g.message)}})}function x(a,b,c){_.each(a,function(a){var d=_.find(b,{id:a.id});w(a,d,c),d&&a.componentDefinitions&&x(a.componentDefinitions,d.componentDefinitions,c)})}function y(a,b){E.view.components[a.id]=E.view.components[a.id]||{};var c=e.findDescriptor(a.type);_.each(a.propertiesByName,function(d,e){if(void 0===E.view.components[a.id][e]){var f=A(e,c,a);f?b(e,d,a,E.view.components[a.id]):E.view.components[a.id][e]=d}}),a.componentDefinitions&&_.each(a.componentDefinitions,function(a){y(a,b)})}function z(a){var b=JSON.parse(a.layout),c=g.flattenTree(a,"componentDefinitions").slice(1),d=g.flattenTree(b,"columns","children").filter(function(a){return a.componentDefinitionId});d.forEach(function(a){_.find(c,{id:a.componentDefinitionId})||(j.initContainerLayoutProperties(a),a.type=p.baseContainer)}),_.each(c,function(a){var b=e.findDescriptor(a.type),c=_.find(d,{componentDefinitionId:a.id}),f=_.cloneDeep(a);if(f.api={},c&&(_.assign(c,{type:b.type,componentDefinition:f}),_.has(a,"propertiesByName.autoFill")))try{c.autoFill=JSON.parse(a.propertiesByName.autoFill)}catch(g){}}),C=_.filter(g.flattenTree(b,"columns","children","componentDefinition","componentDefinitions"),function(a){return!a.componentDefinition&&a.type&&"rx-view-designer-container"!==a.type}),_.each(C,function(a){y(a,function(a,b,c,d){_.contains(b,"${view.")||(l.isValid(b)&&(c.propertiesByName[a]=l.evaluate(b)),d[a]=c.propertiesByName[a])})}),_.each(C,function(a){y(a,function(a,b,c,d){(_.contains(b,"${view.inputParams")||_.contains(b,"${view.api"))&&(c.propertiesByName[a]=l.evaluate(b,E),d[a]=c.propertiesByName[a])})}),_.each(C,function(a){y(a,function(a,b,c,d){_.contains(b,"${view.components")&&(c.propertiesByName[a]=l.evaluate(b,E),d[a]=c.propertiesByName[a])})});var f=1===_.size(b.columns),h=_.some(b.columns,function(a){return a&&a.hasOwnProperty("role")});f&&!h&&(b=b.columns[0]),q.useRowLayout=h,q.layout=b}function A(a,b,d){var e=!1,f=_.find(b.propertiesByName,{name:a});if(f)e=Boolean(f.enableExpressionEvaluation);else if(b.managerService){var g=c.get(b.managerService);e=!!_.isFunction(g.isExpressionEvaluationEnabled)&&g.isExpressionEvaluationEnabled(a,d)}return e}function B(a){return rx.assert.assert(_.isString(a)||_.isObject(a),"viewDefinitionName must be a string or an object representing view definition."),_.isString(a)?d.get(a):b.when(a)}var C=[],D=[],E={view:{components:{},inputParams:{},isValid:!1}};q.plainViewDefinition={name:q.rxConfiguration.viewDefinitionName,layout:q.rxConfiguration.layout},q.rxConfiguration.id=m.generate();var F=k.getInstance(r);E.view.api=q.rxConfiguration.api={close:function(){return b(function(a,b){var c=_.some(C,function(a){return a.api&&_.isFunction(a.api.isDirty)&&a.api.isDirty()});c?i.confirm("Warning!","You have unsaved data. Do you want to continue?").result.then(function(){F.action(n.events.viewAction,{actionName:n.actions.close}),a()},b):(F.action(n.events.viewAction,{actionName:n.actions.close}),a())})},save:function(){var a=_.map(C,function(a){return t(a,"save")});return b.all(a).then(function(){F.action(n.events.viewAction,{actionName:n.actions.save})})},submit:function(){return q.rxConfiguration.api.save().then(function(){var a=v();return F.action(n.events.viewAction,{actionName:n.actions.submit,outputParams:a}),a})}},B(q.rxConfiguration.viewDefinitionName).then(function(a){_.assign(q.plainViewDefinition,a),D=g.flattenTree(q.plainViewDefinition,"componentDefinitions").slice(1),_.each(q.plainViewDefinition.inputParams,function(a,b){E.view.inputParams[a.name]=q.rxConfiguration.params?q.rxConfiguration.params[b]:null}),z(q.plainViewDefinition),q.$emit(n.actions.viewReady)}),f.clear(),q.$on("$destroy",function(){f.clear()}),q.$on(o.events.propertyChanged,function(a,b){var c,d=!1,e=!1;b.componentDefinitionId===q.rxConfiguration.id?(d=!0,c="view."+b.property,E.view[b.property]=b.newValue):_.find(D,{id:b.componentDefinitionId})&&(d=!0,c="view.components."+b.componentDefinitionId+"."+b.property,E.view.components[b.componentDefinitionId][b.property]=b.newValue,"isValid"===b.property&&b.newValue!==b.oldValue&&(e=!0)),d&&x(q.plainViewDefinition.componentDefinitions,C,c),e&&s().then(function(a){F.propertyChanged({property:"isValid",newValue:a})})}),q.$on(o.events.action,function(b,c){var d=_.assign({viewDefinitionName:q.rxConfiguration.viewDefinitionName},_.cloneDeep(c.data));switch(c.actionName){case o.actions.close:q.rxConfiguration.api.close();break;case o.actions.save:F.action(n.events.viewAction,{actionName:n.actions.save});break;case o.actions.newComponentAdded:x(q.plainViewDefinition.componentDefinitions,C)}a.$broadcast(n.events.componentAction,d)})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.blade").controller("BladeController",["$scope","$timeout",function(a,b){function c(){a.rxConfiguration.expanded=!1}function d(){a.rxConfiguration.expanded=!0}var e=a.tabs=[];this.handleTabClick=function(a){this.activate(a)},a.toggle=function(){a.rxConfiguration.expanded?c():d()},this.addTab=function(a){e.push(a),(1===e.length||a.active)&&this.activate(a)},this.activate=function(c){_.forEach(e,function(a){a!==c&&(a.active=!1)}),c.active=!0,a.activeTab=c,_.isFunction(c.onActivate)&&b(function(){c.onActivate(c.tabName)})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.definition-picker").controller("rxDefinitionPickerController",["$scope","$timeout","$q","rxDefinitionPickerCache","bundlePathFilter","rxGlobalCache","rxBundleCache","definitionNameFilter","definitionSearchFilter","RX_DEFINITION_PICKER",function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){return _(b).map(function(a){return{definitionName:a.name,label:_.escape(h(a.name))}}).groupBy(function(a){return e(a.definitionName)||j.globalDefinitionsLabel}).map(function(b,c){var d=_.find(a,{id:c});return{label:d?d.friendlyName||d.id:c,definitionTreeNodes:b.sort(function(a,b){return a.definitionName.localeCompare(b.definitionName)})}}).sort(function(a,b){if("bundle"===c){if(a.label===o)return-1;if(b.label===o)return 1}if("all"===c||"rx"===c){if(a.label===j.globalDefinitionsLabel)return-1;if(b.label===j.globalDefinitionsLabel)return 1}return a.label.localeCompare(b.label)}).value()}function l(b){if(!a.definitionTrees[b]){var e=d[p.dataGetters[b]];rx.assert.assertFunction(e,"rxDefinitionPickerCache."+e+" does not exist."),a.definitionTrees[b]=m(e,b).then(function(c){if(!c.length)return[];var d=n(c);return d||(d=c[0]),d.isExpanded=!0,a.definitionTrees[b]=c,a.definitionTrees[b]})}return c.when(a.definitionTrees[b])}function m(a,b){return c.all({bundleDescriptors:f.getBundleDescriptors(),definitionDescriptors:a()}).then(function(a){return k(a.bundleDescriptors,a.definitionDescriptors,b)})}function n(b){return _.find(b,function(b){return _.find(b.definitionTreeNodes,function(b){return b.definitionName===a.rxSelectedDefinitionName})})}rx.assert.assertString(a.rxType,"Definition type must be specified via rx-type attribute.");var o,p=j.definitionTypes[a.rxType];rx.assert.assertObject(p,"Unknown definition type specified in rx-type attribute:"+a.rxType+"."),a.states={},a.definitionSearchQuery="",a.definitionTrees={},a.busyIndicatorTemplateUrl="template/busy-loader.html",a.definitionScope={},g.getBundleFriendlyName().then(function(b){o=b,a.definitionGroups=[{key:"bundle",label:_.trunc(o,{length:60})},{key:a.rxDefinitionsOnly?"rx":"all",label:p.allDefinitionsLabel}]}),d.registerConsumer(a),a.$watch("definitionScope.name",function(b,c){b&&(a.previousDefinitionScope=c,"search"==b&&(b="all"),a.rxDefinitionsOnly&&"all"==b&&(b="rx"),a.loadingDefinitionsPromise=l(b))}),a.$watch("definitionSearchQuery",function(b){var c="all";a.rxDefinitionsOnly&&(c="rx"),b&&b.length>2?l(c).then(function(c){var d=i(_.cloneDeep(c),b);_.each(d,function(a){return a.isExpanded=!0,a}),a.definitionTrees.search=d}):a.definitionTrees.search=[]}),a.openPopup=function(){a.rxDisabled||(a.definitionScope.name||(a.definitionScope.name="bundle"),a.states.opened=!a.states.opened)},a.closePopup=function(){a.$apply(function(){a.states.opened=!1})},a.selectDefinition=function(b){a.rxSelectedDefinitionName=b.definitionName,a.states.opened=!1,a.rxOnDefinitionSelected&&a.rxOnDefinitionSelected(b.definitionName)},a.clearDefinition=function(b){b.stopPropagation(),a.rxSelectedDefinitionName=null,a.rxOnDefinitionSelected&&a.rxOnDefinitionSelected(null)},a.closeSearch=function(){a.states.searchOpened=!1,a.definitionScope.name=a.previousDefinitionScope},a.openSearch=function(){a.states.searchOpened=!0,a.definitionScope.name="search"},a.clearSearch=function(){a.definitionSearchQuery=""}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("PermissionEditorDialogController",["$scope","$q","$stateParams","$uibModalInstance","assignedPermissions","basePermissions","securityLabels","editorContext","rxDesignerCache","rxOverlay","RX_OVERLAY","rxRecordDefinitionResource","RX_PERMISSION","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){var a=h.cell.get("isReverted");return a?k.operationTypes.NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP:t.lastUpdateTime?j.getOverlayOperation(t.overlayGroupId,u.parentOverlayGroupId):k.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP}function p(){var b=_(f).map(function(b){var c=_.find(a.roles.concat(a.groups),{id:b.ownerId.value});return b.ownerName=c.name,b}).groupBy("ownerName").value();a.basePermissions=_.map(b,function(b,c){var d=q(b[0].ownerId.value),e=!1,f=!1;if(_.includes([k.overlayTypes.additive,k.overlayTypes.overwrite],u.permissionsOverlayType)){var g=_.find(a.permissions,{permissionOwner:c});k.overlayTypes.overwrite===u.permissionsOverlayType&&(e=!_.find(a.permissions,{permissionOwner:c})),g&&(f=!0,a.permissions=_.reject(a.permissions,g))}return{type:d,permissionOwner:c,permissionOwnerList:d==m.permissionType[0]?a.groups:a.roles,permittedActions:_.map(b,"type"),isDisabled:e,isPinned:f}})}function q(a){return a<0?m.permissionType[1]:m.permissionType[0]}function r(){_.remove(a.permissions,function(a){return""===a.permissionOwner});var b=angular.copy(a.permissions),c=[],d=_.filter(a.basePermissions,{isDisabled:!0});if(d.length>0){var e=_.difference(a.basePermissions,d);e&&(b=b.concat(e)),w=k.overlayTypes.overwrite}var f=_.filter(a.basePermissions,{isPinned:!0});return f&&0===d.length&&(b=b.concat(f),w=k.overlayTypes.additive),b.length>0&&w!==k.overlayTypes.overwrite&&(w=k.overlayTypes.additive),_.each(b,function(b){var d=_.find(b.permissionOwnerList,{name:b.permissionOwner});if(d||(d=_.find(a.securityLabels,{name:b.permissionOwner})),a.dialogMetadata.actions.length>0)_.each(b.permittedActions,function(a){var e={ownerId:{value:d.id,type:b.type.toUpperCase()},ownerName:b.permissionOwner,type:a};c.push(e)});else{var e={ownerId:{value:d.id,type:b.type.toUpperCase()},ownerName:b.permissionOwner,type:a.dialogMetadata.defaultPermittedAction};c.push(e)}}),c}var s={type:"",permissionOwner:"",permissionOwnerList:[],permittedActions:[]},t=h.cell.get("rxData"),u=t.overlayDescriptor||{parentOverlayGroupId:null};if(a.state={permissionsWereUpdated:!1,dataLoaded:!1},a.displayName=t.name,a.dialogMetadata=m.permissionDialogMetadata[h.type],a.actionsData=a.dialogMetadata.actions,a.publicPermissionValue=[],a.securityLabels=g,_.includes(m.haveOverlayLogic,h.type)){var v=o();if(v!==k.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP){a.overlayMode=!0;var w=u.permissionsOverlayType||k.operationTypes.NOT_CUSTOMIZED_IN_THIS_OVERLAY_GROUP}}a.automaticPermissionSet=function(){var b=_.find(_.union(a.permissions,a.basePermissions),function(a){return a.permissionOwner==m.publicPermissionType&&a.permittedActions.length>0});return b?a.publicPermissionValue=b.permittedActions:a.publicPermissionValue=[],b&&!b.isDisabled},a.basePermissionDisabled=function(){return _.find(a.basePermissions,{isDisabled:!0})},a.basePermissionPinned=function(){return _.find(a.basePermissions,{isPinned:!0})},b.all({groups:i.getGroupDataPage(),roles:i.getRoleDataPage()}).then(function(b){var c;if(a.groups=_.map(b.groups,function(a){return{name:a.groupName,id:a.groupId}}),a.roles=_.map(b.roles,function(a){return{name:a.roleName,id:a.roleID}}),m.editorContexts.field===h.type&&u.permissionsOverlayType){var d=_.union(b.groups,b.roles);c=_(t.explicitPermissions).map(function(a){var b=_.find(d,function(b){return _.includes([b.roleID,b.groupId],a.ownerId.value)});return a.ownerName=b.groupName||b.roleName,a}).groupBy("ownerName").value()}else c=_.groupBy(e,"ownerName");a.overlayMode?(u.permissionsOverlayType?a.permissions=_.map(c,function(b,c){var d=q(b[0].ownerId.value);return{type:d,permissionOwner:c,permissionOwnerList:d==m.permissionType[0]?a.groups:a.roles,permittedActions:_.map(b,"type")}}):a.permissions=[],p(f)):a.permissions=_.map(c,function(b,c){var d=q(b[0].ownerId.value);return{type:d,permissionOwner:c,permissionOwnerList:d==m.permissionType[0]?a.groups:a.roles,permittedActions:_.map(b,"type")}}),a.state.dataLoaded=!0}),a.getAvailablePermissionOwnersList=function(b){return _.reject(b,function(b){return _.find(_.union(a.permissions,a.basePermissions),{permissionOwner:b.name})||_.contains(a.dialogMetadata.filterPermissionGroupIDs,b.id)||b.id>=n.SECURITY_LABEL_IDS.MIN&&b.id<=n.SECURITY_LABEL_IDS.MAX})},a.permissionTypes=m.permissionType,a.setRestrictionForAllPermissions=function(b){a.state.permissionsWereUpdated=!0,_.each(a.permissions,function(c){a.dialogMetadata.uniqueAction?c.permittedActions=[b]:!_.includes(c.permittedActions,b)&&c.permissionOwner&&c.permittedActions.push(b)})},a.setPermissionType=function(b,c){c.type=b,c.permissionOwner="",c.permittedActions=[],c.permissionOwnerList=c.type==m.permissionType[0]?a.groups:a.roles,a.state.permissionsWereUpdated=!0},a.setPermissionOwner=function(b,c){c.permissionOwner=b.name,a.state.permissionsWereUpdated=!0,m.editorContexts.record===h.type&&(c.permittedActions=[a.dialogMetadata.defaultPermittedAction])},a.setRestriction=function(b,c){a.dialogMetadata.uniqueAction?_.includes(c.permittedActions,b)?c.permittedActions=[]:c.permittedActions=[b]:_.includes(c.permittedActions,b)?c.permittedActions=_.without(c.permittedActions,b):c.permittedActions.push(b),a.state.permissionsWereUpdated=!0},a.createNewPermission=function(){var b=angular.copy(s);b.type=m.permissionType[0],b.permissionOwnerList=a.groups,a.permissions.push(b),a.state.permissionsWereUpdated=!0,w&&w!==k.overlayTypes.overwrite&&(w=k.overlayTypes.additive)},a.removePermission=function(b){b.permissionOwner==m.publicPermissionType&&(a.publicPermissionValue=[]),_.remove(a.permissions,b),a.state.permissionsWereUpdated=!0},a.togglePermission=function(b){b.isDisabled=!b.isDisabled,b.isPinned=!1,a.state.permissionsWereUpdated=!0},a.pinPermission=function(b){b.isPinned&&(a.permissions=_.reject(a.permissions,{ownerName:b.ownerName})),b.isPinned=!b.isPinned,a.state.permissionsWereUpdated=!0},a.ok=function(){var a=r();d.close({permissions:a,permissionsOverlayType:w})},a.cancel=function(){d.dismiss("cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("TimerEditorController",["$scope","$filter","$uibModalInstance","expressionContext",function(a,b,c,d){function e(a){var b="P"+(a.months?a.months+"M":"")+(a.weeks?a.weeks+"W":"")+(a.days?a.days+"D":"")+(a.hours||a.minutes?"T":"")+(a.hours?a.hours+"H":"")+(a.minutes?a.minutes+"M":"");return b}var f=d.path,g=d.previewFilter||"intervalTimer";if(a.cell=d.cell,a.hasError=!1,a.form={months:0,weeks:0,days:0,hours:0,minutes:0},a.expression=a.cell.prop(f)||"",a.expression.length>0){var h=b(g)(a.expression,"json");a.form.months=h.months,a.form.weeks=h.weeks,a.form.days=h.days,a.form.hours=h.hours,a.form.minutes=h.minutes}a.ok=function(){var b='"'+e(a.form)+'"';a.cell.prop(f,b.trim()),c.close()},a.clearValidationError=function(){a.hasError=!1},a.$watch("form",function(){a.preview=b(g)(e(a.form))},!0),a.$watch("expression",a.clearValidationError),a.cancel=function(){c.dismiss()},a.onNodeSelected=function(a){}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("ApprovalFlowSelectorDialogController",["$scope","$uibModalInstance","$filter","rxApprovalFlowSelectorResource","context",function(a,b,c,d,e){a.selectedRecordDefinitionName=e.cell.prop("rxData/inputMap/Record Definition Name"),a.selectedRow="",a.isRowSelected=!1,d.get(a.selectedRecordDefinitionName).then(function(b){a.gridOptions.data=b.approvalFlowInstanceList}),a.gridOptions={enableRowSelection:!0,enableFullRowSelection:!0,enableSelectAll:!1,rowHeight:35,multiSelect:!1,enableColumnMenus:!1,enableScrollbars:!1,data:a.appprovalFlowList,onRegisterApi:function(b){b.selection.on.rowSelectionChanged(a,function(b){b.isSelected?(a.selectedRow=b.entity,
a.isRowSelected=!0):a.isRowSelected=!1})},columnDefs:[{field:"approvalFlowName",displayName:"Approval Flow Name"},{field:"owner",displayName:"Owner"},{field:"modifiedDate",displayName:"Modified Date",cellFilter:"date:'medium'"},{field:"enabled",displayName:"Enabled"}].map(function(a){return angular.extend({headerCellClass:"ui-grid-header-cell_customize sortable",cellClass:"ui-grid-cell-contents ui-grid-cell_customize"},a)})},a.ok=function(){a.selectedRow&&(e.cell.prop("rxData/inputMap/Approval Flow Name",a.selectedRow.approvalFlowName),b.dismiss())},a.cancel=function(){b.dismiss()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("InputMapFieldsDialogController",["$scope","$uibModalInstance","inputMapFieldsContext",function(a,b,c){a.columns=_.cloneDeep(c.fields),a.availableColumns=_.filter(_.cloneDeep(c.fieldDefinitions),function(b){return!_.find(a.columns,{name:b.name})}),a.addColumn=function(b,c){c&&c.stopPropagation(),a.columns.push(b),a.availableColumns.splice(a.availableColumns.indexOf(b),1)},a.removeColumn=function(b){_.pull(a.columns,b),a.availableColumns.push(b)},a.moveDown=function(b){var c=_.findIndex(a.columns,b);a.columns.splice(c,1),a.columns.splice(c+1,0,b)},a.moveUp=function(b){var c=_.findIndex(a.columns,b);a.columns.splice(c,1),a.columns.splice(c-1,0,b)},a.ok=function(){b.close(a.columns)},a.cancel=function(){b.dismiss()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("ProcessParameterEditorController",["$scope","$timeout","$uibModalInstance","$uibModal","dialogs","rxDateUtils","processParameterContext","rxDesignerCache","definitionNameFilter","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j){function k(b,c){var d=_.find(j.dataTypes,{resourceType:b});if(!d)return!1;switch(b){case j.dataTypes.decimal.resourceType:case j.dataTypes.integer.resourceType:case j.dataTypes.real.resourceType:return"number";case j.dataTypes.selection.resourceType:return"select";case j.dataTypes.dateTime.resourceType:return"rx-inspector-datetimepicker";case j.dataTypes.timeOnly.resourceType:return"rx-inspector-timepicker";case j.dataTypes.dateOnly.resourceType:return"rx-inspector-datepicker";case j.dataTypes["boolean"].resourceType:return{type:"select",options:j.dataTypes["boolean"].options};case j.dataTypes.recordInstance.resourceType:return h.getRecordDefinitionDescriptors().then(function(b){a.recordDefinitionNames=_(b).map(function(a){return{value:a.name,content:i(a.name)}}).sort(function(a,b){return a.value.localeCompare(b.value)}).unshift({value:"",content:""}).value()}),"recordInstance";default:return"text"}}a.processParameters=[],a.inputDataTypes=g.inputDataTypes,a.outputDataTypes=g.outputDataTypes;var l=_.cloneDeep(g.inputParams),m=_.cloneDeep(g.outputParams),n=function(a){return!g.editParameter||a!==g.editParameter.name};_.forEach(l,function(b){b.isInput=!0,b.isCollapsed=n(b.name),b.id||(b.newId=_.uniqueId()),b.defaultValueType=k(b.resourceType),f.isDateLike(b.resourceType)&&b.defaultValue&&(b.defaultValue=f.fromIsoString(b.defaultValue,b.resourceType)),a.processParameters.push(b)}),_.forEach(m,function(b){var c=_.findIndex(a.processParameters,{name:b.name});c!==-1?(a.processParameters[c].isOutput=!0,a.processParameters[c].outputId=b.id):(b.isOutput=!0,b.isCollapsed=n(b.name),b.id?b.outputId=b.id:b.newId=_.uniqueId(),b.defaultValueType=k(b.resourceType),f.isDateLike(b.resourceType)&&b.defaultValue&&(b.defaultValue=f.fromIsoString(b.defaultValue,b.resourceType)),a.processParameters.push(b))}),a.addProcessParameter=function(){var c="new_"+_.uniqueId();a.processParameters.push({name:"",id:"",resourceType:j.dataTypes.character.resourceType,description:"",isInput:!0,newId:c,defaultValueType:k(j.dataTypes.character.resourceType)}),b(function(){var a=angular.element('[name="parameter-name-'+c+'"]');a.focus()})},a.removeProcessParameter=function(b,c){e.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){a.processParameters.splice(c,1),a.checkDuplicate("name"),a.checkDuplicate("id")}),b.stopPropagation()},a.onResourceTypeChange=function(a){a.defaultValueType=k(a.resourceType),a.defaultValue=""},a.openSelectOptionsEditor=function(a){d.open({templateUrl:"scripts/components/designer/inspector/editors/selection-field/selection-field-editor.html",controller:"SelectionFieldEditorController",backdrop:"static",resolve:{selectionFieldContext:{selectionFields:a.optionNamesById}},windowClass:"rx-selection-field-editor-dialog"}).result.then(function(b){0!==_.size(b)?a.optionNamesById=b:delete a.optionNamesById})},a.expandAll=function(){_.forEach(a.processParameters,function(a){a.isCollapsed=!1})},a.collapseAll=function(){_.forEach(a.processParameters,function(a){a.isCollapsed=!0})},a.checkDuplicate=function(b){var c=[];_.forEach(a.processParameters,function(d){var e=_.filter(a.processParameters,function(a){return a[b]&&a[b]===d[b]});e.length>1&&(c=_(c).concat(e).uniq().value())}),_.forEach(c,function(c){a.ProcessParameterEditorForm["parameter-"+b+"-"+(c.newId||c.id)].$setValidity("duplicate",!1)}),_(a.processParameters).difference(c).each(function(c){a.ProcessParameterEditorForm["parameter-"+b+"-"+(c.newId||c.id)].$setValidity("duplicate",!0)}).value()},a.validateParameterId=function(b,c){var d=a.ProcessParameterEditorForm["parameter-"+b+"-"+(c.newId||c.id)];d.$modelValue&&d.$modelValue<=1e3?(d.$error.duplicate&&a.checkDuplicate(b),d.$setValidity("range",!1)):(d.$setValidity("range",!0),a.checkDuplicate(b))},a.parameterTypeChanged=function(b){b.isInput||b.isOutput?a.ProcessParameterEditorForm["parameter-type-"+(b.newId||b.id)].$setValidity("required",!0):a.ProcessParameterEditorForm["parameter-type-"+(b.newId||b.id)].$setValidity("required",!1)},a.ok=function(){var b=[],d=[];_.forEach(a.processParameters,function(a){var c;if(a.isInput){var e;c={name:a.name,resourceType:a.resourceType,id:a.id||null,description:a.description,required:a.required},a.defaultValue&&(f.isDateLike(a.resourceType)?c.defaultValue=f.toIsoString(a.defaultValue,a.resourceType):c.defaultValue=a.defaultValue),a.resourceType===j.dataTypes.selection.resourceType&&(c.optionNamesById=a.optionNamesById),a.resourceType===j.dataTypes.recordInstance.resourceType&&(c.recordDefinitionName=a.recordDefinitionName,c.useSampleData=a.useSampleData),a.lastUpdateTime&&(e=_.find(g.inputParams,{id:a.id})),e?b.push(_.assign(e,c)):b.push(c)}if(a.isOutput){var h;c={name:a.name,resourceType:a.resourceType,id:a.id||null,description:a.description},a.resourceType===j.dataTypes.selection.resourceType&&(c.optionNamesById=a.optionNamesById),a.resourceType===j.dataTypes.recordInstance.resourceType?(c.recordDefinitionName=a.recordDefinitionName,c.useSampleData=a.useSampleData):c.defaultValue=a.defaultValue,a.lastUpdateTime&&(h=_.find(g.outputParams,{id:a.outputId})),h?d.push(_.assign(h,c)):d.push(c)}}),c.close({inputParams:b,outputParams:d})},a.cancel=function(){c.dismiss("Cancel")},a.isObject=_.isObject,a.datepickerOptions={showWeeks:!1,opened:!1},a.open=function(a,b){a.preventDefault(),a.stopPropagation(),b.datepickerOpened=!0}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("ScheduleTimerDialogController",["$scope","$filter","$uibModalInstance","RX_SCHEDULER_TIMER","dialogs","$timeout","context",function(a,b,c,d,e,f,g){function h(){j.prop(k,null,{silent:!0}),j.prop(d.timeCriteriaPath,null,{silent:!0}),j.prop(k,a.preview),j.prop(d.timeCriteriaPath,b("scheduleTimerJson")(angular.copy(a.scheduleDefinition)),{silent:!0}),c.close()}function i(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]==c)return d;return null}var j=g.cell,k=g.path;a.scheduleDefinition=_.isEmpty(j.prop(d.timeCriteriaPath))?{resourceType:d.resourceType,monthDays:[],weekDays:[],hours:[],minute:0}:b("scheduleTimerJson")(angular.copy(j.prop(d.timeCriteriaPath)),"json"),a.hours=_.range(1,12),a.hours.unshift(12),a.calendarDates=_.chunk(d.numberOfDays,7),a.weekDays=_.chunk(d.weekDaysList,5),a.selectAllDates=function(){a.scheduleDefinition.monthDays=_.range(1,32)},a.selectAllDays=function(){a.scheduleDefinition.weekDays=[],angular.forEach(d.weekDaysList,function(b){b&&a.scheduleDefinition.weekDays.push(b)})},a.selectAllHours=function(){var b=_.range(1,13),c=_.map(b,function(a){return a+":AM"}),d=_.map(b,function(a){return a+":PM"});a.scheduleDefinition.hours=_.union(c,d)},a.resetSelection=function(b){a.scheduleDefinition[b]=[]},a.isDateSelected=function(b){return _.contains(a.scheduleDefinition.monthDays,b)},a.isDaySelected=function(b){return _.where(a.scheduleDefinition.weekDays,b).length>0},a.isHourSelected=function(b,c){return _.contains(a.scheduleDefinition.hours,b+":"+c)},a.$watch("scheduleDefinition",function(c,d){a.preview=b("scheduleTimerExpressionBuilder")(c)},!0),a.ok=function(){a.scheduleDefinition.hours.length?h():e.confirm("Alert!","You did not select a time for the schedule. Do you want to set the scheduled time to 12:00 AM?").result.then(function(){a.scheduleDefinition.hours.push(d.defaultTime),f(function(){h()})})},a.cancel=function(){j.prop(d.timeCriteriaPath,j.prop(d.timeCriteriaPath),{silent:!0}),c.dismiss()},a.updateScheduleDefinition=function(b,c){_.contains(a.scheduleDefinition[b],c)?a.scheduleDefinition[b].splice(a.scheduleDefinition[b].indexOf(c),1):"weekDays"==b&&_.where(a.scheduleDefinition[b],c).length>0?a.scheduleDefinition[b].splice(i(a.scheduleDefinition[b],"value",c.value),1):a.scheduleDefinition[b].push(c)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("SelectionFieldEditorController",["$scope","$uibModalInstance","$timeout","selectionFieldContext",function(a,b,c,d){a.selectionFields={},a.availableselectionFields=[],a.selectionFields.value=[],a.selectionFields.value=_.map(_.cloneDeep(d.selectionFields),function(a,b){return{inputName:_.uniqueId(),displayValue:a,integerValue:parseInt(b),isCollapsed:!0}}),a.removeSelectionField=function(b){a.selectionFields.value.splice(b,1),a.checkIntegerValueDuplicate(),a.checkDisplayValueDuplicate()},a.addSelectionField=function(){var b,d=0===_.size(a.selectionFields.value)?0:parseInt(_(a.selectionFields.value).pluck("integerValue").max())+10,e="New Option",f=0;_.isNaN(d)&&(d=0);do e=0===f?e:"New Option "+f,f++,b=_.find(a.selectionFields.value,{displayValue:e});while(b);var g={inputName:_.uniqueId(),displayValue:e,integerValue:d,isCollapsed:!1};a.selectionFields.value.push(g),c(function(){var a=angular.element("[name=displayValue"+g.inputName+"]");a.focus()})},a.expandAll=function(){_.each(a.selectionFields.value,function(a){a.isCollapsed=!1})},a.checkIntegerValueDuplicate=function(){a.checkDuplicate("integerValue")},a.checkDisplayValueDuplicate=function(){a.checkDuplicate("displayValue")},a.checkDuplicate=function(b){var c=[];_.each(a.selectionFields.value,function(d){var e=_.filter(a.selectionFields.value,function(a){return a[b]==d[b]});e.length>1&&(c=_(c).concat(e).uniq().value())}),_.each(c,function(c){a.SelectionFieldEditorForm[b+c.inputName].$setValidity("duplicate",!1)}),_(a.selectionFields.value).difference(c).each(function(c){a.SelectionFieldEditorForm[b+c.inputName].$setValidity("duplicate",!0)}).value()},a.collapseAll=function(){_.each(a.selectionFields.value,function(a){a.isCollapsed=!0})},a.ok=function(){var c={};_.each(a.selectionFields.value,function(a){c[a.integerValue]=a.displayValue}),b.close(c)},a.cancel=function(){b.dismiss("Cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("WaitForApprovalDefinitionDialogController",["$scope","$filter","$q","rxNotificationMessage","$uibModal","$uibModalInstance","context","RX_WAIT_FOR_APPROVAL","rxRecordDefinitionResource","rxRecordInstanceDataPageResource","rxWaitForApprovalDefinitionResource","rxUserDataPageResource",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.currentSelectedApprovers=[],a.availableOptionList=[],a.approverType!==h.approveType.adHoc&&a.previousSelectedOption!==h.approveType.adHoc||(a.finalApproversList=[])}function n(){var b=a.waitForApprovalDefinition.approversList.split(";");"2"===a.waitForApprovalDefinition.processType&&(b[0]=_.trim(b[0],"$")),a.approverType===h.approveType.roleBased||a.approverType===h.approveType.userBased?_.forEach(b,function(b){var c=_.find(a.availableIndividualApprovalList,{name:b});c?a.finalApproversList.push(c):a.finalApproversList.push(_.find(a.availableApprovalRoleList,{name:b}))}):a.finalApproversList=_.map(b,function(a){return{name:a,label:a,selected:!0}})}a.availableApprovalRoleList=[],a.availableIndividualApprovalList=[],a.availableFieldList=[],a.availableOptionList=[],a.finalApproversList=[],a.currentSelectedApprovers=[],a.waitForApprovalDefinition={},a.previousSelectedOption=-1;var o=[];o.push(j.withName(h.definitionName).get(-1,0,{}).then(function(b){_.forEach(b.data,function(b,c){a.availableApprovalRoleList.push({name:b[h.roleNameFieldId],label:b[h.roleNameFieldId],selected:!1})})})),o.push(l.get(-1,0,{}).then(function(b){_.forEach(b.data,function(b,c){a.availableIndividualApprovalList.push({name:b.loginName,label:b.fullName,selected:!1})})})),g.isCreateNew?(a.title="New",a.waitForApprovalDefinition.approvalForm=g.cell.recordDefinitionName,a.approverType="0"):(a.title="Edit",a.isEdit=!0,a.waitForApprovalDefinition=g.selectedWFADName,a.approverType=a.waitForApprovalDefinition.processType,a.waitForApprovalDefinition.processName&&(a.disableProcessName=!0)),o.push(i.get(a.waitForApprovalDefinition.approvalForm).then(function(b){_(b.fieldDefinitions).map(function(a){if(a.resourceType===h.resourceType)return a.name}).compact().forEach(function(b){a.availableFieldList.push({name:b,label:b,selected:!1})}).value()})),c.all(o).then(function(){a.updateAvailableApproverOption(),g.isCreateNew||n()}),a.updateAvailableApproverOption=function(){switch(a.approverType){case h.approveType.roleBased:m(),_.isEmpty(a.availableApprovalRoleList)||(a.availableOptionList=_.clone(a.availableApprovalRoleList));break;case h.approveType.userBased:m(),_.isEmpty(a.availableIndividualApprovalList)||(a.availableOptionList=_.clone(a.availableIndividualApprovalList));break;case h.approveType.adHoc:m(),_.isEmpty(a.availableFieldList)||(a.availableOptionList=_.clone(a.availableFieldList))}a.previousSelectedOption=a.approverType},a.setSelectedApprover=function(b){var c=_.find(a.currentSelectedApprovers,{name:b.name});c?(b.selected=!1,_.pull(a.currentSelectedApprovers,c)):(b.selected=!0,a.currentSelectedApprovers.push(b))},a.moveLeftToRight=function(){_.forEach(a.currentSelectedApprovers,function(a){a.selected=!0}),a.approverType===h.approveType.adHoc?1==a.currentSelectedApprovers.length?a.finalApproversList=_.clone(a.currentSelectedApprovers):d.warning("Please select a single Field."):_.isEmpty(a.currentSelectedApprovers)||_.forEach(a.currentSelectedApprovers,function(b){_.any(a.finalApproversList,{name:b.name})||a.finalApproversList.push(b)})},a.removeOption=function(b){_.remove(a.finalApproversList,{name:b.name}),_.remove(a.currentSelectedApprovers,{name:b.name}),_.forEach(a.availableOptionList,function(a){a.name===b.name&&(a.selected=!1)})},a.submitForm=function(){a.waitForApprovalForm.$valid&&(a.finalApprovers=_.map(a.finalApproversList,"name"),a.waitForApprovalDefinition.submitterField="$Submitter$",a.approverType===h.approveType.roleBased||a.approverType===h.approveType.userBased?a.waitForApprovalDefinition.processType=0:a.waitForApprovalDefinition.processType=2,a.waitForApprovalDefinition.approversList=a.finalApprovers.join(";"),a.approverType===h.approveType.adHoc&&(a.waitForApprovalDefinition.approversList="$"+a.waitForApprovalDefinition.approversList+"$"),g.isCreateNew?k.post(a.waitForApprovalDefinition).then(function(b){f.close(a.waitForApprovalDefinition),d.success("WFA definition "+a.waitForApprovalDefinition.processName+" saved successfully.")},function(){f.dismiss("cancel")}):k.get(a.waitForApprovalDefinition.id).then(function(b){_.extend(b,a.waitForApprovalDefinition),b.put(a.waitForApprovalDefinition.id).then(function(){g.cell.prop("rxData/inputMap/complexInputMap","",{silent:!0}),g.cell.prop("rxData/inputMap/complexInputMap",a.waitForApprovalDefinition),f.close(a.waitForApprovalDefinition),d.success("WFA definition "+a.waitForApprovalDefinition.processName+" saved successfully.")},function(){f.dismiss("cancel")})}))},a.cancel=function(){f.dismiss("cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("WaitForApprovalDialogController",["$scope","context","$uibModal","$uibModalInstance","approvalCompletionCriteriaFilter","rxWaitForApprovalFlowSelectorResource","$q",function(a,b,c,d,e,f,g){function h(b){b.isSelected?(a.selectedRow=b.entity,a.isRowSelected=!0):a.isRowSelected=!1}a.selectedRecordInstance=b.cell.recordDefinitionName,a.selectedRow="",a.isRowSelected=!1,a.displayGrid=!1,a.refreshGridData=function(){f.get(a.selectedRecordInstance).then(function(b){a.gridData=b.approvalFlowConfigurationInstanceList,a.displayGrid=!0,a.recordGridConfiguration.api&&a.recordGridConfiguration.api.refresh()})},a.refreshGridData();var i={fieldDefinitions:[{id:"processName",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Wait For Approval Definition Name"},{id:"approvalForm",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Approval Form"},{id:"approversList",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Approvers"},{id:"multipleApprovers",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Completion Criterion"},{id:"justificationRequired",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Justification Required"},{id:"justificationRequiredField",resourceType:"com.bmc.arsys.rx.standardlib.record.SelectionFieldDefinition",title:"Justification Required Field"}]};a.recordGridConfiguration={recordIdField:!1,enableFiltering:!1,enableRowSelection:"single",uiGridOptions:{enableColumnMenus:!1,enableFiltering:!1,onRegisterApi:function(a){a.selection.on.rowSelectionChanged(null,h)}},getRecordDefinition:function(){return g.when(i)},getData:function(b,c,d){return g.when({data:a.gridData})},columns:[{fieldId:"processName",title:"Wait For Approval Definition Name"},{fieldId:"approvalForm",title:"Record Definition"},{fieldId:"approversList",title:"Approvers"},{fieldId:"multipleApprovers",title:"Completion Criterion",cellTemplate:'<div class="ui-grid-cell-contents">{{(COL_FIELD == 1 ? "All Must Approve" : "One Can Approve")}}</div>'},{fieldId:"justificationRequired",title:"Justification Required",visible:!1},{fieldId:"justificationRequiredField",title:"Justification Required Field",visible:!1}]},a.ok=function(){a.selectedRow&&(b.cell.prop("rxData/inputMap/complexInputMap",a.selectedRow),d.dismiss())},a.cancel=function(){d.dismiss()},a.createWaitForApprovalDefinition=function(){var d=c.open({templateUrl:"scripts/components/designer/inspector/editors/wait-for-approval/wait-for-approval-definition-dialog.html",controller:"WaitForApprovalDefinitionDialogController",resolve:{context:{cell:b.cell,isCreateNew:!0}},windowClass:"rx-wait-for-approval-definition-dialog"});d.result.then(function(b){var c={};_.isUndefined(b)||(c.processName=b.processName,c.multipleApprovers=b.multipleApprovers,c.approversList=b.approversList),a.refreshGridData()})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.expression-editor").controller("ExpressionEditorController",["$scope","$uibModalInstance","expressionContext","rxDataDictionary","$q",function(a,b,c,d,e){function f(){a.rxBusyIndicator.promise=a.expressionConfigurator.getCurrentExpressionField().then(function(b){a.label=b.label,a.dataDictionaryTree=b.dataDictionary,a.dataDictionaryList=d.convertTreeToList(a.dataDictionaryTree),a.expandedNodes=b.expandedNodes,a.operators=b.operators,a.previousExpressionFieldExists=a.expressionConfigurator.doesPreviousExpressionFieldExist(),a.nextExpressionFieldExists=a.expressionConfigurator.doesNextExpressionFieldExist(),a.useDynamicQualification=a.designerUseDynamicQualificationFlag&&a.expressionConfigurator.supportDynamicQualification(),a.expression.value=b.value||"",g()})}function g(){var b=a.expression.value.match(i);a.isDynamicQualification=!!b,a.expression.value=a.isDynamicQualification&&a.useDynamicQualification?b[1]:a.expression.value,a.hasError=!1}function h(){var b=e.defer();return a.useDynamicQualification?(a.hasError=a.isDynamicQualification&&!a.expression.value.trim().match(j),a.hasError||a.expressionConfigurator.addResult(a.isDynamicQualification?"EXTERNAL("+a.expression.value.trim()+")":a.expression.value.trim()),b.resolve()):a.expressionConfigurator.validateExpressionField(a.expression.value.trim()).then(function(c){a.hasError=!c,c&&a.expressionConfigurator.addResult(a.expression.value.trim()),b.resolve()}),b.promise}a.rxBusyIndicator={promise:e.when()};var i=/(?:EXTERNAL)\((.*)\)/,j=/^\$\{[^$\{\}]+\}$/;a.designerUseDynamicQualificationFlag=c.useDynamicQualification,a.legend=c.legend,a.autoComplete=c.autoComplete,a.expressionConfigurator=c.expressionConfigurator,a.expression={},a.popoverTemplate="scripts/components/expression-editor/legend-popover-template.html",a.richExpressionEditorConfiguration={isAutoCompleteEnabled:!0,updateAutoCompleteSuggestions:function(b){return a.autoComplete&&_.isFunction(a.autoComplete.getSuggestions)?(b.cell=c.autoCompleteData,a.autoComplete.getSuggestions(b)):e.when([])},isAutoCompleteAvailable:function(b){var d;return a.autoComplete&&_.isFunction(a.autoComplete.isAutoCompleteAvailable)&&(b.cell=c.autoCompleteData,d=a.autoComplete.isAutoCompleteAvailable(b)),d}},f(),a.ok=function(){h().then(function(){a.hasError||b.close(a.expressionConfigurator.getResults())})},a.clearValidationError=function(){a.hasError=!1},a.next=function(){h().then(function(){a.hasError||a.expressionConfigurator.getNextExpressionField().then(f)})},a.prev=function(){h().then(function(){a.hasError||a.expressionConfigurator.getPreviousExpressionField().then(f)})},a.$watch("expression.value",a.clearValidationError),a.cancel=function(){b.dismiss()},a.operatorHandler=function(b){b&&('"'===b||_.startsWith(b,"$")||(b+="&nbsp;"),a.richExpressionEditorConfiguration.api.insertHtml(b))},a.onNodeSelected=function(b){a.richExpressionEditorConfiguration.api.insertHtml(b)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.search-field").controller("SearchFieldController",["$scope",function(a){}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.login").controller("LoginController",["$scope","$rootScope","RX_AUTH_EVENTS","rxAuthentication","$location",function(a,b,c,d,e){var f=$("head"),g="/standardlib/resources/css/theme/login-theme.css";f.append('<link rel="stylesheet" type="text/css" ng-href="'+g+'" href="'+g+'" />');var h=e.search();if(h=h.domain,!_.isEmpty(h)){b.rxFavicon="/api/rx/application/logincontent/favicon.ico?domain="+h+"&dt="+(new Date).getTime(),f.append('<link rel="shortcut icon" ng-href="'+b.rxFavicon+'" type="image/x-icon"/>');var i="/api/rx/application/logincontent/login.css?domain="+h+"&dt="+(new Date).getTime();f.append('<link rel="stylesheet" type="text/css" ng-href="'+i+'" href="'+i+'" />')}a.name=d.loginState().params.name,a.version=d.loginState().params.version,a.image="bg-image-"+_.random(1,5),a.credentials={username:"",password:""},a.login=function(e){a.authError=!1,a.loginForm.$setPristine(!0),d.login(e).then(function(){d.initSession().then(function(){b.$broadcast(c.loginSuccess)})},function(){a.authError=!0,b.$broadcast(c.loginFailed)})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").controller("PreviewProcessDialogController",["$scope","$filter","$uibModalInstance","$q","context","rxProcessDefinitionResource","rxActionTypeDataPageResource",function(a,b,c,d,e,f,g){a.selectedProcessDefinition=e.selectedProcess;var h=d.all({processDefinition:f.get(a.selectedProcessDefinition.name,null,null),bundleActionTypes:g.get(-1,0,{requireDependent:!0}),rootActionTypes:g.get(-1,0,null,{"default-bundle-scope":void 0})}).then(function(b){a.plainProcessDefinition=b.processDefinition.plain(),a.processPreviewConfiguration={actionTypes:b.bundleActionTypes.data.concat(b.rootActionTypes.data),graph:{showToolBar:!0}}});a.rxBusyIndicator={promise:h},a.isRunDisabled=function(){return _.isUndefined(a.plainProcessDefinition)||!a.plainProcessDefinition.isEnabled},a.close=function(){c.dismiss()},a.run=function(){c.close()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.management").controller("StartProcessDialogController",["$scope","$filter","$uibModalInstance","rxUtils","rxNotificationMessage","context","rxPropertyEditor","rxProcessDefinitionResource","rxProcessDefinitionInputParamsResource","rxProcessInstanceCommands","RX_RECORD_DEFINITION",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b=_.find(n,{fieldDefinitionType:a.resourceType}),c={id:a.id,name:a.name,dataType:a.resourceType,required:"REQUIRED"==a.fieldOption,min:a.minValue,max:a.maxValue,precision:a.precision,options:_.map(a.optionNamesById,function(a,b){return{content:a,value:b}})};return a.resourceType===k.dataTypes["boolean"].resourceType&&(c.options=k.dataTypes["boolean"].options),b&&!g.isDataTypeRegistered(a.resourceType)&&(c.dataType="object",c.propertyPanelConfiguration={entityPropertyKeyName:"name",propertyDefinitions:_.map(b.fieldValueTypeDetail,function(a){return{dataType:a.dataType,name:a.name}})}),c}function m(a,b){var c={processDefinitionName:a,processInputValues:{}};return b.forEach(function(a){var b=_.find(n,{fieldDefinitionType:a.resourceType});c.processInputValues[a.name]=b?{}:a.defaultValue}),c}var n=f.fieldTypes;a.selectedProcessDefinition=f.selectedProcess,a.plainProcessDefinition=null,a.propertyPanelConfig={entityPropertyKeyName:"name",propertyDefinitions:[]},i.get(a.selectedProcessDefinition.name).then(function(b){var c=_.map(b.plain(),l);a.processInstance=m(a.selectedProcessDefinition.name,b.plain()),a.propertyPanelConfig.propertyDefinitions=c}),a.isRunButtonDisabled=function(){return _(a.propertyPanelConfig.propertyDefinitions).filter({required:!0}).some(function(b){var c=a.processInstance.processInputValues[b.name];return"object"===b.dataType?!!_.isEmpty(c)||(!_.has(c,"id")||!_.has(c,"recordDefinitionName")||_.isEmpty(c.id)||_.isEmpty(c.recordDefinitionName)):d.isNullOrUndefined(a.processInstance.processInputValues[b.name])})},a.runProcess=function(){var b=_.cloneDeep(a.processInstance.processInputValues);_.forEach(b,function(a,c){_(a).values().all(_.isEmpty)&&(b[c]=null)}),j.start(a.processInstance.processDefinitionName,b).then(function(){e.success("Process has been started successfully."),c.close()})},a.cancel=function(){c.dismiss()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").controller("AddFieldsDialogController",["data","rxGUID","$uibModalInstance","RX_RECORD_DEFINITION",function(a,b,c,d){function e(){f.duplicateFieldNames=_.intersection(_.map(_.filter(i.primaryFields,"selected"),"name"),_.map(_.filter(i.secondaryFields,"selected"),"name")),f.hasDuplicateFieldNames=_.size(f.duplicateFieldNames)>0,i.fieldDefinitions=i.primaryFields.concat(i.secondaryFields).filter(function(a){return a.selected})}var f=this,g=a.model,h=a.fieldMappings,i=f.definition=a.definition,j=h.filter({source:d.sourceTypes.primary}).map("sourceFieldId").value(),k=h.filter({source:d.sourceTypes.secondary}).map("sourceFieldId").value();g.getRecordDefinitionFields("primary").then(function(a){i.primaryFields=a.filter(function(a){return!_.contains(j,a.id)})}),g.getRecordDefinitionFields("secondary").then(function(a){i.secondaryFields=a.filter(function(a){return!_.contains(k,a.id)})}),f.hasDuplicateFieldNames=!1,f.isSaveButtonDisabled=function(){return _.isEmpty(i.fieldDefinitions)},f.handleSaveButtonClick=function(){_.each(i.fieldDefinitions,function(a){f.hasDuplicateFieldNames&&_.contains(f.duplicateFieldNames,a.name)&&(a.name=a.name+" ("+g.getRecordDefinitionLabel(a.fieldMapping.source)+")",a.fieldMapping.source===d.sourceTypes.secondary&&(a.id=b.generate("rx-"))),delete a.lastUpdateTime,delete a.selected}),c.close(i.fieldDefinitions)},f.cancel=function(){c.dismiss()},f.selectAll=function(a,b){_.each(a,function(a){a.selected=b}),e()},f.handleCheckboxClick=function(){e()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.designer").controller("RecordCustomizationOptionsEditorController",["$scope","$uibModalInstance","recordDefinition","overlayOperation","RX_OVERLAY",function(a,b,c,d,e){function f(){var b={allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1};_.each(a.recordDefinition.fieldDefinitions,function(a){_.assign(a,_.cloneDeep(b)),g.push({id:a.id,changedProperties:_.cloneDeep(b)})})}var g=[],h=["allowPermissionsOverlay","allowOtherPropertiesOverlay","allowIndexesOverlay","allowFieldsOverlay"];a.recordDefinition=c,a.customizationOptions=_.pick(c,h),a.isEditDisabled=d!==e.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP,a.allowOverlay=_.includes(a.customizationOptions,!0),a.fieldCustomizationOptionsChangeHandler=function(a,b){var c=_.find(g,{id:b.id});c?c.changedProperties[a]=b[a]:(c={id:b.id,changedProperties:{}},c.changedProperties[a]=b[a],g.push(c))},a.handleAllowOverlayChange=function(){_.each(a.customizationOptions,function(b,c){a.customizationOptions[c]=a.allowOverlay}),a.allowOverlay||(g=[],f())},a.handleRecordCustomizationOptionChange=function(b){a.allowOverlay=_.includes(a.customizationOptions,!0),b&&(g=[],f())},a.ok=function(){var c={customizationOptions:a.customizationOptions};g.length>0&&(c.updatedFieldDefinitions=g),b.close(c)},a.cancel=function(){b.dismiss("cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("RecordIndexEditorDialogController",["$scope","options","$uibModalInstance",function(a,b,c){function d(){h.definitionName=b.definitionName,h.fields.available=b.fields,h.isFieldSelectionDisabled=b.isFieldSelectionDisabled,h.isEditingMode&&(h.indexName=b.index.indexName,h.isUnique=b.index.unique,_.remove(h.fields.available,function(a){var c=_.contains(b.index.indexFieldIds,a.value);return c&&h.fields.selected.push(a),c}))}function e(){c.close({indexFieldIds:_.pluck(h.fields.selected,"value"),indexName:h.indexName,unique:Boolean(h.isUnique)})}function f(a,b){if(a.length){var c=_.remove(a,function(a){return a.selected});_.forEach(c,function(a){a.selected=!1,b.push(a)})}}function g(a,b){function c(c){var d=c+b;return d<0?a.length:d>a.length?0:d}var d=_.find(a,{selected:!0}),e=a.indexOf(d),f=a.splice(e,1);a.splice(c(e),0,f[0])}var h=a.idxEditorState={fields:{available:[],selected:[]},isEditingMode:Boolean(b.index)};a.moveVertical=g,a.moveHorizontal=f,a.saveIndex=e,d()}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").controller("SecurityLabelEditorController",["$scope","$uibModalInstance","$timeout","dialogs","securityLabelsContext","RX_RECORD_DEFINITION",function(a,b,c,d,e,f){a.securityLabels=e.securityLabels||[];var g,h=function(a){var b;return b=!a||a<f.SECURITY_LABEL_IDS.MIN?f.SECURITY_LABEL_IDS.MIN:a,function(){return b++}};a.securityLabels&&a.securityLabels.length>0&&(g=_.sortBy(a.securityLabels,"id")[a.securityLabels.length-1].id+1);var i=h(g);a.addSecurityLabelParameter=function(){var b=i();a.securityLabels.push({name:"",parent:"",id:b,inherited:!1}),c(function(){var a=angular.element('[name="security-label-name-'+b+'"]');a.focus()})},a.removeSecurityLabel=function(b,c){var e=a.securityLabels[c];d.confirm("Warning!","Are you sure you want to delete this item?").result.then(function(){_.forEach(a.securityLabels,function(a){a.parent===e.name&&(a.parent=e.parent)}),a.securityLabels.splice(c,1)}),b.stopPropagation();
},a.checkDuplicate=function(b){var c=[];_.forEach(a.securityLabels,function(d){var e=_.filter(a.securityLabels,function(a){return a[b]&&a[b]===d[b]});e.length>1&&(c=_(c).concat(e).uniq().value())}),_.forEach(c,function(c){a.SecurityLabelEditorForm["security-label-"+b+"-"+c.id].$setValidity("duplicate",!1)}),_(a.securityLabels).difference(c).each(function(c){a.SecurityLabelEditorForm["security-label-"+b+"-"+c.id].$setValidity("duplicate",!0)}).value()},a.securityLabelParentFilter=function(b){return function(c){var d=function(c){return b!==c.name&&(!c.parent||d(_.find(a.securityLabels,{name:c.parent})))};return b&&c.name&&d(c)}},a.ok=function(){var c=[];_.forEach(a.securityLabels,function(a){a.id===f.specialtyFields.assigneeGroup.id&&a.name!==f.specialtyFields.assigneeGroup.name&&(a.id=i()),a.name===f.specialtyFields.assigneeGroup.name&&(a.id=f.specialtyFields.assigneeGroup.id),c.push({id:a.id,name:a.name,inherited:a.inherited,parent:a.parent})}),b.close(c)},a.cancel=function(){b.dismiss("Cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").controller("RuleIntervalTimerDialogController",["$scope","$filter","$uibModalInstance","ruleIntervalDurationIsoFilter","expressionContext",function(a,b,c,d,e){var f=e.path,g=e.previewFilter;if(a.cell=e.cell,a.hasError=!1,a.timerData={days:0,hours:0,minutes:0},a.expression=a.cell.prop(f)||"",a.expression.length>0){var h=b(g)(a.expression,"json");a.timerData.days=h.days,a.timerData.hours=h.hours,a.timerData.minutes=h.minutes}a.ok=function(){var b='"'+d(a.timerData)+'"';a.cell.prop(f,b.trim()),c.close()},a.clearValidationError=function(){a.hasError=!1},a.$watch("timerData",function(){a.preview=b(g)(d(a.timerData))},!0),a.$watch("expression",a.clearValidationError),a.cancel=function(){c.dismiss()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.designer").controller("RuleRecordDefinitionsDialogController",["$scope","$uibModalInstance","definitionNameFilter","rxDesignerCache","context",function(a,b,c,d,e){function f(){return d.getRecordDefinitionDescriptors().then(function(a){var b=_(a).map(function(a){return{value:a.name,content:c(a.name)}}).sortBy(function(a){return a.content.toLowerCase()}).value();return b})}a.busyIndicatorTemplateUrl="template/busy-loader.html",a.recordDefinitions={},a.recordDefinitions.value=_.cloneDeep(e.selectedDefinitions)||[],a.cell=e.cell,a.path=e.path,a.loadingDefinitionsPromise=f(),a.loadingDefinitionsPromise.then(function(b){a.availableRecordDefinitions=_.filter(b,function(b){return!_.contains(_.pluck(a.recordDefinitions.value,"value"),b.value)})}),a.movedHandler=function(b){return a.recordDefinitions.value.splice(b,1)},a.removeDefinition=function(b){var c={content:b.content,value:b.value};_.pull(a.recordDefinitions.value,b),a.availableRecordDefinitions.push(c)},a.moveDown=function(b){var c=_.findIndex(a.recordDefinitions.value,b);a.recordDefinitions.value.splice(c,1),a.recordDefinitions.value.splice(c+1,0,b)},a.moveUp=function(b){var c=_.findIndex(a.recordDefinitions.value,b);a.recordDefinitions.value.splice(c,1),a.recordDefinitions.value.splice(c-1,0,b)},a.onDropHandler=function(a){return a},a.addDefinition=function(b,c){c&&c.stopPropagation(),a.recordDefinitions.value.push(a.onDropHandler(b)),a.availableRecordDefinitions.splice(a.availableRecordDefinitions.indexOf(b),1)},a.ok=function(){a.cell.prop(a.path,"",{silent:!0}),a.cell.prop(a.path,_.pluck(a.recordDefinitions.value,"value")),b.close()},a.cancel=function(){b.close()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.search").controller("SearchController",["$scope","$state","rxShellConfigResource","rxDataPageResource","rxRecordInstanceDataPageResource","rxRuntimeViewState",function(a,b,c,d,e,f){function g(){a.getGlobalSearchResults(!0)}function h(){k={},a.searchText=n.searchText,a.recordDefinitions=n.recordDefinitions,a.selectedRecordDefinitions=n.recordDefinitions,a.getGlobalSearchResults()}var i,j=[],k=[],l=0,m=50,n=c.searchContext||{};a.selectedRecordDefinitions=[],a.data=[],a.gridOptions={enableFiltering:!1,enableColumnMenus:!1,showHeader:!1,infiniteScrollRowsFromEnd:0,infiniteScrollDown:!0,data:"data",columnDefs:[{field:"colId",cellTemplate:['<div class="rx-global-search-content-list">{{row.entity.colId}}</div>'].join("")},{field:"3010",cellTemplate:["<div></div><span>{{row.entity[3010] | definitionName}}</span>",'<a style="margin-left: 5px;" ng-click="grid.appScope.navigateToView(row.entity)">{{row.entity[3011]}}</a>',"</div>","<div><span>{{row.entity[3012]}}</span></div>",'<div ng-bind-html="row.entity[3013] | highlight:grid.appScope.getSearchText()"></div>'].join("")}],onRegisterApi:function(c){i=c,i.infiniteScroll.on.needLoadMoreData(a,g),c.grid.appScope.getSearchText=function(){return a.searchText},c.grid.appScope.navigateToView=function(a){return e.withName(a.state.params.recordDefinitionName).get(-1,0,{propertySelection:"379",1:a[3011]}).then(function(c){c.data&&(a.state.params.param=c.data[0][379],b.go(a.state.name,a.state.params))})}}},a.getGlobalSearchResults=function(b){var c;a.reload=!1,a.selectedRecordDefinitions=a.selectedRecordDefinitions||n.recordDefinitions,b||(l=0),a.selectedRecordDefinitions&&_.forEach(a.selectedRecordDefinitions,function(a){c=c?c.concat(","+a.name):a.name}),a.searchText?d.withType("com.bmc.arsys.rx.application.search.datapage.SearchDataPageQuery").get(m,l,{3001:"%"+a.searchText+"%",3008:2,3e3:c}).then(function(c){if(c&&c.data){var d=c.data;b?(k=k.concat(d),i.infiniteScroll.saveScrollPercentage(),i.infiniteScroll.dataLoaded(!1,c.length===m)):k=d,k=_.sortBy(k,"3014"),_.each(k,function(b,c){b.colId=c+1,b.state={name:f.get(),params:{viewDefinitionName:_.find(a.recordDefinitions,{name:b[3010]}).view,recordDefinitionName:_.find(a.recordDefinitions,{name:b[3010]}).name}}}),a.data=k,a.filters=_(a.recordDefinitions).map(function(a){return{name:a.name,displayName:a.definitionName}}).unique("displayName").sort().value(),_.each(a.filters,function(b){_.find(a.selectedRecordDefinitions,{name:b.name})?(b.selected=!0,_.find(j,{name:b.name})||j.push(b)):_.reject(j,{name:b.name})}),l+=d.length}}):a.data=[]},a.clearSearchText=function(){a.reload=!0,a.searchText="",k=[],a.data=[],l=0},a.updateFilters=function(b,c){if(c&&(c.selected=!c.selected),c.selected){var d=_.find(a.recordDefinitions,{name:c.name});a.selectedRecordDefinitions.push(d);var e=_.find(j,{name:c.name});e||j.push(c)}else a.selectedRecordDefinitions=_.reject(a.selectedRecordDefinitions,{name:c.name}),j=_.reject(j,{name:c.name});a.getGlobalSearchResults(!1)},a.selectAllFilter=function(){_.each(a.filters,function(a){a.selected=!0}),a.selectedRecordDefinitions=a.recordDefinitions,a.getGlobalSearchResults(!1)},a.selectNoneFilter=function(){_.each(a.filters,function(a){a.selected=!1}),a.selectedRecordDefinitions=[],a.getGlobalSearchResults(!1)},h()}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").controller("SessionExpirationModalController",["$scope","options","rxAuthentication","RX_AUTH_EVENTS","RX_SESSION","$uibModalInstance","$interval","$window","rxSessionExpirationService",function(a,b,c,d,e,f,g,h,i){function j(){p.mode===e.expirationModes.idle&&(p.logOutTime=q().add(e.minutesBeforeLogout,"minutes"),k(),p.interval=g(k,1e3,!1)),a.$on("$destroy",l)}function k(){q().isBefore(p.logOutTime)?p.remainingTime=m():(p.remainingTime="0:00",l(),o())}function l(){p.interval&&(g.cancel(p.interval),p.interval=null)}function m(){return q(q(p.logOutTime).diff()).format("m:ss [remaining]")}function n(){return p.isLoading=!0,i.keepSessionAlive().then(function(a){return l(),f.close(),a})["finally"](function(){p.isLoading=!1})}function o(){return p.isLoading=!0,c.logout()["finally"](function(){p.isLoading=!1,f.close()})}var p=a.sessionState={},q=h.moment;p.mode=b.mode,a.keepAlive=n,a.signOut=o,a.getRemainingTime=m,j()}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").controller("ActionListEditorDialogController",["$scope","rxAction","$uibModalInstance","actionModel","selectedModelIndex","$controller",function(a,b,c,d,e,f){a.cell=d,f("ActionListController",{$scope:a}),a.actions.forEach(function(a){a.isCollapsed=e!==a.get("index")}),b.getLicensedActions().then(function(b){a.availableActions=b,a.labelsMap=a.availableActions.reduce(function(a,b){return a[b.name]=b.label,a},{})}),a.ok=function(){c.close(d.get("rxData").actions)},a.cancel=function(){c.dismiss()},a.expandAll=function(){_.each(a.actions.models,function(a){a.isCollapsed=!1})},a.collapseAll=function(){_.each(a.actions.models,function(a){a.isCollapsed=!0})},a.onDropHandler=function(b,c){var d=c.hasOwnProperty("name");if(d)return a.addAction(c.name,b),!1;var e=a.actions.at(c.index);return b>c.index?e.down():e.up(),!0}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.action-button").controller("ActionListController",["$scope","$uibModal","rxAction","rxGUID","rxActionExpressionConfigurator","rxActionPropertyNavigator","rxActionButton",function(a,b,c,d,e,f,g){function h(a){o.reset(),a.length>0&&(k=a.map(function(a){var b=(a.index,_.omit(a,"index","id"));return new m({id:a.id,rxData:b,index:Number(a.index)})}),o.add(k))}function i(){var a=o.map(function(a){return _.assign({id:a.get("id"),index:Number(a.get("index"))},a.get("rxData"))});j(a)}function j(a){var b=l.prop("rxData");b.actions=a,l.unset("rxData",{silent:!0}),l.set("rxData",b,{rxSilent:!0})}var k,l=a.cell;f.clear();var m=Backbone.Model.extend({defaults:{rxData:{},index:-1,id:null},prop:joint.dia.Cell.prototype.prop,initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.updateActionDataDictionary()},getActionDataDictionary:function(){return l.buildChildDataDictionary(this)},updateActionDataDictionary:function(){var a=this.getExpressionConfigurator();this.getActionDataDictionary().then(function(b){a.buildDataDictionary(b)})},getExpressionConfigurator:function(){return this._expressionConfigurator=this._expressionConfigurator||new e(this),this._expressionConfigurator},up:function(){this.collection.move({model:this,direction:"up"})},down:function(){this.collection.move({model:this,direction:"down"})},remove:function(){var a=this.collection;Backbone.Collection.prototype.remove.call(a,this),a.recalculateIndexes()}}),n=Backbone.Collection.extend({model:m,comparator:"index",recalculateIndexes:function(){var a=0;this.each(function(b){b.prop("index",a++,{silent:!0})}),i()},move:function(a){var b,c=a.model,d=c.get("index");switch(a.direction){case"up":rx.assert.assert(d>0,"The top action cannot be moved up"),b=o.at(d-1),b.prop("index",d,{silent:!0}),c.prop("index",d-1,{silent:!0});break;case"down":rx.assert.assert(d<this.length-1,"The bottom action cannot be moved down"),b=o.at(d+1),b.prop("index",d,{silent:!0}),c.prop("index",d+1,{silent:!0})}o.sort(),i(),this.updateActionsDataDictionary()},updateActionsDataDictionary:function(){this.each(function(a){a.updateActionDataDictionary()})}}),o=a.actions=new n,p=l.get("rxData").actions;h(p);var q=c.getRegisteredActions();a.labelsMap=q.reduce(function(a,b){return a[b.name]=b.label,a},{}),a.addAction=function(a){var b=_.find(q,{name:a}),c=_.reduce(b.parameters,function(a,b){return a[b.name]=b.defaultValue||"",a},{});c.name=a;var e=new m({id:d.generate(),index:o.length,rxData:c});o.add(e,{at:o.length}),o.recalculateIndexes(),i()},a.openEditor=function(a){b.open({templateUrl:"scripts/view-components/action-button/editors/action-editor-dialog.html",controller:"ActionListEditorDialogController",backdrop:"static",resolve:{actionModel:function(){var a=Object.create(Object.getPrototypeOf(l));return _.merge(a,l)},selectedModelIndex:function(){return _.isUndefined(a)?null:a.get("index")}},windowClass:"rx-action-editor-dialog"}).result.then(function(a){h(a),i()})},o.on("change update",i)}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-editor").controller("RecordEditorFieldSelectorController",["$scope","$uibModalInstance","fields","RX_RECORD_DEFINITION",function(a,b,c,d){function e(b){_(a.fields).filter(b).each(function(a){a.selected=!0}).value()}var f=_.filter(c,{selected:!0});a.fields=c,a.apply=function(){b.close(c)},a.cancel=function(){b.dismiss()},a.selectFields=function(b){var c=a.fields;b&&(c=_.filter(c,{fieldOption:b})),_.each(c,function(a){a.selected=!0})},a.canApply=function(){for(var a=_.filter(c,{selected:!0}),b=f.length!=a.length,d=0;!b&&d<f.length;){var e=_.find(a,{fieldId:f[d].fieldId});b=!Boolean(e),d++}return b},a.selectRequiredFields=function(){e({fieldOption:"REQUIRED"})},a.selectOptionalFields=function(){e(a.filterOptionalFields)},a.selectSystemFields=function(){e(a.filterSystemFields)},a.filterOptionalFields=function(a){return"OPTIONAL"==a.fieldOption&&a.fieldId!==d.coreFieldIds.id&&a.fieldId!==d.coreFieldIds.guid},a.filterSystemFields=function(a){return"SYSTEM"==a.fieldOption||a.fieldId===d.coreFieldIds.id||a.fieldId===d.coreFieldIds.guid}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.record-grid").controller("RecordGridColumnEditorController",["$q","$scope","$rootScope","dialogs","$uibModalInstance","columnContext","rxActionDesignManager","RX_RECORD_GRID","RX_EXPRESSION_EDITOR",function(a,b,c,d,e,f,g,h,i){function j(a){return _.find(b.recordDefinition.fieldDefinitions,{id:Number(a)})}function k(){var a=_.some(b.columns.value,"clickable");n.clickableRowItems=[],n.firstSelectedRowItems=[],_.each(b.columns.value,function(b){a&&n.clickableRowItems.push(l(b.name,".clickableRow.",b.fieldId)),n.firstSelectedRowItems.push(l(b.name,".firstSelectedRow.",b.fieldId))})}function l(a,c,d){var e=b.cell.prop("id");return{icon:"d-icon-arrow_right_square_input",label:a,type:"Component Property",value:"${view.components."+e+c+d+"}"}}b.availableColumns=[],b.columnProperties=h.columnProperties,b.cell=f.cell,b.columns={value:[]};var m=b.cell.prop("id"),n={clickableRowItems:[],firstSelectedRowItems:[]},o=Backbone.Model.extend({defaults:{rxData:{}},updateCommonDataDictionary:function(a){n.clickableRowItems.length&&_.each(a,function(a){"View"===a.label&&_.each(a.children,function(a){"rx-record-grid"===a.componentType&&a.componentId===m&&_.each(a.children,function(a){"Clickable Row"===a.label&&(a.children=n.clickableRowItems),"First Selected Row"===a.label&&(a.children=n.firstSelectedRowItems)})})})},buildChildDataDictionary:function(c){var d=_.cloneDeep(b.cell.getExpressionConfigurator().commonDataDictionary),e=c.get("index");if(this.updateCommonDataDictionary(d),e>0){var f={label:"Actions",children:[]},h=_.cloneDeep(this.prop("rxData/actions"));h=h.splice(0,e);var i=_.map(h,function(a){return g.getActionDataDictionary(a)});return a.all(i).then(function(a){return _.each(a,function(a){a.children.length&&f.children.push(a)}),f.children.length&&d.push(f),d})}return a.when(d)},getExpressionConfigurator:function(){return b.cell.getExpressionConfigurator()},prop:joint.dia.Cell.prototype.prop});b.path=f.path;var p=_.cloneDeep(b.cell.prop(b.path));b.cell.getCurrentRecordDefinition().then(function(a){b.recordDefinition=a,b.columns.value=_.map(_.cloneDeep(p),function(a){return a.name=j(a.fieldId).name,a.isCollapsed=a.fieldId!==f.columnEditId,a.cell=new o({rxData:{actions:a.actions||[]}}),_.isObject(a.sortable)&&(a.sortable=!0),a}),b.availableColumns=_(b.recordDefinition.fieldDefinitions).map(function(a){return{name:a.name,fieldId:a.id.toString()}}).filter(function(a){return!_.find(b.columns.value,{fieldId:a.fieldId})}).value()}),b.onColumnPropertyChanged=function(b,c,e){if("clickable"===c){if(e.preventDefault(),b[c])if(e.stopPropagation(),b.cell.prop("rxData/actions").length){var f=a.defer(),g=function(){var a=b.cell.prop("rxData");a.actions=[],b.cell.unset("rxData",{silent:!0}),b.cell.set("rxData",a,{rxSilent:!0}),b[c]=!1,k(),f.resolve()};d.confirm("Warning!","Actions will be removed. Do you want to continue?").result.then(g,f.reject)}else b[c]=!1;else b[c]=!0;k()}},b.removeColumn=function(a){var c={name:j(a.fieldId).name,fieldId:a.fieldId};_.pull(b.columns.value,a),b.availableColumns.push(c)},b.moveDown=function(a){var c=_.findIndex(b.columns.value,a);b.columns.value.splice(c,1),b.columns.value.splice(c+1,0,a)},b.moveUp=function(a){var c=_.findIndex(b.columns.value,a);b.columns.value.splice(c,1),b.columns.value.splice(c-1,0,a)},b.onDropHandler=function(a){var c=a.cell?a.cell.rxData:{actions:a.actions||[]};if(a.cell=new o({rxData:c}),!_.find(b.columns.value,{fieldId:a.fieldId})){var d=_.find(b.recordDefinition.fieldDefinitions,{id:Number(a.fieldId)});a.title=d.name,a.isCollapsed=!1,_.each(h.columnProperties,function(b){a[b.name]=b.defaultValue})}return a},b.addColumn=function(a,c){c&&c.stopPropagation();var d=b.onDropHandler(a);b.columns.value.push(d),b.availableColumns.splice(b.availableColumns.indexOf(a),1)},b.expandAll=function(){_.each(b.columns.value,function(a){a.isCollapsed=!1})},b.collapseAll=function(){_.each(b.columns.value,function(a){a.isCollapsed=!0})},b.ok=function(){var a=_.map(b.columns.value,function(a){var b=_.omit(angular.copy(a),"name","isCollapsed");if(b.sortable&&b.visible){var c=_.find(p,{fieldId:a.fieldId});c&&_.isObject(c.sortable)&&(b.sortable=c.sortable)}return b.actions=a.cell.prop("rxData/actions"),delete b.cell,b});b.cell.prop(b.path,"",{silent:!0}),b.cell.prop(b.path,a),c.$broadcast(i.events.refreshInspector,b.cell),e.close()},b.cancel=function(){e.close()},b.$watchCollection("columns.value",function(a,b){_.uniq(a,"fieldId").length!==_.uniq(b,"fieldId").length&&k()})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").controller("GlobalSearchEditorController",["$scope","$filter","$uibModalInstance","rxRecordDefinitionDataPageResource","recordContext",function(a,b,c,d,e){a.availableRecords=[],a.records=[];var f=e.cell,g=e.path;d.get(-1,0,{propertySelection:["name"]}).then(function(c){var d=c.data;a.records=_.map(JSON.parse(f.prop(g)),function(a){return a.isCollapsed=!(e.recordEdit&&a.name===e.recordEdit.name),a.definitionName=a.definitionName||b("definitionName")(a.name),a}),a.availableRecords=_(d).map(function(a){return{name:a.name,definitionName:b("definitionName")(a.name)}}).filter(function(b){return!_.find(a.records,{name:b.name})}).value()}),a.removeRecord=function(b){var c={name:b.name,definitionName:b.definitionName};_.pull(a.records,b),a.availableRecords.push(c)},a.onDropHandler=function(a){return a.isCollapsed=!1,a.view="",a},a.addRecord=function(b,c){c&&c.stopPropagation(),a.records.push(a.onDropHandler(b)),a.availableRecords.splice(a.availableRecords.indexOf(b),1)},a.expandAll=function(){_.each(a.records,function(a){a.isCollapsed=!1})},a.collapseAll=function(){_.each(a.records,function(a){a.isCollapsed=!0})},a.ok=function(){var b=_.map(a.records,function(a){return _.omit(angular.copy(a),"isCollapsed")});f.prop(g,JSON.stringify(b)),c.close()},a.cancel=function(){c.close()},a.isSaveDisabled=function(){return!a.records.length||a.records&&(_.filter(a.records,{view:""}).length||_.filter(a.records,{view:null}).length)}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").controller("ShellMenuController",["$scope","$uibModalInstance","context",function(a,b,c){a.menu=c.menu,a.currentApp=c.currentApp,a.appList=c.appList,a.allowAppSwitching=c.allowAppSwitching,a.hideAppList=!0,a.itemSelected=function(){b.close()},a.toggleAppList=function(){a.hideAppList=!a.hideAppList},a.close=function(){b.close()}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").controller("ShellNotificationController",["$scope","$uibModalInstance","shellNotificationModel",function(a,b,c){a.model=c,a.dismiss=function(){b.dismiss()},a.model.getNotifications("dismissed")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").controller("ViewCustomizationOptionsEditorController",["$scope","$uibModalInstance","viewDefinition","overlayOperation","RX_OVERLAY",function(a,b,c,d,e){var f=["allowOverlay"];a.viewVefinition=c,a.customizationOptions=_.pick(c,f),a.isEditDisabled=d!==e.operationTypes.CREATED_IN_THIS_OVERLAY_GROUP,a.ok=function(){b.close({customizationOptions:a.customizationOptions})},a.cancel=function(){b.dismiss("cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.designer").controller("rxRuntimeViewParametersController",["$scope","$uibModalInstance","data","rxString",function(a,b,c,d){a.fields=_.map(c,function(a){return{title:d.prettify(a.name),value:""}}),a.ok=function(){b.close(_.map(a.fields,"value"))},a.cancel=function(){b.dismiss("cancel")}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").controller("RuntimeViewModalController",["$scope","$uibModalInstance","runtimeViewConfiguration","modalConfiguration","RX_RUNTIME_VIEW","$q",function(a,b,c,d,e,f){a.runtimeViewConfiguration=c,a.modalConfiguration=d;var g=f.defer();a.$on(e.actions.viewReady,function(a){g.resolve(),a.stopPropagation()}),a.close=function(){b.close()},a.delay=0,a.minDuration=0,a.message="Please Wait...",a.templateUrl="template/busy-loader.html",a.backdrop=!0,a.promise=g.promise}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.runtime").controller("RuntimeViewController",["$scope","$stateParams","rxPreviousState","rxAuthentication","RX_RUNTIME_VIEW",function(a,b,c,d,e){var f={};f[e.events.viewAction]=function(a){if(a.data.actionName===e.actions.close||a.data.actionName===e.actions.submit){var b=d.appState();c.go(b.name,b.params)}},a.runtimeViewConfiguration={viewDefinitionName:b.viewDefinitionName,params:b.param,on:{action:f}}}])}(),angular.module("com.bmc.arsys.rx.standardlib.action-type").factory("rxActionTypeDataPageResource",["rxDataPageResource",function(a){var b=a.withType("com.bmc.arsys.rx.application.action.datapage.ActionTypeDataPageQuery");return b.setDefaultRequestParameters({pageSize:-1}),b}]),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.admin-settings").service("rxSettingsResource",["rxResource",function(a){var b={"Content-Type":"application/json","Accept-Language":"en-US,en"},c="/admin-settings/";this.setContext=function(a){c=a?"/admin-settings/":"/admin-settings/local/"},this.getNavTreeData=function(){var d=c+"navigation-menu";a.setFullResponse(!1);var e=a.withSubUrlConfiguration(d,function(a){});return e.get("",{},b).then(function(a){return a})},this.getComponentDefinitionData=function(d){var e=c+"component-definition/"+d;a.setFullResponse(!1);var f=a.withSubUrlConfiguration(e,function(a){});return f.get("",{},b).then(function(a){return a})},this.getComponentSettingData=function(d,e){var f=c+"component-settings/"+d;a.setFullResponse(!1);var g=a.withSubUrlConfiguration(f,function(a){});return g.get("",{},_.assign(b,e)).then(function(a){return a})},this.getGridComponentData=function(d,e){var f=c+"component-griddata/"+d;a.setFullResponse(!1);var g=a.withSubUrlConfiguration(f,function(a){});return g.get("",{},_.assign(b,e)).then(function(a){return a})},this.createComponentSettingData=function(b,d,e){var f=c+"component-settings/"+b;a.setFullResponse(!0);var g=a.withSubUrlConfiguration(f,function(a){});return g.setResponseInterceptor(function(a,b,c,d,e,f){if(201===e.status)return e.headers("location")}),g.post(d,{},e).then(function(a){return a})},this.removeData=function(d,e){var f=c+"component-settings/"+d;a.setFullResponse(!1);var g=a.withSubUrlConfiguration(f,function(a){});return g["delete"]("",{},_.assign(b,e)).then(function(a){return a})},this.updateComponentSettingData=function(d,e,f){var g=c+"component-settings/"+d;a.setFullResponse(!1);var h=a.withSubUrlConfiguration(g,function(a){});return h.get("",{},_.assign(b,f)).then(function(a){return a.customPUT(e,null,null,f).then(function(a){return a})})}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.association.definition").factory("rxAssociationDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.association.datapage.AssociationDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.bundle").factory("rxBundleDescriptorDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleDescriptorDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxApprovalFlowSelectorResource",["rxResource",function(a){var b=function(){var b=a.withSubUrlConfiguration("approval/configuration/approvalflowconfigurator/approvalflows",function(a){a.setRestangularFields({id:"id"})});this.get=function(a,c,d,e){return b.get(encodeURIComponent(a),c,d,e)}};return new b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxUserDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.record.datapage.UserDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxWaitForApprovalDefinitionResource",["rxResource",function(a){var b=function(){var b=a.withSubUrlConfiguration("approval/configuration/approvalflowconfigurator",function(a){a.setRestangularFields({id:"id"})});this.get=function(a,c,d,e){return b.get(encodeURIComponent(a),c,d,e)},this.post=b.post};return new b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.components.designer").factory("rxWaitForApprovalFlowSelectorResource",["rxResource",function(a){var b=function(){var b=a.withSubUrlConfiguration("approval/configuration/approvalflowconfigurator/approvalprocesses",function(a){a.setRestangularFields({id:"id"})});this.get=function(a,c,d,e){return b.get(encodeURIComponent(a),c,d,e)},this.post=b.post};return new b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.definition").factory("rxNamedListDataPageResource",["rxDataPageResource",function(a){var b=a.withType("com.bmc.arsys.rx.application.namedlist.datapage.NamedListDataPageQuery"),c=b.get;return b.get=function(a,b,d){rx.assert.assertStringWithLength(a,"The Named List definition name is a required parameter.");var e={namedlistdefinition:a};return c.call(this,b,d,e)},b.getWithCriteria=function(a,b,d,e){rx.assert.assertStringWithLength(a,"The Named List definition name is a required parameter."),rx.assert.assertStringWithLength(b,"The criteria is a required parameter.");var f={namedlistdefinition:a,additionalQueryCriteria:b};return c.call(this,d,e,f)},b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.definition").factory("rxNamedListDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.namedlist.datapage.NamedListDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.definition").factory("rxNamedListDefinitionNameDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.namedlist.datapage.NamedListDefinitionNamesDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.named-list.definition").factory("rxNamedListDefinitionResource",["rxResource","RX_RESOURCE_URLS","rxCommandResource",function(a,b,c){var d=function(){var d=a.withSubUrlConfiguration(b.namedListDefinition,function(a){a.setRestangularFields({id:"name"})});d.getNew=function(){return{plain:function(){return{name:""}}}},this.getNew=d.getNew,this.get=function(a){return d.get(encodeURIComponent(a))},this.post=d.post,this.create=this.post,this["delete"]=function(a){return d["delete"](a)},this.revertCustomization=function(a){return c.withType("com.bmc.arsys.rx.application.namedlist.command.RevertNamedListDefinitionCommand").execute({namedListDefinitionName:a})}};return new d}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").factory("rxProcessDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.process.datapage.ProcessDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").factory("rxProcessDefinitionDescriptorDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.process.datapage.ProcessDefinitionDescriptorDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").factory("rxProcessDefinitionInputParamsResource",["rxResource",function(a){var b=function(){var b=a.withSubUrlConfiguration("process/processdefinition",function(a){a.setRestangularFields({id:"name"})});this.get=function(a){var c=encodeURIComponent(a);return b.get(c+"/inputParams")}};return new b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.definition").factory("rxProcessDefinitionResource",["rxResource","rxGUID",function(a,b){var c=function(){var c=a.withSubUrlConfiguration("process/processdefinition",function(a){a.setRestangularFields({id:"name"})});c.getNew=function(){return{plain:function(){return{name:"",id:b.generate("rx-"),description:"",runAsUser:!1,isEnabled:!0,inputParams:[],outputParams:[],flowElements:[],artifacts:[],layout:null}}}},this.getNew=c.getNew,this.get=function(a,b,d,e){return c.get(encodeURIComponent(a),b,d,e)},this.post=c.post,this.create=this.post,this["delete"]=function(a){return c["delete"](a)}};return new c}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance").factory("rxProcessInstanceCountsByStatusDataPageResource",["rxDataPageResource",function(a){var b=a.withType("com.bmc.arsys.rx.application.process.datapage.ProcessInstanceCountsByStatusDataPageQuery"),c=b.get;return b.get=function(a,d,e,f){rx.assert.assert(_.isNull(a)||_.isUndefined(a)||_.isString(a),"processDefinitionName must be a string, or null/undefined.");var g={};return a&&(g.processDefinitionName=a),_.isObject(f)&&(g=angular.extend(g,f)),c.call(b,d,e,g)},b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance").factory("rxProcessInstanceDataPageResource",["rxDataPageResource",function(a){var b=a.withType("com.bmc.arsys.rx.application.process.datapage.ProcessInstanceDataPageQuery"),c=b.get;return b.get=function(a,d,e,f){rx.assert.assert(_.isNull(a)||_.isUndefined(a)||_.isString(a),"processDefinitionName must be a string, or null/undefined.");var g={};return a&&(g.processDefinitionName=a),_.isObject(f)&&(g=angular.extend(g,f)),c.call(b,d,e,g)},b}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.process.instance").factory("rxProcessInstanceResource",["rxResource","RX_RESOURCE_URLS",function(a,b){var c=function(c){rx.assert.assertStringWithLength(c);var d=b.processSubdomainName+"/"+b.processInstanceResourceName,e=a.withSubUrlConfiguration(d);this.get=function(a){return rx.assert.assertStringWithLength(a),e.all(b.processInstanceResourceName).all(encodeURIComponent(c)).get(a)}};return{forProcessDefinition:function(a){return new c(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.association").factory("rxAssociationDefinitionResource",["$q","rxResource","Restangular","rxCommandResource",function(a,b,c,d){var e=function(){var c=b.withSubUrlConfiguration("association/associationdefinition",function(a){a.setRestangularFields({id:"name"})});c.getNew=function(){return a.when(c.restangularizeElement(null,{name:""}),"")},this.getNew=c.getNew,this.get=function(a){return c.get(encodeURIComponent(a))},this.post=c.post,this["delete"]=c["delete"],this.revertCustomization=function(a){return d.withType("com.bmc.arsys.rx.application.association.command.RevertAssociationDefinitionCommand").execute({
associationDefinitionName:a})}};return new e}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.association").factory("rxAssociationInstanceDataPageResource",["rxDataPageResource","rxUtils",function(a,b){var c=a.withType({dataPageType:"com.bmc.arsys.rx.application.association.datapage.AssociationInstanceDataPageQuery",defaultRequestParameters:{pageSize:10,startIndex:0},transformerFunctions:{getFieldValue:function(a,c){rx.assert.assertNumber(a),rx.assert.assert(a>=0&&a<this.data.length,"The index is out of bounds."),rx.assert.assert(_.isNumber(c)||b.isNonEmptyString(c));var d=this.data[a];return c+="",_.isObject(d.fieldInstances)&&_.isObject(d.fieldInstances[c])?d.fieldInstances[c].value:null},setFieldValue:function(a,c,d){rx.assert.assertNumber(a),rx.assert.assert(a>=0&&a<this.data.length,"The index is out of bounds."),rx.assert.assert(_.isNumber(c)||b.isNonEmptyString(c));var e=this.data[a];c+="",_.isObject(e.fieldInstances)&&_.isObject(e.fieldInstances[c])&&(e.fieldInstances[c].value=d)}}}),d=c.get;return c.get=function(a,b,c,e,f){rx.assert.assertStringWithLength(a,"The Association Definition name is a required parameter."),rx.assert.assertStringWithLength(b,"The Record Definition name is a required parameter."),rx.assert.assertStringWithLength(c,"The Record Instance ID is a required parameter.");var g={associationdefinition:a,recorddefinition:b,recordinstanceid:c};return d.call(this,e,f,g)},c}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.association").factory("rxAssociationNodeTreeDataPageResource",["$q","rxDataPageResource",function(a,b){var c=b.withType("com.bmc.arsys.rx.application.association.datapage.AssociationNodeTreeDataPageQuery");return{withRecordDefinitionName:function(a){return c.get(-1,0,{recorddefinition:a})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").factory("rxFieldTypeDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.record.datapage.FieldTypeDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").factory("rxRecordDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.record.datapage.RecordDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.definition").factory("rxRecordDefinitionResource",["rxResource","RX_RESOURCE_URLS","RX_RECORD_DEFINITION","rxCommandResource",function(a,b,c,d){var e=function(){var e=a.withSubUrlConfiguration(b.recordDefinition,function(a){a.setRestangularFields({id:"name"})});e.getNew=function(a){var b={name:"",description:null,resourceType:c.recordDefinitionTypes.regular.recordDefinitionType,fieldDefinitions:angular.copy(c.coreFields),allowPermissionsOverlay:!1,allowOtherPropertiesOverlay:!1,allowIndexesOverlay:!1,allowFieldsOverlay:!1};return{plain:function(){return _.assign(b,a)}}},this.getNew=e.getNew,this.get=function(a){return e.get(encodeURIComponent(a))},this.getFromOverlay=function(a,b){return e.get(encodeURIComponent(a),null,{"request-overlay-group":b})},this.post=e.post,this.create=this.post,this["delete"]=function(a){return e["delete"](a)},this.revertCustomization=function(a){return d.withType("com.bmc.arsys.rx.application.record.command.RevertRecordDefinitionCommand").execute({recordDefinitionName:a})}};return new e}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.instance").factory("rxRecordInstanceAttachmentResource",["rxResource","RX_RESOURCE_URLS","$q","rxUtils",function(a,b,c,d){var e=a.all(b.recordInstanceAttachment),f=[b.applicationApi,b.recordInstanceAttachment].join("/"),g=function(a){rx.assert.assertStringWithLength(a);var b=function(b){return[a,b].join("/")},c=function(a,c){return d.isNonEmptyString(c)?[f,b(a),c].join("/"):[f,b(a)].join("/")};this.get=function(a,c){return rx.assert.assertStringWithLength(a),rx.assert.assertStringWithLength(c),e.all(b(a)).customGET(c)},this["delete"]=function(a,c){return rx.assert.assertStringWithLength(a),rx.assert.assertStringWithLength(c),e.all(b(a)).customDELETE(c)},this.getUrl=function(a,b){return rx.assert.assertStringWithLength(a),rx.assert.assert(d.isNullOrUndefined(b)||d.isNonEmptyString(b)),c(a,b)}};return{withName:function(a){return new g(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.instance").factory("rxRecordInstanceDataPageResource",["rxDataPageResource","rxUtils",function(a,b){return{withName:function(c){return rx.assert.assertStringWithLength(c),a.withType({dataPageType:"com.bmc.arsys.rx.application.record.datapage.RecordInstanceDataPageQuery",defaultRequestParameters:{recorddefinition:c},transformerFunctions:{getFieldValue:function(a,c){rx.assert.assertNumber(a),rx.assert.assert(a>=0&&a<this.data.length,"The index is out of bounds."),rx.assert.assert(_.isNumber(c)||b.isNonEmptyString(c));var d=this.data[a];return c=String(c),_.isObject(d.fieldInstances)&&_.isObject(d.fieldInstances[c])?d.fieldInstances[c].value:null},setFieldValue:function(a,c,d){rx.assert.assertNumber(a),rx.assert.assert(a>=0&&a<this.data.length,"The index is out of bounds."),rx.assert.assert(_.isNumber(c)||b.isNonEmptyString(c));var e=this.data[a];c=String(c),_.isObject(e.fieldInstances)&&_.isObject(e.fieldInstances[c])&&(e.fieldInstances[c].value=d)}}})}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.record.instance").factory("rxRecordInstanceResource",["rxResource","$q","RX_RESOURCE_URLS","rxUtils",function(a,b,c,d){var e=function(e){function f(a){var b=_(a.fieldInstances).filter(function(a){return!_.isUndefined(a.file)}).map(function(a){return{file:a.file,fieldId:a.id}}).value();if(_.isEmpty(b))return a;var c=new FormData,d=_.cloneDeep(a.plain());return _.forOwn(b,function(a){c.append(a.fieldId,a.file.getFile()),delete d.fieldInstances[a.fieldId]}),c.append("recordInstance",JSON.stringify(d)),c}rx.assert.assertStringWithLength(e),e=encodeURIComponent(e);var g=c.recordInstance.substr(c.recordInstance.lastIndexOf("/")+1),h=a.withSubUrlConfiguration(c.recordInstance,function(a){a.setFullResponse(!0),a.addElementTransformer(e,!1,function(a){var c=a.put;return a.put=function(){var d,e=b.defer(),g=f(a);if(g!==a){var h={"Content-Type":void 0};d=a.customPUT.apply(a,[g,null,null,h])}else d=c.apply(a,arguments);return d.then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},a.getValue=function(a){return rx.assert.assert(_.isNumber(a)||d.isNonEmptyString(a)),a=String(a),_.isObject(this.fieldInstances)&&_.isObject(this.fieldInstances[a])?this.fieldInstances[a].value:null},a.setValue=function(a,b){rx.assert.assert(_.isNumber(a)||d.isNonEmptyString(a)),a=String(a),_.isObject(this.fieldInstances)&&_.isObject(this.fieldInstances[a])&&(this.fieldInstances[a].value=b)},a})});this.get=function(a){rx.assert.assertStringWithLength(a,"The record instance id must be a valid string with content.");var c=b.defer();return h.all(g).all(e).get(a).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},this.getNew=function(){return this.get("0")},this.getList=function(){throw new Error("Not supported: Please use the rxRecordInstanceDataPageResource.")},this.post=function(a){rx.assert.assertObject(a);var c,e=b.defer(),g=a.fieldInstances&&a.fieldInstances[1],i=g&&g.value;rx.assert.assertNullOrUndefined(i,"The Entry ID field should not be defined");var j=f(a);if(j!==a){var k={"Content-Type":void 0};c=h.post.apply(h,[j,null,k])}else c=h.post(j);return c.then(function(a){if(_.isUndefined(a.data)||_.isNull(a.data))if(_.isObject(a)&&_.isFunction(a.headers)){var b=a.headers("location"),c=null;d.isNonEmptyString(b)&&(c={id:b.substr(b.lastIndexOf("/")+1),url:b}),e.resolve(c)}else e.resolve(a);else e.resolve(a.data)},function(a){e.reject(a)}),e.promise},this.create=this.post,this.getName=function(){return e},this["delete"]=function(b){var d=a.withSubUrlConfiguration(c.recordInstance+"/"+e);return d.remove(b)}};return{withName:function(a){return new e(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources").factory("rxCommandResource",["rxResource","rxUtils","RX_RESOURCE_URLS",function(a,b,c){var d=function(d){rx.assert.assertStringWithLength(d);var e=a.withSubUrlConfiguration(c.command,function(a){a.setFullResponse(!0)});this.execute=function(a,c,f,g){rx.assert.assertObject(a),rx.assert.assert(b.isNullOrUndefined(c)||_.isObject(c)),rx.assert.assert(b.isNullOrUndefined(f)||_.isObject(f)),rx.assert.assert(b.isNullOrUndefined(g)||_.isObject(g));var h=angular.extend({resourceType:d},a);return e.post(h,c,f,g)},this.getType=function(){return d}};return{withType:function(a){return new d(a)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.resources").factory("rxDataPageResource",["rxResource","RX_RESOURCE_URLS","$q","rxUtils",function(a,b,c,d){var e=function(e,f,g,h,i){rx.assert.assertStringWithLength(e),rx.assert.assert(d.isNullOrUndefined(f)||_.isObject(f)),rx.assert.assert(d.isNullOrUndefined(g)||_.isObject(g)),rx.assert.assert(d.isNullOrUndefined(h)||_.isObject(h)),rx.assert.assert(d.isNullOrUndefined(i)||_.isObject(i));var j=this,k={},l=a.withSubUrlConfiguration(b.dataPage,function(a){a.setDefaultRequestParams(angular.extend({dataPageType:e},f||{})),_.isObject(g)&&RestangularProvider.setDefaultHeaders(g),a.addElementTransformer(b.dataPage,!1,function(a){return a.next=function(){rx.assert.assertObject(a.reqParams),rx.assert.assertNumber(a.reqParams.pageSize),rx.assert.assertNumber(a.reqParams.startIndex);var b=a.reqParams.pageSize,c=a.reqParams.startIndex+b;return j.get(b,c)},a.previous=function(){rx.assert.assertObject(a.reqParams),rx.assert.assertNumber(a.reqParams.pageSize),rx.assert.assertNumber(a.reqParams.startIndex);var b=a.reqParams.pageSize,c=a.reqParams.startIndex-b;return j.get(b,c)},_.isObject(h)&&angular.forEach(h,function(b,c){rx.assert.assertFunction(b,"Only functions are allowed for the transformer."),rx.assert.assertNullOrUndefined(a[c],"Name is already been used and can not be replaced."),a[c]=b}),_.isObject(i)&&d.isNonEmptyArray(a.data)&&angular.forEach(i,function(b,c){rx.assert.assertFunction(b,"Only functions are allowed for the transformer."),angular.forEach(a.data,function(a){_.isObject(a)&&(rx.assert.assertNullOrUndefined(a[c],"Name is already been used and can not be replaced."),a[c]=b)})}),a})});this.get=function(a,b,c,d){rx.assert.assertOptionalNumber(a,"Page size must be a valid number."),rx.assert.assertOptionalNumber(b,"Start Index must be a valid number."),rx.assert.assertOptionalObject(c),b=_.isNumber(b)?b:0,rx.assert.assert(b>=0,"Start Index must be a valid number greater than zero."),a=_.isNumber(a)?a:-1;var e=angular.extend({startIndex:b,pageSize:a},c||{},k);return l.get("",e,d)},this.getType=function(){return e},this.setDefaultRequestParameters=function(a){rx.assert.assert(_.isObject(a)||_.isNull(a)),k=a||{}},this.getEmptyDataPage=function(){var a=c.defer();return a.resolve({data:[],totalSize:0}),a.promise},this.addResponseInterceptor=function(a){return l.addResponseInterceptor(a)}};return{withType:function(a,b,c,d,f){return _.isObject(a)?new e(a.dataPageType,a.defaultRequestParameters,a.defaultHeaders,a.transformerFunctions,a.dataTransformerFunctions):new e(a,b,c,d)}}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.definition").factory("rxRuleDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.rule.datapage.RuleDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.rule.definition").factory("rxRuleDefinitionResource",["rxResource","rxGUID",function(a,b){var c=function(){var c=a.withSubUrlConfiguration("rule/ruledefinition",function(a){a.setRestangularFields({id:"name"})});c.getNew=function(){return{plain:function(){return{name:"",id:b.generate("rx-"),isEnabled:!0,triggerEvent:{resourceType:"com.bmc.arsys.rx.services.rule.domain.RecordTriggerEvent",eventTypes:[]},recordDefinitionNames:[],actions:[]}}}},this.getNew=c.getNew,this.get=function(a,b,d,e){return c.get(encodeURIComponent(a),b,d,e)},this.post=c.post,this.create=this.post,this["delete"]=function(a){return c["delete"](a)}};return new c}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.security").factory("rxAuthUserResource",["rxCommandResource","$q","$window",function(a,b,c){function d(a,d){return rx.assert.assertObject(a),rx.assert.assertStringWithLength(a.username),_.isUndefined(a.locale)&&(a.locale=c.rxLocalization?_(window.rxLocalization).keys().first():"en"),d=_.assign({handleResponseError:_.constant(!0)},d),f.execute(a,null,null,d).then(function(a){var c=59,d=a.headers("x-ar-messages");if(null!==d){var f=JSON.parse(d);if(_.find(f,{messageNumber:c}))return e(),b.reject()}return a.data})}function e(){return g.execute({})}var f=a.withType("com.bmc.arsys.rx.application.user.command.LoginCommand"),g=a.withType("com.bmc.arsys.rx.application.user.command.LogoutCommand");return{login:d,logout:e}}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user").factory("rxGroupDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.group.datapage.GroupDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user").factory("rxRoleDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.role.datapage.RoleDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.user").factory("rxUserResource",["rxResource","RX_RESOURCE_URLS",function(a,b){var c="$USER$",d=a.withSubUrlConfiguration(b.user,function(a){a.addElementTransformer(b.user,!0,function(a){return a.addRestangularMethod("getCurrentUser","get",c),a})});return d.addFullRequestInterceptor(function(a,b,d,e,f,g,h){"get"===b&&d===c&&(h.handleResponseError=function(){return!0})}),d.all(b.user)}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view-components.shell").service("rxShellConfigResource",["$q","$rootScope","rxResource","rxUtils","rxViewDefinitionResource","rxBundleCache","rxRuntimeViewState","rxAuthorization","rxSearchResultsState","RX_SHELL","RX_ACTION_BUTTON","RX_VIEW_DEFINITION","RX_AUTH_EVENTS",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,b){var c={};switch(a.actionName){case j.actions.launchURL:c={label:a.menuItemName,url:a.url};break;case j.actions.navigateToView:c={label:a.menuItemName,state:{name:g.get(),params:{viewDefinitionName:a.viewDefinitionName}}};break;case j.actions.navigateToState:b&&!h.isStateAuthorized(a.state)||(c={label:a.menuItemName,state:a.state})}return _.isEmpty(c)||(a.menuItemIcon&&(c.icon=(_.find(k.icons,{name:a.menuItemIcon})||{}).cls||""),c.hidden=!!_.has(a,"hidden")&&JSON.parse(a.hidden)),c}function o(a,b){var c=[],e={};if(a&&a.componentDefinitions[0]){var f=a.componentDefinitions[0],g=_.attempt(JSON.parse.bind(null,f.layout)),h=_.isError(g)?[]:d.flattenTree(g,"columns","children").filter(function(a){return a.componentDefinitionId});e=f.propertiesByName||{},_.each(h,function(a){var e=_.find(f.componentDefinitions,{id:a.componentDefinitionId});if(e){var h={};switch(e.type){case j.navBar.menuGroup:var i=[];g=_.attempt(JSON.parse.bind(null,e.layout));var k=_.isError(g)?[]:d.flattenTree(g,"columns","children").filter(function(a){return a.componentDefinitionId});_.each(k,function(a){var c=_.find(e.componentDefinitions,{id:a.componentDefinitionId});if(c){var d=n(c.propertiesByName,b);_.isEmpty(d)||i.push(d)}}),i.length>0&&(h={label:e.propertiesByName.menuGroupName,navigationBarItems:i,hidden:!!_.has(e.propertiesByName,"hidden")&&JSON.parse(e.propertiesByName.hidden)});break;case j.navBar.menuItem:h=n(e.propertiesByName,b)}_.isEmpty(h)||c.push(h)}})}return{navigationBarItems:c,allowAppSwitching:!!_.has(e,"allowAppSwitching")&&JSON.parse(e.allowAppSwitching),globalSearchUseDefault:!_.has(e,"globalSearchUseDefault")||JSON.parse(e.globalSearchUseDefault),globalSearchCustomSearchState:e.globalSearchCustomSearchState||"",globalSearchDisabled:!_.has(e,"globalSearchDisabled")||JSON.parse(e.globalSearchDisabled),globalSearchRecords:_.has(e,"globalSearchRecords")?JSON.parse(e.globalSearchRecords):[],globalSearchState:i.get()}}var p;this.get=function(b){var c=f.getBundleId()+":"+l.shellDefinitionName;return p?a.when(p):e.get(c,null,null,{handleResponseError:function(a){return 404===a.status}}).then(function(c){return p=o(c,b),a.when(p)})["catch"](function(){return a.when(o())})},b.$on(m.logoutSuccess,function(){p=null})}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.definition").factory("rxViewDefinitionDataPageResource",["rxDataPageResource",function(a){return a.withType("com.bmc.arsys.rx.application.view.datapage.ViewDefinitionDataPageQuery")}])}(),function(){"use strict";angular.module("com.bmc.arsys.rx.standardlib.view.definition").factory("rxViewDefinitionResource",["$q","rxResource","rxGUID","rxCommandResource","RX_VIEW_DEFINITION","rxUtils",function(a,b,c,d,e,f){var g=function(){function g(a){var b=a.localizableStringsByComponentId,c=f.flattenTree(a,"componentDefinitions");_.forOwn(b,function(a,d){var e=_.find(c,{id:d});if(e){var f=b[d];_.forOwn(e.propertiesByName,function(a,b){f[a]&&(e.propertiesByName[b]=f[a])})}}),delete a.localizableStringsByComponentId}var h=b.withSubUrlConfiguration("view/viewdefinition",function(a){a.setRestangularFields({id:"name"})});h.getNew=function(){return{plain:function(){return{id:c.generate(),name:"",description:"",componentDefinitions:[],layout:"",inputParams:[],outputParams:[],allowOverlay:!1,permissions:[{ownerId:{value:0,type:"GROUP"},type:"VISIBLE"}],type:e.viewType.regular}}}},this.getNew=h.getNew,this.get=function(b,c,d,e){var f=a.defer();if(!_.has(c,"locale")){var i=window.rxLocalization?window.rxLocalization.locale:"en";c=_.extend(c||{},{locale:i})}return h.get(encodeURIComponent(b),c,d,e).then(function(a){g(a),f.resolve(a)}),f.promise},this.post=h.post,this.create=this.post,this["delete"]=h["delete"],this.revertCustomization=function(a){return d.withType("com.bmc.arsys.rx.application.view.command.RevertViewDefinitionCommand").execute({viewDefinitionName:a})},this.applyLocalization=g};return new g}])}(),angular.module("com.bmc.arsys.rx.standardlib.utils").run(["$templateCache",function(a){"use strict";a.put("scripts/association/designer/association-designer.directive.html",'<form name="rxAssociationDesignerForm" novalidate ng-submit="" layout="column" flex class="rx-association-designer-form"><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar ng-show="isLoaded" definition-name="(associationDefinition.name | definitionName) || \'&lt;New Association&gt;\'" definition-icon="" items="breadcrumbs" on-click="handleBreadcrumbBarClick(itemId)"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button ng-show="isLoaded" type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-click="toggleDesignMode()"><strong>{&thinsp;}</strong>&emsp;JSON</button> <button type="submit" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveChanges()" ng-disabled="!rxAssociationDesignerForm.$dirty || !rxAssociationDesignerForm.$valid">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div cg-busy="rxBusyIndicator" class="rx-busy-indicator" flex layout="column"><div ng-show="isDesignMode !== true" class="rx-content rx-editor-content rx-association-designer-content" flex layout="column"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxViewDesignerForm.json.$invalid}" flex layout="column"><rx-simple-json-editor flex name="json" rx-object="json" ng-readonly="true"></rx-simple-json-editor></div></div><div ng-show="(isDesignMode === true) && isLoaded" class="rx-content rx-editor-content rx-association-designer-content" flex layout="row"><div class="rx-association-designer-fields"><h1 class="ng-binding">{{exists ? \'Edit Association\' : \'Create Association\'}}</h1><div class="d-textfield d-textfield_required"><label class="d-textfield__label"><span class="d-textfield__item">Association Name</span> <input class="d-textfield__input" name="name" type="text" maxlength="254" required ng-disabled="exists" ng-model="associationDefinition.name" placeholder="Enter a name to identify this association"></label></div><div class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">Description</span><textarea name="description" ng-model="associationDefinition.description" class="d-textfield__input" ng-attr-placeholder="{{!exists ? \'Enter a short description of this association\' : \'\'}}"></textarea></label></div><div layout="row" layout-align="center center"><div class="d-textfield" flex><label class="d-textfield__label d-textfield_required"><span class="d-textfield__item"><rx-tooltip tooltip="{text: \'Select the primary record that you want to associate with a secondary record.\', placement: \'top\'}"></rx-tooltip>First Record</span></label><rx-definition-picker rx-selected-definition-name="associationDefinition.nodeAId" rx-align="left" rx-type="record" rx-definitions-only="true" rx-disabled="::exists"></rx-definition-picker></div><div class="rx-association-designer-arrow-1"></div><div class="d-textfield" flex><label class="d-textfield__label"><span class="d-textfield__item">Cardinality</span><div class="d-dropdown d-js-dropdown"><div ng-disabled="exists" class="d-dropdown__trigger d-select"><select name="cardinality" ng-disabled="exists" data-mode="selectable" ng-model="associationDefinition.cardinality" ng-options="cardinality.value as cardinality.name for cardinality in cardinalities"></select>{{getCardinalityByValue(associationDefinition.cardinality).name}}</div></div></label></div><div class="rx-association-designer-arrow-2"></div><div class="d-textfield d-textfield_required" flex><label class="d-textfield__label"><span class="d-textfield__item"><rx-tooltip tooltip="{text: \'Select the secondary record that you want to associate with a primary record.\', placement: \'top\'}"></rx-tooltip>Second Record</span></label><rx-definition-picker rx-selected-definition-name="associationDefinition.nodeBId" rx-type="record" rx-definitions-only="true" rx-disabled="::exists"></rx-definition-picker></div></div><div layout><div ng-disabled="exists" class="d-textfield" flex><label class="d-textfield__label"><span class="d-textfield__item"><rx-tooltip tooltip="{text: \'Add the record description of the first record, which explains the record in the context of the association\', placement: \'top\'}"></rx-tooltip>Role of First Record</span> <input name="nodeAName" type="text" ng-model="associationDefinition.nodeAName"></label></div><div class="rx-association-designer-arrow-placeholder"></div><div flex></div><div class="rx-association-designer-arrow-placeholder"></div><div ng-disabled="exists" class="d-textfield" flex><label class="d-textfield__label"><span class="d-textfield__item"><rx-tooltip tooltip="{text: \'Add the record description of the second record, which explains the record in the context of the association\', placement: \'top\'}"></rx-tooltip>Role of Second Record</span> <input name="nodeBName" type="text" name="nodeBName" ng-model="associationDefinition.nodeBName"></label></div></div><div ng-if="canCascadeDelete"><div class="d-textfield" flex><label class="d-textfield__label"><span class="d-textfield__item">Add Constraints:<rx-tooltip tooltip="{text: \'Selecting this check-box, creates a foreign key on the second record.\', placement: \'top\'}"></rx-tooltip></span><rx-dpl-checkbox ng-disabled="exists" ng-model="associationDefinition.shouldCascadeDelete">If <b>{{associationDefinition.nodeAId | definitionName}} {{associationDefinition.nodeAName ? \'(\' + associationDefinition.nodeAName + \')\' : \'\'}}</b> record is deleted, automatically delete all associated <b>{{associationDefinition.nodeBId | definitionName}} {{associationDefinition.nodeBName ? \'(\' + associationDefinition.nodeBName + \')\' : \'\'}}</b> records</rx-dpl-checkbox></label></div></div><hr><div layout><rx-dpl-checkbox ng-model="associationDefinition.isEnabled">Enable association</rx-dpl-checkbox></div></div></div><rx-blade ng-show="(isDesignMode === true)" ng-if="isLoaded" rx-configuration="rightBladeConfiguration"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + (selected.validationIssues.length ? \' error\' : \'\')" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active"><span class="title">Validation Issues</span><rx-designer-validation-issues validation-issues="validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade></div></form>'),a.put("scripts/components/blade/blade-tab.directive.html",'<a href="" class="rx-blade-tab {{tabName}}" ng-class="{\'active\' : active}" ng-click="activate()"><div class="icon {{iconClass}}"></div></a>'),a.put("scripts/components/blade/blade.directive.html","<div class=\"rx-blade\" ng-class=\"{\n        'rx-blade-dock-right': rxConfiguration.dock === 'right',\n        'rx-blade-dock-left': rxConfiguration.dock === 'left',\n        'rx-blade-expanded': rxConfiguration.expanded}\"><a class=\"rx-blade-toggle\" href=\"\" ng-click=\"toggle()\" ng-class=\"{'collapsed': !rxConfiguration.expanded}\"><div class=\"icon\" ng-class=\"{\n                'd-icon-left-arrow_right': rxConfiguration.dock === 'right',\n                'd-icon-right-arrow_left': rxConfiguration.dock === 'left'\n"+'            }"></div>{{rxConfiguration.title}}</a><div class="rx-blade-tabs" ng-transclude></div><div class="rx-blade-content"><div class="rx-blade-tab-pane" ng-repeat="tab in tabs" ng-class="{active: tab.active}" ng-show="tab.active" rx-blade-tab-content="tab"></div></div></div>'),a.put("scripts/components/definition-picker/definition-picker.directive.html",'<div class="rx-definition-picker__input-container" ng-click="openPopup()"><span class="rx-definition-picker__fake-input rx-input d-icon-right-angle_down" ng-disabled="rxDisabled"><span ng-bind="rxSelectedDefinitionName | definitionName"></span> <button class="d-icon-cross d-button_action rx-definition-picker__clear-button" ng-click="clearDefinition($event)" ng-show="rxSelectedDefinitionName && rxAllowClear && !rxDisabled" type="button"></button></span></div><div class="rx-definition-picker__popup" ng-style="{width: popupWidth, transform: popupTransform}" ng-class="{\'rx-definition-picker__popup_visible\': popupVisible}" ng-show="states.opened"><div class="rx-definition-picker__header"><div class="rx-definition-picker__header-group rx-definition-picker__header-group_tabs" ng-show="!states.searchOpened"><ul class="d-button-group d-button-group_primary d-button-group_small"><li class="d-button-group__item" ng-repeat="definitionGroup in definitionGroups"><button class="d-button-group__btn" ng-model="definitionScope.name" uib-btn-radio="\'{{::definitionGroup.key}}\'">{{::definitionGroup.label}}</button></li></ul><button class="d-button d-button_action d-button_small d-icon-search" ng-click="openSearch()" type="button"></button></div><div class="rx-definition-picker__header-group rx-definition-picker__header-group_search" ng-show="states.searchOpened"><button class="d-button d-button_action d-button_small d-icon-arrow_left" ng-click="closeSearch()" type="button"></button><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><button class="d-textfield__action d-button d-button_action d-icon-cross" ng-click="clearSearch()" ng-show="definitionSearchQuery" type="button"></button> <input ng-model="definitionSearchQuery" ng-model-options="{ debounce: 200 }" class="d-textfield__input" type="search"></label></div></div></div><div class="rx-definition-picker__body" cg-busy="{promise:loadingDefinitionsPromise, templateUrl:busyIndicatorTemplateUrl, delay:400, minDuration:0, message:\'\'}"><ul class="rx-definition-picker__bundles-list"><li class="d-menu__item" ng-repeat="bundle in definitionTrees[definitionScope.name]"><span ng-click="bundle.isExpanded = !bundle.isExpanded" class="rx-definition-picker__bundle-label d-icon-left-triangle_right" ng-class="{isExpanded: !bundle.isExpanded}">{{bundle.label}}</span><!--TODO try don`t render items if bundle collapsed--><ul class="rx-definition-picker__instances-list collapse" uib-collapse="!bundle.isExpanded"><li ng-repeat="definitionTreeNode in bundle.definitionTreeNodes" class="rx-definition-picker__instance-item"><span class="rx-definition-picker__instance-name" ng-class="{\'d-icon-right-check isChecked\': rxSelectedDefinitionName === definitionTreeNode.definitionName}" ng-click="selectDefinition(definitionTreeNode)" ng-bind-html="definitionTreeNode.label" title="{{::definitionTreeNode.definitionName}}"></span></li></ul></li></ul></div></div>'),a.put("scripts/components/designer/breadcrumb-bar/breadcrumb-bar.directive.html",'<ul class="rx-designer-breadcrumb-bar__list"><li class="rx-designer-breadcrumb-bar__item"><a ng-if="items.length" class="rx-designer-breadcrumb-bar__item-value" ng-class="\'d-icon-left-\' + definitionIcon" ng-click="onClick()">{{definitionName}}</a> <span ng-if="!items.length" class="rx-designer-breadcrumb-bar__item-value" ng-class="\'d-icon-left-\' + definitionIcon">{{definitionName}}</span> <span ng-if="items.length" class="rx-designer-breadcrumb-bar__divider"></span></li><li class="rx-designer-breadcrumb-bar__item" ng-repeat="item in items" title="{{item.name}}"><a ng-if="$last == false" class="rx-designer-breadcrumb-bar__item-value" ng-class="\'d-icon-left-\' + item.icon" ng-click="onClick({itemId: item.id})">{{item.name}}</a> <span ng-if="$last" class="rx-designer-breadcrumb-bar__item-value" ng-class="\'d-icon-left-\' + item.icon">{{item.name}}</span> <span class="rx-designer-breadcrumb-bar__divider" ng-if="$last == false"></span></li></ul>'),a.put("scripts/components/designer/canvas-preview/designer-canvas-preview.directive.html",'<div class="rx-designer-canvas-toolbar" layout><button class="rx-designer-canvas-toolbar-item zoom-in" type="button" ng-click="onZoomIn()" tooltip-placement="bottom" uib-tooltip="Zoom In"><span class="d-icon-search_plus"></span></button> <button class="rx-designer-canvas-toolbar-item zoom-out" type="button" ng-click="onZoomOut()" tooltip-placement="bottom" uib-tooltip="Zoom Out"><span class="d-icon-search_minus"></span></button></div>'),a.put("scripts/components/designer/canvas/designer-canvas.directive.html",'<div class="rx-designer-canvas-toolbar" layout><button class="rx-designer-canvas-toolbar-item custom-actions-left" type="button" ng-repeat="item in rxConfiguration.customActionsLeft" ng-disabled="item.isDisabled()" ng-click="dispatchActionEvent(item.eventName)" ng-class="item.buttonCls"><span class="{{::item.iconCls}}">{{::item.label}}</span></button> <button class="rx-designer-canvas-toolbar-item undo" ng-if="interactive" type="button" ng-disabled="!hasUndo()" ng-click="undo()" tooltip-placement="bottom" uib-tooltip="Undo"><span class="d-icon-undo"></span></button> <button class="rx-designer-canvas-toolbar-item redo" ng-if="interactive" type="button" ng-disabled="!hasRedo()" ng-click="redo()" tooltip-placement="bottom" uib-tooltip="Redo"><span class="d-icon-share"></span></button> <button class="rx-designer-canvas-toolbar-item zoom-in" type="button" ng-click="onZoomIn()" tooltip-placement="bottom" uib-tooltip="Zoom In"><span class="d-icon-search_plus"></span></button> <button class="rx-designer-canvas-toolbar-item zoom-out" type="button" ng-click="onZoomOut()" tooltip-placement="bottom" uib-tooltip="Zoom Out"><span class="d-icon-search_minus"></span></button> <button class="rx-designer-canvas-toolbar-item print" type="button" ng-click="onPrint()" tooltip-placement="bottom" uib-tooltip="Print"><span class="d-icon-printer"></span></button> <button class="rx-designer-canvas-toolbar-item clear" ng-if="interactive" type="button" ng-click="onClear()" tooltip-placement="bottom" uib-tooltip="Clear Canvas"><span class="d-icon-trash"></span></button> <button class="rx-designer-canvas-toolbar-item export-to-png" type="button" ng-click="exportToPng()" tooltip-placement="bottom" uib-tooltip="Export to PNG"><span class="d-icon-file_arrow_png_o"></span></button><div class="rx-designer-canvas-toolbar-item grid-size" ng-if="interactive" tooltip-placement="bottom" uib-tooltip="Change Grid Size" layout><label class="grid-size-label">Grid size:</label><button type="button" ng-disabled="options.gridSize == 1" ng-click="onDecreaseGridSize()"><span class="d-icon-minus_circle"></span></button> <input type="range" value="5" min="1" max="20" step="1" ng-model="options.gridSize"> <button type="button" ng-disabled="options.gridSize == 20" ng-click="onIncreaseGridSize()"><span class="d-icon-plus_circle"></span></button><label>{{options.gridSize}}</label></div><div class="snaplines-checkbox" ng-if="interactive" tooltip-placement="bottom" uib-tooltip="Show Snaplines" layout><label class="snaplines-label">Snaplines:</label><rx-dpl-checkbox ng-change="onSnaplinesChange()" ng-model="options.snaplinesEnabled"></rx-dpl-checkbox></div><button class="rx-designer-canvas-toolbar-item custom-actions-right" type="button" ng-repeat="item in rxConfiguration.customActionsRight" ng-click="dispatchActionEvent(item.eventName)()" ng-class="item.buttonCls"><span class="{{::item.iconCls}}">{{::item.label}}</span></button></div>'),
a.put("scripts/components/designer/editors/permission-editor-dialog.html",'<div class="d-modal__header dialog-header-confirm"><h4 class="d-modal__title">{{(\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.header.caption\' | translate) + \' \' + displayName}} <button type="button" class="close" ng-click="cancel()">&times;</button></h4></div><div class="d-notification d-notification_info" ng-if="automaticPermissionSet() || basePermissionDisabled() || basePermissionPinned()"><div class="rx-permissions-notification" ng-if="automaticPermissionSet() "><span class="d-icon-left-info_circle"></span> <span class="align-right">{{publicPermissionValue.join()}} {{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.notification.automaticPermission\' | translate}}</span></div><div class="rx-permissions-notification" ng-if="basePermissionPinned()"><span class="d-icon-left-info_circle"></span> <span class="align-right">One or more Base Permissions have been pinned (<span class="d-icon-left-pin_circle"></span>). These permissions are guaranteed to be present even if they are removed in the originating definition</span></div><div class="rx-permissions-notification" ng-if="basePermissionDisabled()"><span class="d-icon-left-info_circle"></span> <span class="align-right">One or more Base Permissions have been disabled. Click Undo icon on the right side of the permission ro re-enable that permission</span></div></div><div class="d-modal__content rx-permissions-editor"><div class="preloader-container" ng-show="!state.dataLoaded"><div class="d-preloader d-icon-left-circle_25_o"></div></div><div class="d-modal__content-item" ng-if="overlayMode"><h5>Base Permissions</h5><div class="rx-permissions-editor-table"><div class="rx-permissions-editor-table-row rx-permissions-editor-table-header"><div class="rx-permissions-editor-table-type-column"><h6>{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.type.label\' | translate}}</h6></div><div class="rx-permissions-editor-table-group-role-column"><h6>{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.group.label\' | translate}}</h6></div><div class="rx-permissions-editor-restrictions-selector" ng-repeat="action in actionsData"><h6>{{action.label | translate}}</h6></div><div>&nbsp;</div></div><div ng-repeat="permission in basePermissions" class="rx-permissions-editor-table-row" ng-class="{\'disabled-permission\': permission.isDisabled}"><div class="rx-permissions-editor-type-column"><ul class="d-button-group d-button-group_primary"><li class="d-button-group__item" ng-repeat="type in permissionTypes"><button class="d-button-group__btn" ng-class="{\'is-checked\': permission.type === type}" disabled="disabled">{{type}}</button></li></ul></div><div class="rx-permissions-editor-table-group-role-column"><div class="d-dropdown d-js-dropdown" data-mode="unselectable"><div class="d-dropdown__trigger d-select" data-placeholder="{{permission.type == \'group\' ? (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.placeholder\' | translate) : (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.role.placeholder\' | translate) }}" disabled="true">{{permission.permissionOwner || (permission.type == \'group\' ? (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.placeholder\' | translate) : (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.role.placeholder\' | translate)) }}</div><div class="d-dropdown__menu"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input ng-model="permission.searchText" type="text" placeholder="{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.searchWithinList.placeholder\' | translate}}" class="d-textfield__input"></label></div><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item" ng-if="!filteredPermissionOwnersList.length">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.noMatch\' | translate}}</li><li class="d-dropdown__menu-options-item" ng-repeat="permissionOwner in filteredPermissionOwnersList = (getAvailablePermissionOwnersList(permission.permissionOwnerList) | filter:permission.searchText)"><a class="d-dropdown__menu-options-item-option" ng-click="setPermissionOwner(permissionOwner, permission)">{{::permissionOwner.name}}</a></li></ul></div></div></div><div class="rx-permissions-editor-restrictions-selector" ng-repeat="action in actionsData"><div class="d-checkbox d-checkbox_default"><label><input class="d-checkbox__input" type="checkbox" disabled="true" ng-click="setRestriction(action.value, permission)" ng-checked="(permission.permittedActions.indexOf(action.value) >= 0) || publicPermissionValue.indexOf(action.value) >= 0"> <span class="d-checkbox__label d-checkbox__item"></span></label></div></div><div class="text-right"><a class="d-button d-button_action d-button_small {{permission.isPinned ? \'d-icon-left-pin_circle\' : \'d-icon-left-pin\'}}" ng-disabled="permission.isDisabled" ng-click="pinPermission(permission)"></a> <a class="d-button d-button_action d-button_small {{permission.isDisabled ? \'d-icon-left-undo\' : \'d-icon-left-cross\'}}" ng-click="togglePermission(permission)"></a></div></div></div></div><div class="d-modal__content-item"><h5 ng-if="overlayMode">Custom Permissions</h5><div class="rx-permissions-editor-table"><div class="rx-permissions-editor-table-row rx-permissions-editor-table-header"><div class="rx-permissions-editor-table-type-column"><h6>{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.type.label\' | translate}}</h6></div><div class="rx-permissions-editor-table-group-role-column"><h6>{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.column.group.label\' | translate}}</h6></div><div class="rx-permissions-editor-restrictions-selector" ng-repeat="action in actionsData"><h6>{{action.label | translate}}</h6><a class="d-button d-button_secondary d-button_small" ng-disabled="permissions.length === 0" ng-click="setRestrictionForAllPermissions(action.value)">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.button.setAll.caption\' | translate}}</a></div><div>&nbsp;</div></div><div ng-repeat="permission in permissions" class="rx-permissions-editor-table-row"><div class="rx-permissions-editor-type-column"><ul class="d-button-group d-button-group_primary"><li class="d-button-group__item" ng-repeat="type in permissionTypes" ng-click="setPermissionType(type, permission)"><a class="d-button-group__btn" ng-class="{\'is-checked\': permission.type === type}">{{type}}</a></li></ul></div><div class="rx-permissions-editor-table-group-role-column"><div class="d-dropdown d-js-dropdown" data-mode="unselectable"><div class="d-dropdown__trigger d-select" data-placeholder="{{permission.type == \'group\' ? (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.placeholder\' | translate) : (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.role.placeholder\' | translate) }}">{{permission.permissionOwner || (permission.type == \'group\' ? (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.placeholder\' | translate) : (\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.role.placeholder\' | translate)) }}</div><div class="d-dropdown__menu"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input ng-model="permission.searchText" type="text" placeholder="{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.searchWithinList.placeholder\' | translate}}" class="d-textfield__input"></label></div><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item" ng-if="!filteredPermissionOwnersList.length && !securityLabelsList.length">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.select.group.noMatch\' | translate}}</li><li ng-if="filteredPermissionOwnersList.length" class="rx-dropdown__menu-group">Groups</li><li class="d-dropdown__menu-options-item" ng-repeat="permissionOwner in filteredPermissionOwnersList = (getAvailablePermissionOwnersList(permission.permissionOwnerList) | filter:permission.searchText)"><a class="d-dropdown__menu-options-item-option" ng-click="setPermissionOwner(permissionOwner, permission)">{{::permissionOwner.name}}</a></li><li ng-if="securityLabelsList.length" class="rx-dropdown__menu-group">Security Labels</li><li class="d-dropdown__menu-options-item" ng-repeat="securityLabel in securityLabelsList = (securityLabels | filter:permission.searchText)"><a class="d-dropdown__menu-options-item-option" ng-click="setPermissionOwner(securityLabel, permission)">{{::securityLabel.name}}</a></li></ul></div></div></div><div class="rx-permissions-editor-restrictions-selector" ng-repeat="action in actionsData"><div class="d-checkbox d-checkbox_default"><label><input class="d-checkbox__input" type="checkbox" ng-disabled="publicPermissionValue.indexOf(action.value) >= 0" ng-click="setRestriction(action.value, permission)" ng-checked="(permission.permittedActions.indexOf(action.value) >= 0) || publicPermissionValue.indexOf(action.value) >= 0"> <span class="d-checkbox__label d-checkbox__item"></span></label></div></div><div class="text-right"><a class="d-button d-button_action d-button_small d-icon-left-cross" ng-click="removePermission(permission)"></a></div></div></div></div><div class="d-modal__content-item"><a class="d-icon-left-plus_circle" ng-click="createNewPermission()">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.button.addPermission.label\' | translate}}</a></div></div><div class="d-modal__footer"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!state.permissionsWereUpdated">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.button.save.label\' | translate}}</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">{{\'com.bmc.arsys.rx.standardlib.permission.permissionEditor.button.cancel.label\' | translate}}</button></div>'),a.put("scripts/components/designer/editors/timer-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Edit Timer</h4></div><div class="modal-body rx-timer-editor"><form novalidate><div class="row"><div class="col-md-6 form-horizontal"><label class="required">Interval:</label><div class="form-group"><div class="col-md-5"><input type="number" ng-model="form.months" name="months" class="rx-input" min="0" step="1"></div><label class="col-md-7">month(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="form.weeks" name="" class="rx-input" min="0" step="1"></div><label class="col-md-7">week(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="form.days" name="days" class="rx-input" min="0" step="1"></div><label class="col-md-7">day(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="form.hours" name="hours" class="rx-input" min="0" step="1"></div><label class="col-md-7">hour(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="form.minutes" name="minutes" class="rx-input" min="0" step="1"></div><label class="col-md-7">minute(s)</label></div></div></div></form><div>Interval Timer<div class="rx-timer-editor-preview">{{preview}}</div></div><div class="rx-timer-editor-action-buttons"><button type="button" type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!preview">OK</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/components/designer/inspector/designer-inspector.directive.html",'<div class="{{inspector.options.cell.get(\'rxInspector\').cls}}" ng-class="{\'readonly\': inspector.options.cell.get(\'rxInspector\').readonly}"><div class="rx-inspector-empty-text" ng-if="!inspector">{{rxConfiguration.emptyText}}</div><div class="rx-blocker" ng-if="rxConfiguration.disabled"></div></div>'),a.put("scripts/components/designer/inspector/editors/approval-flow-selector/approval-flow-selector-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Select From Approval Flows</h4></div><div class="modal-body rx-timer-editor"><div class="row"><div class="col-md-6"><div class="d-textfield d-textfield_large"><label class="d-textfield__label d-search-title"><span class="d-textfield__item">Filtered by Record Instance: {{selectedRecordInstance}}</span></label></div></div><div class="col-md-6"><div class="d-textfield d-textfield_large"><label class="d-textfield__label"><input class="d-textfield__input" type="text" placeholder="Search" name="search" ng-model="searchText"></label></div></div></div><div ui-grid="gridOptions" ui-grid-infinite-scroll ui-grid-selection class="grid"></div><div class="rx-approval-flow-selector-dialog-action-buttons"><button type="button" type="button" class="d-button d-button_primary d-button_large" ng-disabled="!isRowSelected" ng-click="ok()">Use Selected Flow</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/components/designer/inspector/editors/approval-flow-selector/inspector-approval-flow-selector-field.directive.html",'<div class="rx-inspector-approval-flow-selector-field"><label ng-class="options.attrs.label.class">{{options.label}}:</label><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-folder_open_o" ng-click="openDialog()">Select</a> <input type="text" data-attribute="{{path}}" data-type="text" readonly-input="{{options.attrs.input.disabled}}" ng-model="value" ng-disabled="{{options.attrs.input.disabled}}"></div>'),a.put("scripts/components/designer/inspector/editors/column-span/inspector-column-span.directive.html",'<label>{{::options.label}}:</label><table width="240" cellspacing="0" cellpadding="0"><tbody><tr><td ng-repeat="column in columns" ng-style="{\'width\': column.span * 20}">{{column.span}}</td></tr></tbody></table><input type="hidden" data-attribute="{{::path}}" data-type="text" ng-model="value">'),a.put("scripts/components/designer/inspector/editors/customization-options/customization-options.directive.html",'<a href="" ng-click="openCustomizationOptionsEditor()">Choose what can be customized</a>'),a.put("scripts/components/designer/inspector/editors/customization-perspective/customization-perspective.directive.html",'<div><span ng-if="!isOverlayOperationHidden" class="d-button d-button_action-clear d-button_no-padding d-button_large d-icon-left-info_circle is-checked" tooltip-append-to-body="true" tooltip-placement="top" uib-tooltip="Overlay operation description">{{::overlayOperation}}</span> <span class="pull-right d-button d-button_action-clear d-button_no-padding d-button_large d-icon-left-undo is-checked" ng-if="!isRevertActionHidden" ng-click="revertCustomization()">Revert</span></div>'),a.put("scripts/components/designer/inspector/editors/definition-picker/inspector-definition-picker.directive.html",'<label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><input type="text" data-attribute="{{path}}" data-type="text" style="display: none" ng-model="data.value"><rx-definition-picker rx-selected-definition-name="data.value" rx-align="{{::options.align}}" rx-type="{{::options.definitionType}}" rx-disabled="options.attrs.input.disabled"></rx-definition-picker>'),a.put("scripts/components/designer/inspector/editors/expression-field-label/inspector-expression-field-label.directive.html",'<div class="rx-inspector-expression-field-label"><label ng-class="{required: required}">{{label}}:</label><a ng-show="value" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a></div>'),a.put("scripts/components/designer/inspector/editors/expression-node-renderer/expression-node-renderer.directive.html",'<div class="rx-expression-node-renderer" for-expression-editor-label="{{label}}" for-expression-editor-path="{{path}}"><a ng-show="!value" class="rx-new-expression-link" ng-click="openEditor()">Click to build an expression</a><div ng-show="value" class="full-expression" ng-click="openEditor()"></div></div>'),a.put("scripts/components/designer/inspector/editors/get-records-input-map-fields/inspector-get-records-input-map-fields-dialog.directive.html",'<div class="rx-inspector-input-map-fields"><a class="rx-add-remove-input-map-fields-button d-icon-left-plus_circle" ng-if="recordDefinition" ng-click="openInputMapFieldsEditor()">Add/Remove Fields</a><div ng-if="inputMapFields.length" class="rx-parameter-editor-list"><div ng-repeat="field in inputMapFields" class="field-item"><div class="field-content"><div class="field-name">{{field.name}}</div></div><div class="action-buttons"><div class="d-icon-left-cross" ng-click="removeField(field.id)"></div></div></div></div><input type="hidden" data-attribute="{{path}}" data-type="object"></div>'),a.put("scripts/components/designer/inspector/editors/input-map-fields/input-map-fields-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Input Map Fields</h4></div><div class="modal-body rx-input-map-fields-editor"><div class="rx-input-map-fields-editor-wrapper"><div class="rx-input-map-available-fields rx-input-map-fields-editor-panel" layout="column"><h5 class="rx-input-map-available-fields__heading">Available Fields</h5><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input" type="search" placeholder="Search fields"></label></div><div class="rx-input-map-available-fields-list" flex><div class="rx-input-map-available-fields-item" ng-repeat="column in availableColumns | orderBy:[\'-_required\', \'name\'] | filter:valueFilter" dnd-draggable="column" dnd-moved="availableColumns.splice(availableColumns.indexOf(column), 1)"><div class="rx-input-map-available-fields-item__pill" ng-dblclick="addColumn(column)"><span class="rx-input-map-available-fields-item__icon icon d-icon-plus_circle" ng-click="addColumn(column, $event)"></span> <span class="rx-input-map-available-fields-item__label">{{column.name}}</span> <span class="rx-input-map-available-fields-item__required" ng-if="column._required">(required)</span></div></div></div></div><div class="rx-input-map-fields-editor-data rx-input-map-fields-editor-panel" layout="column"><div layout="row" layout-align="space-between center" class="rx-input-map-fields-editor-data-header"><h5>Selected Fields</h5></div><div ng-show="!columns.length">Select Input Map fields from the list on the left</div><div class="dndPlaceholder"></div><div class="selected-columns" dnd-list="columns" flex><div class="selected-column-container" ng-repeat="column in columns" dnd-draggable="column" dnd-moved="columns.splice($index, 1)"><div dnd-nodrag><div class="selected-column clearfix"><div class="left-header-block"><i dnd-handle class="d-icon-left-dots move-element"></i> <span>{{column.name}}</span> <span ng-if="column._required" class="column-required">(required)</span></div><div class="right-header-block"><div class="position-buttons"><i class="d-icon-left-triangle_down" ng-disabled="$last" ng-click="moveDown(column);"></i> <i class="d-icon-left-triangle_up" ng-disabled="$first" ng-click="moveUp(column);"></i></div><div ng-click="removeColumn(column)" ng-hide="column._required" class="remove-button"><i class="d-icon-left-cross"></i> <span class="remove-button-text">Remove</span></div></div></div></div></div></div></div></div><div class="rx-input-map-fields-editor-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/components/designer/inspector/editors/input-map-fields/inspector-input-map-fields.directive.html",'<div class="rx-inspector-input-map-fields"><div ng-if="showRecordDefinitionPicker" class="rx-input-map-record-definition-name"><label class="required">Record Definition Name:</label><rx-definition-picker rx-selected-definition-name="inputMap.recordDefinitionName" rx-type="record" rx-on-definition-selected="onRecordDefinitionSelected"></rx-definition-picker></div><div ng-if="showRecordId" class="rx-parameter-editor-item"><label class="required">Record ID:</label><a ng-show="inputMap.recordID" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a><rx-expression-node-renderer path="recordIdPath" cell="cell" label="\'Record ID\'" value="inputMap.recordID"></rx-expression-node-renderer></div><a class="rx-add-remove-input-map-fields-button d-icon-left-plus_circle" ng-if="recordDefinition" ng-click="openInputMapFieldsEditor()">Add/Remove Input Map Fields</a><div ng-if="inputMapFields.length" class="rx-parameter-editor-list"><div ng-repeat="field in inputMapFields" class="rx-parameter-editor-item"><rx-inspector-expression-field-label label="field.name" value="field.value" cell="cell" path="field._path" required="field._required"></rx-inspector-expression-field-label><rx-expression-node-renderer path="field._path" cell="cell" label="field.name" value="field.value"></rx-expression-node-renderer></div></div><input type="hidden" data-attribute="{{path}}" data-type="object"></div>'),a.put("scripts/components/designer/inspector/editors/inspector-checkbox-multiselect.directive.html",'<div class="rx-inspector-checkbox-multiselect" data-attribute="{{path}}"><label ng-class="options.attrs.label.class">{{options.label}}:</label><div class="inspectorToggleGroup" ng-repeat="group in groups"><div class="selectionItem" ng-repeat="item in group"><rx-dpl-checkbox ng-change="updateSelection(item.value)" ng-model="item.isChecked">{{item.content}}</rx-dpl-checkbox></div></div></div>'),a.put("scripts/components/designer/inspector/editors/inspector-checkbox.directive.html",'<div ng-class="{\'d-checkbox_default\': !options.switcher, \'d-checkbox_switcher\': options.switcher}" class="d-checkbox"><label class="d-checkbox__label"><input class="d-checkbox__input" data-type="toggle" ng-checked="value" type="checkbox" data-attribute="{{path}}"> <span class="d-checkbox__item">{{options.description}}</span></label></div>'),a.put("scripts/components/designer/inspector/editors/inspector-datepicker.directive.html",'<div><label>{{options.label}}:</label><p class="input-group"><input class="rx-input" type="text" uib-datepicker-popup="yyyy-MM-dd" data-attribute="{{path}}" ng-model="value" is-open="opened" datepicker-options="datepickerOptions" show-button-bar="false" ng-disabled="options.attrs.input.disabled"> <span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="open($event)" ng-disabled="options.attrs.button.disabled"><i class="d-icon-calendar"></i></button></span></p></div>'),a.put("scripts/components/designer/inspector/editors/inspector-datetimepicker.directive.html",'<div><label>{{options.label}}:</label><input type="text" style="display: none" data-attribute="{{path}}" data-type="text" ng-model="value" ng-disabled="options.attrs.input.disabled"><p class="input-group"><input class="rx-input" type="text" uib-datepicker-popup="yyyy-MM-dd" datepicker-options="datepickerOptions" show-button-bar="false" ng-model="datetime" is-open="opened" ng-disabled="options.attrs.input.disabled"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)" ng-disabled="options.attrs.button.disabled"><i class="d-icon-calendar"></i></button></span></p><uib-timepicker ng-model="datetime" readonly-input="{{options.attrs.input.disabled}}" ng-disabled="options.attrs.timepicker.disabled" class="d-timepicker d-timepicker__no-label"></uib-timepicker></div>'),a.put("scripts/components/designer/inspector/editors/inspector-expression-field.directive.html",'<div class="rx-inspector-expression-field"><label ng-class="options.attrs.label.class">{{options.label}}:</label><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a> <input type="text" data-attribute="{{path}}" data-type="text" readonly-input="{{options.attrs.input.disabled}}" ng-model="value" ng-disabled="{{options.attrs.input.disabled}}"></div>'),a.put("scripts/components/designer/inspector/editors/inspector-expression-input-select.directive.html",'<div class="rx-inspector-expression-input-select"><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a><label ng-class="options.attrs.label.class">{{options.label}}:</label><input type="text" style="display: none" data-attribute="{{path}}" data-type="text" ng-model="value" ng-disabled="{{options.attrs.input.disabled}}"><ui-select tagging tag-on-blur="true" tagging-tokens="ENTER" ng-model="model.value" ng-disabled="{{options.attrs.input.disabled}}" on-select="onSelect($item)" on-remove="onRemove($item)"><ui-select-match allow-clear="true">{{$select.selected}}</ui-select-match><ui-select-choices repeat="selectOption in selectOptions | filter: $select.search"><div ng-bind-html="selectOption | highlight: $select.search"></div></ui-select-choices></ui-select></div>'),a.put("scripts/components/designer/inspector/editors/inspector-expression-node-field.directive.html",'<div class="rx-inspector-expression-node-field"><label ng-class="options.attrs.label.class"><a ng-show="!options.attrs.input.disabled && value" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><rx-expression-node-renderer cell="cell" path="path" value="value" label="options.label"></rx-expression-node-renderer><input type="text" data-attribute="{{path}}" data-type="text" ng-model="value" style="display:none"></div>'),a.put("scripts/components/designer/inspector/editors/inspector-expression-select.directive.html",'<div class="rx-inspector-expression-select"><label ng-class="options.attrs.label.class">{{options.label}}:</label><a ng-show="!options.attrs.select.disabled" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a><select class="select" data-type="select" data-attribute="{{path}}" readonly-input="{{options.attrs.select.disabled}}" ng-disabled="{{options.attrs.select.disabled}}"><option value="{{option.value}}" ng-repeat="option in options.options" ng-selected="option.value == value">{{option.content}}</option></select></div>'),a.put("scripts/components/designer/inspector/editors/inspector-expression-textarea-field.directive.html",'<div class="rx-inspector-expression-textarea-field"><label ng-class="options.attrs.label.class"><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><textarea data-attribute="{{path}}" data-type="textarea" ng-model="value" ng-disabled="options.attrs.input.disabled"></textarea></div>'),a.put("scripts/components/designer/inspector/editors/inspector-filter-select.directive.html",'<div class="rx-inspector-filter-select"><label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label | translate}}:<rx-search-filter rx-filter-data="filterData" rx-filter-configuration="filterConfiguration"></rx-search-filter></label><input type="text" data-attribute="{{path}}" data-type="text" ng-model="value" style="display:none"></div>'),a.put("scripts/components/designer/inspector/editors/inspector-group-button.directive.html",'<div><label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><ul class="d-button-group d-button-group_primary d-button-group_small"><li class="d-button-group__item" ng-repeat="button in options.options"><a data-test="{{button.content}}" class="d-button-group__btn" ng-model="data.value" uib-btn-radio="button.value">{{button.content}}</a></li></ul></div><input type="text" data-attribute="{{path}}" data-type="text" ng-model="data.value" style="display:none">'),a.put("scripts/components/designer/inspector/editors/inspector-input-select.directive.html",'<div><label ng-class="options.attrs.label.class">{{options.label}}:</label><input type="text" style="display: none" data-attribute="{{path}}" data-type="text" ng-model="value" ng-disabled="{{options.attrs.input.disabled}}"><ui-select tagging tag-on-blur="true" tagging-tokens="ENTER" ng-model="model.value" ng-disabled="{{options.attrs.input.disabled}}" on-select="onSelect($item)" on-remove="onRemove($item)"><ui-select-match>{{$select.selected}}</ui-select-match><ui-select-choices repeat="selectOption in selectOptions | filter: $select.search"><div ng-bind-html="selectOption | highlight: $select.search"></div></ui-select-choices></ui-select></div>'),a.put("scripts/components/designer/inspector/editors/inspector-multiselect-dropdown.directive.html",'<div class="d-dropdown d-js-dropdown"><div class="d-dropdown__trigger d-icon-left-plus_circle" data-placeholder="Filter" style="width: 200px" ng-click="dropdownToggle()">Add columns</div><div class="d-dropdown__menu"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><span class="d-textfield__item">Type to filter field list</span> <input type="search" placeholder="Type to filter field list" class="d-textfield__input" ng-model="search"></label></div><div class="options-container"><div class="d-checkbox d-checkbox_default" ng-repeat="selectOption in selectOptions | filter:search | orderBy:\'content\' "><label><input class="d-checkbox__input" type="checkbox" ng-model="selectOption.checked"> <span class="d-checkbox__label d-checkbox__item">{{selectOption.content}}</span></label></div></div></div></div><div ng-repeat="selectOption in selectOptions | filter:{checked:true}" class="selected-options">{{selectOption.content}}</div>'),a.put("scripts/components/designer/inspector/editors/inspector-number-input.directive.html",'<label>{{options.label}}:</label><input type="number" data-attribute="{{path}}" data-type="number" min="{{attrs.min || \'\'}}" max="{{attrs.max || \'\'}}" pattern="{{attrs.pattern || \'\'}}" ng-model="value" ng-change="onChange(value)" ng-blur="onBlur(value)" ng-disabled="{{options.attrs.input.disabled}}">'),a.put("scripts/components/designer/inspector/editors/inspector-optional-expression.directive.html",'<div class="rx-inspector-optional-expression"><label>{{options.label}}</label><div class="rx-inspector-optional-expression-group"><div class="toggle"><input ng-model="state.checkbox" type="checkbox"> <span><i></i></span></div><div class="rx-inspector-optional-expression-select" ng-if="state.checkbox"><select class="select" data-type="select" ng-model="state.select"><option value="{{option.value}}" ng-repeat="option in selectConfig.options track by option.value" ng-selected="option.value == state.select">{{option.content}}</option></select></div></div><div class="rx-inspector-optional-expression-input" ng-show="state.select == SELECT_STATE.CONDITIONAL"><label>Condition</label><rx-expression-node-renderer cell="cell" path="path" label="options.label" value="value"></rx-expression-node-renderer><input ng-model-options="{updateOn: \'blur\'}" type="text" data-attribute="{{path}}" class="text" ng-model="value" style="display: none"></div></div>'),a.put("scripts/components/designer/inspector/editors/inspector-optional-select.directive.html",'<div class="rx-inspector-optional-select"><label>{{options.label}}:</label><div class="rx-inspector-optional-select-group"><div class="toggle"><input ng-model="state.checkbox" type="checkbox"> <span><i></i></span></div><div class="rx-inspector-optional-select-options" ng-if="state.checkbox"><select class="select" data-type="select" ng-model="state.select"><option value="{{option.value}}" ng-repeat="option in options.options track by option.value" ng-selected="option.value == state.select">{{option.content}}</option></select></div></div><input style="display: none" type="text" data-attribute="{{path}}" class="text" ng-model="value"></div>'),
a.put("scripts/components/designer/inspector/editors/inspector-permission-editor.directive.html",'<div class="rx-permission-editor"><label ng-class="options.attrs.label.class">{{options.label | translate}}: <a class="d-button_action d-icon-left-pencil is-checked pull-right" ng-hide="isPermissionEditDisabled || options.isReadOnly" ng-click="openPermissionEditor()">{{\'com.bmc.arsys.rx.standardlib.common.edit.label\' | translate}}</a></label><div class="clearfix" ng-if="effectivePermissions.length === 0"><h6>{{\'com.bmc.arsys.rx.standardlib.components.designer.inspector.editors.permission-editor.noneSet.label\' | translate}}</h6></div><div class="clearfix"><div ng-repeat="permission in effectivePermissions" class="rx-permission-editor-item"><span class="rx-permitted-group-name">{{::permission.ownerName}}</span> <span class="d-tag pull-right" ng-if="permission.type">{{::permission.type}}</span></div></div></div>'),a.put("scripts/components/designer/inspector/editors/inspector-read-only-text.directive.html",'<div ng-switch="options.inputType" class="rx-inspector-read-only-text"><label ng-class="options.attrs.label.class">{{options.label}}:</label><input type="text" ng-switch-default ng-model="displayValue" disabled="disabled"><textarea class="textarea" ng-switch-when="textarea" ng-model="displayValue" disabled="disabled"></textarea></div>'),a.put("scripts/components/designer/inspector/editors/inspector-record-instance-sample-data.directive.html",'<div><label class="icon teal" ng-class="{\'d-icon-check_circle\': value, \'d-icon-circle_o\': !value}" ng-click="toggle()">{{\' \' + options.label}}</label><input type="checkbox" data-type="toggle" data-attribute="{{path}}" ng-model="value" class="hidden"></div>'),a.put("scripts/components/designer/inspector/editors/inspector-select.directive.html",'<div><label>{{options.label}}:</label><select ng-options="item for item in options.options track by item" class="select" data-type="select" data-attribute="{{path}}" ng-model="value"></select></div>'),a.put("scripts/components/designer/inspector/editors/inspector-tag-input.directive.html",'<div><input type="text" data-attribute="{{path}}" data-type="text" ng-model="value" style="display:none"><label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}<tags-input ng-model="tags" placeholder="{{options.placeholderText}}" display-property="name" replace-spaces-with-dashes="false"><auto-complete source="loadOptions($query)" min-length="0" load-on-focus="true" load-on-empty="true"></auto-complete></tags-input></label></div>'),a.put("scripts/components/designer/inspector/editors/inspector-text-message.directive.html",'<span data-attribute="{{path}}">{{options.value}}</span>'),a.put("scripts/components/designer/inspector/editors/inspector-timepicker.directive.html",'<div><label>{{options.label}}:</label><input type="text" style="display: none" data-attribute="{{path}}" data-type="text" ng-model="value" ng-disabled="options.attrs.input.disabled"><uib-timepicker ng-model="date" class="d-timepicker d-timepicker__no-label" readonly-input="{{options.attrs.input.disabled}}" ng-disabled="options.attrs.timepicker.disabled"></uib-timepicker><button class="btn btn-default btn-sm rx-inspector-timepicker__clear" type="button" ng-click="clearTime($event)">Clear</button></div>'),a.put("scripts/components/designer/inspector/editors/inspector-timer-field.directive.html",'<div class="rx-inspector-timer-field"><div ng-show="!options.attrs.input.disabled" class="d-dropdown d-js-dropdown pull-right" data-model="modelMapping"><div class="d-dropdown__trigger d-button d-button_action d-button_large d-icon-left-pencil d-icon-right-angle_down" data-placeholder="Edit">Edit</div><div class="d-dropdown__menu"><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item"><a ng-click="openIntervalTimerEditor()" class="d-dropdown__menu-options-item-option" data-value="IntervalTimer">Interval Timer</a></li><li class="d-dropdown__menu-options-item"><a ng-click="openTimeExpressionEditor()" class="d-dropdown__menu-options-item-option" data-value="TimeExpression">Time Expression</a></li></ul></div></div><input type="hidden" ng-model="value" data-attribute="{{path}}"><rx-inspector-read-only-text></rx-inspector-read-only-text></div>'),a.put("scripts/components/designer/inspector/editors/process-parameters/inspector-process-parameter-editor.directive.html",'<div class="rx-parameters-editor"><a class="d-icon-left-plus_circle" ng-click="openParameterEditor()">Add/Remove Parameters</a><div class="clearfix"><div ng-if="contextKeyOptions.length" class="rx-parameter-context-key rx-inspector-tooltip-field"><label class="rx-parameter-context-key-label"><rx-tooltip tooltip="\'A Context Key is used to identify process instances with a meaningful domain label. A text input parameter or a record instance input parameter may serve as a key, if marked as required.\'"></rx-tooltip>Context Key:</label><select class="select" ng-model="contextKeyParam" ng-options="contextKey.name as contextKey.name for contextKey in contextKeyOptions" ng-change="onContextKeyChange(contextKeyParam)"><option value=""></option></select></div><div ng-if="inputParams.length" class="rx-parameter-editor-list"><div class="rx-parameter-editor-list-header" ng-init="inputParamsIsCollapsed = false" ng-click="inputParamsIsCollapsed = !inputParamsIsCollapsed" ng-class="{\'d-icon-left-angle_right\' : inputParamsIsCollapsed, \'d-icon-left-angle_down\' : !inputParamsIsCollapsed}">Input Parameters</div><div uib-collapse="inputParamsIsCollapsed"><div ng-repeat="parameter in inputParams" class="rx-parameter-editor-item"><button ng-click="removeParameter(parameter, \'inputParams\')" class="btn-list d-icon-cross" type="button"></button> <button ng-click="openParameterEditor(parameter)" class="btn-list d-icon-pencil" type="button"></button> <button ng-if="parameter.name === contextKeyParam" tooltip-placement="bottom" uib-tooltip="Context Key" class="btn-list d-icon-monitor_key" type="button"></button><div><i class="d-icon-arrow_right_square_input pull-left"></i><div class="rx-parameter-name">{{parameter.name}}</div><div class="rx-parameter-type">{{parameter.resourceType|resourceType}} {{parameter.required ? \' | Required\' : \'\'}}</div></div></div></div></div><div ng-if="outputParams.length" class="rx-parameter-editor-list"><div class="rx-parameter-editor-list-header" ng-init="outputParamsIsCollapsed = false" ng-click="outputParamsIsCollapsed = !outputParamsIsCollapsed" ng-class="{\'d-icon-left-angle_right\' : outputParamsIsCollapsed, \'d-icon-left-angle_down\' : !outputParamsIsCollapsed}">Output Parameters</div><div uib-collapse="outputParamsIsCollapsed"><div ng-repeat="parameter in outputParams" class="rx-parameter-editor-item"><button ng-click="removeParameter(parameter, \'outputParams\')" class="btn-list d-icon-cross" type="button"></button> <button ng-click="openParameterEditor(parameter)" class="btn-list d-icon-pencil" type="button"></button><div><i class="d-icon-arrow_right_square_o pull-left"></i><div class="rx-parameter-name">{{parameter.name}}</div><div class="rx-parameter-type">{{parameter.resourceType|resourceType}}</div></div></div></div></div></div></div>'),a.put("scripts/components/designer/inspector/editors/process-parameters/process-parameter-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Parameters</h4></div><form name="ProcessParameterEditorForm" novalidate><div class="modal-body"><div class="rx-record-grid-column-editor-wrapper"><div layout="row" layout-align="space-between center"><a class="d-icon-left-plus_circle" ng-click="addProcessParameter()">Add Parameter</a><div class="expand-collapse-buttons"><button class="d-button d-button_secondary d-button_small" ng-click="expandAll()">Expand All</button> <button class="d-button d-button_secondary d-button_small" ng-click="collapseAll()">Collapse All</button></div></div></div><div class="rx-process-parameters-container"><div ng-if="processParameters.length" class="process-parameters-list"><div ng-repeat="processParameter in processParameters" class="process-parameter-item" ng-class="{\'has-error\': processParameter.isCollapsed && ProcessParameterEditorForm[\'parameter-name-\' + (processParameter.newId || processParameter.id)].$invalid}"><div class="process-parameter-item-header" ng-click="processParameter.isCollapsed = !processParameter.isCollapsed"><div class="left-header-block">{{processParameter.name || (processParameter.lastUpdateTime ? \'\' : \'New Parameter\')}}</div><div class="right-header-block"><div ng-click="removeProcessParameter($event, $index)" class="remove-button"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : processParameter.isCollapsed , \'d-icon-right-angle_up\' : !processParameter.isCollapsed}"></div></div></div><div uib-collapse="processParameter.isCollapsed" class="d-collapse-panel collapse-content"><div class="row"><div class="col-md-6 d-textfield_required d-textfield"><label class="d-textfield__item">Name</label><input type="text" name="parameter-name-{{(processParameter.newId || processParameter.id)}}" class="rx-input" required ng-model="processParameter.name" ng-blur="checkDuplicate(\'name\')" maxlength="254"><p ng-if="!processParameter.name" class="d-error">Name is required.</p><p class="d-error" ng-if="processParameter.name && ProcessParameterEditorForm[\'parameter-name-\' + (processParameter.newId || processParameter.id)].$error.duplicate">Name must be unique.</p></div><div class="col-md-6 d-textfield"><label class="d-textfield__item"><rx-tooltip tooltip="{text: \'A Parameter ID uniquely identifies a process parameter. It must contain integers only.\', appendToBody: false}"></rx-tooltip>Parameter ID</label><input type="number" name="parameter-id-{{(processParameter.newId || processParameter.id)}}" class="rx-input" ng-model="processParameter.id" ng-blur="validateParameterId(\'id\', processParameter)" ng-disabled="processParameter.lastUpdateTime"><p class="d-error" ng-if="processParameter.id && ProcessParameterEditorForm[\'parameter-id-\' + (processParameter.newId || processParameter.id)].$error.range">Parameter ID must be greater than 1000.</p><p class="d-error" ng-if="processParameter.id && ProcessParameterEditorForm[\'parameter-id-\' + (processParameter.newId || processParameter.id)].$error.duplicate">Parameter ID must be unique.</p></div></div><div class="row"><div class="col-md-6"><div class="d-textfield_required d-textfield"><label class="d-textfield__item"><rx-tooltip tooltip="{text: \'Parameters are process input-output interfaces. An Input Parameter receives data from process callers. An Output Parameter returns data to the process callers.\', appendToBody: false}"></rx-tooltip>Parameter Type</label><div class="row d-checkbox d-checkbox_default"><div class="col-md-4"><rx-dpl-checkbox ng-model="processParameter.isInput" ng-change="parameterTypeChanged(processParameter)">Input</rx-dpl-checkbox></div><div class="col-md-8"><rx-dpl-checkbox ng-model="processParameter.required" ng-disabled="!processParameter.isInput">Input Required</rx-dpl-checkbox></div></div><div class="d-checkbox d-checkbox_default"><rx-dpl-checkbox ng-model="processParameter.isOutput" ng-change="parameterTypeChanged(processParameter)">Output</rx-dpl-checkbox></div><input type="hidden" name="parameter-type-{{(processParameter.newId || processParameter.id)}}" ng-model="processParameter.type"><p ng-if="ProcessParameterEditorForm[\'parameter-type-\' + (processParameter.newId || processParameter.id)].$error.required" class="d-error">Parameter Type is required.</p></div><div class="d-textfield_required d-textfield"><label class="d-textfield__item">Data Type</label><select ng-model="processParameter.resourceType" ng-options="dataType.value as dataType.content for dataType in inputDataTypes" ng-change="onResourceTypeChange(processParameter)" ng-disabled="processParameter.lastUpdateTime" required class="select"></select><p ng-if="!processParameter.resourceType" class="d-error">Data Type is required.</p></div></div><div class="col-md-6 d-textfield"><label class="d-textfield__item">Description</label><textarea ng-model="processParameter.description" class="textarea"></textarea></div></div><div class="row"><div class="col-md-6"><div ng-if="processParameter.defaultValueType && processParameter.defaultValueType === \'select\'" class="d-textfield d-textfield_required rx-selection"><a ng-click="openSelectOptionsEditor(processParameter)" class="pull-right d-icon-left-pencil">Edit</a><label class="d-textfield__item">Options</label><div class="field-options">{{processParameter.optionNamesById|selectionFieldOptions}}</div><input type="hidden" name="parameter-optionNamesById-{{(processParameter.newId || processParameter.id)}}" required ng-model="processParameter.optionNamesById"><p ng-if="!processParameter.optionNamesById && ProcessParameterEditorForm[\'parameter-optionNamesById-\' + (processParameter.newId || processParameter.id)].$error.required" class="d-error">Options are required.</p></div><div ng-if="processParameter.defaultValueType && processParameter.defaultValueType !== \'recordInstance\'" class="d-textfield"><label class="d-textfield__item">Default Value</label><input type="text" name="parameter-defaultValue-{{(processParameter.newId || processParameter.id)}}" class="rx-input" ng-model="processParameter.defaultValue" ng-if="processParameter.defaultValueType === \'text\'"> <input type="number" name="parameter-defaultValue-{{(processParameter.newId || processParameter.id)}}" class="rx-input" ng-model="processParameter.defaultValue" ng-if="processParameter.defaultValueType === \'number\'"><select ng-model="processParameter.defaultValue" ng-if="isObject(processParameter.defaultValueType) && processParameter.defaultValueType.type === \'select\'" class="select"><option ng-repeat="option in processParameter.defaultValueType.options" value="{{option.value}}">{{option.content}}</option></select><select ng-model="processParameter.defaultValue" ng-if="processParameter.defaultValueType === \'select\'" ng-options="key as value for (key, value) in processParameter.optionNamesById" class="select"></select><p ng-if="processParameter.defaultValueType === \'rx-inspector-datepicker\' || processParameter.defaultValueType === \'rx-inspector-datetimepicker\'" class="input-group"><input type="text" class="rx-input" uib-datepicker-popup="yyyy-MM-dd" ng-model="processParameter.defaultValue" is-open="processParameter.datepickerOpened" datepicker-options="datepickerOptions" show-button-bar="false"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event, processParameter)"><i class="d-icon-calendar"></i></button></span></p><uib-timepicker ng-if="processParameter.defaultValueType === \'rx-inspector-timepicker\' || processParameter.defaultValueType === \'rx-inspector-datetimepicker\'" ng-model="processParameter.defaultValue" class="d-timepicker d-timepicker__no-label"></uib-timepicker></div><div ng-if="processParameter.defaultValueType === \'recordInstance\'" class="d-textfield d-textfield_required"><label class="d-textfield__item">{{processParameter.useSampleData ? \'Sample\' : \'\'}} Record Definition</label><rx-definition-picker rx-selected-definition-name="processParameter.recordDefinitionName" rx-type="record"></rx-definition-picker><input type="hidden" name="record-definition-{{(processParameter.newId || processParameter.id)}}" ng-model="processParameter.recordDefinitionName" required><p ng-if="!processParameter.recordDefinitionName" class="d-error">Record Definition is required.</p><div class="field-checkbox"><rx-dpl-checkbox ng-model="processParameter.useSampleData">Use Sample Data</rx-dpl-checkbox></div></div></div></div></div></div></div><div ng-if="!processParameters.length" class="process-parameters-empty">Click \'Add Parameter\' to add a new process Input or Output Parameter.</div></div><div class="rx-process-parameters-editor-action-buttons"><button type="submit" ng-disabled="ProcessParameterEditorForm.$invalid" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div></form>'),a.put("scripts/components/designer/inspector/editors/schedule-timer/inspector-schedule-timer-field.directive.html",'<div class="rx-inspector-expression-textarea-field"><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openDialog()">Edit</a> <input type="hidden" ng-model="value" data-attribute="{{path}}"><rx-inspector-read-only-text></rx-inspector-read-only-text></div>'),a.put("scripts/components/designer/inspector/editors/schedule-timer/schedule-timer-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Edit Schedule Definition</h4></div><div class="modal-body rx-schedule-dialog-body"><div class="row"><div class="col-md-7"><div class="rx-scheduler-title"><span><label>Month Days</label></span> <span class="pull-right"><label class="rx-button-all" ng-click="selectAllDates()">All</label><label class="rx-button-all left-margin" ng-click="resetSelection(\'monthDays\')">None</label></span></div><table class="table rx-month-days"><tr ng-repeat="dates in ::calendarDates track by $index"><td ng-repeat="date in ::dates track by $index" class="" ng-click=" !(date < 32) || updateScheduleDefinition(\'monthDays\', date)" ng-class="{\'active-date\': isDateSelected(date), \'disable-date\': date > 31}"><small ng-if="date < 32">{{date}}</small></td></tr></table></div><div class="col-md-5"><div class="rx-scheduler-title"><span><label>Week Days</label></span> <span class="pull-right"><label class="rx-button-all" ng-click="selectAllDays()">All</label><label class="rx-button-all left-margin" ng-click="resetSelection(\'weekDays\')">None</label></span></div><div><div class="list-group rx-week-days col-sm-6" ng-repeat="days in ::weekDays track by $index" ng-class="{\'hide-left-border\' : $last }"><div class="list-group-item" ng-repeat="day in ::days track by $index" ng-click="!day || updateScheduleDefinition(\'weekDays\', day)" ng-class="{\'active-date\': isDaySelected(day),\'disable-day\': !day }"><small ng-if="day">{{day.value}}</small></div></div></div></div></div><div class="row"><div class="col-md-12 rx-scheduler-title"><span><label>Hours</label></span> <span class="pull-right"><label class="rx-button-all" ng-click="selectAllHours()">All</label><label class="rx-button-all left-margin" ng-click="resetSelection(\'hours\')">None</label></span></div><div class="col-md-12"><table class="table rx-month-days"><tr><th class="period">AM</th><td ng-repeat="hour in ::hours track by $index" ng-click="updateScheduleDefinition(\'hours\', hour + \':\' + \'AM\' )" ng-class="{\'active-date\': isHourSelected(hour , \'AM\')}">{{hour}}</td></tr><tr><th class="period">PM</th><td ng-repeat="hour in ::hours track by $index" ng-click="updateScheduleDefinition(\'hours\', hour + \':\' + \'PM\' )" ng-class="{\'active-date\': isHourSelected(hour, \'PM\')}">{{hour}}</td></tr></table></div></div><div class="row"><form novalidate><div><label class="col-md-5 pull-left">Minutes After the Hour (00-59):</label><div class="col-md-2"><input type="number" ng-model="scheduleDefinition.minute" name="" class="rx-input" min="0" max="59" step="1"></div></div></form></div><div class="row"><div class="col-md-12"><label class="rx-scheduler-title"><strong>Schedule Definition</strong></label><div class="rx-schedule-definition-preview">{{preview}}</div></div></div><div class="rx-schedule-timer-dialog-action-buttons"><button type="button" type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!scheduleDefinition.monthDays.length && !scheduleDefinition.weekDays.length">OK</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/components/designer/inspector/editors/select-expression-dropdown/inspector-select-expression-dropdown.html",'<div class="rx-inspector-select-expression-dropdown"><div class="dropdown" uib-dropdown=""><a uib-dropdown-toggle="" class="d-dropdown__trigger d-icon-right-angle_down dropdown-toggle edit-link" aria-haspopup="true" aria-expanded="false">{{cell.selectExpressionDropdownValue}}</a><ul uib-dropdown-menu="" role="menu" class="dropdown-menu"><li role="presentation" ng-repeat="item in menuOptions"><a role="menuitem" ng-click="validateSelection(item.value)" ng-bind="getDisplayValue(item.displayValue)"></a></li></ul></div><label ng-class="options.attrs.label.class">{{options.label}}:</label><input type="text" style="display: none" data-attribute="{{path}}" data-type="text" ng-model="value"><div ng-switch="cell.selectExpressionDropdownValue"><rx-definition-picker rx-selected-definition-name="$parent.value" rx-type="{{::options.definitionType}}" rx-disabled="options.attrs.input.disabled" ng-switch-when="Select"></rx-definition-picker><rx-expression-node-renderer ng-switch-when="Expression" path="path" cell="cell" value="$parent.value"></rx-expression-node-renderer></div></div>'),a.put("scripts/components/designer/inspector/editors/select-field/inspector-select.directive.html",'<label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><select data-type="select" class="select" data-attribute="{{path}}" ng-disabled="options.attrs.input.disabled"><option ng-repeat="option in options.options track by option.value" value="{{option.value}}" ng-selected="option.value == defaultValue.value">{{option.content}}</option></select>'),a.put("scripts/components/designer/inspector/editors/select-with-validation-messages/inspector-select-with-validation-messages.template.html",'<div class="rx-inspector-select-with-validation-messages"><label ng-class="options.attrs.label.class">{{options.label}}:</label><select ng-options="value.content for value in selectOptions" ng-change="onSelect()" ng-model="model" ng-disabled="isDisabled()" class="select"></select></div><div class="rx-inspector-select-with-validation-messages__validation-issue" ng-repeat="issue in cell.validationIssues"><span ng-class="issue.type" class="rx-inspector-select-with-validation-messages__validation-issue-message">{{issue.message}}</span> <a ng-show="issue.propertyName" ng-click="correctValidationIssue(issue)" class="rx-inspector-select-with-validation-messages__validation-issue-action">Correct this problem</a></div><!-- This input below is here because rappid\'s logic of hiding/showing with `when` clause\n is dependent on the inputs with data-attribute --><!-- TODO-mkoretsk: remove it when rappid.js removes dependency on the inputs with data-attribute --><input type="hidden" data-attribute="{{path}}">'),a.put("scripts/components/designer/inspector/editors/selection-field/inspector-selection-field-editor.directive.html",'<div class="inspector-selection-field-options"><label ng-class="options.attrs.label.class">{{options.label}}:</label><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openEditor()">Edit</a></div><div class="inspector-selection-field-options-label">{{optionsLabels}}</div><div class="inspector-selection-field-options-defaultValue"><label>Default Value</label><select class="rx-input" data-attribute="{{defaultValuePath}}" ng-disabled="options.attrs.input.disabled"><option value="{{option.value}}" ng-repeat="option in selectionOptions" ng-selected="option.value == defaultValue">{{option.content}}</option></select></div>'),a.put("scripts/components/designer/inspector/editors/selection-field/selection-field-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Selection Options</h4></div><form name="SelectionFieldEditorForm" novalidate><div class="modal-body rx-selection-field-editor"><div class="rx-record-grid-column-editor-wrapper"><div layout="row" layout-align="space-between center" class="rx-selection-field-editor-data-header"><a class="d-icon-left-plus_circle" ng-click="addSelectionField()">Add Option</a><div class="expand-collapse-buttons"><button class="d-button d-button_secondary d-button_small" ng-click="expandAll()">Expand All</button> <button class="d-button d-button_secondary d-button_small" ng-click="collapseAll()">Collapse All</button></div></div><div class="selection-fields"><div class="selection-field-container" ng-repeat="selectionField in selectionFields.value"><div class="button-open-selection-field" ng-click="selectionField.isCollapsed = !selectionField.isCollapsed"><div class="left-header-block" title="{{selectionField.displayValue}}">{{selectionField.displayValue}}</div><div class="right-header-block"><div ng-click="removeSelectionField($index)" class="remove-button"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : selectionField.isCollapsed , \'d-icon-right-angle_up\' : !selectionField.isCollapsed}"></div></div></div><div uib-collapse="selectionField.isCollapsed" class="d-collapse-panel collapse-content"><div class="rx-selection-field-editor-text-fields d-textfield_required d-textfield"><label class="d-textfield__item">Name</label><input name="{{\'displayValue\' + selectionField.inputName}}" type="text" class="rx-input" required maxlength="254" ng-model="selectionField.displayValue" ng-model-options="{updateOn: \'default blur\', debounce: {default: 500, blur: 0}}" ng-change="checkDisplayValueDuplicate()"><p class="d-error" ng-init="nameError = SelectionFieldEditorForm[\'displayValue\' + selectionField.inputName].$error"><span ng-if="nameError.duplicate">Duplicate Name</span> <span ng-if="nameError.required">Missing Name</span> &nbsp;</p></div><div class="rx-selection-field-editor-text-fields d-textfield_required d-textfield"><label class="d-textfield__item">Integer Value</label><input class="rx-input" name="{{\'integerValue\' + selectionField.inputName}}" type="number" required pattern="\\d+" min="0" max="2147483647" ng-model="selectionField.integerValue" ng-model-options="{updateOn: \'default blur\', debounce: {default: 500, blur: 0}}" ng-change="checkIntegerValueDuplicate()"><p class="d-error" ng-init="valError = SelectionFieldEditorForm[\'integerValue\' + selectionField.inputName].$error"><span ng-if="valError.duplicate && !valError.required && !valError.pattern && !valError.number">Duplicate Integer Value</span> <span ng-if="valError.required">Missing Integer Value</span> <span ng-if="valError.pattern || valError.max || valError.min || valError.number">Integer Value must be an integer number within the range of 0 to 2147483647</span> &nbsp;</p></div></div></div></div></div></div><div class="rx-selection-field-editor-action-buttons"><button type="submit" ng-disabled="SelectionFieldEditorForm.$invalid" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></form>'),a.put("scripts/components/designer/inspector/editors/text-field/inspector-text.directive.html",'<label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><input data-type="text" ng-model="value" class="text" data-attribute="{{path}}" ng-disabled="options.attrs.input.readonly">'),a.put("scripts/components/designer/inspector/editors/toggle-field/inspector-toggle-field.directive.html",'<label><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{::options.label}}:</label><div class="toggle"><input ng-model="value" ng-disabled="options.attrs.toggle.disabled" type="checkbox" data-type="toggle" data-attribute="{{::path}}"> <span><i></i></span></div>'),a.put("scripts/components/designer/inspector/editors/tooltip-field/inspector-tooltip-field.directive.html",'<div class="rx-inspector-tooltip-field" ng-switch="options.inputType"><label ng-class="options.attrs.label.class"><rx-tooltip tooltip="options.tooltip"></rx-tooltip>{{options.label}}:</label><input ng-switch-when="number" type="number" data-attribute="{{path}}" data-type="number" min="{{options.min}}" max="{{options.max}}" ng-model="value" ng-class="options.inputType" ng-disabled="options.attrs.input.disabled"> <input ng-switch-when="text" type="text" data-attribute="{{path}}" data-type="text" ng-model="value" ng-class="options.inputType" ng-disabled="options.attrs.input.disabled"></div>'),a.put("scripts/components/designer/inspector/editors/wait-for-approval/inspector-wait-for-approval-field.directive.html",'<div class="rx-inspector-wait-for-approval-field"><div ng-show="!options.attrs.input.disabled" class="d-dropdown d-js-dropdown pull-right" data-model="modelMapping"><div class="d-dropdown__trigger d-button d-button_action d-icon-left-pencil d-icon-right-angle_down" data-placeholder="Action">Action</div><div class="d-dropdown__menu"><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item"><a ng-click="openDialog()" class="d-button d-button_action d-icon-left-folder_open_o is-checked pull-right ng-binding" data-value="selectWFAD">Select</a></li><li class="d-dropdown__menu-options-item"><a ng-disable="{{cell.prop(\'rxData/inputMap/Approval Process Name\')}}" ng-click="openWaitForApprovalEditor()" class="d-button d-button_action d-icon-left-pencil is-checked pull-right ng-binding" data-value="editWFAD">Edit</a></li></ul></div></div></div>'),a.put("scripts/components/designer/inspector/editors/wait-for-approval/wait-for-approval-definition-dialog.html",'<div class="manage-wait-for-approval-definition-panel"><div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">×</button><h4 class="modal-title">{{title}} Wait for Approval Definition</h4></div><form ng-submit="submitForm()" novalidate name="waitForApprovalForm"><div class="modal-body"><div class="row"><div class="col-md-4"><div class="d-textfield d-textfield_large d-textfield_required"><label class="d-textfield__label"><span class="d-textfield__item">WFA Definition Name</span> <input class="d-textfield__input" ng-disabled="disableProcessName" type="text" placeholder="Enter Definition Name" name="wfaDefinitionName" ng-model="waitForApprovalDefinition.processName" required ng-maxlength="254"><p class="d-error d-error_pattern" ng-show="waitForApprovalDefinition.processName.$error.maxlength">Maximum of 254 characters</p></label></div><div class="d-textfield d-textfield_large d-textfield_required"><label class="d-textfield__label"><span class="d-textfield__item">Completion Criteria</span><select class="d-textfield__input" ng-model="waitForApprovalDefinition.multipleApprovers" required><option value="" ng-selected ng-disabled>Select Completion Criteria</option><option value="0">One Can Approve</option><option value="1">All Must Approve</option></select></label></div><div class="d-textfield d-textfield_large d-textfield_required"><label class="d-textfield__label"><span class="d-textfield__item">Record Definition</span> <input class="d-textfield__input" type="text" name="wfaDefinitionName" required ng-model="waitForApprovalDefinition.approvalForm" disabled="disabled"></label></div><div class="d-textfield d-textfield_large"><label class="d-textfield__label"><span class="d-textfield__item">Require Justification on Rejection</span><select class="d-textfield__input" ng-model="waitForApprovalDefinition.justificationRequired"><option value="" ng-selected ng-disabled>Select Completion Criteria</option><option value="0">No</option><option value="1">Yes</option></select></label></div><div class="d-textfield d-textfield_large"><label class="d-textfield__label"><span class="d-textfield__item">Justification Field</span><select class="d-textfield__input" ng-model="waitForApprovalDefinition.justificationRequiredField"><option value="" ng-selected ng-disabled>Select Field</option><option ng-repeat="field in availableFieldList | orderBy:field.label" value="{{\'$\' + field.label + \'$\'}}">{{field.label}}</option></select></label></div></div><div class="col-md-8"><div class="row"><div class="col-md-6"><div class="d-textfield d-textfield_large d-textfield_required"><label class="d-textfield__label"><span class="d-textfield__item">Select Approvers From</span><select class="d-textfield__input" ng-model="approverType" ng-change="updateAvailableApproverOption()" required><option value="0" ng-hide="isEdit && approverType ===\'2\'">Approval Roles</option><option value="1" ng-hide="isEdit && approverType ===\'2\'">Individual Approvers</option><option value="2" ng-hide="isEdit && approverType !==\'2\'">Field Identifying Approval</option></select></label></div></div></div><div class="row"><div class="col-md-5"><div class="box"><span class="d-textfield__item">Available Approvers</span><div class="content"><div class="fixed-search"><label class="d-textfield__label d-icon-left-search"><input class="d-textfield__input" type="search" ng-model="searchApprovers" placeholder="Search"></label></div><ul class="approval-list-container"><li ng-repeat="approver in availableOptionList | filter:{label:searchApprovers} |  orderBy: \'+approver.label\' track by $index" ng-click="setSelectedApprover(approver)" ng-class="{selected: approver.selected}">{{approver.label}}</li></ul></div></div></div><div class="col-md-2"><div class="actionButton"><ul class="approval-list-container"><li><a ng-click="moveLeftToRight()" ng-disabled="currentSelectedApprovers.length === 0" class="d-button d-button_secondary leftRightButton"><span class="d-icon-angle_right"></span></a></li></ul></div></div><div class="col-md-5"><div class="box"><span class="d-textfield__item">Selected Approvers</span><div class="content"><ul class="approval-list-container approval-list-container-selected align-span-right"><li ng-repeat="approver in finalApproversList track by $index" ng-class="{finalised: approver.selected}">{{approver.label}}<span class="d-icon-cross_circle" ng-click="removeOption(approver);"></span></li></ul></div></div></div></div></div></div></div><div class="modal-footer"><div class="controls"><button class="d-button d-button_primary d-button_large" type="submit" ng-disabled="waitForApprovalForm.$invalid || finalApproversList.length ===0">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div></form></div>'),
a.put("scripts/components/designer/inspector/editors/wait-for-approval/wait-for-approval-dialog.html",'<div class="modal-header dialog-header-confirm" ng-if="displayGrid"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Wait for Approval (WFA) Definitions</h4></div><div class="modal-body rx-timer-editor" ng-if="displayGrid"><div class="row"><div class="d-button d-button_large d-button_action-clear"><a class="d-icon-left-plus_circle" type="button" ng-click="createWaitForApprovalDefinition()">New</a></div><rx-record-grid rx-configuration="recordGridConfiguration"></rx-record-grid></div><div class="rx-wait-for-approval-dialog-action-buttons"><button type="button" type="button" class="d-button d-button_primary d-button_large" ng-disabled="!isRowSelected" ng-click="ok()">Use Selected Definition</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/components/designer/stencil/designer-stencil-settings.directive.html",'<h3 class="group-label">Manage Palette<!--a class="__icon-right-info_circle" popover-placement="bottom" popover-title="About Pallette Management"\n       popover="Select a process element checkbox to make the process element visible on the primary palette. Select the star to add it to your favorites">&nbsp;</a--></h3><div class="show-all"><rx-multi-checkbox model="checkboxes" watch-prop="default" callback="changeGroupState" custom-view="defaultCustomView"></rx-multi-checkbox><rx-multi-checkbox model="favorites" watch-prop="favorite" callback="changeGroupState" custom-view="favoriteCustomView"></rx-multi-checkbox><span>Show all</span></div><treecontrol class="tree-classic" tree-model="stencilConfiguration" expanded-nodes="expandedNodes" options="treeOptions"><div class="rx-crop-text" title="{{node.label}}" ng-class="{ \'rx-tree-node-parent\': !node.children, \'rx-tree-node-leaf\': node.children }"><div ng-if="node.children" class="icon rx-tree-node-collapsed d-icon-triangle_right"></div><div ng-if="node.children" class="icon rx-tree-node-expanded d-icon-triangle_down"></div><rx-multi-checkbox ng-if="node.children" model="checkboxes[node.label]" children="node.children" watch-prop="default" callback="changeGroupState" class="default-checkbox" custom-view="defaultCustomView"></rx-multi-checkbox><rx-multi-checkbox ng-if="node.children" model="favorites[node.label]" children="node.children" watch-prop="favorite" callback="changeGroupState" custom-view="favoriteCustomView"></rx-multi-checkbox><input type="checkbox" id="{{node.$$hashKey}}-default" ng-if="!node.children" ng-model="node.default" ng-change="changeState(node, \'default\')" rx-no-dirty-check class="custom-checkbox"><label for="{{node.$$hashKey}}-default" ng-if="!node.children" class="icon" ng-class="{\'d-icon-check_square_o\': node.default, \'d-icon-square_o\': !node.default}"></label><input type="checkbox" id="{{node.$$hashKey}}-favorite" ng-if="!node.children" ng-model="node.favorite" ng-change="changeState(node, \'favorite\')" rx-no-dirty-check class="custom-checkbox"><label for="{{node.$$hashKey}}-favorite" ng-if="!node.children" class="icon" ng-class="{\'d-icon-star\': node.favorite, \'d-icon-star_o\': !node.favorite}"></label><span>{{node.label}}</span></div></treecontrol>'),a.put("scripts/components/designer/stencil/designer-stencil.directive.html",""),a.put("scripts/components/designer/validation-issues/designer-validation-issues.directive.html",'<div class="rx-validation-issues-empty-text" ng-if="!validationIssues.length">{{rxConfiguration.emptyText}}</div><div class="rx-validation-issues" ng-if="validationIssues.length"><div class="rx-validation-issues-group" data-name="validationIssue" ng-repeat="group in groups | orderBy:\'groupName\'" ng-class="{\'closed\': group.closed}"><h3 class="group-label" ng-click="toggleGroup(group)">{{group.groupName}}</h3><div class="rx-validation-issue" ng-dblclick="correctValidationIssue(validationIssue)" ng-repeat="validationIssue in group.groupIssues"><div class="icon d-icon-exclamation_triangle rx-validation-issue-icon" ng-class="validationIssue.type"></div><div class="rx-validation-issue-info"><p class="rx-validation-issue-type">{{validationIssue.type}}</p><p class="rx-validation-issue-message">{{validationIssue.message}}</p><div ng-if="validationIssue.propertyName"><a class="rx-validation-issue-correct" ng-click="correctValidationIssue(validationIssue)">Correct</a></div></div></div></div></div>'),a.put("scripts/components/expression-editor/data-dictionary.directive.html",'<div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input ng-model="valueFilter" type="search" placeholder="Search" class="d-textfield__input ng-pristine ng-valid ng-touched"></label></div><treecontrol class="tree-classic" tree-model="tree" filter-expression="searchMatches" expanded-nodes="expandedNodes" filter-comparator="false" options="treeOptions"><rx-tree-node-renderer data="node" data-drag-value="{{::getDragValue(node.value)}}"></rx-tree-node-renderer></treecontrol>'),a.put("scripts/components/expression-editor/expression-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Edit Expression for {{label}}</h4></div><div class="modal-body rx-expression-editor" cg-busy="rxBusyIndicator"><form><div class="row rx-expression-editor-wrapper"><div class="col-sm-6"><h5>Expression</h5><div class="rx-expression-editor-data rx-expression-editor-panel" layout="column"><rx-rich-expression-editor ng-if="dataDictionaryList" ng-model="expression.value" dictionary-list="dataDictionaryList" flex ng-class="{\'rx-error-expression\' : hasError}" rx-configuration="richExpressionEditorConfiguration"></rx-rich-expression-editor><div class="error-container"><span class="d-error d-error_pattern" ng-show="hasError">Invalid Value</span></div><div class="control-panel"><div class="dynamic-qualification" ng-show="useDynamicQualification"><div class="d-checkbox d-checkbox_default"><label><input class="d-checkbox__input" type="checkbox" ng-model="isDynamicQualification" ng-change="clearValidationError()"> <span class="d-checkbox__label d-checkbox__item">Use Dynamic Expression</span></label></div></div><div class="rx-expression-editor-button-list"><div class="operator-list-row" ng-repeat="operatorRow in operators"><div ng-repeat="operator in operatorRow" class="rx-expression-editor-button-{{operator.displayValue | lowercase}}"><button type="button" ng-click="operatorHandler(operator.contentValue, $event)" class="d-button d-button_secondary {{operator.buttonStyle}}-operator" ng-disabled="isDynamicQualification">{{operator.displayValue}}</button></div></div></div></div></div></div><div class="col-sm-6 rx-expression-editor-dictionary rx-expression-editor-panel"><h5>Available Values <a tooltip-placement="bottom" uib-tooltip-template="popoverTemplate" class="rx-highlight-on-hover d-icon-right-info_circle">&nbsp;</a></h5><rx-data-dictionary tree="dataDictionaryTree" node-selected="onNodeSelected" expanded-nodes="expandedNodes"></rx-data-dictionary></div></div><div class="rx-expression-editor-action-buttons"><div class="rx-expression-editor-navigation-buttons" ng-show="previousExpressionFieldExists || nextExpressionFieldExists"><button type="button" class="d-button d-button_secondary d-button_large d-icon-left-angle_left" ng-disabled="!previousExpressionFieldExists" ng-click="prev()">Prev</button> <button type="button" class="d-button d-button_secondary d-button_large d-icon-right-angle_right" ng-disabled="!nextExpressionFieldExists" ng-click="next()">Next</button></div><button type="button" class="d-button d-button_primary d-button_large" ng-disabled="hasError" ng-click="ok()">OK</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></form></div>'),a.put("scripts/components/expression-editor/fields/expression-field.directive.html",'<div class="rx-expression-field d-textfield" ng-class="{\'d-textfield_required\': options.isRequired}"><label class="d-textfield__item">{{label}}:</label><rx-expression-node-renderer cell="cell" path="path" value="value" label="label"></rx-expression-node-renderer></div>'),a.put("scripts/components/expression-editor/legend-popover-template.html",'<div class="rx-tooltip-legend-container"><div ng-repeat="item in legend | orderBy : \'label\'" class="legend-type"><span class="legend-icon {{item.icon}}"></span> <span>{{item.label}}</span></div></div>'),a.put("scripts/components/expression-editor/rich-expression-editor.directive.html",'<div contenteditable="true"></div>'),a.put("scripts/components/expression-editor/tree-node-renderer.directive.html",'<div class="rx-tree-node-label" ng-class="{ \'rx-tree-node-parent\': !node.value, \'rx-tree-node-leaf\': node.value }"><div ng-if="node.children.length" class="icon rx-tree-node-collapsed d-icon-triangle_right"></div><div ng-if="node.children.length" class="icon rx-tree-node-expanded d-icon-triangle_down"></div><div ng-if="node.value" ng-click="addValueToExpression(node, $event)" class="icon d-icon-plus_circle"></div><div ng-if="node.value && !node.children" class="rx-data-dictionary-item" ng-dblclick="addValueToExpression(node, $event)"><div ng-if="node.value" class="rx-data-dictionary-item-icon"><i class="icon" ng-class="node.icon || \'d-icon-angle_left\'"></i></div><div ng-class="{\'rx-data-dictionary-item-value\': node.value}">{{node.label}}</div></div><div ng-if="node.value && node.children" class="rx-data-dictionary-item"><div ng-if="node.value" class="rx-data-dictionary-item-icon"><i class="icon" ng-class="node.icon || \'d-icon-angle_left\'"></i></div><div ng-class="{\'rx-data-dictionary-item-value\': node.value}">{{node.label}}</div></div><div ng-if="!node.value" class="rx-data-dictionary-item" ng-dblclick="addValueToExpression(node)"><div ng-if="node.value" class="rx-data-dictionary-item-icon"><i class="icon" ng-class="node.icon || \'d-icon-angle_left\'"></i></div><div ng-class="{\'rx-data-dictionary-item-value\': node.value}">{{node.label}}</div></div></div>'),a.put("scripts/components/multi-checkbox/multi-checkbox.directive.html",'<div class="multi-checkbox"><input type="checkbox" id="rxMultiCheckbox-{{$id}}" ng-model="isSelected" ng-change="onClick()" class="{{customView ? customView.default : \'\'}}"><label for="rxMultiCheckbox-{{$id}}" ng-if="customView" ng-click="onLabelClick($event)" class="icon" ng-class="customStates"></label></div>'),a.put("scripts/components/navigation-bar/navigation-bar.directive.html",'<li ng-repeat="item in items" class="d-n-menu__item"><a class="d-n-menu__link" ng-class="{\'is-active\': item.selected}" ui-sref="{{item.state.name || item.state}}({{item.state.params}})" ng-hide="item.hidden"><span>{{item.label}}</span></a></li>'),a.put("scripts/components/property-panel/editors/date-field-editor.directive.html",'<div class="input-group"><input type="text" uib-datepicker-popup="yyyy-MM-dd" ng-model="date" is-open="opened" show-button-bar="false" datepicker-options="datepickerOptions" ng-required="rxConfiguration.required" ng-disabled="rxConfiguration.disabled"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="rxConfiguration.disabled" ng-click="open($event)"><i class="d-icon-calendar"></i></button></span></div>'),a.put("scripts/components/property-panel/editors/date-time-field-editor.directive.html",'<div class="row"><div class="col-sm-6"><div class="input-group"><input type="text" class="rx-input" uib-datepicker-popup="yyyy-MM-dd" datepicker-options="datepickerOptions" show-button-bar="false" ng-model="datetime" is-open="opened" ng-required="rxConfiguration.required"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)"><i class="d-icon-calendar"></i></button></span></div></div><div class="col-sm-6"><uib-timepicker ng-model="datetime" class="d-timepicker d-timepicker__no-label"></uib-timepicker></div></div>'),a.put("scripts/components/property-panel/editors/number-field-editor.directive.html",'<input type="number" class="rx-input" ng-required="rxConfiguration.required" ng-disabled="rxConfiguration.disabled" ng-model="numberValue" step="any" min="{{rxConfiguration.min}}" max="{{rxConfiguration.max}}" name="{{rxConfiguration.name}}">'),a.put("scripts/components/property-panel/editors/selection-field-editor.directive.html",'<select class="rx-input" ng-required="rxConfiguration.required" ng-disabled="rxConfiguration.disabled" ng-model="ngModel" name="{{rxConfiguration.name}}" ng-options="option.value as option.content for option in options"></select>'),a.put("scripts/components/property-panel/editors/time-field-editor.directive.html",'<uib-timepicker ng-model="date" class="d-timepicker d-timepicker__no-label"></uib-timepicker>'),a.put("scripts/components/property-panel/property-panel.directive.html",'<form novalidate class="rx-content"><div ng-repeat="propertyDefinition in propertyDefinitions" class="d-textfield rx-property-{{propertyDefinition.id}}" ng-class="{\'d-textfield_required\': propertyDefinition.required}"><div class="rx-property-title" ng-if="propertyDefinition.propertyPanelConfiguration">{{propertyDefinition.name | idToName}}</div><span ng-if="!propertyDefinition.propertyPanelConfiguration" ng-class="{required: propertyDefinition.required}" class="d-textfield__item d-textfield__item_label">{{propertyDefinition.name | idToName}}</span><div ng-include="getPropertyEditorTemplateUrl(propertyDefinition)" class="rx-property-editor"></div></div></form>'),a.put("scripts/components/property-view-panel/property-view-panel.directive.html",'<div class="rx-property-view-panel-section" ng-if="fields.length"><div ng-repeat="field in fields" class="rx-property-view-panel-field"><p class="rx-property-label">{{field.label}}</p><p class="rx-property-value">{{field.value || \'-\'}}</p></div></div><div class="rx-property-view-panel-groups" ng-if="groups.length"><div class="rx-property-view-panel-group" ng-repeat="group in groups" ng-class="{\'closed\': group.closed}"><h3 class="group-label" ng-click="toggleGroup(group)">{{group.label}}</h3><div class="rx-property-view-panel-section"><div ng-repeat="field in group.fields" class="rx-property-view-panel-field"><p class="rx-property-label">{{field.label}}</p><p class="rx-property-value">{{field.value || \'-\'}}</p></div></div></div></div><div class="rx-empty-text" ng-if="!fields.length && !groups.length">{{rxConfiguration.emptyText}}</div>'),a.put("scripts/components/search-field/search-field.directive.html",'<a class="d-navigation__icon-search d-icon-left-search" ng-click="search = !search"></a><form class="d-n-search" ng-class="{\'is-active\': search}"><label for="search" class="sr-only">Search</label><input type="search" id="search" class="d-n-search__item" placeholder="{{\'com.bmc.arsys.rx.standardlib.components.search-field.searchbox.placeholder\' | translate}}"><div class="d-n-search__close d-icon-left-cross" ng-click="search = !search"><span class="d-navigation__search-line"></span></div></form>'),a.put("scripts/components/search-filter/search-filter.directive.html",'<div class="d-dropdown d-js-dropdown" data-model="modelMapping" tabindex="0"><div class="d-dropdown__trigger d-button d-button_action d-button_large d-icon-left-filter d-icon-right-angle_down" data-placeholder="{{rxFilterConfiguration.label}}">{{rxFilterConfiguration.label}}</div><div class="search__filter-dropdown d-dropdown__menu"><div class="d-dropdown__menu-caption"><span>{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.dropDown.header.label\' | translate}}</span> <span class="d-button d-button_primary d-button_small d-ripple pull-right" ng-if="pendingFilterChanges" ng-click="applySelectedFilters()" ng-enter="applySelectedFilters()" tabindex="0">{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.button.apply.label\' | translate}}</span></div><div class="search-filter__menu"><uib-accordion close-others="true"><ul class="d-accordion d-accordion_outer d-accordion_filter"><uib-accordion-group heading="{{filter.label}}" ng-repeat="filter in filterModel.filters" template-url="template/accordion.html"><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item search-filter__option" ng-repeat="option in filter.options | orderBy: [\'type\',\'order\',\'name\']"><div class="d-dropdown__menu-options-item-option {{option.active? \'is-checked d-icon-left-check_square_o\' : \'d-icon-left-square_o\'}}" ng-if="option.type != \'search\' && option.type != \'number\' && option.type != \'timeStampRange\'" ng-click="addFilter($event, option)" ng-keydown="handleKeydown($event, option)" role="menuitemcheckbox" aria-checked="{{option.active}}" title="{{option.label ? option.label : option.name}}" tabindex="0">{{option.label ? option.label : option.name}}</div><div ng-if="option.type == \'timeStampRange\'" class="dropdown-item_date-ranges clearfix" ng-click="closeDatePickers(option)" ng-enter="closeDatePickers(option)"><span>{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.datepicker.fromDate.label\' | translate}}</span><div class="dropdown-item_date-range"><input type="text" uib-datepicker-popup="{{option.format}}" is-open="option.startDatePicker.isOpen" class="text-input full-width" ng-model="option.startDatePicker.date" ng-click="openDatePicker($event, option.startDatePicker)" ng-enter="openDatePicker($event, option.startDatePicker)" max-date="option.endDatePicker.date" datepicker-options="datePickerOptions" show-button-bar="false"><uib-timepicker ng-model="option.startDatePicker.date" class="ui-bootstrap__timepicker" show-meridian="showMeridian"></uib-timepicker></div><span>{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.datepicker.toDate.label\' | translate}}</span><div class="dropdown-item_date-range"><input type="text" uib-datepicker-popup="{{option.format}}" is-open="option.endDatePicker.isOpen" class="text-input full-width" ng-model="option.endDatePicker.date" ng-click="openDatePicker($event, option.endDatePicker)" ng-enter="openDatePicker($event, option.endDatePicker)" min-date="option.startDatePicker.date" datepicker-options="datePickerOptions" show-button-bar="false"><uib-timepicker ng-model="option.endDatePicker.date" class="ui-bootstrap__timepicker" show-meridian="showMeridian"></uib-timepicker></div><span class="d-button d-button_primary d-ripple" ng-click="onDateRangeSubmit(filter, option)" ng-enter="onDateRangeSubmit(filter, option)" tabindex="0">{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.button.apply.label\' | translate}}</span></div><div ng-if="option.type == \'search\'"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><span class="d-textfield__item">{{option.label}}</span> <input ng-if="!option.subtype" class="search-filter__option-item_search d-textfield__input" title="{{option.label}}" type="text" ng-if="option.type == \'search\'" ng-model="option.searchText" role="combobox" uib-typeahead="option.key for option in searchFilterOption(option, $viewValue)" uib-typeahead-min-length="3" uib-typeahead-on-select="onFilterOptionSelect(filter, option, $item)" uib-typeahead-wait-ms="500"> <input ng-if="option.subtype == \'keyword\'" class="search-filter__option-item_search d-textfield__input" title="{{option.label}}" type="text" placeholder="{{option.label}}" ng-model="option.searchText" ng-keydown="applyKeywordFilter($event, filter, option)"></label></div></div><div ng-if="option.type == \'number\'" class="dropdown-item_range"><div><span>{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.range.from.label\' | translate}}</span> <input type="number" data-type="number" ng-model="option.from" ng-change="onRangeChange(option, \'from\')"> <span>{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.range.to.label\' | translate}}</span> <input type="number" data-type="number" ng-model="option.to" ng-change="onRangeChange(option, \'to\')"></div><span class="d-button d-button_primary d-ripple" ng-click="onRangeSubmit(filter, option)" ng-enter="onRangeSubmit(filter, option)" tabindex="0">{{::\'com.bmc.arsys.rx.standardlib.components.search-filter.button.apply.label\' | translate}}</span></div></li></ul></uib-accordion-group></ul></uib-accordion></div></div></div><div class="clearfix" ng-show="rxFilterConfiguration.showPills"><rx-tag-pills tags="filterModel.selectedFilters" allow-remove="true" display-limit="rxFilterConfiguration.tagsLimit"></rx-tag-pills></div>'),a.put("scripts/components/simple-json-editor/simple-json-editor.directive.html",'<textarea ng-model="json"></textarea>'),a.put("scripts/components/tag-pills/tag-pills.directive.html",'<div class="tag-pill-item" ng-repeat="tag in groupedTags | limitTo: displayLimit" tabindex="0"><span class="d-tag" tabindex="0"><span class="d-tag-label"><strong ng-if="tag.criteria.name">{{tag.criteria.name}}:</strong> <span>{{tag.label || tag.name}}</span></span> <span class="d-tag-remove-button" data-role="remove" ng-if="allowRemove" ng-click="removeTag(tag)" ng-enter="removeTag(tag)" tabindex="0"></span></span></div><div class="d-dropdown d-js-dropdown show__more-tags" ng-if="groupedTags.length > displayLimit"><a class="d-dropdown__trigger show__more-toggle">+ {{groupedTags.length - displayLimit + \' \' + (\'com.bmc.arsys.rx.standardlib.components.tag-pills.button.showMore.label\' | translate)}}</a><ul class="d-dropdown__menu"><li class="d-dropdown__menu-options-item" ng-repeat="tag in groupedTags | limitTo : -(groupedTags.length - displayLimit)"><span class="d-tag" tabindex="0"><span class="d-tag-label"><strong ng-if="tag.criteria.name">{{tag.criteria.name}}:</strong> <span>{{tag.label || tag.name}}</span></span> <span class="d-tag-remove-button" data-role="remove" ng-if="allowRemove" ng-click="removeTag(tag)" ng-enter="removeTag(tag)" tabindex="0"></span></span></li></ul></div>'),a.put("scripts/components/tooltip/tooltip.directive.html",'<span class="d-icon-right-question_circle_o tooltip-icon" ng-if="params" tooltip-append-to-body="{{::params.appendToBody}}" tooltip-placement="{{::params.placement}}" uib-tooltip-html="params.text"></span>'),a.put("scripts/components/ui-grid/header-cell-with-tooltip-template.html",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}<rx-tooltip tooltip="col.colDef.tooltip"></rx-tooltip></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),a.put("scripts/dpl/checkbox/checkbox.directive.html",'<div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox"> <span class="d-checkbox__item" ng-transclude></span></label></div>'),a.put("scripts/login/login.view.html",'<div class="decorator decorator_login"><div id="bg-image" class="{{image}}"><article class="page page_login"><div class="block" ng-show="authError && loginForm.$pristine"><div class="d-notification d-notification_error d-icon-left-exclamation_triangle"><p>{{::\'login.authFailed\' | translate}}</p></div></div><div class="block"><div class="logo"><a class="logo__wrapper"><div class="d-login-form__logo-bmc rx-theme-small-logo-light" title="BMC" alt="BMC"></div><span class="logo__product">{{name}}</span> <span class="logo__version">version: {{version}}</span></a></div></div><div class="block block_form"><div class="login"><form name="loginForm" ng-submit="login(credentials)" novalidate><div class="d-textfield d-textfield_large d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-user"><span class="d-textfield__item">{{::\'login.username\' | translate}}</span> <input class="d-textfield__input" type="search" placeholder="{{::\'login.username\' | translate}}" ng-model="credentials.username" required autofocus></label></div><div class="d-textfield d-textfield_large d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-lock"><span class="d-textfield__item">{{::\'login.password\' | translate}}</span> <input class="d-textfield__input" type="password" name="password" placeholder="{{::\'login.password\' | translate}}" ng-model="credentials.password"></label></div><button class="login__submit d-button d-button_primary d-button_service d-button_large __focus" type="submit" ng-disabled="loginForm.$invalid">{{::\'login.login\' | translate}}</button></form></div></div><div class="block"><div class="footer"><a href="http://www.bmc.com" target="_blank" class="footer__powered" title="{{::\'login.poweredByBMC\' | translate}}"><span class="footer__powered-title">{{::\'login.poweredBy\' | translate}}</span><div class="d-login-form__logo-bmc" title="BMC" alt="BMC"></div></a><p class="footer__copy"><span class="footer__copy-line">Copyright 1997 - 2016 BMC Software, Inc.</span> <span class="footer__copy-line">{{::\'login.trademark\' | translate}}</span></p></div></div></article></div></div>'),a.put("scripts/named-list/designer/named-list-designer.directive.html",'<form name="rxNamedListDesignerForm" novalidate><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="(plainNamedListDefinition.name | definitionName) || \'&lt;New Named List&gt;\'" definition-icon="layout"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_eye\'" ng-click="toggleDesignMode()">{{isDesignMode ? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveNamedListDefinition()" ng-disabled="!canSave()">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-if="!isDesignMode" flex layout="column"><rx-simple-json-editor flex name="json" rx-object="plainNamedListDefinition" ng-readonly="true"></rx-simple-json-editor></div><div class="rx-named-list-designer" ng-show="isDesignMode"><h1>{{plainNamedListDefinition.lastUpdateTime ? \'Edit Named List\' : \'Create Named List\'}}</h1><rx-designer-inspector target="selected.namedListDefinitionModel" class="rx-named-list-inspector" rx-configuration="{}"></rx-designer-inspector><rx-blade rx-configuration="rightBladeConfiguration"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + (selected.validationIssues.length ? \' error\' : \'\')" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active"><span class="title">Validation Issues</span><rx-designer-validation-issues validation-issues="selected.validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade></div></div></form>'),a.put("scripts/process/designer/process-designer.directive.html",'<form name="rxProcessDesignerForm" novalidate cg-busy="rxBusyIndicator" class="rx-busy-indicator" ng-class="{\'rx-no-header\': rxConfiguration.noHeader}"><div class="rx-editor-header" ng-if="!rxConfiguration.noHeader"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="(plainProcessDefinition.name | definitionName) || (rxConfiguration.sourceProcessDefinitionName && \'&lt;Copy of \' + (rxConfiguration.sourceProcessDefinitionName | definitionName) + \'&gt;\') || \'&lt;New Process&gt;\'" definition-icon="app_connection" items="breadcrumbs" on-click="handleBreadcrumbBarClick(itemId)"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_connection\'" ng-click="toggleDesignMode()" ng-show="isDesignModeAvailable()">{{isDesignMode ? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveChanges()" ng-disabled="!canSave()">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxProcessDesignerForm.json.$invalid}" ng-show="isDesignMode === false"><rx-simple-json-editor name="json" rx-object="plainProcessDefinition" ng-readonly="!!plainProcessDefinition.layout"></rx-simple-json-editor></div><div class="rx-joint-process-designer" ng-show="isDesignMode === true"><rx-blade rx-configuration="leftBladeConfiguration" ng-class="{\'rx-process-designer-transitions-disabled\': transitionsDisabled}" ng-if="stencilConfiguration"><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabDefault.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabDefault.name" active="leftBladeConfiguration.tabs.stencilTabDefault.active" on-activate="leftBladeConfiguration.tabs.stencilTabDefault.onActivate"><rx-designer-stencil paper="paper" stencil-configuration="stencilConfiguration.default" ng-class="{refreshing: leftBladeConfiguration.tabs.stencilTabDefault.refreshNeeded}"></rx-designer-stencil></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabFavorite.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabFavorite.name" active="leftBladeConfiguration.tabs.stencilTabFavorite.active" on-activate="leftBladeConfiguration.tabs.stencilTabFavorite.onActivate"><rx-designer-stencil paper="paper" stencil-configuration="stencilConfiguration.favorite" ng-class="{refreshing: leftBladeConfiguration.tabs.stencilTabFavorite.refreshNeeded}"></rx-designer-stencil></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabRecent.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabRecent.name" active="leftBladeConfiguration.tabs.stencilTabRecent.active" on-activate="leftBladeConfiguration.tabs.stencilTabRecent.onActivate"><rx-designer-stencil class="recentStencil" paper="paper" stencil-configuration="stencilConfiguration.recent"></rx-designer-stencil><button type="button" class="rx-clear-recent-stencil d-icon-left-cross_circle" ng-disabled="isRecentsEmpty()" ng-click="clearRecents()">Clear Recents</button></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabSettings.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabSettings.name" active="leftBladeConfiguration.tabs.stencilTabSettings.active"><rx-designer-stencil-settings paper="paper" stencil-configuration-service="stencilConfiguration.configurationService"></rx-designer-stencil-settings></rx-blade-tab></rx-blade><rx-blade rx-configuration="rightBladeConfiguration" ng-class="{\'rx-process-designer-transitions-disabled\': transitionsDisabled}"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.processProperties.iconClass" tab-name="rightBladeConfiguration.tabs.processProperties.name" active="rightBladeConfiguration.tabs.processProperties.active"><span class="title">Process Information</span><rx-designer-inspector target="selected.process" class="rx-process-inspector" rx-configuration="{}"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.elementProperties.iconClass" tab-name="rightBladeConfiguration.tabs.elementProperties.name" active="rightBladeConfiguration.tabs.elementProperties.active"><span class="title">Element Information</span><rx-designer-inspector target="selected.cellModel" class="rx-element-inspector" rx-configuration="inspectorConfiguration"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + \' \' + validationIssueLevel" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active"><span class="title">Validation Issues</span><div class="rx-refresh-validation-issues" ng-click="validateProcess()"><div class="icon icon-refresh"></div><span>Refresh</span></div><rx-designer-validation-issues validation-issues="selected.validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade><rx-designer-canvas rx-configuration="canvasConfiguration" ng-class="{\'rx-blade-expanded-left\': leftBladeConfiguration.expanded, \'rx-blade-expanded-right\': rightBladeConfiguration.expanded, \'rx-process-designer-transitions-disabled\': transitionsDisabled}"></rx-designer-canvas></div></div></form>'),
a.put("scripts/process/designer/process-preview.directive.html",'<rx-designer-canvas-preview ng-if="graph" rx-model="graph"></rx-designer-canvas-preview>'),a.put("scripts/process/instance-viewer/process-instance-viewer.directive.html",'<form novalidate cg-busy="rxBusyIndicator"><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="onClose()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="\'Manage Processes\'" definition-icon="flow" items="breadcrumbs" on-click="handleBreadcrumbBarClick(itemId)"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_connection\'" ng-click="toggleDesignMode()">{{isDesignMode? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="onClose()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxRecordDesignerForm.json.$invalid}" ng-show="isDesignMode === false"><rx-simple-json-editor name="json" rx-object="processInstance" readonly="readonly"></rx-simple-json-editor></div><div class="rx-process-instance-details" ng-if="plainProcessDefinition.layout" ng-show="isDesignMode === true"><div class=""><rx-blade rx-configuration="rightBladeConfiguration" ng-class="{\'rx-process-designer-transitions-disabled\': transitionsDisabled}"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.processInfo.iconClass" tab-name="rightBladeConfiguration.tabs.processInfo.name" active="rightBladeConfiguration.tabs.processInfo.active"><span class="title">Process Instance Information</span><rx-property-view-panel rx-model="processInfo"></rx-property-view-panel></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.processVariable.iconClass" tab-name="rightBladeConfiguration.tabs.processVariable.name" active="rightBladeConfiguration.tabs.processVariable.active"><span class="title">Process Variables</span><rx-property-view-panel rx-model="processVariables" rx-configuration="processVariablesConfiguration"></rx-property-view-panel></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.activityResults.iconClass" tab-name="rightBladeConfiguration.tabs.activityResults.name" active="rightBladeConfiguration.tabs.activityResults.active"><span class="title">Activity Results</span><rx-property-view-panel rx-model="activityResults" rx-configuration="activityResultsConfiguration"></rx-property-view-panel></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.errorsMessages.iconClass + (instanceErrors.length ? \' error\' : \'\')" tab-name="rightBladeConfiguration.tabs.errorsMessages.name" active="rightBladeConfiguration.tabs.errorsMessages.active"><span class="title">Exceptions</span><rx-designer-validation-issues validation-issues="instanceErrors" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade><rx-designer-canvas rx-instance-id="canvasInstanceId" rx-configuration="canvasConfiguration" ng-class="{\'rx-blade-expanded-right\': rightBladeConfiguration.expanded, \'rx-process-designer-transitions-disabled\': transitionsDisabled}"></rx-designer-canvas></div></div></div></form>'),a.put("scripts/process/management/preview-process-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">{{selectedProcessDefinition.content}}</h4></div><div class="rx-preview-process-modal__preview" cg-busy="rxBusyIndicator"><rx-process-preview ng-if="plainProcessDefinition" rx-model="plainProcessDefinition" rx-configuration="processPreviewConfiguration"></rx-process-preview></div><div class="rx-preview-process-modal__action-buttons"><button type="button" class="rx-preview-process-modal__action-buttons_item d-button d-button_primary d-button_large" ng-disabled="isRunDisabled()" ng-click="run()">Run</button> <button type="button" class="rx-preview-process-modal__action-buttons_item d-button d-button_secondary d-button_large" ng-click="close()">Close</button></div>'),a.put("scripts/process/management/process-instances-chart.directive.html","<svg></svg>"),a.put("scripts/process/management/process-management.directive.html",'<div class="rx-process-management" cg-busy="rxBusyIndicator"><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="onClose()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="\'Manage Processes\'" definition-icon="flow" items="breadcrumbs" on-click="handleBreadcrumbBarClick(itemId)"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="onClose()">Close</button></div></div></div><div class="rx-process-management__content"><div class="rx-process-management__column rx-process-management__column_left"><div class="rx-process-definition-picker"><div class="rx-process-definition-picker__actions"><a class="rx-actions__item d-icon-left-play_o" type="button" ng-class="{\'rx-actions__item_disabled\': isRunDisabled()}" ng-click="startProcess()">Run</a> <a class="rx-actions__item d-icon-left-eye" type="button" ng-class="{\'rx-actions__item_disabled\': isPreviewDisabled()}" ng-click="previewProcess()">View</a></div><div class="rx-process-definition-picker__search"><div class="d-textfield d-textfield_label_hidden"><label class="custom-search-label d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input custom-search" type="search" placeholder="Search" style=""></label></div></div><div class="rx-process-definition-picker__processes-list"><div class="rx-process-list__item" ng-repeat="processDefinition in processDefinitions | orderBy:content | filter:{content: valueFilter}" ng-click="selectProcessItem(processDefinition)" ng-class="{\'rx-process-list__item_selected\': processDefinition.name === selectedProcess.name}">{{processDefinition.content}}</div></div></div></div><div class="rx-process-management__column rx-process-management__column_right"><div class="rx-process-instances"><div class="rx-process-instances__row_top"><div class="rx-process-instances-chart-zone"><div class="rx-process-instances-chart-zone__time-frame"><rx-time-frame-dropdown rx-time-frame="timeFrame"></rx-time-frame-dropdown></div><div class="rx-process-instances-chart-zone__chart"><rx-process-instances-chart rx-data="chartData"></rx-process-instances-chart></div></div><div class="rx-process-instance-run-times"></div></div><div class="rx-process-instances__row_middle"><ul class="rx-process-instances-status-filter d-button-group d-button-group_primary"><li ng-repeat="instanceStatus in processInstancesStatus" class="rx-process-instances-status-filter_item d-button-group__item"><a ng-click="changeStatusFilter(instanceStatus)" ng-class="{\'is-checked\': instanceStatus.value == selectedStatusFilter.value}" class="d-button-group__btn">{{instanceStatus.content}}</a></li></ul></div><div class="rx-process-instances__row_bottom"><div class="rx-process-instances-grid"><rx-record-grid ng-if="selectedProcess" rx-configuration="processInstanceGridConfiguration"></rx-record-grid></div></div></div></div></div></div>'),a.put("scripts/process/management/start-process-dialog.html",'<div class="rx-start-process-modal__row_top"><div class="rx-start-process-modal__modal-header modal-header"><h4 class="modal-title">{{\'Run \' + selectedProcessDefinition.content}}</h4></div></div><div class="rx-start-process-modal__row_middle"><rx-property-panel rx-configuration="propertyPanelConfig" ng-model="processInstance.processInputValues"></rx-property-panel></div><div class="rx-start-process-modal__row_bottom"><div class="rx-start-process-modal__action-buttons"><button type="button" class="rx-start-process-modal__action-buttons_item d-button d-button_primary d-button_large" ng-click="runProcess()" ng-disabled="isRunButtonDisabled()">Run</button> <button type="button" class="rx-start-process-modal__action-buttons_item d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/process/management/time-frame-dropdown.directive.html",'<span class="rx-time-frame-dropdown__label">Time Frame</span><div class="rx-time-frame-dropdown d-dropdown d-js-dropdown" uib-dropdown auto-close="disabled" is-open="dropdownStatus.isOpen"><a class="rx-time-frame-dropdown__head d-button d-button_small d-icon-right-angle_down d-button_secondary" uib-dropdown-toggle>{{selectedItem.customRangeValue || selectedItem.label}}</a><ul uib-dropdown-menu class="rx-time-frame-dropdown__body d-dropdown__list" role="menu"><li class="d-dropdown__item" ng-repeat="item in dropdownItems" ng-click="selectTimeFrame(item)"><a class="d-dropdown__link" ng-class="{\'is-checked\': item.label === selectedItem.label}">{{item.label}}</a></li><li class="rx-time-frame-dropdown__datetimepicker-item" ng-show="showCustomRange"><label class="datetimepicker-label">From</label><p class="input-group"><input class="rx-input" type="text" uib-datepicker-popup="yyyy-MM-dd" datepicker-options="datepickerOptions" popup-placement="top" show-button-bar="false" ng-model="datePickersModels.startedAfter" is-open="datePickersModels.startedAfterOpened"> <span class="input-group-btn"><button type="button" class="rx-input btn btn-default" ng-click="openDatePicker($event, \'startedAfterOpened\')"><i class="d-icon-calendar"></i></button></span></p><uib-timepicker ng-model="datePickersModels.startedAfter" class="d-timepicker d-timepicker__no-label"></uib-timepicker></li><li class="rx-time-frame-dropdown__datetimepicker-item" ng-if="showCustomRange"><label class="datetimepicker-label">To</label><p class="input-group"><input class="rx-input" type="text" uib-datepicker-popup="yyyy-MM-dd" datepicker-options="datepickerOptions" popup-placement="top" show-button-bar="false" ng-model="datePickersModels.finishedBefore" is-open="datePickersModels.finishedBeforeOpened"> <span class="input-group-btn"><button type="button" class="rx-input btn btn-default" ng-click="openDatePicker($event, \'finishedBeforeOpened\')"><i class="d-icon-calendar"></i></button></span></p><uib-timepicker ng-model="datePickersModels.finishedBefore" class="d-timepicker d-timepicker__no-label"></uib-timepicker></li><button class="rx-time-frame-dropdown__apply-custom-range d-button d-button_secondary d-button_small" ng-if="showCustomRange" ng-click="applyCustomRange()">Apply</button></ul></div>'),a.put("scripts/record/designer/add-fields-dialog/add-fields-dialog.view.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="ctrl.cancel()">&times;</button><h4 class="modal-title">Add Fields to Join Record</h4></div><div class="d-notification d-notification_info d-notification_single" ng-show="ctrl.hasDuplicateFieldNames"><div class="d-notification__icon d-icon-left-info_circle"></div><div class="d-notification__supporting-text"><p class="d-notification__item">You have selected similarly named fields from both Primary and Secondary Records. These must be unique. The Record Definition names will be automatically appended to the end of each editable Field Name.</p></div></div><div class="modal-body"><div class="row"><div class="col-xs-6 field-panel"><div class="d-textfield d-textfield_required"><div class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">Primary Record</span><div class="d-dropdown d-js-dropdown"><div class="d-select" ng-disabled="true"><span>{{::ctrl.definition.primaryRecordDefinitionName | definitionName}}</span></div></div></label></div></div><p>Select fields to include from Primary Record:</p><div class="field-container"><div><a href="" ng-click="ctrl.selectAll(ctrl.definition.primaryFields, true)">Select All</a> <a href="" ng-click="ctrl.selectAll(ctrl.definition.primaryFields, false)">Select None</a></div><div class="field-holder"><div ng-repeat="field in ctrl.definition.primaryFields" class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="field.selected" ng-click="ctrl.handleCheckboxClick()"> <span class="d-checkbox__item">{{::field.name}}</span></label></div></div></div></div><div class="col-xs-6 field-panel"><div class="d-textfield d-textfield_required"><div class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">Secondary Record</span><div class="d-dropdown d-js-dropdown"><div class="d-select" ng-disabled="true"><span>{{::ctrl.definition.secondaryRecordDefinitionName | definitionName}}</span></div></div></label></div></div><p>Select fields to include from Secondary Record:</p><div class="field-container"><div><a href="" ng-click="ctrl.selectAll(ctrl.definition.secondaryFields, true)">Select All</a> <a href="" ng-click="ctrl.selectAll(ctrl.definition.secondaryFields, false)">Select None</a></div><div class="field-holder"><div ng-repeat="field in ctrl.definition.secondaryFields" class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="field.selected" ng-click="ctrl.handleCheckboxClick()"> <span class="d-checkbox__item">{{::field.name}}</span></label></div></div></div></div></div></div><div class="modal-footer"><button class="d-button d-button_primary d-button_large" ng-disabled="ctrl.isSaveButtonDisabled()" ng-click="ctrl.handleSaveButtonClick()">{{::\'com.bmc.arsys.rx.standardlib.record.designer.addFields.label\' | translate}}</button> <button class="d-button d-button_secondary d-button_large" ng-click="ctrl.cancel()">{{::\'com.bmc.arsys.rx.standardlib.common.cancel.label\' | translate}}</button></div>'),a.put("scripts/record/designer/inspector-editors/customization-options/record-customization-options-editor.html",'<div class="d-modal__header dialog-header-confirm"><h4 class="d-modal__title">Customization Options <button type="button" class="close" ng-click="cancel()">&times;</button></h4></div><div class="d-modal__content"><div class="rx-blocker" ng-if="isEditDisabled"></div><form name="customizationOptionsFrom"><div class="d-modal__content-item"><rx-dpl-checkbox ng-model="allowOverlay" ng-change="handleAllowOverlayChange()">Allow future customization to this Record Definition, <strong>{{recordDefinition.name | definitionName}}</strong></rx-dpl-checkbox><div class="rx-customization-option-hint">If this option is unselected, others will not be allowed to customize this definition.<br>If you are unsafe about what this option does, leave it selected</div></div><div class="d-modal__content-item"><h6>Allow future customizations to:</h6><div class="rx-customization-option"><rx-dpl-checkbox ng-model="customizationOptions.allowOtherPropertiesOverlay" ng-change="handleRecordCustomizationOptionChange()">Properties of this Record Definition</rx-dpl-checkbox></div><div class="rx-customization-option"><rx-dpl-checkbox ng-model="customizationOptions.allowPermissionsOverlay" ng-change="handleRecordCustomizationOptionChange()">Permissions of this Record Definition</rx-dpl-checkbox></div><div class="rx-customization-option"><rx-dpl-checkbox ng-model="customizationOptions.allowIndexesOverlay" ng-change="handleRecordCustomizationOptionChange()">Search Indexes of this Record Definition</rx-dpl-checkbox></div><div class="rx-customization-option"><rx-dpl-checkbox ng-model="customizationOptions.allowFieldsOverlay" ng-change="handleRecordCustomizationOptionChange(true)">Record Definition fields within this record</rx-dpl-checkbox></div><div class="rx-customization-option-dependants-table"><div class="rx-customization-option-dependant-row"><div class="rx-customization-option-dependant-cell"><h6>Name</h6></div><div class="rx-customization-option-dependant-cell text-center"><h6>Allow Properties Customization</h6></div><div class="rx-customization-option-dependant-cell text-center"><h6>Allow Permission Customization</h6></div></div><div class="rx-customization-option-dependant-scroll-area"><div class="rx-customization-option-dependant-row" ng-repeat="fieldDefinition in recordDefinition.fieldDefinitions"><div class="rx-customization-option-dependant-cell">{{::fieldDefinition.name}}</div><div class="rx-customization-option-dependant-cell text-center"><rx-dpl-checkbox ng-model="fieldDefinition.allowOtherPropertiesOverlay" ng-disabled="!customizationOptions.allowFieldsOverlay" ng-change="fieldCustomizationOptionsChangeHandler(\'allowOtherPropertiesOverlay\', fieldDefinition)"></rx-dpl-checkbox></div><div class="rx-customization-option-dependant-cell text-center"><rx-dpl-checkbox ng-model="fieldDefinition.allowPermissionsOverlay" ng-disabled="!customizationOptions.allowFieldsOverlay" ng-change="fieldCustomizationOptionsChangeHandler(\'allowPermissionsOverlay\', fieldDefinition)"></rx-dpl-checkbox></div></div></div></div></div></form></div><div class="d-modal__footer"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!customizationOptionsFrom.$dirty">{{\'com.bmc.arsys.rx.standardlib.common.save.label\' | translate}}</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">{{\'com.bmc.arsys.rx.standardlib.common.cancel.label\' | translate}}</button></div>'),a.put("scripts/record/designer/inspector-editors/record-index-editor/inspector-record-index-editor.directive.html",'<div class="rx-record-index-editor"><ul class="rx-record-index-list" ng-if="indexDefinitions.length"><li class="rx-record-index-list-item clearfix" ng-repeat="indexDef in indexDefinitions"><div class="rx-record-index-list-item__actions pull-right"><button class="d-button_action d-icon-pencil" type="button" ng-if="!options.isReadOnly" ng-click="editIndex(indexDef, $index)"></button> <button class="d-button_action d-icon-cross" type="button" ng-if="!isSystemIndex(indexDef) && !options.isReadOnly" ng-click="deleteIndex(indexDef, $index)"></button></div><div class="rx-record-index-list-item__title"><span ng-bind="indexDef.indexName" ng-click="editIndex(indexDef, $index)" ng-if="!options.isReadOnly"></span> <span ng-if="isSystemIndex(indexDef)">(Automatic)<rx-tooltip tooltip="\'This index has been automatically generated and cannot be removed.\'"></rx-tooltip></span></div><div class="rx-record-index-list-item__desc">{{indexDef.unique ? \'Unique\' : \'Not unique\'}}<!--\n                --><span ng-if="indexDef.indexFieldIds.length">, {{indexDef.indexFieldIds.length}} {{indexDef.indexFieldIds.length === 1 ? \'field\' : \'fields\'}}</span></div></li></ul><a class="d-icon-left-plus_circle" ng-click="createNewIndex()" ng-hide="options.isReadOnly">Add Index</a></div>'),a.put("scripts/record/designer/inspector-editors/record-index-editor/record-index-editor-dialog.view.html",'<div class="d-modal__header"><h4 class="d-modal__title">Add Index for Record Definition {{idxEditorState.definitionName | definitionName}} <button type="button" class="close" ng-click="$dismiss()">&times;</button></h4></div><div class="d-notification d-notification_info d-notification_single"><div class="d-notification__icon d-icon-left-info_circle"></div><div class="d-notification__supporting-text"><p class="d-notification__item">Indexes optimize the performance of your application by returning search results faster for your most important fields. Use indexes sparingly, as adding too many to a single Record Definition can degrade performance.</p></div></div><form name="indexEditorForm" class="d-modal__content"><div class="rx-record-index-editor-layout-row"><div class="rx-record-index-editor-layout-column rx-record-index-editor-layout-column_first"><div class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">Name of Index</span> <input class="d-textfield__input" type="text" name="indexName" required placeholder="Name of Index" disabled="disabled" ng-model="idxEditorState.indexName"></label></div></div><div class="rx-record-index-editor-layout-column"><div class="rx-record-index-editor-label">Indexing Options:</div><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="idxEditorState.isUnique"> <span class="d-checkbox__item">Each index should resolve to a unique result</span></label></div></div></div><div class="rx-record-index-editor-layout-row"><div class="rx-record-index-editor-layout-column rx-record-index-editor-layout-column_first"><div class="rx-record-index-editor-label">Available Fields</div><rx-record-index-field-selector field-selection-disabled="idxEditorState.isFieldSelectionDisabled" list="idxEditorState.fields.available"></rx-record-index-field-selector><div class="rx-record-index-editor-select-buttons"><button class="d-button d-button_secondary d-button_large d-icon-angle_right rx-record-index-editor-select-buttons__button rx-record-index-editor-select-buttons__button_large" type="button" ng-disabled="idxEditorState.isFieldSelectionDisabled" ng-click="moveHorizontal(\n                            idxEditorState.fields.available,\n                            idxEditorState.fields.selected\n                        )"></button> <button class="d-button d-button_secondary d-button_large d-icon-angle_left rx-record-index-editor-select-buttons__button rx-record-index-editor-select-buttons__button_large" type="button" ng-disabled="idxEditorState.isFieldSelectionDisabled" ng-click="moveHorizontal(\n                            idxEditorState.fields.selected,\n                            idxEditorState.fields.available\n                        )"></button></div></div><div class="rx-record-index-editor-layout-column rx-record-index-editor-layout-column_first"><div class="rx-record-index-editor-label">Selected Fields<rx-tooltip tooltip="{text: \'Drag and drop these fields to assign priority. The topmost field will get highest priority in returning search results.\', placement: \'top\'}"></rx-tooltip></div><rx-record-index-field-selector field-selection-disabled="idxEditorState.isFieldSelectionDisabled" list="idxEditorState.fields.selected" dnd-enabled="true"></rx-record-index-field-selector><div class="rx-record-index-editor-select-buttons"><button class="d-button d-button_secondary d-button_large rx-record-index-editor-select-buttons__button" type="button" ng-disabled="idxEditorState.isFieldSelectionDisabled" ng-click="moveVertical(idxEditorState.fields.selected, -1)">Move Up</button> <button class="d-button d-button_secondary d-button_large rx-record-index-editor-select-buttons__button" type="button" ng-disabled="idxEditorState.isFieldSelectionDisabled" ng-click="moveVertical(idxEditorState.fields.selected, 1)">Move Down</button></div></div></div></form><div class="d-modal__footer clearfix"><button class="d-button d-button_primary d-button_large rx-record-index-editor-footer-button" type="button" ng-disabled="!idxEditorState.fields.selected.length" ng-click="saveIndex()">Save</button> <button class="d-button d-button_secondary d-button_large rx-record-index-editor-footer-button" type="button" ng-click="$dismiss()">Cancel</button></div>'),a.put("scripts/record/designer/inspector-editors/record-index-editor/record-index-field-selector.directive.html",'<div class="rx-record-index-field-selector"><div class="rx-record-index-field-selector__textfield d-textfield d-textfield_label_hidden"><label class="rx-record-index-field-selector__textfield-label d-textfield__label d-icon-left-search"><span class="d-textfield__item">Search fields</span> <input class="d-textfield__input" ng-model="searchText.label" type="search" placeholder="Search fields"></label></div><ul class="rx-record-index-field-selector-list" ng-class="{\'rx-record-index-field-selector-list_disabled\': fieldSelectionDisabled}" ng-if="dndEnabled && !fieldSelectionDisabled" dnd-list="list"><li class="rx-record-index-field-selector-list__item" dnd-draggable="item" dnd-moved="list.splice($index, 1)" ng-class="{\'rx-record-index-field-selector-list__item_selected\': item.selected}" ng-repeat="item in list | filter : searchText" ng-click="select(item)"><span class="d-icon-left-dots rx-record-index-field-selector-list__item-label" ng-bind="item.label"></span></li></ul><ul class="rx-record-index-field-selector-list" ng-class="{\'rx-record-index-field-selector-list_disabled\': fieldSelectionDisabled}" ng-if="!dndEnabled || fieldSelectionDisabled"><li class="rx-record-index-field-selector-list__item" ng-class="{\'rx-record-index-field-selector-list__item_selected\': item.selected}" ng-repeat="item in list | filter : searchText" ng-click="select(item)"><span class="rx-record-index-field-selector-list__item-label" ng-bind="item.label"></span></li></ul></div>'),a.put("scripts/record/designer/inspector-editors/record-inheritance-selector/record-inheritance-selector.directive.html",'<div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-checked="inheritanceOptions.isSharedInstanceStorage" ng-disabled="state.lockShareDataOption || options.isReadOnly" ng-click="inheritanceOptionsChange(\'isSharedInstanceStorage\', !inheritanceOptions.isSharedInstanceStorage)"> <span class="d-checkbox__item">Share data with inheritors</span><rx-tooltip tooltip="\'If this option is selected, all Record Definitions inheriting from this one will share the same database for storing data.\'"></rx-tooltip></label></div><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-disabled="options.isReadOnly" ng-checked="inheritanceOptions.isAbstract" ng-click="inheritanceOptionsChange(\'isAbstract\', !inheritanceOptions.isAbstract)"> <span class="d-checkbox__item">Make Abstract</span><rx-tooltip tooltip="\'If this option is selected, new entries for the inherited Record Definition will not be allowed to be created.\'"></rx-tooltip></label></div><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-checked="inheritanceOptions.isFinal && !inheritanceOptions.isSharedInstanceStorage" ng-disabled="options.isReadOnly || (inheritanceOptions.isSharedInstanceStorage && !inheritanceDescriptor.inheritingFrom)" ng-click="inheritanceOptionsChange(\'isFinal\', !inheritanceOptions.isFinal)"> <span class="d-checkbox__item">Make Final</span><rx-tooltip tooltip="\'If this option is selected, no other Record Definition will be able to inherit from this one.\'"></rx-tooltip></label></div><div><label ng-if="!inheritanceDescriptor.inheritingFrom">This Record Definition will be allowed to assume fields, permissions, and/or rules from any Definitions specified here.</label><a href="" class="d-button_action d-button_small d-icon-left-plus_circle is-checked" ng-show="!inheritanceDescriptor && !options.isReadOnly" ng-click="showRecordInheritanceOptions()">Inherit from a Record Definition<rx-tooltip tooltip="\'You can inhert field definitions for the current record definition from an existing record definition.\'"></rx-tooltip></a><div class="rx-inheritance-record-form" ng-show="inheritanceDescriptor"><a class="pull-right d-button d-button_action d-button_small d-icon-right-cross" ng-click="removeInheritance()" ng-if="!options.isReadOnly">&nbsp;</a><label><span>Record to Inherit:</span></label><rx-definition-picker ng-show="(!state.editMode || (state.editMode && !inheritanceOptions.isSharedInstanceStorage)) && !options.isReadOnly" rx-selected-definition-name="inheritanceDescriptor.inheritingFrom" rx-type="{{::definitionType}}"></rx-definition-picker><div class="d-dropdown d-js-dropdown" ng-show="(state.editMode && inheritanceOptions.isSharedInstanceStorage) || options.isReadOnly"><div class="d-dropdown__trigger d-select" data-placeholder="Select" disabled="disabled">{{inheritanceDescriptor.inheritingFrom}}</div></div><label><span>Inherit:</span></label><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="inheritingCoreFields" ng-disabled="(!inheritanceDescriptor.inheritingFrom || state.inheritCoreFieldsAutomatically) || state.lockCoreFieldInheritanceOption || options.isReadOnly" ng-change="inheritCoreFieldsChange()"> <span class="d-checkbox__item">Core Fields</span></label></div><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-checked="inheritanceDescriptor.isInheritingRules" ng-click="onInheritanceDescriptorChange(\'isInheritingRules\', !inheritanceDescriptor.isInheritingRules)" ng-disabled="!inheritanceDescriptor.inheritingFrom || options.isReadOnly"> <span class="d-checkbox__item">Rules</span></label></div><div class="d-checkbox d-checkbox_default"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-checked="inheritanceDescriptor.isInheritingFieldPermissions" ng-click="onInheritanceDescriptorChange(\'isInheritingFieldPermissions\', !inheritanceDescriptor.isInheritingFieldPermissions)" ng-disabled="!inheritanceDescriptor.inheritingFrom || options.isReadOnly"> <span class="d-checkbox__item">Field Permissions</span></label></div></div></div>'),a.put("scripts/record/designer/inspector-editors/security-labels/inspector-security-label-editor.directive.html",'<div class="rx-security-labels-editor"><a class="d-icon-left-plus_circle" ng-click="openSecurityLabelsEditor()" ng-hide="options.isReadOnly">Add/Remove Security Labels</a><ul class="rx-security-labels-list"><li ng-repeat="securityLabel in securityLabelsTree" ng-include="\'scripts/record/designer/inspector-editors/security-labels/inspector-security-label-tree-item.html\'"></li></ul></div>'),a.put("scripts/record/designer/inspector-editors/security-labels/inspector-security-label-tree-item.html",'<div class="rx-security-labels-item"><button ng-click="removeSecurityLabel(securityLabel)" ng-if="!securityLabel.inherited" class="btn-list d-icon-cross"></button> <button ng-click="openSecurityLabelsEditor(securityLabel)" ng-if="!securityLabel.inherited" class="btn-list d-icon-pencil"></button> <span class="rx-security-labels-item-name">{{securityLabel.name}}</span></div><ul ng-if="securityLabel.children" class="rx-security-labels-list"><li ng-repeat="securityLabel in securityLabel.children" ng-include="\'scripts/record/designer/inspector-editors/security-labels/inspector-security-label-tree-item.html\'"></li></ul>'),a.put("scripts/record/designer/inspector-editors/security-labels/security-label-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Security Labels</h4></div><form name="SecurityLabelEditorForm" novalidate><div class="modal-body"><div class="rx-record-grid-column-editor-wrapper"><div class="rx-security-label-modal-description">Security Labels control view and edit access restrictions to record instances and specific fields. Each label can be populates with a group to establish dynamic field permissions. Security Labels can also be set by Process and Rules.</div><div layout="row" layout-align="space-between center"><a class="d-icon-left-plus_circle" ng-click="addSecurityLabelParameter()">Add Security Label</a></div></div><div class="rx-security-label-container"><div ng-repeat="securityLabel in securityLabels" class="security-label-item"><div class="security-label-item-header" ng-click="securityLabel.isCollapsed = !securityLabel.isCollapsed"><div class="left-header-block">{{securityLabel.name || (securityLabel.lastUpdateTime ? \'\' : \'New Security Label\')}}</div><div class="right-header-block"><div ng-click="removeSecurityLabel($event, $index)" class="remove-button" ng-hide="securityLabel.inherited"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : securityLabel.isCollapsed , \'d-icon-right-angle_up\' : !securityLabel.isCollapsed}"></div></div></div><div uib-collapse="securityLabel.isCollapsed" class="d-collapse-panel collapse-content"><div class="row"><div class="col-md-12 d-textfield_required d-textfield"><label class="d-textfield__item">Name</label><input type="text" name="security-label-name-{{securityLabel.id}}" class="rx-input" required ng-disabled="securityLabel.inherited" ng-model="securityLabel.name" ng-blur="checkDuplicate(\'name\')" maxlength="254"><p ng-if="!securityLabel.name" class="d-error">Name is required.</p><p class="d-error" ng-if="securityLabel.name && SecurityLabelEditorForm[\'security-label-name-\' + securityLabel.id].$error.duplicate">Name must be unique.</p></div><div class="col-md-6 d-textfield"><label class="d-textfield__item">Parent<rx-tooltip tooltip="\'This selection establishes hierarchy of Security Labels.\n                                    When this Security Label is populated with a group,\n                                    its Parent Security Label will also be populated with that group`s parent.\'"></rx-tooltip></label><select ng-model="securityLabel.parent" ng-disabled="securityLabel.inherited" class="select"><option value="">None</option><option ng-repeat="securityLabelName in securityLabels | filter:securityLabelParentFilter(securityLabel.name) | orderBy:\'name\'" value="{{securityLabelName.name}}">{{securityLabelName.name}}</option></select></div></div></div></div></div><div class="rx-security-label-editor-action-buttons"><button type="submit" ng-disabled="SecurityLabelEditorForm.$invalid" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div></form>'),
a.put("scripts/record/designer/record-designer.directive.html",'<form name="rxRecordDesignerForm" novalidate><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="(plainRecordDefinition.name | definitionName:decode) || \'&lt;New \' + (plainRecordDefinition.resourceType | recordDefinitionType) + \' Record&gt;\'" definition-icon="app_list" items="breadcrumbs" on-click="handleBreadcrumbBarClick()"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_list\'" ng-click="toggleDesignMode()">{{isDesignMode ? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveRecordDefinition()" ng-disabled="!canSave()">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxRecordDesignerForm.json.$invalid}" ng-show="isDesignMode === false"><rx-simple-json-editor name="json" rx-object="plainRecordDefinition" readonly="readonly"></rx-simple-json-editor></div><div class="rx-record-designer" ng-show="isDesignMode === true"><div class="gridLayout" ng-class="{\'rx-blade-expanded-left\': leftBladeConfiguration.expanded, \'rx-blade-expanded-right\': rightBladeConfiguration.expanded, \'rx-record-designer-transitions-disabled\': transitionsDisabled}"><h3 class="rx-editor-content__heading">{{(plainRecordDefinition.name | definitionName:decode) || \'&lt;New \' + (plainRecordDefinition.resourceType | recordDefinitionType) + \' Record&gt;\'}}</h3><h4 class="rx-editor-content__subheading">Fields included in this {{(plainRecordDefinition.resourceType | recordDefinitionType)}} Record{{isJoinRecordDefinition ? (\' from \' + (plainRecordDefinition.primaryRecordDefinitionName | definitionName) + \' (Primary) and \' + (plainRecordDefinition.secondaryRecordDefinitionName | definitionName) + \' (Secondary)\') : \'\'}}</h4><div class="rx-record-counter"><div class="rx-record-counter__num" ng-bind="plainRecordDefinition.fieldDefinitions.length"></div><div class="rx-record-counter__label">{{::\'com.bmc.arsys.rx.standardlib.record.designer.allFields.label\' | translate}}</div></div><div layout class="toolbar d-toolbar d-toolbar_top d-toolbar-overflow d-toolbar_small"><div class="d-toolbar__wrapper" ng-show="isJoinRecordDefinition"><div class="d-toolbar__item"><a class="d-icon-left-plus_circle" type="button" ng-click="openAddFieldDialog()">{{::\'com.bmc.arsys.rx.standardlib.record.designer.newField.label\' | translate}}</a></div></div><div class="d-toolbar__wrapper" ng-show="!isJoinRecordDefinition"><div class="d-toolbar__item"><div uib-dropdown class="dropdown"><a uib-dropdown-toggle class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true"><div class="icon d-icon-left-plus_circle"></div>{{::\'com.bmc.arsys.rx.standardlib.record.designer.newField.label\' | translate}}</a><ul uib-dropdown-menu role="menu"><li role="presentation" ng-repeat="option in resourceTypeOptions" ng-click="addNewField(option.value)"><a role="menuitem" tabindex="-1" href="">{{::option.content}}</a></li></ul></div></div></div><div class="d-toolbar__wrapper"><div class="d-toolbar__item"><button class="d-button d-button_action d-button_large d-icon-left-trash" ng-disabled="isDeleteDisabled()" ng-click="deleteFields()" uib-tooltip="{{::\'com.bmc.arsys.rx.standardlib.record.designer.deleteField.label\' | translate}}"></button></div></div><div class="d-toolbar__wrapper"><div class="d-toolbar__item"><button class="d-button d-button_action d-button_large d-icon-left-undo" ng-click="undo()" ng-disabled="!hasUndo()" uib-tooltip="{{::\'com.bmc.arsys.rx.standardlib.common.undo.label\' | translate}}"></button></div></div><div class="d-toolbar__wrapper"><div class="d-toolbar__item"><button class="d-button d-button_action d-button_large d-icon-left-share" ng-click="redo()" ng-disabled="!hasRedo()" uib-tooltip="{{::\'com.bmc.arsys.rx.standardlib.common.redo.label\' | translate}}"></button></div></div></div><div ng-if="plainRecordDefinition" class="gridStyle" ui-grid="gridOptions" ui-grid-selection ui-grid-resize-columns ui-grid-save-state></div></div><rx-blade rx-configuration="rightBladeConfiguration" ng-class="{\'rx-record-designer-transitions-disabled\': transitionsDisabled}"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.recordProperties.iconClass" tab-name="rightBladeConfiguration.tabs.recordProperties.name" active="rightBladeConfiguration.tabs.recordProperties.active"><rx-designer-inspector target="selected.recordDefinitionModel" class="rx-record-inspector" rx-configuration="{}"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.fieldProperties.iconClass" tab-name="rightBladeConfiguration.tabs.fieldProperties.name" active="rightBladeConfiguration.tabs.fieldProperties.active"><rx-designer-inspector target="selected.fieldDefinitionModel" class="rx-field-inspector" rx-configuration="inspectorConfiguration"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + \' \' + validationIssueLevel" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active"><span class="title">{{::\'com.bmc.arsys.rx.standardlib.components.designer.inspector.validationIssues.title\' | translate}}</span><rx-designer-validation-issues validation-issues="selected.validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade></div></div></form>'),a.put("scripts/rule/designer/inspector-editors/interval-timer/inspector-interval-timer-field.directive.html",'<div class="rx-inspector-timer-textarea-field"><a ng-show="!options.attrs.input.disabled" class="edit-link d-icon-left-pencil" ng-click="openDialog()">Edit</a> <input type="hidden" ng-model="value" data-attribute="{{path}}" ng-disabled="{{options.attrs.input.disabled}}"><rx-inspector-read-only-text></rx-inspector-read-only-text></div>'),a.put("scripts/rule/designer/inspector-editors/interval-timer/rule-interval-timer-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Edit Timer</h4></div><div class="modal-body rx-timer-editor"><form novalidate><div class="row"><div class="col-md-6 form-horizontal"><label class="required">Interval:</label><div class="form-group"><div class="col-md-5"><input type="number" ng-model="timerData.days" name="days" class="rx-input" min="0" step="1"></div><label class="col-md-7">day(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="timerData.hours" name="hours" class="rx-input" min="0" step="1"></div><label class="col-md-7">hour(s)</label></div><div class="form-group"><div class="col-md-5"><input type="number" ng-model="timerData.minutes" name="minutes" class="rx-input" min="0" step="1"></div><label class="col-md-7">minute(s)</label></div></div></div></form><div>Interval Timer<div class="rx-timer-editor-preview">{{preview}}</div></div><div class="rx-timer-editor-action-buttons"><button type="button" type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!preview">OK</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/rule/designer/inspector-editors/rule-record-definitions/inspector-rule-record-definitions-field.directive.html",'<a class="d-icon-left-plus_circle" ng-click="openEditor()">Add/Remove Record Definitions</a> <span class="required">Rule Applies To:</span><div ng-repeat="selectedDefinition in recordDefinitions" class="selected-options"><span title="{{::selectedDefinition.content}}">{{selectedDefinition.content}}</span><div class="action-buttons"><div class="d-icon-left-cross" ng-click="removeColumn(selectedDefinition)"></div></div><div class="subtitle">{{$index === 0 ? \'[Primary Definition]\' : \'\'}}</div></div>'),a.put("scripts/rule/designer/inspector-editors/rule-record-definitions/rule-record-definitions-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Record Definitions</h4></div><div class="modal-body rx-rule-record-definitions-editor"><div class="rx-rule-record-definitions-editor-wrapper"><div class="rx-record-definitions-available-definitions rx-rule-record-definitions-editor-panel" layout="column"><h5>Available Record Definitions</h5><div class="d-textfield d-textfield_label_hidden"><label class="custom-search-label d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input custom-search" type="search" placeholder="Search record definitions"></label><div></div></div><div class="rx-rule-record-definitions-editor-available-list" cg-busy="{promise: loadingDefinitionsPromise, templateUrl: busyIndicatorTemplateUrl, delay: 200, minDuration: 0, message: \'\'}" flex><div class="available-definition" ng-repeat="definition in availableRecordDefinitions | orderBy:content | filter:{content: valueFilter}" dnd-draggable="definition" dnd-moved="availableRecordDefinitions.splice($index, 1)"><div class="column-pill" ng-dblclick="addDefinition(definition)"><span class="column-pill-icon icon d-icon-plus_circle" ng-click="addDefinition(definition, $event)"></span><div class="column-pill-label">{{definition.content}}</div></div></div></div></div><div class="rx-rule-record-definitions-editor-data rx-rule-record-definitions-editor-panel" layout="column"><div layout="row" layout-align="space-between center" class="rx-rule-record-definitions-editor-data-header"><h5>Selected Record Definitions</h5></div><div class="rx-rule-record-definitions-editor-data-empty" ng-show="!recordDefinitions.value.length">Select Record Definitions from the list on the left.</div><div class="selected-definitions" dnd-list="recordDefinitions.value" dnd-drop="onDropHandler(item)" flex><div class="dndPlaceholder"></div><div class="selected-definition-container" ng-repeat="definition in recordDefinitions.value" dnd-draggable="definition" dnd-moved="movedHandler($index)"><div dnd-nodrag><div class="button-open-definition"><div class="left-header-block"><div dnd-handle class="header-icon d-icon-left-dots"></div><div class="definition-label"><span class="definition-name" title="{{::definition.content}}">{{definition.content}}</span> <span class="definition-primary-label">{{$index === 0 ? \'[Primary Definition]\' : \'\'}}</span></div></div><div class="right-header-block"><div class="index-buttons"><button class="d-icon-left-triangle_down header-icon" ng-disabled="$last" ng-click="moveDown(definition); $event.stopPropagation();"></button> <button class="d-icon-left-triangle_up header-icon" ng-disabled="$first" ng-click="moveUp(definition); $event.stopPropagation();"></button></div><div ng-click="removeDefinition(definition)" class="remove-button"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div></div></div></div></div></div></div></div><div class="rx-rule-record-definitions-editor-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/rule/designer/rule-designer.directive.html",'<form name="rxRuleDesignerForm" novalidate><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="(plainRuleDefinition.name | definitionName) || \'&lt;New Rule&gt;\'" definition-icon="app_flag" items="breadcrumbs" on-click="handleBreadcrumbBarClick()"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_flag\'" ng-if="isDesignModeAvailable()" ng-click="toggleDesignMode()">{{isDesignMode ? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveChanges()" ng-disabled="!canSave()">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxRuleDesignerForm.json.$invalid}" ng-show="isDesignMode === false"><rx-simple-json-editor name="json" rx-object="plainRuleDefinition" ng-readonly="true"></rx-simple-json-editor></div><div class="rx-rule-designer" ng-show="isDesignMode === true"><rx-blade rx-configuration="leftBladeConfiguration" ng-class="{\'rx-rule-designer-transitions-disabled\': transitionsDisabled}" ng-if="stencilConfiguration"><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabDefault.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabDefault.name" active="leftBladeConfiguration.tabs.stencilTabDefault.active" on-activate="leftBladeConfiguration.tabs.stencilTabDefault.onActivate"><rx-designer-stencil paper="paper" stencil-configuration="stencilConfiguration.default" ng-class="{refreshing: leftBladeConfiguration.tabs.stencilTabDefault.refreshNeeded}"></rx-designer-stencil></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabFavorite.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabFavorite.name" active="leftBladeConfiguration.tabs.stencilTabFavorite.active" on-activate="leftBladeConfiguration.tabs.stencilTabFavorite.onActivate"><rx-designer-stencil paper="paper" stencil-configuration="stencilConfiguration.favorite" ng-class="{refreshing: leftBladeConfiguration.tabs.stencilTabFavorite.refreshNeeded}"></rx-designer-stencil></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabRecent.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabRecent.name" active="leftBladeConfiguration.tabs.stencilTabRecent.active" on-activate="leftBladeConfiguration.tabs.stencilTabRecent.onActivate"><rx-designer-stencil class="recentStencil" paper="paper" stencil-configuration="stencilConfiguration.recent"></rx-designer-stencil><button type="button" class="rx-clear-recent-stencil d-icon-left-cross_circle" ng-disabled="isRecentsEmpty()" ng-click="clearRecents()">Clear Recents</button></rx-blade-tab><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabSettings.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabSettings.name" active="leftBladeConfiguration.tabs.stencilTabSettings.active"><rx-designer-stencil-settings paper="paper" stencil-configuration-service="stencilConfiguration.configurationService"></rx-designer-stencil-settings></rx-blade-tab></rx-blade><rx-blade rx-configuration="rightBladeConfiguration" ng-class="{\'rx-rule-designer-transitions-disabled\': transitionsDisabled}"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.ruleProperties.iconClass" tab-name="rightBladeConfiguration.tabs.ruleProperties.name" active="rightBladeConfiguration.tabs.ruleProperties.active"><rx-designer-inspector target="selected.rule" class="rx-rule-inspector" rx-configuration="{}"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.elementProperties.iconClass" tab-name="rightBladeConfiguration.tabs.elementProperties.name" active="rightBladeConfiguration.tabs.elementProperties.active"><rx-designer-inspector target="selected.cellModel" class="rx-element-inspector" rx-configuration="inspectorConfiguration"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + \' \' + validationIssueLevel" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active"><span class="title">Validation Issues</span><div class="rx-refresh-validation-issues" ng-click="validateRule()"><div class="icon icon-refresh"></div><span>Refresh</span></div><rx-designer-validation-issues validation-issues="selected.validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade><rx-designer-canvas rx-configuration="canvasConfiguration" ng-class="{\'rx-blade-expanded-left\': leftBladeConfiguration.expanded, \'rx-blade-expanded-right\': rightBladeConfiguration.expanded, \'rx-rule-designer-transitions-disabled\': transitionsDisabled}"></rx-designer-canvas></div></div></form>'),a.put("scripts/search/search-content.html",'<div class="rx-global-search"><div class="rx-global-search-header"><div class="rx-global-search-label"><h1>{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.action.search.results.label\' | translate}}</h1></div><form class="rx-global-search-bar" ng-submit="getGlobalSearchResults()"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input ng-model="searchText" class="d-textfield__input rx-global-search-textField" type="text" placeholder="{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.action.search.label\' | translate}}"> <button class="d-textfield__action d-button d-button_action d-icon-cross" ng-click="clearSearchText()" type="button"></button></label></div></form><div class="rx-global-search-filter"><div uib-dropdown class="rx-global-search-dropdown" dropdown is-open="isopen" auto-close="outsideClick"><a type="button" class="dropdown__trigger d-icon-left-filter d-icon-right-angle_down dropdown-toggle dropdown-toggle" uib-dropdown-toggle data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{\'com.bmc.arsys.rx.standardlib.search.select.filter\' | translate}}</a><ul uib-dropdown-menu role="menu" class="rx-global-search-dropdown_menu"><div class="rx-global-search-dropdown_menu_item">{{::\'com.bmc.arsys.rx.standardlib.search.searchbox.placeholder\' | translate}}</div><li role="presentation" class="rx-global-search-dropdown_menu_item"><a href="" ng-click="selectAllFilter($event)">{{\'com.bmc.arsys.rx.standardlib.search.select.all\' | translate}}</a> <a class="rx-global-search-dropdown_menu_item_none" href="" ng-click="selectNoneFilter($event)">{{\'com.bmc.arsys.rx.standardlib.search.select.none\' | translate}}</a></li><li role="presentation" role="menuitem" ng-repeat="filterItem in filters"><div ng-click="updateFilters($event, filterItem)" class="{{(filterItem.selected) ? \'rx-global-search-dropdown__menu-options-item-option rx-global-search-dropdown-item_selected\' : \'rx-global-search-dropdown__menu-options-item-option rx-global-search-dropdown-item\'}}">{{filterItem.displayName | definitionName}}</div></li></ul></div></div></div><div layout="column" flex class="tms-tasks-grid-container"><div ng-show="!reload" ui-grid="gridOptions" ui-grid-infinite-scroll></div></div></div>'),a.put("scripts/security/session-expiration-modal.view.html",'<div class="d-modal__header"><h4 class="d-modal__title" ng-switch="sessionState.mode"><span ng-switch-when="idleSessionExpirationMode">Are you still there?</span> <span ng-switch-when="absoluteSessionExpirationMode">Session Expiration</span> <button class="close" ng-switch-when="absoluteSessionExpirationMode" type="button" ng-click="$dismiss()">&times;</button></h4></div><div class="d-modal__content rx-session-expiration-content" ng-switch="sessionState.mode"><div ng-switch-when="idleSessionExpirationMode">You haven\'t been active for little while.<br>Would you like to continue working?</div><div ng-switch-when="absoluteSessionExpirationMode">Your session is about to expire and you will be signed out for security purposes. Please save any work in progress</div></div><div class="d-modal__footer clearfix" ng-switch="sessionState.mode"><div class="rx-session-expiration-countdown d-icon-left-clock_o" ng-switch-when="idleSessionExpirationMode" ng-bind="sessionState.remainingTime"></div><button class="d-button d-button_primary d-button_large rx-session-expiration-button" type="button" ng-switch-when="idleSessionExpirationMode" ng-disabled="sessionState.isLoading" ng-click="keepAlive()">Continue</button> <button class="d-button d-button_secondary d-button_large rx-session-expiration-button" type="button" ng-switch-when="idleSessionExpirationMode" ng-disabled="sessionState.isLoading" ng-click="signOut()">Sign Out</button> <button class="d-button d-button_primary d-button_large rx-session-expiration-button" type="button" ng-switch-when="absoluteSessionExpirationMode" ng-click="$dismiss()">OK</button></div>'),a.put("scripts/view-component/view-component-placeholder.directive.html","<div class=\"well\"><h1>{{rxConfiguration.model.get('type')}}</h1></div>"),a.put("scripts/view-components/action-button/action-button-design.directive.html","<button type=\"button\" class=\"d-button d-button_small {{buttonCls}} d-icon-{{rxData.label ? 'left-' : ''}}{{iconCls}}\">{{rxData.label}}</button>"),a.put("scripts/view-components/action-button/action-button.directive.html",'<button type="button" class="d-button d-button_small" ng-click="onClick()" ng-class="[cls, icon]" ng-disabled="config.disabled" ng-show="!config.hidden">{{config.label}} <span class="rx-action-button-content"><rx-action rx-configuration="action" ng-repeat="action in actions"></rx-action></span></button>'),a.put("scripts/view-components/action-button/editors/action-editor-dialog.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Actions</h4></div><div class="modal-body rx-action-editor-dialog-body"><div class="rx-action-editor-dialog-wrapper"><div class="rx-column-available-actions rx-action-editor-dialog-panel" layout="column"><h5>Available Actions</h5><div class="d-textfield d-textfield_label_hidden"><label class="custom-search-label d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input custom-search" type="search" placeholder="Search actions"></label></div><div class="rx-action-editor-dialog-available-list" flex><div class="available-action" ng-repeat="action in availableActions | orderBy:name | filter:{label: valueFilter}" dnd-draggable="action" dnd-moved="availableActions.splice($index, 1)"><div class="action-pill" ng-dblclick="addAction(action.name)"><span class="action-pill-icon icon d-icon-plus_circle" ng-click="addAction(action.name)"></span><div class="action-pill-label">{{action.label}}</div></div></div></div></div><div class="rx-action-editor-dialog-data rx-action-editor-dialog-panel" layout="column"><div layout="row" layout-align="space-between center" class="rx-action-editor-dialog-data-header"><h5>Selected Actions</h5><div class="expand-collapse-buttons"><button class="d-button d-button_secondary d-button_small" ng-click="expandAll()">Expand All</button> <button class="d-button d-button_secondary d-button_small" ng-click="collapseAll()">Collapse All</button></div></div><div class="data-subheader">The order of these actions determines the sequence by which they will be performed.</div><div ng-show="!actions.length">No actions added.</div><div class="selected-actions" dnd-list="actions.models" dnd-drop="onDropHandler(index, item)" flex><div class="dndPlaceholder"></div><div class="selected-action-container" ng-repeat="action in actions.models" dnd-draggable="action" dnd-disable-if="$last && $first"><div dnd-nodrag><div class="button-open-action" ng-click="action.isCollapsed = !action.isCollapsed"><div class="left-header-block"><div dnd-handle class="header-icon d-icon-left-dots"></div><div class="action-name" title="{{::labelsMap[action.prop(\'rxData/name\')]}}">{{::labelsMap[action.prop(\'rxData/name\')]}}</div></div><div class="right-header-block"><div class="index-buttons"><button class="d-icon-left-triangle_down header-icon" ng-disabled="$last" ng-click="action.down(); $event.stopPropagation();" style="cursor: pointer"></button> <button class="d-icon-left-triangle_up header-icon" ng-disabled="$first" ng-click="action.up(); $event.stopPropagation();" style="cursor: pointer"></button></div><div ng-click="action.remove()" class="remove-button" style="cursor: pointer"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : action.isCollapsed , \'d-icon-right-angle_up\' : !action.isCollapsed}"></div></div></div><div uib-collapse="action.isCollapsed" class="d-collapse-panel collapse-content"><rx-action-editor action="action" class="dialog-view"></rx-action-editor></div></div></div></div></div></div><div class="rx-action-editor-dialog-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/view-components/action-button/editors/action-list.directive.html",'<div><a class="modify-actions d-icon-left-plus_circle" ng-click="openEditor()">Add/Remove Actions</a><div class="action-item" ng-repeat="action in actions.models" action="action"><span>{{::labelsMap[action.prop(\'rxData/name\')]}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(action)"></div><div class="d-icon-left-cross" ng-click="action.remove();"></div></div></div></div>'),a.put("scripts/view-components/action-button/editors/action-record-definition-picker.html",'<label ng-class="options.attrs.label.class">{{options.label}}:</label><rx-definition-picker rx-selected-definition-name="definition.name" rx-align="{{::options.align}}" rx-type="{{::options.definitionType}}"></rx-definition-picker>'),a.put("scripts/view-components/action-button/editors/inspector-action-editor.directive.html",'<div><label>Action<rx-tooltip tooltip="\'Creates a new button that can be used perform an action. For example, navigate to an external url, a view definition, to delete a record and so on.\'"></rx-tooltip></label><select ng-options="item.label for item in selectOptions" ng-change="onSelect()" ng-model="actionDescriptor" ng-disabled="isDisabled()" class="select"></select></div><a class="action-editor-move-down-action d-icon-arrow-down" ng-click="moveDown()" ng-show="!last"></a> <a class="action-editor-move-up-action d-icon-arrow-up" ng-click="moveUp()" ng-show="!first"></a> <a class="action-editor-remove-action d-icon-left-cross" ng-click="remove()"></a>'),a.put("scripts/view-components/action-button/editors/view-definition-params.directive.html",'<rx-expression-field label="param.label" value="param.value" cell="param.cell" path="param.path" ng-repeat="param in params"></rx-expression-field>'),a.put("scripts/view-components/action-button/editors/view-definition-selector.directive.html",'<div class="d-textfield" ng-class="{\'d-textfield_required\': options.isRequired}"><label class="d-textfield__item required">View</label><rx-definition-picker rx-selected-definition-name="selectedView.name" rx-align="{{::options.align}}" rx-type="view"></rx-definition-picker></div>'),a.put("scripts/view-components/action-button/editors/view-presentation-params.directive.html",'<div class="d-textfield"><label class="d-textfield__item">Presentation<rx-tooltip tooltip="\'Defines how the view definition should look in the application view.\'"></rx-tooltip></label><select ng-options="option.value as option.label for option in options.type" ng-model="value.type"></select></div><div class="d-textfield" ng-hide="value.type === options.type.fullWidth.value"><label class="d-textfield__item">Title</label><input type="text" data-type="text" ng-model="value.title"></div><div class="d-textfield" ng-hide="value.type === options.type.fullWidth.value"><label class="d-textfield__item">Size</label><select ng-options="option.value as option.label for option in options.modalSize" ng-model="value.modalSize"></select></div><div class="d-textfield" ng-hide="value.type !== options.type.fullWidth.value"><label class="d-textfield__item">Launch Behavior</label><select ng-options="option.value as option.label for option in options.launchBehavior" ng-model="value.launchBehavior"></select></div>'),a.put("scripts/view-components/container/container-design.directive.html",'<rx-view-designer-container node="containerLayout" class="component-container"></rx-view-designer-container>'),a.put("scripts/view-components/container/container.directive.html",'<rx-runtime-view-container node="node"></rx-runtime-view-container>'),a.put("scripts/view-components/record-editor/editors/inspector-record-definition-fields.directive.html",'<a class="field-action d-icon-left-plus_circle" ng-click="openEditor()">Quick Add/Remove Fields</a><div ng-repeat="field in fields" class="field-item"><div class="field-content"><div class="field-name">{{field.name}}</div><div class="field-type"><small>{{field.type | recordFieldType}}</small></div></div><div class="action-buttons"><div class="d-icon-left-cross" ng-click="removeField(field.id)"></div></div></div><input type="text" data-attribute="{{path}}" data-type="text" style="display: none">'),a.put("scripts/view-components/record-editor/editors/inspector-record-editor-field-selector.html",'<div class="modal-header"><h4 class="modal-title">Quick Add/Remove Fields</h4><button type="button" class="d-button d-button_primary d-button_small" ng-click="apply()" ng-disabled="!canApply()">Apply</button> <span ng-click="cancel()" class="icon d-icon-cross"></span></div><div class="modal-body"><div class="record-definition-fields-search"><a class="select-all" ng-click="selectFields()">Select All</a><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input class="d-textfield__input" type="search" placeholder="Type to filter field list" ng-model="filterValue"></label></div></div><div class="record-definition-fields-content"><div class="d-textfield"><div ng-show="requiredFields.length"><div class="d-textfield__item">Required fields:</div><a class="d-textfield__item" ng-click="selectRequiredFields()">Select All Required Fields</a></div><div class="d-checkbox d-checkbox_default record-definition-fields-checkbox" ng-repeat="field in fields | filter: {fieldOption: \'REQUIRED\'} | filter: {name: filterValue} | orderBy: \'name\' as requiredFields"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="field.selected"> <span class="d-checkbox__item">{{field.name}}</span></label></div></div><div class="d-textfield"><div ng-show="optinalFields.length"><div class="d-textfield__item">Optionals fields:</div><a class="d-textfield__item" ng-click="selectOptionalFields()">Select All Optional Fields</a></div><div class="d-checkbox d-checkbox_default record-definition-fields-checkbox" ng-repeat="field in fields | filter: filterOptionalFields | filter: {name: filterValue} | orderBy: \'name\' as optinalFields"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="field.selected"> <span class="d-checkbox__item">{{field.name}}</span></label></div></div><div class="d-textfield"><div ng-show="systemFields.length"><div class="d-textfield__item">System fields:</div><a class="d-textfield__item" ng-click="selectSystemFields()">Select All System Fields</a></div><div class="d-checkbox d-checkbox_default record-definition-fields-checkbox" ng-repeat="field in fields | filter: filterSystemFields | filter: {name: filterValue} | orderBy: \'name\' as systemFields"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="field.selected"> <span class="d-checkbox__item">{{field.name}}</span></label></div></div></div></div>'),
a.put("scripts/view-components/record-editor/field-components/attachment-field/attachment-field-design.directive.html",'<div class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{fieldDefinition.label}}</span> <input type="file" readonly="readonly" disabled="disabled" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}"></label></div>'),a.put("scripts/view-components/record-editor/field-components/attachment-field/attachment-field.directive.html",'<div class="rx-attachment-field" ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-show="!rxConfiguration.hidden" class="d-textfield"><label class="d-textfield__label"><span class="rx-attachment-item" ng-show="attachment"><a ng-click="saveAttachment()" title=" {{attachment.name}}"><span class="rx-attachment-icon"></span>{{attachment.name}}</a></span></label></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{::fieldDefinition.name}}</span></label><input class="rx-attachment-input" type="file"> <button ng-click="addAttachment()" class="d-button d-button_secondary d-button_small">{{attachment ? "Replace File" : "Choose File"}}</button><div class="rx-attachment-item"><a class="rx-attachment-label" title="{{attachment}}" ng-click="saveAttachment()">{{attachment}}</a><!--//TODO: akhyzhni revisit after Yadav Ravi creates mechanism to delete attachmnet with recordInstance resource--><!--<a class="rx-attachment-remove" ng-hide="isReadOnly()" ng-click="delete()">--><!--<span class="d-icon-cross_circle"></span>--><!--</a>--></div></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/boolean-field/boolean-field-design.directive.html",'<div class="d-textfield d-checkbox d-checkbox_switcher" ng-class="{\'d-checkbox_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-checkbox__label"><input class="d-checkbox__input" ng-disabled="true" ng-checked="true" type="checkbox"> <span class="d-checkbox__item">{{fieldDefinition.label}}</span></label></div>'),a.put("scripts/view-components/record-editor/field-components/boolean-field/boolean-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div class="d-textfield d-checkbox d-checkbox_switcher" ng-class="{\'d-checkbox_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-checkbox_disabled d-checkbox_required\': rxConfiguration.disabled}" ng-show="!rxConfiguration.hidden"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-model="fieldInstance.value" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-disabled="rxConfiguration.disabled"> <span class="d-checkbox__item">{{::rxConfiguration.label}}</span></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/character-field/character-field-design.directive.html",'<div class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{fieldDefinition.label}}</span> <input ng-if="!fieldDefinition.namedListDefinition" class="d-textfield__input" type="text" readonly="readonly" disabled="disabled" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}"><select ng-if="fieldDefinition.namedListDefinition" disabled="disabled"></select></label></div>'),a.put("scripts/view-components/record-editor/field-components/character-field/character-field-multiselect.view.html",'<div class="rx-multiselect"><button class="rx-multiselect__trigger rx-input d-icon-right-angle_down" type="button" ng-bind="header" ng-click="toggleSelect()"></button><div class="rx-multiselect__drop"><div class="rx-multiselect-search" ng-show="search"><div class="rx-multiselect-search__textfield d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><span class="d-textfield__item">Search</span> <input class="d-textfield__input" ng-model="searchText.label" type="search" ng-keydown="keydown($event)" autofocus="autofocus" placeholder="Search"></label></div></div><div class="rx-multiselect-search-actions text-right" ng-show="multiple"><button class="rx-multiselect-search__button d-button d-button_action d-button_small" ng-click="checkAll()">Select all</button> <button class="rx-multiselect-search__button d-button d-button_action d-button_small" ng-click="uncheckAll()">Select none</button></div><ul class="rx-multiselect-list"><li class="rx-multiselect-list__item" ng-repeat="item in items | filter : searchText"><a href tabindex="0" class="d-dropdown__link" ng-class="{\'is-checked\': item.checked }" ng-click="select(item); focus()"><span class="d-checkbox d-checkbox_default" ng-if="checkbox"><label class="d-checkbox__label"><input class="d-checkbox__input" type="checkbox" ng-checked="item.checked" tabindex="1"> <span class="d-checkbox__item">{{item.label}}</span></label></span> <span ng-if="!checkbox">{{item.label}}</span></a></li></ul></div></div>'),a.put("scripts/view-components/record-editor/field-components/character-field/character-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-if="fieldDefinition.namedListDefinition && rxConfiguration.enableMultiSelection"><div ng-show="!rxConfiguration.hidden" class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">{{::fieldDefinition.name}}</span></label><span ng-repeat="label in formattedLabels.shown track by $index"><span ng-show="!$first">,</span> {{label}}</span><a ng-show="formattedLabels.rest.length" tooltip-append-to-body="true" uib-tooltip="{{formattedLabels.rest.join(\', \')}}" tooltip-placement="bottom">, {{(\'com.bmc.arsys.rx.standardlib.view-components.record-editor.more.label\' | translate:{count: formattedLabels.rest.length})}}</a></div></div><div ng-if="!(fieldDefinition.namedListDefinition && rxConfiguration.enableMultiSelection)" ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span> <input name="{{fieldDefinition.name}}" ng-if="!fieldDefinition.namedListDefinition && !isPasswordField" ng-disabled="rxConfiguration.disabled" class="d-textfield__input" type="text" ng-model="fieldInstance.value" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}" ng-required="fieldDefinition.fieldOption == \'REQUIRED\'"> <input name="{{fieldDefinition.name}}" ng-if="isPasswordField" ng-disabled="rxConfiguration.disabled" class="d-textfield__input" type="password" ng-model="fieldInstance.value" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}" ng-required="fieldDefinition.fieldOption == \'REQUIRED\'"><ui-select ng-if="fieldDefinition.namedListDefinition\n                               && !rxConfiguration.enableMultiSelection\n                               && !isPasswordField" ng-disabled="rxConfiguration.disabled" ng-model="selectedOption" on-select="onSelect($item)"><ui-select-match allow-clear="{{fieldDefinition.fieldOption != \'REQUIRED\'}}">{{$select.selected.label}}</ui-select-match><ui-select-choices repeat="item in selectOptions | filter: $select.search"><div ng-bind-html="item.label | highlight: $select.search"></div></ui-select-choices></ui-select><am-multiselect ng-if="fieldDefinition.namedListDefinition\n                            && rxConfiguration.enableMultiSelection\n                            && !isPasswordField" multiple="true" template-url="scripts/view-components/record-editor/field-components/character-field/character-field-multiselect.view.html" ng-model="multiSelectModel.value" ng-change="onMultiSelectChange(multiSelectModel.value)" options="option.value as option.label for option in selectOptions"></am-multiselect></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/date-field/date-field-design.directive.html",'<div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{fieldDefinition.label}}</span><p class="input-group"><input type="text" ng-disabled="true" class="d-textfield__input"> <span class="input-group-btn"><button type="button" class="btn btn-default"><i class="d-icon-calendar"></i></button></span></p></label></div>'),a.put("scripts/view-components/record-editor/field-components/date-field/date-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span><p class="input-group"><input type="text" name="{{fieldDefinition.name}}" ng-disabled="rxConfiguration.disabled" uib-datepicker-popup="yyyy-MM-dd" datepicker-options="datepickerOptions" show-button-bar="false" ng-model="data.date" ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" is-open="data.opened" ng-change="dateChanged()" class="d-textfield__input"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)"><i class="d-icon-calendar"></i></button></span></p></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/date-time-field/date-time-field-design.directive.html",'<div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><span class="d-textfield__item d-textfield__item_label">{{fieldDefinition.label}}</span><div class="row"><div class="col-sm-6"><div class="input-group"><input type="text" ng-disabled="true"> <span class="input-group-btn"><button type="button" class="btn btn-default"><i class="d-icon-calendar"></i></button></span></div></div><div class="col-sm-6"><uib-timepicker ng-model="time" ng-disabled="true" readonly-input="true" show-meridian="ismeridian" class="d-timepicker d-timepicker__no-label"></uib-timepicker></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/date-time-field/date-time-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><span class="d-textfield__item d-textfield__item_label">{{rxConfiguration.label}}</span><div class="row"><div class="col-sm-6"><div class="input-group"><input type="text" name="{{fieldDefinition.name}}" class="d-textfield__input" ng-disabled="rxConfiguration.disabled" uib-datepicker-popup="yyyy-MM-dd" ng-model="data.date" ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" is-open="data.opened" datepicker-options="datepickerOptions" show-button-bar="false" ng-change="dateChanged()"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)"><i class="d-icon-calendar"></i></button></span></div></div><div class="col-sm-6"><uib-timepicker ng-model="data.date" ng-disabled="rxConfiguration.disabled" ng-change="timeChanged()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" class="d-timepicker d-timepicker__no-label"></uib-timepicker></div></div></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/decimal-field/decimal-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\',\n     \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span> <input name="{{fieldDefinition.name}}" ng-disabled="rxConfiguration.disabled" class="d-textfield__input" type="number" ng-model="fieldInstance.value" ng-pattern="/^(\\-)?(\\d{1,}(\\.)?\\d*){1}$/" rx-string-to-number ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" aria-required="{{fieldDefinition.fieldOption== \'REQUIRED\'}}"></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/field-read.directive.html",'<div ng-show="!rxConfiguration.hidden" class="d-textfield"><label class="d-textfield__label"><span class="d-textfield__item">{{::fieldDefinition.name}}</span></label><p>{{getFormattedValue()}}</p></div>'),a.put("scripts/view-components/record-editor/field-components/floating-field/floating-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span> <input name="{{fieldDefinition.name}}" ng-disabled="rxConfiguration.disabled" class="d-textfield__input" type="number" ng-model="fieldInstance.value" ng-pattern="/^(\\-)?(\\d{1,}(\\.)?\\d*){1}$/" rx-string-to-number ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}"></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/integer-field/integer-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span> <input name="{{fieldDefinition.name}}" ng-disabled="rxConfiguration.disabled" class="d-textfield__input" type="number" ng-model="fieldInstance.value" ng-pattern="/^(\\-)?[0-9]+$/" rx-string-to-number ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" aria-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}"></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/select-group/select-group-field-design.directive.html",'<div class="empty-form-text" ng-if="!fieldDefinition.fieldList.length"><span class="empty-form-icon"></span><div>No fields have been added to this Select Group yet.</div><div><small>Add files through the Details panel to the right.</small></div></div><div class="field-list" ng-repeat="field in fieldDefinition.fieldList" ng-if="fieldDefinition.fieldList.length"><div class="d-textfield" ng-class="{\'d-textfield_required\': field.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{field.displayLabel || "&lt;No Label&gt;"}}</span><select disabled="disabled"><option>Default value</option></select></label></div></div>'),a.put("scripts/view-components/record-editor/field-components/select-group/select-group-field.directive.html",'<div ng-show="!rxConfiguration.hidden"><div class="field-list" ng-repeat="field in fieldList" ng-if="fieldList.length"><div class="d-textfield" ng-class="{\'d-textfield_required\': field.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{field.displayLabel}}</span><ui-select ng-disabled="rxConfiguration.disabled" on-select="onListItemSelect($item, field)" ng-model="field.selectedOption"><ui-select-match allow-clear="{{field.fieldOption != \'REQUIRED\'}}">{{$select.selected.label}}</ui-select-match><ui-select-choices repeat="item in field.selectOptions | filter: $select.search"><div ng-bind-html="item.label | highlight: $select.search"></div></ui-select-choices></ui-select></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/selection-field/selection-field-design.directive.html",'<div class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{fieldDefinition.label}}</span><select disabled="disabled"><option>Default value</option></select></label></div>'),a.put("scripts/view-components/record-editor/field-components/selection-field/selection-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span><ui-select name="{{fieldDefinition.name}}" ng-required="{{fieldDefinition.fieldOption == \'REQUIRED\'}}" ng-disabled="rxConfiguration.disabled" ng-model="selectedOption.model"><ui-select-match allow-clear="{{fieldDefinition.fieldOption != \'REQUIRED\' && !rxConfiguration.disabled}}">{{$select.selected.content}}</ui-select-match><ui-select-choices repeat="option in selectOptions | filter: $select.search"><div ng-bind-html="option.content | highlight: $select.search"></div></ui-select-choices></ui-select></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/textarea-field/textarea-field-design.directive.html",'<div class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"><label class="d-textfield__label"><span class="d-textfield__item">{{fieldDefinition.label}}</span><textarea class="d-textfield__input" readonly="readonly" disabled="disabled"></textarea></label></div>'),a.put("scripts/view-components/record-editor/field-components/textarea-field/textarea-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield" ng-class="{\'d-textfield_required\': fieldDefinition.fieldOption == \'REQUIRED\', \'d-textfield_invalid\' : form[fieldDefinition.name].$dirty && form[fieldDefinition.name].$invalid}"><label class="d-textfield__label"><span class="d-textfield__item">{{rxConfiguration.label}}</span><textarea ng-disabled="rxConfiguration.disabled" class="d-textfield__input" ng-required="fieldDefinition.fieldOption == \'REQUIRED\'" name="{{fieldDefinition.name}}" ng-model="fieldInstance.value"></textarea></label></div></div></div>'),a.put("scripts/view-components/record-editor/field-components/time-field/time-field-design.directive.html",'<div class="d-textfield"><uib-timepicker ng-model="time" show-meridian="ismeridian" class="d-timepicker" ng-disabled="true" readonly-input="true" label="{{fieldDefinition.label}}" ng-class="{\'d-timepicker_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"></uib-timepicker></div>'),a.put("scripts/view-components/record-editor/field-components/time-field/time-field.directive.html",'<div ng-switch on="rxConfiguration.state"><div ng-switch-when="READ"><div ng-include="\'scripts/view-components/record-editor/field-components/field-read.directive.html\'"></div></div><div ng-switch-when="EDIT"><div ng-show="!rxConfiguration.hidden" class="d-textfield"><uib-timepicker ng-model="data.time" ng-change="timeChanged()" ng-disabled="rxConfiguration.disabled" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" label="{{rxConfiguration.label}}" class="d-timepicker" ng-class="{\'d-timepicker_required\': fieldDefinition.fieldOption == \'REQUIRED\'}"></uib-timepicker></div></div></div>'),a.put("scripts/view-components/record-editor/record-editor-all-fields.html",'<div class="rx-record-editor__field-container" ng-repeat="fieldGroupFilter in ::fieldGroupFilters track by $index" ng-if="componentDefinitions.length"><rx-record-editor-component-renderer ng-repeat="component in componentDefinitions | filter: fieldGroupFilter | orderBy: \'propertiesByName.label\' as groupFields" rx-component-definition="component" rx-state="state"></rx-record-editor-component-renderer><hr class="rx-record-editor__separator" ng-if="!$parent.$last && groupFields.length !== 0"></div><div><button ng-show="isSaveButtonAvailable()" type="button" class="d-button d-button_primary d-button_small rx-record-editor-save" ng-disabled="!canSave()" ng-click="save()">{{::\'com.bmc.arsys.rx.standardlib.common.save.label\' | translate}}</button> <button ng-show="isCancelButtonAvailable()" type="button" class="d-button d-button_secondary d-button_small rx-record-editor-close" ng-click="cancel()">{{::\'com.bmc.arsys.rx.standardlib.common.cancel.label\' | translate}}</button></div>'),a.put("scripts/view-components/record-editor/record-editor-default.html",'<a ng-show="isEditStateAvailable()" class="edit-link d-icon-left-pencil rx-record-editor-edit" ng-click="switchToEditState()">{{::\'com.bmc.arsys.rx.standardlib.common.edit.label\' | translate}}</a><div class="rx-record-editor__field-container"><rx-record-editor-component-renderer ng-repeat="component in componentDefinitions | orderBy: \'order\'" rx-component-definition="component" rx-state="state"></rx-record-editor-component-renderer></div><div class="rx-record-invalid-message" ng-show="!isConfigValid()">{{::\'com.bmc.arsys.rx.standardlib.view-components.record-editor.record-invalid-message.label\' | translate}}.</div><div ng-hide="!isConfigValid()"><button ng-show="isSaveButtonAvailable()" type="button" class="d-button d-button_primary d-button_small rx-record-editor-save" ng-disabled="!canSave()" ng-click="save()">{{::\'com.bmc.arsys.rx.standardlib.common.save.label\' | translate}}</button> <button ng-show="isCancelButtonAvailable()" type="button" class="d-button d-button_secondary d-button_small rx-record-editor-close" ng-click="cancel()">{{::\'com.bmc.arsys.rx.standardlib.common.cancel.label\' | translate}}</button></div>'),a.put("scripts/view-components/record-editor/record-editor-design.directive.html",'<div ng-class="{\'empty-form\': isFormEmpty()}"><div class="info-text"><i class="empty-form-icon"></i><div>Drop fields from the Palette here or select a Record Definition and add fields in the Properties panel.</div></div><rx-view-designer-container node="recordEditorLayout" class="component-container" before-drop="onBeforeDrop(event, item)"></rx-view-designer-container></div>'),a.put("scripts/view-components/record-editor/record-editor.directive.html","<div class=\"rx-record-editor {{state == 'READ' ? 'rx-record-editor-read-state' : ''}} {{columns ? 'rx-record-editor_columns-' + columns : ''}} {{styles}}\"><div ng-if=\"missingRequiredFields.length\" class=\"d-notification d-notification_error d-icon-left-exclamation_triangle ng-scope\"><p>{{::'com.bmc.arsys.rx.standardlib.view-components.record-editor.missing-required-fields.label' | translate}} {{missingRequiredFields.join(', ')}}.</p></div><form class=\"rx-record-editor__form rx-theme-main-border-color rx-theme-main-text-color rx-theme-main-background-color\" name=\"rxRecordEditorForm\" novalidate><div ng-include=\"template\"></div></form></div>"),a.put("scripts/view-components/record-grid/editors/record-grid-column-editor/inspector-record-grid-column-editor.directive.html",'<a class="d-icon-left-plus_circle" ng-click="openEditor()">Add/Remove Grid Columns</a><div ng-show="visibleColumns.length"><label><rx-tooltip tooltip="options.tooltip"></rx-tooltip>Visible by Default:</label><div ng-repeat="selectedColumn in columns | orderBy:\'index\' | filter:{visible:true} as visibleColumns" class="selected-options"><span>{{selectedColumn.title}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(selectedColumn.fieldId)"></div><div class="d-icon-left-cross" ng-click="removeColumn(selectedColumn)"></div></div><div class="column-type">{{selectedColumn.type}}</div></div></div><div ng-show="additionalColumns.length"><label>Additional Columns:</label><div ng-repeat="selectedColumn in columns | filter:{visible:false} as additionalColumns" class="selected-options"><span title="{{::selectedColumn.title}}">{{selectedColumn.title}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(selectedColumn.id)"></div><div class="d-icon-left-cross" ng-click="removeColumn(selectedColumn)"></div></div><div class="column-type">{{selectedColumn.type}}</div></div></div><input type="text" data-attribute="{{path}}" data-type="text" style="display: none">'),a.put("scripts/view-components/record-grid/editors/record-grid-column-editor/record-grid-column-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Add/Remove Grid Columns</h4></div><div class="modal-body rx-record-grid-column-editor"><div class="rx-record-grid-column-editor-wrapper"><div class="rx-column-available-columns rx-record-grid-column-editor-panel" layout="column"><h5>Available Columns</h5><div class="d-textfield d-textfield_label_hidden"><label class="custom-search-label d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input custom-search" type="search" placeholder="Search columns"></label></div><div class="rx-record-grid-column-editor-available-list" flex><div class="available-column" ng-repeat="column in availableColumns | orderBy:name | filter:valueFilter" dnd-draggable="column" dnd-moved="availableColumns.splice($index, 1)"><div class="column-pill" ng-dblclick="addColumn(column)"><span class="column-pill-icon icon d-icon-plus_circle" ng-click="addColumn(column, $event)"></span><div class="column-pill-label">{{column.name}}</div></div></div></div></div><div class="rx-record-grid-column-editor-data rx-record-grid-column-editor-panel" layout="column"><div layout="row" layout-align="space-between center" class="rx-record-grid-column-editor-data-header"><h5>Selected Columns</h5><div class="expand-collapse-buttons"><button class="d-button d-button_secondary d-button_small" ng-click="expandAll()">Expand All</button> <button class="d-button d-button_secondary d-button_small" ng-click="collapseAll()">Collapse All</button></div></div><div class="rx-record-grid-column-editor-data-empty" ng-show="!columns.value.length">No columns added.</div><div class="selected-columns" dnd-list="columns.value" dnd-drop="onDropHandler(item)" flex><div class="dndPlaceholder"></div><div class="selected-column-container" ng-repeat="column in columns.value" ng-init="cell = column.cell" dnd-draggable="column" dnd-moved="columns.value.splice($index, 1)"><div dnd-nodrag><div class="button-open-column" ng-click="column.isCollapsed = !column.isCollapsed"><div class="left-header-block"><div dnd-handle class="header-icon d-icon-left-dots"></div><div class="column-name" title="{{::column.name}}">{{column.name}}</div></div><div class="right-header-block"><div class="index-buttons"><button class="d-icon-left-triangle_down header-icon" ng-disabled="$last" ng-click="moveDown(column); $event.stopPropagation();"></button> <button class="d-icon-left-triangle_up header-icon" ng-disabled="$first" ng-click="moveUp(column); $event.stopPropagation();"></button></div><div ng-click="removeColumn(column)" class="remove-button"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : column.isCollapsed , \'d-icon-right-angle_up\' : !column.isCollapsed}"></div></div></div><div uib-collapse="column.isCollapsed" class="d-collapse-panel collapse-content"><div class="rx-record-grid-column-editor-text-fields"><div><label>Column Header</label><input type="text" class="rx-input" ng-model="column.title"></div></div><div class="rx-record-grid-column-editor__checkbox-fields"><div class="d-checkbox d-checkbox_default rx-record-grid-column-editor__checkbox-field" ng-repeat="property in ::columnProperties"><label ng-click="onColumnPropertyChanged(column, property.name, $event)"><input class="d-checkbox__input" type="checkbox" ng-model="column[property.name]"> <span class="d-checkbox__label d-checkbox__item">{{::property.label}}<rx-tooltip tooltip="property.tooltip"></rx-tooltip></span></label><rx-action-list ng-if="property.name === \'clickable\' && column[property.name]"></rx-action-list></div></div></div></div></div></div></div></div><div class="rx-record-grid-column-editor-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/view-components/record-grid/editors/record-grid-sort-editor/inspector-record-grid-sort-editor.directive.html",'<label ng-class="::options.attrs.label.class">{{::options.label}}:</label><div class="rx-inspector-record-grid-sort-editor__container"><select class="select rx-inspector-record-grid-sort-editor__select" ng-options="column.title for column in columns | filter:initialSortColumnsFilter()" ng-model="selectedColumn"><option value="">None Selected</option></select><!-- Show direction buttons only when any column has sortable value--><div class="rx-inspector-record-grid-sort-editor__buttons" ng-class="{visible: selectedDirection}"><ul class="d-button-group d-button-group_small"><li class="d-button-group__item" ng-repeat="direction in ::directions"><button class="d-button-group__btn d-icon-arrow_{{direction.icon}}" ng-click="changeDirection(direction.value)" ng-class="{\'is-checked\': isCheckedDirection(direction.value)}"></button></li></ul></div></div><!-- Hack: hidden input for Inspector because without it we get "closest" error --><input type="text" data-attribute="{{path}}" data-type="text" style="display: none">'),a.put("scripts/view-components/record-grid/record-grid-design.directive.html",'<div><div ng-show="!hasRecordDefinitionName()" class="info-text"><i class="info-text-icon"></i><div>Select a Record Definition and add/remove Grid Columns in the Properties panel.</div></div><div ng-show="hasRecordDefinitionName()"><rx-view-designer-container node="recordGridLayout" class="component-container"></rx-view-designer-container><div class="rx-record-grid-toolbar"><a class="rx-record-grid-toolbar__item d-button d-button_action d-button_large d-icon-refresh"></a><form class="rx-record-grid-toolbar__item"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label d-icon-left-search"><input class="d-textfield__input" type="search" ng-disabled="true" placeholder="Type to search grid"></label></div><input type="submit" class="rx-record-grid-toolbar__submit"></form><div class="rx-record-grid-toolbar__item"><div class="d-dropdown__trigger d-button d-button_action d-button_large d-icon-left-filter d-icon-right-angle_down" ng-show="rxConfiguration.model.prop(\'rxData/enableFiltering\')">Filter</div></div><div class="rx-record-grid-toolbar__right"><div class="d-dropdown d-js-dropdown d-dropdown_selected-columns rx-record-grid-toolbar__item"><div class="d-dropdown__trigger d-icon-ellipsis d-button d-button_action d-button_large"></div></div></div></div></div><!-- can\'t use ng-show here because ui-grid requires being rendered right away to properly calculate columns size --><div ui-grid="gridOptions" ng-class="{\'invisible\': !hasRecordDefinitionName()}"></div></div>'),
a.put("scripts/view-components/record-grid/record-grid-toolbar.directive.html",'<a class="rx-record-grid-toolbar__item d-button d-button_action d-button_large d-icon-refresh" ng-click="refreshGridData()"></a><form class="rx-record-grid-toolbar__item rx-record-grid-toolbar__item_search" ng-submit="applySearchText()"><div class="d-textfield d-textfield_label_hidden"><label class="d-textfield__label"><button type="submit" class="d-textfield__action d-button d-button_action d-icon-search"></button> <button class="d-textfield__action d-button d-button_action d-icon-cross" ng-click="clearSearch()" ng-show="searchText"></button> <input ng-model="searchText" class="d-textfield__input" type="text" placeholder="{{::\'com.bmc.arsys.rx.standardlib.view-components.record-grid.search.placeholder\' | translate}}"></label></div></form><div class="rx-record-grid-toolbar__item" ng-if="filter.config"><rx-search-filter rx-filter-data="filter.data" rx-filter-configuration="filter.config"></rx-search-filter></div><div class="rx-record-grid-toolbar__right"><div data-mode="multiselectable" data-model="visibleColumns" class="d-dropdown d-js-dropdown d-dropdown_selected-columns rx-record-grid-toolbar__item"><div class="d-dropdown__trigger d-icon-ellipsis d-button d-button_action d-button_large"></div><div class="d-dropdown__menu"><div class="d-dropdown__menu-caption"><span>{{::\'com.bmc.arsys.rx.standardlib.view-components.record-grid.visible-columns.label\' | translate}}</span></div><ul class="d-dropdown__menu-options"><li class="d-dropdown__menu-options-item" ng-repeat="column in uiGridOptions.columnDefs | orderBy : \'name\'"><a class="d-dropdown__menu-options-item-option" data-value="{{column.field}}">{{column.name}}</a></li></ul></div></div></div><!--Action Bar--><div class="rx-record-grid-toolbar__action-bar" ng-class="{active: isActionBarVisible}"><span class="rx-record-grid-toolbar__item rx-record-grid-toolbar__item_selected-row-count">{{selectionData.selectedRowCount > 1 ? (\'com.bmc.arsys.rx.standardlib.view-components.record-grid.rows-selected.label\' | translate:{count: selectionData.selectedRowCount}) : (\'com.bmc.arsys.rx.standardlib.view-components.record-grid.row-selected.label\' | translate:{count: selectionData.selectedRowCount })}}</span><ul class="rx-record-grid-toolbar__action-buttons"><li class="rx-record-grid-toolbar__item" ng-repeat="button in config.actionButtons"><rx-action-button rx-configuration="button"></rx-action-button></li></ul></div><!--Action Bar End-->'),a.put("scripts/view-components/record-grid/record-grid.directive.html",'<div class="rx-action-button-content"><div class="rx-column-action-container" ng-repeat="column in columnsWithActions"><rx-action rx-configuration="action" ng-repeat="action in column.actions"></rx-action></div></div><rx-record-grid-toolbar></rx-record-grid-toolbar><!-- ui-grid appended here -->'),a.put("scripts/view-components/rich-text/rich-text-design.directive.html",'<!--this nested structure of div\'s is here to prevent drop into ckeditor from the outside--><div class="wrapper"><div class="backdrop"></div><div class="cke-scrollable-area"><div class="editor" contenteditable="true"></div></div></div>'),a.put("scripts/view-components/rich-text/rich-text.directive.html",'<div ng-show="!rxConfiguration.propertiesByName.hidden" ng-bind-html="html"></div>'),a.put("scripts/view-components/shell/editors/global-search-editor.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Configure Results View</h4></div><div class="modal-body rx-global-search-editor"><div class="rx-global-search-editor-wrapper"><div class="rx-record-available-records rx-global-search-editor-panel" layout="column"><h5>Available Records to Search:</h5><div class="d-textfield d-textfield_label_hidden"><label class="custom-search-label d-textfield__label d-icon-left-search"><input ng-model="valueFilter" class="d-textfield__input custom-search" type="search" placeholder="Search Records"></label></div><div class="rx-global-search-editor-available-list" flex><div class="available-record" ng-repeat="record in availableRecords | orderBy:name | filter:valueFilter" dnd-draggable="record" dnd-moved="availableRecords.splice($index, 1)"><div class="record-pill" ng-dblclick="addRecord(record)"><span class="record-pill-icon icon d-icon-plus_circle" ng-click="addRecord(record, $event)"></span><div class="record-pill-label">{{::record.definitionName}}</div></div></div></div></div><div class="rx-global-search-editor-data rx-global-search-editor-panel" layout="column"><div layout="row" layout-align="space-between center" class="rx-global-search-editor-data-header"><h5>Records Included in Search Results:</h5><div class="expand-collapse-buttons"><button class="d-button d-button_secondary d-button_small" ng-click="expandAll()">Expand All</button> <button class="d-button d-button_secondary d-button_small" ng-click="collapseAll()">Collapse All</button></div></div><div class="rx-global-search-editor-data-empty" ng-show="!records.length">No records added.</div><div class="selected-records" dnd-list="records" dnd-drop="onDropHandler(item)" flex><div class="dndPlaceholder"></div><div class="selected-record-container" ng-repeat="record in records" dnd-draggable="record" dnd-moved="records.splice($index, 1)"><div dnd-nodrag><div class="button-open-record" ng-click="record.isCollapsed = !record.isCollapsed"><div class="left-header-block"><div class="record-name" title="{{::record.definitionName}}">{{::record.definitionName}}</div></div><div class="right-header-block"><div ng-click="removeRecord(record)" class="remove-button"><div class="d-icon-left-cross header-icon"></div><div class="remove-button-text">Remove</div></div><div class="arrow-pointer header-icon" ng-class="{\'d-icon-right-angle_down\' : record.isCollapsed , \'d-icon-right-angle_up\' : !record.isCollapsed}"></div></div></div><div uib-collapse="record.isCollapsed" class="d-collapse-panel collapse-content"><div class="rx-global-search-editor-input-fields d-textfield d-textfield_required"><div><label class="d-textfield__label"><span class="d-textfield__item">Display View When Clicked</span></label><rx-definition-picker rx-selected-definition-name="record.view" rx-align="left" rx-type="view"></rx-definition-picker></div></div></div></div></div></div></div></div><div class="rx-global-search-editor-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-disabled="isSaveDisabled()" ng-click="ok()">Save</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></div>'),a.put("scripts/view-components/shell/editors/inspector-global-search-editor.directive.html",'<a class="d-icon-left-plus_circle" ng-click="openEditor()">Configure Results View</a><div ng-show="records.length"><label>Records Included in Search Results:</label><div ng-repeat="selectedRecord in records | orderBy:\'index\' " class="selected-options"><span class="selected-name">{{selectedRecord.definitionName}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(selectedRecord)"></div><div class="d-icon-left-cross" ng-click="removeRecord(selectedRecord)"></div></div></div></div><input type="text" data-attribute="{{path}}" data-type="text" style="display: none">'),a.put("scripts/view-components/shell/editors/inspector-menu-item-editor.directive.html",'<div ng-if="!data.navBarItems.length"><small>No menu items have been defined. Drag and drop menu groups or menu items onto the canvas to define the menu.</small></div><div class="rx-inspector-menu-item-editor" ng-if="data.navBarItems.length"><div ng-repeat="item in data.navBarItems | orderBy:\'index\'"><div class="selected-options"><span class="selected-name">{{item.menuItemName}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(item)"></div><div class="d-icon-cross" ng-click="removeItem(item)"></div></div><span class="selected-type">{{item.menuItemType}}</span> <span class="selected-type" ng-if="item.actionName">({{item.actionName}})</span></div><div ng-repeat="compDefinition in item.componentDefinitions | orderBy:\'index\'" class="selected-options selected-sub-options"><span class="selected-name">{{compDefinition.menuItemName}}</span><div class="action-buttons"><div class="d-icon-left-pencil" ng-click="openEditor(compDefinition)"></div><div class="d-icon-cross" ng-click="removeItem(compDefinition)"></div></div><span class="selected-type">{{compDefinition.menuItemType}}</span> <span class="selected-type" ng-if="compDefinition.actionName">({{compDefinition.actionName}})</span></div></div></div>'),a.put("scripts/view-components/shell/menu-components/menu-group/shell-menu-group-design.directive.html",'<div class="d-n-menu menu-item menu-group" dnd-list="holder" dnd-dragover="handleDragover(type)" dnd-drop="handleDrop(event)"><div class="d-n-menu__item" ng-class="{\'d-n-dropdown__trigger\': manager.selectedMenuGroupId === id}" ng-click="toggleDropdown()"><span class="d-n-dropdown__trigger-back"></span> <a class="d-n-menu__link"><span class="d-n-dropdown__trigger-title menu-item-label">{{menuGroupDefinition.menuGroupName}} <span class="d-icon-right-angle_down"></span></span></a><rx-view-designer-container node="menuGroupItemsLayout" class="d-n-dropdown component-container clearfix"></rx-view-designer-container></div></div>'),a.put("scripts/view-components/shell/menu-components/menu-group/shell-menu-group.directive.html","<div>Menu Group</div>"),a.put("scripts/view-components/shell/menu-components/menu-item/shell-menu-item-design.directive.html",'<div class="menu-item d-icon-{{menuItemDefinition.menuItemName ? \'left-\' : \'\'}}{{menuItemDefinition.iconCls}}"><span class="menu-item-label" ng-class="{spacer: menuItemDefinition.iconCls}" ng-show="menuItemDefinition.menuItemName">{{menuItemDefinition.menuItemName}}</span></div>'),a.put("scripts/view-components/shell/menu-components/menu-item/shell-menu-item.directive.html","<div>{{::'com.bmc.arsys.rx.standardlib.view-components.shell.shell-menu-item.menu-item.label' | translate}}</div>"),a.put("scripts/view-components/shell/shell-design.directive.html",'<div class="rx-shell-design"><header class="d-n-header"><nav class="d-n-nav" role="navigation"><div class="d-n-menu rx-shell-app-switcher"><div class="d-n-menu__item"><a class="d-n-menu__logo"><span class="bmc-logo rx-theme-small-logo-light"></span></a></div><div class="d-n-menu__item d-n-dropdown__trigger"><a class="d-n-menu__link" ng-class="{\'d-icon-right-angle_down\': navBarDefinition.allowAppSwitching}"><span class="d-n-dropdown__trigger-back"></span> <span class="d-n-dropdown__trigger-title d-n-menu__divider">{{bundleFriendlyName}}</span></a></div></div><rx-view-designer-container node="shellLayout" class="menu-items-container component-container clearfix" before-drop="onBeforeDrop(event, item)"></rx-view-designer-container><div class="d-n-actions"><span class="d-n-action d-icon-gear"></span><div class="d-n-action d-n-nav__profile d-profile d-profile_size-tiny d-profile_rounded d-n-menu__divider"><span class="d-n-dropdown__trigger-back d-n-dropdown-profile__trigger-back"></span> <span class="d-profile__image d-n-profile__image d-icon-left-user_circle"></span> <i class="d-icon-left-angle_down d-n-profile__arrow"></i></div><a class="d-n-action d-n-action__search d-icon-left-search" ng-hide="navBarDefinition.globalSearchDisabled"></a></div></nav></header></div>'),a.put("scripts/view-components/shell/shell-menu.html",'<div class="rx-shell-blade__dialog" role="dialog" aria-labelledby="modalLabel"><div class="rx-shell-blade__dialog" id="action-blade"><nav class="d-n-hamburger__overlay-wrap" role="navigation"><button class="d-n-hamburger__close rx-shell__button d-icon-left-cross" ng-click="close()"></button><div class="d-n-hamburger__logo"><a class="d-n-hamburger__logo-image rx-shell__logo"><div class="rx-theme-small-logo-light"></div></a></div><ul class="d-n-hamburger__nav"><li class="d-n-dropdown__divider"><div class="d-n-hamburger__nav-link" ng-if="!allowAppSwitching"><span>{{currentApp.friendlyName}}</span></div><a class="d-n-hamburger__nav-link d-icon-right-angle_down" ng-if="allowAppSwitching" ng-click="toggleAppList()"><span>{{currentApp.friendlyName}}</span></a><!-- todo: make app list hidden on open for now, will refactor if Brian suggest something different --><ul class="d-n-hamburger__submenu" ng-hide="hideAppList"><li ng-repeat="app in appList"><a class="d-n-hamburger__nav-link d-n-nav__submenu-link" ng-href="/{{::app.id}}/index.html">{{::app.friendlyName}}</a></li></ul></li></ul><ul class="d-n-hamburger__nav"><li ng-repeat="menuItem in menu.items" ng-hide="menuItem.hidden"><a ng-if="menuItem.state" class="d-n-hamburger__nav-link d-icon-left-{{::menuItem.icon}}" ng-class="{\'is-active\' : menuItem.selected}" ui-sref="{{::menuItem.state.name || menuItem.state}}({{::menuItem.state.params}})" ng-click="itemSelected()">{{::menuItem.label}}</a> <a ng-if="menuItem.url" class="d-n-hamburger__nav-link d-icon-left-{{::menuItem.icon}}" ng-class="{\'is-active\' : menuItem.selected}" href="{{::menuItem.url}}" ng-click="itemSelected()">{{::menuItem.label}}</a> <a ng-if="menuItem.navigationBarItems" class="d-n-hamburger__nav-link d-icon-left-{{::menuItem.icon}}">{{::menuItem.label}}</a><ul class="d-n-hamburger__submenu" ng-if="menuItem.navigationBarItems"><li ng-repeat="subMenuItem in menuItem.navigationBarItems" ng-hide="subMenuItem.hidden"><a ng-if="subMenuItem.state" class="d-n-hamburger__nav-link d-n-nav__submenu-link d-icon-left-{{::subMenuItem.icon}}" ng-class="{\'is-active\' : subMenuItem.selected}" ui-sref="{{::subMenuItem.state.name || subMenuItem.state}}({{::subMenuItem.state.params}})" ng-click="itemSelected()">{{::subMenuItem.label}}</a> <a ng-if="subMenuItem.url" class="d-n-hamburger__nav-link d-n-nav__submenu-link d-icon-left-{{::subMenuItem.icon}}" ng-class="{\'is-active\' : subMenuItem.selected}" href="{{::subMenuItem.url}}" ng-click="itemSelected()">{{::subMenuItem.label}}</a></li></ul></li></ul></nav></div></div>'),a.put("scripts/view-components/shell/shell-notification-show-all-template.html",'<div class="rx-shell-notification-dialog__container"><div class="d-n-nav rx-shell-notification-dialog__title-section">{{\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.viewAll.label\' | translate}}</div><div class="rx-shell-notification-dialog__content-section"><div ng-repeat="notification in model.notifications"><div class="rx-shell-notification-dialog__content-title rx-default-border" translate="com.bmc.arsys.rx.standardlib.view-components.shell.notification.{{notification.type}}.label" translate-values="{ count: notification.count }"></div><div class="rx-shell-notification__empty-holder" ng-if="notification.count===0">{{\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.\' + notification.type + \'.noNotifications.label\' | translate}}</div><div ng-if="notification.count"><div class="rx-shell-notification__item rx-default-border" ng-class="{\'rx-shell-notification__item-dismiss\' : item.dismissInProgress}" ng-repeat="item in notification.list"><div class="rx-shell-notification__item-icon-section d-icon-left-speaker"></div><div class="rx-shell-notification__item-content-section"><div class="rx-shell-notification__item-content-text" ng-bind-html="item[model.userMessageDef.fields.body]"></div><div class="rx-shell-notification__item-content-date">{{item[model.userMessageDef.fields.modifiedDate] | date:\'medium\'}}</div></div><div class="rx-shell-notification__item-dismiss-section" ng-if="notification.type===\'active\'"><button class="d-button_action d-button_small d-icon-left-cross" ng-if="!item.dismissInProgress" ng-click="model.dismissNotifications(item)"></button><div class="rx-shell-notification__item-dismiss-preloader"><div class="d-preloader d-icon-left-circle_25_o" ng-if="item.dismissInProgress"></div></div></div></div></div><div class="d-preloader d-icon-left-circle_25_o" ng-if="notification.loadingInProgress"></div><div class="rx-shell-notification-dialog__content-loadMore" ng-if="!notification.loadingInProgress && notification.count > notification.list.length"><button class="d-button d-button_action d-button_small" translate="com.bmc.arsys.rx.standardlib.view-components.shell.notification.action.loadMore" translate-values="{ chuckSize: model.chuckSize }" ng-click="model.getNotifications(notification.type, true)"></button></div></div></div><div class="rx-shell-notification-dialog__footer-section rx-default-border"><button class="d-button d-button_secondary d-button_small" ng-click="dismiss()">{{\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.action.close\' | translate}}</button></div></div>'),a.put("scripts/view-components/shell/shell-notification-template.html",'<div class="rx-shell-notification__container"><div class="rx-shell-notification__title-section rx-default-border">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.title\' | translate}} <button class="d-button d-button_action-clear d-button_small" ng-click="viewAll()">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.action.viewAll\' | translate}}</button></div><div class="rx-shell-notification__empty-holder" ng-if="model.notifications.active.count===0">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.notification.active.noNotifications.label\' | translate}}</div><div ng-if="model.notifications.active.count"><div class="rx-shell-notification__item rx-default-border" ng-class="{\'rx-shell-notification__item-dismiss\' : item.dismissInProgress}" ng-repeat="item in model.notifications.active.list"><div class="rx-shell-notification__item-icon-section d-icon-left-speaker"></div><div class="rx-shell-notification__item-content-section"><div class="rx-shell-notification__item-content-text" ng-bind-html="item[model.userMessageDef.fields.body]"></div><div class="rx-shell-notification__item-content-date">{{item[model.userMessageDef.fields.modifiedDate] | date:\'medium\'}}</div></div><div class="rx-shell-notification__item-dismiss-section"><button class="d-button_action d-button_small d-icon-left-cross" ng-if="!item.dismissInProgress" ng-click="model.dismissNotifications(item)"></button><div class="rx-shell-notification__item-dismiss-preloader"><div class="d-preloader d-icon-left-circle_25_o" ng-if="item.dismissInProgress"></div></div></div></div></div><div class="d-preloader d-icon-left-circle_25_o" ng-if="model.notifications.active.loadingInProgress"></div><div class="rx-shell-notification-dialog__content-loadMore" ng-if="!model.notifications.active.loadingInProgress && model.notifications.active.count > model.notifications.active.list.length"><button class="d-button d-button_action d-button_small" translate="com.bmc.arsys.rx.standardlib.view-components.shell.notification.action.loadMore" translate-values="{ chuckSize: model.chuckSize }" ng-click="model.getNotifications(\'active\', true)"></button></div></div>'),a.put("scripts/view-components/shell/shell-notification.directive.html",'<a class="d-n-action d-n-action__message d-icon-left-bell_o" href="javascript:void(0)" uib-popover-template="notificationTemplate" popover-is-open="popoverIsOpen" ng-click="togglePopover()" popover-placement="auto bottom"><span class="d-n-action__message-counter" ng-if="model.notifications.active.count">{{model.notifications.active.count}}</span></a>'),a.put("scripts/view-components/shell/shell.directive.html",'<header class="d-n-header rx-shell"><nav class="d-n-nav" role="navigation"><!--navigation hamburger icon--><div class="d-n-hamburger rx-shell__button-container" ng-class="{\'is-hidden\' : !compactNavigation}"><button class="d-n-hamburger__trigger d-n-hamburger__icon rx-shell__button d-icon-left-lines" ng-click="openMenu()"></button></div><!-- active menu element is visible in compactNavigation mode --><ul class="d-n-breadcrumbs" ng-class="{\'is-hidden\' : !compactNavigation}"><li><a class="d-n-breadcrumbs__link">{{menu.items[menu.currentItem].label}}</a></li></ul><ul class="d-n-menu" ng-class="{\'is-hidden\' : compactNavigation}"><li class="d-n-menu__item"><a class="d-n-menu__logo"><span class="bmc-logo rx-theme-small-logo-light"></span></a></li><li class="d-n-menu__item" ng-if="!allowAppSwitching"><div class="d-n-menu__link"><span class="d-n-dropdown__trigger-title d-n-menu__divider">{{currentApp.friendlyName}}</span></div></li><li class="d-n-menu__item d-n-dropdown__trigger" ng-if="allowAppSwitching"><a class="d-n-menu__link d-icon-right-angle_down"><span class="d-n-dropdown__trigger-back"></span> <span class="d-n-dropdown__trigger-title d-n-menu__divider">{{currentApp.friendlyName}}</span></a><ul class="d-n-dropdown"><li ng-repeat="app in appList" class="d-n-dropdown__item"><a class="d-n-dropdown__link" ng-href="/{{::app.id}}/index.html">{{::app.friendlyName}}</a></li></ul></li><li ng-repeat="menuItem in menu.items" class="d-n-menu__item" ng-class="{\'d-n-dropdown__trigger\': menuItem.navigationBarItems}" ng-hide="menuItem.hidden"><a ng-if="menuItem.state" class="d-n-menu__link d-icon-left-{{::menuItem.icon}}" ng-class="{\'is-active\': menuItem.selected}" ui-sref="{{::menuItem.state.name || menuItem.state}}({{::menuItem.state.params}})"><span>{{::menuItem.label}}</span></a> <a ng-if="menuItem.url" class="d-n-menu__link d-icon-left-{{::menuItem.icon}}" ng-class="{\'is-active\': menuItem.selected}" href="{{::menuItem.url}}"><span>{{::menuItem.label}}</span></a> <a ng-if="menuItem.navigationBarItems" class="d-n-menu__link d-icon-right-angle_down d-icon-left-{{::menuItem.icon}}" ng-class="{\'is-active\': menuItem.selected}"><span class="d-n-dropdown__trigger-back"></span> <span class="d-n-dropdown__trigger-title">{{::menuItem.label}}</span></a><ul class="d-n-dropdown" ng-if="menuItem.navigationBarItems"><li ng-repeat="subMenuItem in menuItem.navigationBarItems" ng-class="{\'d-n-dropdown__divider\': subMenuItem.separated}" class="d-n-dropdown__item" ng-hide="subMenuItem.hidden"><a ng-if="subMenuItem.state" class="d-n-dropdown__link d-icon-left-{{::subMenuItem.icon}}" ng-class="{\'is-active\': subMenuItem.selected}" ui-sref="{{::subMenuItem.state.name || subMenuItem.state}}({{::subMenuItem.state.params}})">{{::subMenuItem.label}}</a> <a ng-if="subMenuItem.url" class="d-n-dropdown__link d-icon-left-{{::subMenuItem.icon}}" ng-class="{\'is-active\': subMenuItem.selected}" href="{{::subMenuItem.url}}">{{::subMenuItem.label}}</a></li></ul></li></ul><div class="d-n-actions"><a class="d-n-action d-icon-gear d-n-menu__divider"></a><div class="d-n-action d-n-nav__profile d-profile d-profile_size-tiny d-profile_rounded"><span class="d-n-dropdown__trigger-back d-n-dropdown-profile__trigger-back"></span> <span class="d-profile__image d-n-profile__image d-icon-left-user_circle"></span> <i class="d-icon-left-angle_down d-n-profile__arrow"></i><ul class="d-n-dropdown d-n-dropdown__profile"><li class="d-n-dropdown__item d-n-profile__title d-n-dropdown__divider"><span class="d-n-profile__label">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.profile.label\' | translate}}</span> <span class="d-n-profile__name">{{currentUser}}</span></li><li class="d-n-dropdown__item d-n-dropdown__profile-item"><a class="d-n-dropdown__link d-icon-left-user">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.action.myAppSettings.label\' | translate}}</a></li><li class="d-n-dropdown__item d-n-dropdown__profile-item"><a class="d-n-dropdown__link d-icon-left-exit" ng-click="logout()">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.action.signOut.label\' | translate}}</a></li></ul></div><!-- comment out action buttons for now\n            <a class="d-n-action d-n-action__book d-icon-left-book_o"></a>\n            <a class="d-n-action d-n-action__message d-icon-left-comments_o">\n                <span class="d-n-action__message-counter">2</span>\n            </a>\n            --><a id="d-n-action__search" ng-if="!isGlobalSearchDisabled" class="d-n-action d-n-action__search d-icon-left-search rx-shell-nav__item-left" ng-click="toggleSearchBar()" ng-enter="toggleSearchBar()" href="" tabindex="0"></a><rx-shell-notification></rx-shell-notification></div><div ng-if="globalSearch"><form class="d-n-search" ng-class="{\'is-active\': globalSearch}" ng-submit="moveToSearchState(globalSearchText)"><label class="sr-only" for="search">{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.action.search.label\' | translate}}</label><input class="d-n-search__item" type="search" id="search" ng-model="globalSearchText" placeholder="{{::\'com.bmc.arsys.rx.standardlib.view-components.shell.searchbox.placeholder\' | translate}}"><div class="d-n-search__close d-icon-left-cross" ng-click="globalSearch = !globalSearch"></div></form></div></nav></header><div ng-form="shellContent"><ng-transclude></ng-transclude></div>'),a.put("scripts/view/designer/inspector-editors/customization-options/view-customization-options-editor.html",'<div class="d-modal__header dialog-header-confirm"><h4 class="d-modal__title">Customization Options <button type="button" class="close" ng-click="cancel()">&times;</button></h4></div><div class="d-modal__content"><div class="rx-blocker" ng-if="isEditDisabled"></div><form name="customizationOptionsFrom"><div class="d-modal__content-item"><rx-dpl-checkbox ng-model="customizationOptions.allowOverlay">Allow future customization to this View Definition, <strong>{{definition.name | definitionName}}</strong></rx-dpl-checkbox><div class="rx-customization-option-hint">If this option is unselected, others will not be allowed to customize this definition.<br>If you are unsafe about what this option does, leave it selected</div></div></form></div><div class="d-modal__footer"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!customizationOptionsFrom.$dirty">{{\'com.bmc.arsys.rx.standardlib.common.save.label\' | translate}}</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">{{\'com.bmc.arsys.rx.standardlib.common.cancel.label\' | translate}}</button></div>'),a.put("scripts/view/designer/layout/renderers/view-designer-container.directive.html",'<div rx-view-component-id="{{::node.componentDefinitionId}}" class="row container-element"><div ng-repeat="column in node.columns track by $index" ng-init="columnIndex = $index" class="column-renderer col-md-{{column.span || 12}}"><ul class="view-designer-container__list" dnd-list="column.children" dnd-drop="onDndDrop(event, item, node, columnIndex, index)" dnd-allowed-types="node.allowedTypes" dnd-horizontal-list="{{node.horizontalList || false}}" ng-style="node.height ? {\'min-height\': node.height} : undefined"><li ng-repeat="node in column.children track by node.componentDefinitionId" dnd-draggable="node" dnd-effect-allowed="move" dnd-type="node.type" dnd-selected="onDndSelected(event, node)" dnd-disable-if="node.static || node.disableCustomization" ng-class="{\'selected\': node.selected}" class="view-designer-container__item"><rx-view-designer-item node="node"></rx-view-designer-item></li></ul></div></div>'),a.put("scripts/view/designer/layout/renderers/view-designer-item.directive.html",'<div class="rx-view-designer-item" dnd-nodrag><div class="rx-view-designer-item-halo" ng-show="node.selected" dnd-handle><span class="icon d-icon-dots"></span> <span class="rx-view-designer-item-name">{{node.name}}</span> <span ng-hide="::isDeleteDisabled()" class="icon d-icon-cross" ng-click="onDeleteItemClick($event)"></span></div><div class="rx-view-designer-item-content"></div></div>'),a.put("scripts/view/designer/runtime-view-parameters.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">Enter runtime parameters</h4></div><div class="modal-body"><form name="runtimeViewParametersForm"><div><div class="d-textfield" ng-repeat="field in fields"><label class="d-textfield__label"><span class="d-textfield__item">{{field.title}}</span> <input class="d-textfield__input" type="text" ng-model="field.value" required></label></div></div><div class="rx-condition-editor-action-buttons"><button type="button" class="d-button d-button_primary d-button_large" ng-click="ok()" ng-disabled="!runtimeViewParametersForm.$valid">OK</button> <button type="button" class="d-button d-button_secondary d-button_large" ng-click="cancel()">Cancel</button></div></form></div>'),a.put("scripts/view/designer/view-designer-canvas.directive.html",'<div class="rx-designer-canvas-toolbar"><button class="rx-designer-canvas-toolbar-item undo" type="button" ng-disabled="!hasUndo() || canvasConfiguration.isReadOnly" ng-click="undo()"><div class="icon d-icon-undo"></div></button> <button class="rx-designer-canvas-toolbar-item redo" type="button" ng-disabled="!hasRedo() || canvasConfiguration.isReadOnly" ng-click="redo()"><div class="icon d-icon-share"></div></button></div><div class="dropzone-scroller"><div class="dropzone"><rx-view-designer-container node="canvasConfiguration.layout"></rx-view-designer-container></div></div>'),a.put("scripts/view/designer/view-designer-stencil.directive.html",'<input type="search" placeholder="search" class="search" ng-model="search"><div class="rx-view-designer-stencil-wrapper"><div class="rx-view-components-group" ng-repeat="(groupKey, componentGroup) in componentGroups"><div class="rx-view-components-group-header" ng-click="toggleComponentGroup(componentGroup)"><span class="rx-view-components-group-title">{{groupKey}}</span> <span class="text-right icon" ng-class="componentGroup.isCollapsed ?\'d-icon-angle_down\' :\'d-icon-angle_up\'"></span></div><div ng-show="!componentGroup.isCollapsed"><div class="rx-view-components-group-body" ng-repeat="componentsChunk in componentGroup"><div class="rx-view-component" dnd-draggable="component" dnd-effect-allowed="copy" dnd-type="component.type" ng-repeat="component in componentsChunk | filter:{name : search} | orderBy : \'name\'"><span class="rx-view-component-icon icon" ng-class="\'d-icon-\'+component.icon" ng-if="!component.icon.url"></span> <img class="rx-view-component-icon image" ng-src="{{component.icon.url}}" ng-if="component.icon.url"> <span class="rx-view-component-name">{{component.name}}</span></div></div></div></div><div ng-if="rxConfiguration.components.length == 0">No matches found...</div></div>'),a.put("scripts/view/designer/view-designer.directive.html",'<form name="rxViewDesignerForm"><div class="rx-editor-header"><div class="rx-editor-header__column rx-editor-header__column_left"><a class="rx-editor-header__back d-icon-arrow_left" ng-click="closeDesigner()"></a> <span class="rx-editor-header__app-name">{{bundleFriendlyName}}</span></div><div class="rx-editor-header__column rx-editor-header__column_right"><div class="rx-editor-header__title"><rx-designer-breadcrumb-bar definition-name="(plainViewDefinition.name | definitionName) || \'&lt;New View&gt;\'" definition-icon="app_eye" items="breadcrumbs" on-click="handleBreadcrumbBarClick(itemId)"></rx-designer-breadcrumb-bar></div><div class="rx-editor-header__buttons"><button type="button" class="rx-editor-header__button rx-editor-header__button_toggle-view d-button d-button_secondary d-button_small" ng-class="isDesignMode ? \'d-icon-left-brackets_curly\' : \'d-icon-left-app_eye\'" ng-if="isDesignModeAvailable()" ng-click="toggleDesignMode()">{{isDesignMode ? "JSON" : "UI Design"}}</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_show-runtime d-button d-button_secondary d-button_small d-icon-left-eye" ng-hide="isNewView  || rxConfiguration.shellDefinitionName" ng-click="showRuntimeMode()">Preview</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_save rx-editor-header__button_divider-before d-button d-button_primary d-button_small" ng-click="saveChanges()" ng-disabled="!canSave()">Save</button> <button type="button" class="rx-editor-header__button rx-editor-header__button_close d-button d-button_secondary d-button_small" ng-click="closeDesigner()">Close</button></div></div></div><div class="rx-editor-content"><div class="rx-simple-json-editor-container control-group" ng-class="{\'has-error\': rxViewDesignerForm.json.$invalid}" ng-show="isDesignMode === false"><rx-simple-json-editor name="json" rx-object="plainViewDefinition" ng-readonly="true"></rx-simple-json-editor></div><div class="rx-component-view-designer" ng-show="isDesignMode === true"><rx-blade rx-configuration="leftBladeConfiguration"><rx-blade-tab icon-class="leftBladeConfiguration.tabs.stencilTabDefault.iconClass" tab-name="leftBladeConfiguration.tabs.stencilTabDefault.name" active="leftBladeConfiguration.tabs.stencilTabDefault.active" on-activate="leftBladeConfiguration.tabs.stencilTabDefault.onActivate"><rx-view-designer-stencil rx-configuration="stencilConfiguration" ng-if="!canvasConfiguration.isReadOnly"></rx-view-designer-stencil><p ng-if="canvasConfiguration.isReadOnly" class="rx-component-view-designer-palette-readonly-text">This View is in read-only mode and components cannot be added to the canvas</p></rx-blade-tab></rx-blade><rx-blade rx-configuration="rightBladeConfiguration"><rx-blade-tab icon-class="rightBladeConfiguration.tabs.viewInformation.iconClass" tab-name="rightBladeConfiguration.tabs.viewInformation.name" active="rightBladeConfiguration.tabs.viewInformation.active"><rx-designer-inspector target="selected.viewDefinitionModel" class="rx-view-inspector" rx-configuration="{}"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.componentInformation.iconClass" tab-name="rightBladeConfiguration.tabs.componentInformation.name" active="rightBladeConfiguration.tabs.componentInformation.active"><rx-designer-inspector target="selected.viewComponentDefinitionModel" class="rx-view-component-inspector" rx-configuration="viewComponentInspectorConfiguration"></rx-designer-inspector></rx-blade-tab><rx-blade-tab icon-class="rightBladeConfiguration.tabs.validationIssues.iconClass + (selected.validationIssues.length ? \' error\' : \'\')" tab-name="rightBladeConfiguration.tabs.validationIssues.name" active="rightBladeConfiguration.tabs.validationIssues.active" ng-hide="canvasConfiguration.isReadOnly"><span class="title">Validation Issues</span><rx-designer-validation-issues validation-issues="selected.validationIssues" rx-configuration="validationIssuesConfiguration"></rx-designer-validation-issues></rx-blade-tab></rx-blade><rx-view-designer-canvas ng-class="{\'rx-blade-expanded-left\': leftBladeConfiguration.expanded, \'rx-blade-expanded-right\': rightBladeConfiguration.expanded}"></rx-view-designer-canvas></div></div></form>'),
a.put("scripts/view/runtime/modal/runtime-view-blade.html",'<div class="modal-header dialog-header-confirm"><h3 class="modal-title">{{modalConfiguration.title}}</h3></div><div class="modal-preloader"><div cg-busy="{promise: promise, templateUrl: templateUrl, message: message, backdrop: backdrop, delay: delay, minDuration: minDuration}"></div></div><div class="modal-body__content"><rx-runtime-view rx-configuration="runtimeViewConfiguration"></rx-runtime-view></div>'),a.put("scripts/view/runtime/modal/runtime-view-modal.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="close()">×</button><h4 class="modal-title">{{modalConfiguration.title}}</h4></div><div class="modal-preloader"><div cg-busy="{promise: promise, templateUrl: templateUrl, message: message, backdrop: backdrop, delay: delay, minDuration: minDuration}"></div></div><div class="modal-body__content"><rx-runtime-view rx-configuration="runtimeViewConfiguration"></rx-runtime-view></div>'),a.put("scripts/view/runtime/runtime-view-container.directive.html",'<div rx-view-component-id="{{::node.componentDefinitionId}}" ng-hide="node.hidden" ng-style="node.height ? {\'min-height\': node.height} : undefined" ng-class="node.styles" class="clearfix"><div ng-repeat="column in ::node.columns" class="col-md-{{::(column.span || 12)}}"><div ng-repeat="node in ::column.children track by node.componentDefinitionId" class="runtime-view-item-holder" ng-class="{\'rx-auto-fill\': node.autoFill}"><rx-runtime-view-item node="node"></rx-runtime-view-item></div></div></div>'),a.put("scripts/view/runtime/runtime-view.directive.html",'<div class="rx-template-layout" ng-class="{\'rx-template-row-layout\': useRowLayout}"><div ng-if="useRowLayout" ng-repeat="column in ::layout.columns" class="col-md-{{::(column.span || 12)}} rx-template-content"><div ng-repeat="node in ::column.children track by node.componentDefinitionId" class="runtime-view-item-holder" ng-class="{\'rx-auto-fill\': node.autoFill}"><rx-runtime-view-item node="node"></rx-runtime-view-item></div></div><div ng-if="!useRowLayout" ng-repeat="node in ::layout.children track by node.componentDefinitionId" class="runtime-view-item-holder {{node.role ? (\'rx-template-\' + node.role) : \'\'}}"><rx-runtime-view-item node="node"></rx-runtime-view-item></div></div>'),a.put("scripts/view/runtime/runtime-view.view.html",'<rx-runtime-view rx-configuration="runtimeViewConfiguration"></rx-runtime-view>')}]);